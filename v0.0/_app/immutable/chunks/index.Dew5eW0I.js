import{_ as o}from"./preload-helper.0HuHagjb.js";const L=500,R=20,N=300,V="https://stackblitz.com",I=["angular-cli","create-react-app","html","javascript","node","polymer","typescript","vue"],k=["project","search","ports","settings"],C=["light","dark"],x=["editor","preview"],P={clickToLoad:e=>p("ctl",e),devToolsHeight:e=>S("devtoolsheight",e),forceEmbedLayout:e=>p("embed",e),hideDevTools:e=>p("hidedevtools",e),hideExplorer:e=>p("hideExplorer",e),hideNavigation:e=>p("hideNavigation",e),openFile:e=>T("file",e),showSidebar:e=>M("showSidebar",e),sidebarView:e=>g("sidebarView",e,k),startScript:e=>T("startScript",e),terminalHeight:e=>S("terminalHeight",e),theme:e=>g("theme",e,C),view:e=>g("view",e,x),zenMode:e=>p("zenMode",e)};function j(e={}){const t=Object.entries(e).map(([n,r])=>r!=null&&P.hasOwnProperty(n)?P[n](r):"").filter(Boolean);return t.length?`?${t.join("&")}`:""}function p(e,t){return t===!0?`${e}=1`:""}function M(e,t){return typeof t=="boolean"?`${e}=${t?"1":"0"}`:""}function S(e,t){if(typeof t=="number"&&!Number.isNaN(t)){const n=Math.min(100,Math.max(0,t));return`${e}=${encodeURIComponent(Math.round(n))}`}return""}function g(e,t="",n=[]){return n.includes(t)?`${e}=${encodeURIComponent(t)}`:""}function T(e,t){return(Array.isArray(t)?t:[t]).filter(r=>typeof r=="string"&&r.trim()!=="").map(r=>`${e}=${encodeURIComponent(r)}`).join("&")}function O(){return Math.random().toString(36).slice(2,6)+Math.random().toString(36).slice(2,6)}function E(e,t){return`${D(t)}${e}${j(t)}`}function y(e,t){const n={forceEmbedLayout:!0};return t&&typeof t=="object"&&Object.assign(n,t),`${D(n)}${e}${j(n)}`}function D(e={}){return(typeof e.origin=="string"?e.origin:V).replace(/\/$/,"")}function w(e,t,n){if(!t||!e||!e.parentNode)throw new Error("Invalid Element");e.id&&(t.id=e.id),e.className&&(t.className=e.className),F(t,n),e.replaceWith(t)}function b(e){if(typeof e=="string"){const t=document.getElementById(e);if(!t)throw new Error(`Could not find element with id '${e}'`);return t}else if(e instanceof HTMLElement)return e;throw new Error(`Invalid element: ${e}`)}function v(e){return e&&e.newWindow===!1?"_self":"_blank"}function F(e,t={}){const n=Object.hasOwnProperty.call(t,"height")?`${t.height}`:`${N}`,r=Object.hasOwnProperty.call(t,"width")?`${t.width}`:void 0;e.setAttribute("height",n),r?e.setAttribute("width",r):e.setAttribute("style","width:100%;")}class U{constructor(t){this.pending={},this.port=t,this.port.onmessage=this.messageListener.bind(this)}request({type:t,payload:n}){return new Promise((r,i)=>{const s=O();this.pending[s]={resolve:r,reject:i},this.port.postMessage({type:t,payload:{...n,__reqid:s}})})}messageListener(t){var c;if(typeof((c=t.data.payload)==null?void 0:c.__reqid)!="string")return;const{type:n,payload:r}=t.data,{__reqid:i,__success:s,__error:a}=r;this.pending[i]&&(s?this.pending[i].resolve(this.cleanResult(r)):this.pending[i].reject(a?`${n}: ${a}`:n),delete this.pending[i])}cleanResult(t){const n={...t};return delete n.__reqid,delete n.__success,delete n.__error,Object.keys(n).length?n:null}}class q{constructor(t,n){this.editor={openFile:r=>this._rdc.request({type:"SDK_OPEN_FILE",payload:{path:r}}),setCurrentFile:r=>this._rdc.request({type:"SDK_SET_CURRENT_FILE",payload:{path:r}}),setTheme:r=>this._rdc.request({type:"SDK_SET_UI_THEME",payload:{theme:r}}),setView:r=>this._rdc.request({type:"SDK_SET_UI_VIEW",payload:{view:r}}),showSidebar:(r=!0)=>this._rdc.request({type:"SDK_TOGGLE_SIDEBAR",payload:{visible:r}})},this.preview={origin:"",getUrl:()=>this._rdc.request({type:"SDK_GET_PREVIEW_URL",payload:{}}).then(r=>(r==null?void 0:r.url)??null),setUrl:(r="/")=>{if(typeof r!="string"||!r.startsWith("/"))throw new Error(`Invalid argument: expected a path starting with '/', got '${r}'`);return this._rdc.request({type:"SDK_SET_PREVIEW_URL",payload:{path:r}})}},this._rdc=new U(t),Object.defineProperty(this.preview,"origin",{value:typeof n.previewOrigin=="string"?n.previewOrigin:null,writable:!1})}applyFsDiff(t){const n=r=>r!==null&&typeof r=="object";if(!n(t)||!n(t.create))throw new Error("Invalid diff object: expected diff.create to be an object.");if(!Array.isArray(t.destroy))throw new Error("Invalid diff object: expected diff.destroy to be an array.");return this._rdc.request({type:"SDK_APPLY_FS_DIFF",payload:t})}getDependencies(){return this._rdc.request({type:"SDK_GET_DEPS_SNAPSHOT",payload:{}})}getFsSnapshot(){return this._rdc.request({type:"SDK_GET_FS_SNAPSHOT",payload:{}})}}const m=[];class J{constructor(t){this.id=O(),this.element=t,this.pending=new Promise((n,r)=>{const i=({data:l,ports:u})=>{(l==null?void 0:l.action)==="SDK_INIT_SUCCESS"&&l.id===this.id&&(this.vm=new q(u[0],l.payload),n(this.vm),a())},s=()=>{var l;(l=this.element.contentWindow)==null||l.postMessage({action:"SDK_INIT",id:this.id},"*")};function a(){window.clearInterval(d),window.removeEventListener("message",i)}window.addEventListener("message",i),s();let c=0;const d=window.setInterval(()=>{if(this.vm){a();return}if(c>=R){a(),r("Timeout: Unable to establish a connection with the StackBlitz VM"),m.forEach((l,u)=>{l.id===this.id&&m.splice(u,1)});return}c++,s()},L)}),m.push(this)}}const H=e=>{const t=e instanceof Element?"element":"id";return m.find(n=>n[t]===e)??null};function K(e,t){const n=document.createElement("input");return n.type="hidden",n.name=e,n.value=t,n}function G(e){return e.replace(/\[/g,"%5B").replace(/\]/g,"%5D")}function A({template:e,title:t,description:n,dependencies:r,files:i,settings:s}){if(!I.includes(e)){const l=I.map(u=>`'${u}'`).join(", ");console.warn(`Unsupported project.template: must be one of ${l}`)}const a=[],c=(l,u,$="")=>{a.push(K(l,typeof u=="string"?u:$))};c("project[title]",t),typeof n=="string"&&n.length>0&&c("project[description]",n),c("project[template]",e,"javascript"),r&&(e==="node"?console.warn("Invalid project.dependencies: dependencies must be provided as a 'package.json' file when using the 'node' template."):c("project[dependencies]",JSON.stringify(r))),s&&c("project[settings]",JSON.stringify(s)),Object.entries(i).forEach(([l,u])=>{c(`project[files][${G(l)}]`,u)});const d=document.createElement("form");return d.method="POST",d.setAttribute("style","display:none!important;"),d.append(...a),d}function B(e,t){const n=A(e);return n.action=y("/run",t),n.id="sb_run",`<!doctype html>
<html>
<head><title></title></head>
<body>
  ${n.outerHTML}
  <script>document.getElementById('${n.id}').submit();<\/script>
</body>
</html>`}function W(e,t){const n=A(e);n.action=E("/run",t),n.target=v(t),document.body.appendChild(n),n.submit(),document.body.removeChild(n)}function h(e){return e!=null&&e.contentWindow?(H(e)??new J(e)).pending:Promise.reject("Provided element is not an iframe.")}function z(e,t){W(e,t)}function X(e,t){const n=E(`/edit/${e}`,t),r=v(t);window.open(n,r)}function Y(e,t){const n=E(`/github/${e}`,t),r=v(t);window.open(n,r)}function Q(e,t,n){var a;const r=b(e),i=B(t,n),s=document.createElement("iframe");return w(r,s,n),(a=s.contentDocument)==null||a.write(i),h(s)}function Z(e,t,n){const r=b(e),i=document.createElement("iframe");return i.src=y(`/edit/${t}`,n),w(r,i,n),h(i)}function ee(e,t,n){const r=b(e),i=document.createElement("iframe");return i.src=y(`/github/${t}`,n),w(r,i,n),h(i)}const te={connect:h,embedGithubProject:ee,embedProject:Q,embedProjectId:Z,openGithubProject:Y,openProject:z,openProjectId:X},ne=e=>e.style==="bootstrap",re=(e,t)=>{const n=JSON.parse(e.files["package.json"]);n.devDependencies.autoprefixer="^10.4.16",n.devDependencies.postcss="^8.4.33",n.devDependencies.tailwindcss="^3.4.1",e.files["package.json"]=JSON.stringify(n,null,"	"),e.files["tailwind.config.js"]=`
		module.exports = {
			content: ['./src/**/*.{html,js,svelte,ts,tsx}'],
			theme: {
				extend: {},
			},
			plugins: [],
		};`,e.files["postcss.config.js"]=`
		export default {
			plugins: {
				'tailwindcss/nesting': {},
				tailwindcss: {},
				autoprefixer: {},
			},
		};`,e.files["main.css"]=`
	@import 'tailwindcss/base';
	@import 'tailwindcss/components';
	@import 'tailwindcss/utilities';
	`;const r='<link rel="stylesheet" href="main.css" />';e.files["index.html"]=e.files["index.html"].replace("<!--	STYLE CONFIG -->",r)},ie=(e,t)=>{const n=`<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
													integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous"/>`;switch(e.files["index.html"]=e.files["index.html"].replace("<!--	STYLE CONFIG -->",n),t){case"angular":{const r=JSON.parse(e.files["angular.json"]);r.projects.demo.architect.build.options.styles=["@agnos-ui/style-bootstrap/css/agnosui.css"],e.files["angular.json"]=JSON.stringify(r,null,"	");break}case"react":{e.files["src/main.tsx"]=`import "@agnos-ui/style-bootstrap/css/agnosui.css";
`+e.files["src/main.tsx"];break}case"svelte":{e.files["src/main.ts"]=`import "@agnos-ui/style-bootstrap/css/agnosui.css";
`+e.files["src/main.ts"];break}}},oe={tailwind:re,bootstrap:ie},_=(e,t="",n,r=()=>!0)=>async(i,s)=>{r(s)&&await Promise.all(Object.keys(e).map(async a=>{const c=t+(n&&a.startsWith(n)?a.substring(n.length):a);i.files[c]=await e[a]()}))},f={angular:[_(Object.assign({"./angular/angular.json":()=>o(()=>import("./angular.hmnGo5N2.js"),__vite__mapDeps([]),import.meta.url).then(e=>e.default),"./angular/index.html":()=>o(()=>import("./index.kckJCjbQ.js"),__vite__mapDeps([]),import.meta.url).then(e=>e.default),"./angular/package-lock.json":()=>o(()=>import("./package-lock.Fpd5Yloc.js"),__vite__mapDeps([]),import.meta.url).then(e=>e.default),"./angular/package.json":()=>o(()=>import("./package.bkYpRPFb.js"),__vite__mapDeps([]),import.meta.url).then(e=>e.default),"./angular/src/polyfills.ts":()=>o(()=>import("./polyfills.U1Vninr3.js"),__vite__mapDeps([]),import.meta.url).then(e=>e.default),"./angular/src/raw-loader.d.ts":()=>o(()=>import("./raw-loader.d.dIOekUdm.js"),__vite__mapDeps([]),import.meta.url).then(e=>e.default),"./angular/tsconfig.json":()=>o(()=>import("./tsconfig.-UH2PHGR.js"),__vite__mapDeps([]),import.meta.url).then(e=>e.default)}),"","./angular/"),async(e,t)=>{e.files["src/main.ts"]=`import {bootstrapApplication} from '@angular/platform-browser';
import MainComponent from './${t.files.angular.entryPoint.replace(/\.ts$/,"")}';
bootstrapApplication(MainComponent).catch((err) => console.error(err));`}],react:[_(Object.assign({"./react/index.html":()=>o(()=>import("./index.eOSlqRP4.js"),__vite__mapDeps([]),import.meta.url).then(e=>e.default),"./react/package-lock.json":()=>o(()=>import("./package-lock.nLObN3WD.js"),__vite__mapDeps([]),import.meta.url).then(e=>e.default),"./react/package.json":()=>o(()=>import("./package.0a1ZAmDH.js"),__vite__mapDeps([]),import.meta.url).then(e=>e.default),"./react/src/vite-env.d.ts":()=>o(()=>import("./vite-env.d.-fN0wrQC.js"),__vite__mapDeps([]),import.meta.url).then(e=>e.default),"./react/tsconfig.json":()=>o(()=>import("./tsconfig.17x8jba9.js"),__vite__mapDeps([]),import.meta.url).then(e=>e.default),"./react/vite.config.ts":()=>o(()=>import("./vite.config.EuA328a_.js"),__vite__mapDeps([]),import.meta.url).then(e=>e.default)}),"","./react/"),async(e,t)=>{e.files["src/main.tsx"]=`import {createRoot} from "react-dom/client";
import App from ${JSON.stringify(`./${t.files.react.entryPoint.replace(/\.tsx?$/,"")}`)};
const rootElement = document.getElementById('root');
const root = createRoot(rootElement);
root.render(<App />)`}],svelte:[_(Object.assign({"./svelte/index.html":()=>o(()=>import("./index.OdZHU4rj.js"),__vite__mapDeps([]),import.meta.url).then(e=>e.default),"./svelte/package-lock.json":()=>o(()=>import("./package-lock.X44hF6_I.js"),__vite__mapDeps([]),import.meta.url).then(e=>e.default),"./svelte/package.json":()=>o(()=>import("./package.nmHfgdnF.js"),__vite__mapDeps([]),import.meta.url).then(e=>e.default),"./svelte/src/vite-env.d.ts":()=>o(()=>import("./vite-env.d.UoPFI2fN.js"),__vite__mapDeps([]),import.meta.url).then(e=>e.default),"./svelte/svelte.config.js":()=>o(()=>import("./svelte.config.wCsD7ru_.js"),__vite__mapDeps([]),import.meta.url).then(e=>e.default),"./svelte/tsconfig.json":()=>o(()=>import("./tsconfig.ftZLn2dv.js"),__vite__mapDeps([]),import.meta.url).then(e=>e.default),"./svelte/vite.config.ts":()=>o(()=>import("./vite.config.NYNMIPH7.js"),__vite__mapDeps([]),import.meta.url).then(e=>e.default)}),"","./svelte/"),async(e,t)=>{e.files["src/main.ts"]=`import App from ${JSON.stringify(`./${t.files.svelte.entryPoint}`)};
const app = new App({target: document.getElementById('root')});
export default app;`,e.template="node"}]};{const e=async({files:t},n,r)=>{const i=JSON.parse(t["package.json"]);ne(n)?i.devDependencies[`@agnos-ui/${r}`]="0.0.1-alpha.11":i.devDependencies[`@agnos-ui/${r}-headless`]="0.0.1-alpha.11",t["package.json"]=JSON.stringify(i,null,"	")};f.angular.push(e),f.svelte.push(e),f.react.push(e)}const ae=async(e,t)=>{const n={title:`AgnosUI ${t} demo - ${e.componentName} - ${e.sampleName}`,files:{},template:"node"},r=e.files[t],{entryPoint:i,files:s}=r,a=[_(s,"src/"),...f[t]];for(const d of a)await d(n,e,t);oe[e.style](n,t);const c=[i,...Object.keys(s).filter(d=>d!=i)].map(d=>`src/${d}`).join(",");te.openProject(n,{newWindow:!0,openFile:c})};export{ae as openInStackblitz};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
