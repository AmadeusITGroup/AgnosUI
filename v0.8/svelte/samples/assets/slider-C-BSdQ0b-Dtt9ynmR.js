import{a9 as i,a6 as We,W as y}from"./AppCommon-wWEJ6LdR.js";import{o as Z,m as H,a as v,n as qe}from"./dom-BB9jLllr-CeqtqeKx.js";import{w as Fe,e as Xe,s as Ye,t as B}from"./stores-CJcu1rl_.js";import{h as be,f as ue,j as de,t as $,a as j,b as Ue}from"./writables-DCiBdIBK-BRdRWZTk.js";import{c as Ge}from"./resizeObserver-BKJ6ZT34.js";const Je=/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/;function C(c){var u;const m=(""+c).match(Je);return Math.max(0,(((u=m[1])==null?void 0:u.length)??0)-(+m[2]||0))}const ee={min:0,max:100,stepSize:1,readonly:!1,disabled:!1,vertical:!1,className:"",ariaLabel:()=>"Value",ariaLabelledBy:()=>"",ariaValueText:()=>"",onValuesChange:qe,values:[0],showValueLabels:!0,showMinMaxLabels:!0,showTicks:!1,showTickValues:!0,tickInterval:0,rtl:!1},Ke={min:ue,max:ue,stepSize:de(0,1/0,{strict:!0}),readonly:$,disabled:$,vertical:$,ariaLabel:j,ariaLabelledBy:j,ariaValueText:j,onValuesChange:j,values:be,showValueLabels:$,showMinMaxLabels:$,showTicks:$,showTickValues:$,tickInterval:de(0,1/0,{strict:!0}),rtl:$,className:Ue},me=(c,u,m,h,o)=>{const P=Math.pow(10,o);if(c>=m)return m;if(c<=u)return u;const E=Math.floor((c-u)*P/h);return+(((c-u)*P%h<h/2?E:E+1)*h/P+u).toFixed(o)},W=(c,u,m,h)=>{u.update(o=>(o=[...o],o[c]=o[c]+m*h,o))},q=(c,u,m)=>c&&u?m?1:-1:c&&!u?-1:!c&&u?m?-1:1:!c&&!u?-1:1,d=c=>c!=null?`${c}%`:"";function it(c){const[{min$:u,max$:m,stepSize$:h,rtl$:o,values$:P,ariaLabel$:E,ariaLabelledBy$:he,ariaValueText$:fe,onValuesChange$:pe,showValueLabels$:F,showMinMaxLabels$:X,showTicks$:k,showTickValues$:R,tickInterval$:te,...Y},ve]=Fe(ee,c,Ke),{vertical$:l,disabled$:T,readonly$:ae}=Y;let z=-1;const L=i(()=>{const e=u(),t=m();return e===t?ee.min:Math.min(e,t)}),D=i(()=>{const e=u(),t=m();return e===t?ee.max:Math.max(e,t)}),U=i(()=>Math.max(C(h()),C(L()),C(D()))),ie=i(()=>h()*Math.pow(10,U())),b=Xe(P,pe,e=>{const t=L(),a=D(),n=ie(),s=U();return e.map(r=>me(r,t,a,n,s))},be.equal),{directive:Le,element$:ge}=Z(),{directive:De,element$:we}=Z(),{directive:$e,element$:ye}=Z(),{directive:ke,dimensions$:G}=Ge(),S=We({}),O=i(()=>{var e;return G(),S(),((e=ge())==null?void 0:e.getBoundingClientRect())??{}},{equal:Object.is}),Ve=i(()=>{var e;return G(),S(),((e=we())==null?void 0:e.getBoundingClientRect())??{}},{equal:(e,t)=>Object.is(e,t)}),Me=i(()=>{var e;return G(),S(),((e=ye())==null?void 0:e.getBoundingClientRect())??{}},{equal:(e,t)=>Object.is(e,t)}),xe=i(()=>l()?O().top:O().left),J=i(()=>l()?O().height:O().width),K=i(()=>[...b()].sort((e,t)=>e-t)),Pe=i(()=>b().map((e,t)=>({id:t,value:e})).sort((e,t)=>e.value-t.value)),Te=i(()=>{const e=E(),t=fe(),a=he();return Pe().map((n,s)=>({...n,ariaLabel:a(s)?void 0:e(s),ariaLabelledBy:a(s)||void 0,ariaValueText:t(n.value,s)||void 0}))}),V=i(()=>b().map(e=>I(e))),Q=i(()=>[...V()].sort((e,t)=>e-t)),Se=i(()=>Ve().width/J()*100),Ne=i(()=>Me().width/J()*100),_e=i(()=>F()&&(!k()||!R())),se=i(()=>{if(!X()||k()&&R())return!1;if(!F())return!0;const e=Se();return o()?!V().some(t=>100-t>100-e-1):!V().some(t=>t<e+1)}),le=i(()=>{if(!X()||k()&&R())return!1;if(!F())return!0;const e=Ne();return o()?!V().some(t=>100-t<e+1):!V().some(t=>t>100-e-1)}),Be=i(()=>{const e=b();return e.length==2&&Math.abs(e[0]-e[1])*100/(D()-L())<10}),N=i(()=>!T()&&!ae()),ne=i(()=>{const e=Q(),t=(e[0]+e[1])/2;return l()||e.length!=2?0:o()?100-t:t}),re=i(()=>{const e=Q(),t=100-(e[0]+e[1])/2;return l()&&e.length==2?o()?100-t:t:0}),_=i(()=>{const e=l(),t=o();return V().map(a=>({left:t?e?null:100-a:e?null:a,top:t?e?a:null:e?100-a:null}))}),Ee=i(()=>{const e=l(),t=Q(),a=o();return t.length===1?[{left:e||a?null:0,right:e?null:a?0:null,bottom:e?a?null:0:null,top:e&&a?0:null,width:e?100:t[0],height:e?t[0]:100,id:0}]:t.map((n,s,r)=>({left:e||a?null:n,right:e?null:a?r[s]:null,bottom:e?a?null:n:null,top:e&&a?r[s]:null,width:e?100:s===r.length-1?n:r[s+1]-n,height:e?s===r.length-1?n:r[s+1]-n:100,id:s})).slice(0,t.length-1)}),Re=i(()=>{if(!k())return[];const e=l(),t=L(),a=D(),n=o(),s=R(),r=te()||h(),w=[],g=ie(),M=U(),p=x=>!!n!=!!e?100-x:x;for(let x=t;x<a;x+=r){const ce=me(x,t,a,g,M),je=I(ce);w.push({position:p(je),selected:!1,value:ce,displayLabel:s})}return w.push({position:p(100),selected:!1,value:a,displayLabel:s}),w}),ze=i(()=>{const e=K(),t=a=>{const n=e.length>1,s=n?e[e.length-1]:e[0],r=n?e[0]:0;return a<=s&&a>=r};return Re().map(a=>({...a,selected:t(a.value)}))}),I=e=>{const t=L(),a=D();return(e-t)*100/(a-t)},Oe=e=>{const t=b();if(t.length===1)return 0;const a=K(),n=a.find(g=>I(g)>e*100),s=n?a.indexOf(n):a.length-1,r=I(a[s-1]+(a[s]-a[s-1])/2),w=a[e*100<=r?s-1:s];return t.indexOf(w)},A=(e,t)=>{if(N()){const a=J(),n=xe();let s=l()?(a-e+n)/a:(e-n)/a;s=o()?1-s:s;const r=t??Oe(s),w=s*(D()-L())+L();b.update(g=>(g=[...g],g[r]=w,g))}},f=i(()=>!l()),Ie=v(()=>({attributes:{"aria-disabled":i(()=>T()?"true":void 0),class:Y.className$},classNames:{"au-slider":B,"au-slider-vertical":l,"au-slider-horizontal":f,disabled:T}})),Ae=v(()=>({classNames:{"au-slider-label-vertical":l,"au-slider-label-vertical-min":l,"au-slider-label":f,"au-slider-label-min":f,"au-slider-rtl":o,invisible:i(()=>!se())},attributes:{"aria-hidden":y("true")}})),He=v(()=>({classNames:{"au-slider-label-vertical":l,"au-slider-label-vertical-max":l,"au-slider-label":f,"au-slider-label-max":f,"au-slider-rtl":o,invisible:i(()=>!le())},attributes:{"aria-hidden":y("true")}})),oe=v(e=>({events:{keydown:t=>{const a=e().item.id,{key:n}=t,s=o(),r=h(),w=L(),g=D(),M=l();if(N()){switch(n){case"ArrowDown":W(a,b,r,q(M,s,!0));break;case"ArrowLeft":W(a,b,r,q(M,s,!1));break;case"ArrowUp":W(a,b,r,-1*q(M,s,!0));break;case"ArrowRight":W(a,b,r,-1*q(M,s,!1));break;case"Home":b.update(p=>(p=[...p],p[a]=w,p));break;case"End":b.update(p=>(p=[...p],p[a]=g,p));break;case"PageUp":break;case"PageDown":break;default:return}t.preventDefault()}},mousedown:t=>{t.preventDefault();const a=t.target,n=s=>{s.preventDefault();const r=l()?s.clientY:s.clientX;a.focus(),z!==r&&(z=r,A(r,e().item.id))};N()&&(S.set({}),a.focus(),document.addEventListener("mousemove",n),document.addEventListener("mouseup",()=>{document.removeEventListener("mousemove",n)},{once:!0}))},touchstart:t=>{const a=n=>{n.preventDefault();const s=l()?n.touches[0].clientY:n.touches[0].clientX;t.target.focus(),z!==s&&(z=s,A(s,e().item.id))};N()&&(S.set({}),t.target.focus(),document.addEventListener("touchmove",a,{passive:!1}),document.addEventListener("touchend",()=>{document.removeEventListener("touchmove",a),document.removeEventListener("touchcancel",a)},{once:!0}),document.addEventListener("touchcancel",()=>{document.removeEventListener("touchmove",a),document.removeEventListener("touchend",a)},{once:!0}))}}}));return{...Ye({min$:L,max$:D,stepSize$:h,values$:b,sortedValues$:K,sortedHandles$:Te,minValueLabelDisplay$:se,maxValueLabelDisplay$:le,combinedLabelDisplay$:Be,interactive$:N,combinedLabelPositionLeft$:ne,combinedLabelPositionTop$:re,progressDisplayOptions$:Ee,handleDisplayOptions$:_,showValueLabels$:_e,showMinMaxLabels$:X,showTicks$:k,rtl$:o,ticks$:ze,...Y}),patch:ve,api:{},directives:{sliderDirective:H(Le,ke,Ie),progressDisplayDirective:v(e=>({styles:{left:i(()=>d(e().option.left)),right:i(()=>d(e().option.right)),top:i(()=>d(e().option.top)),bottom:i(()=>d(e().option.bottom)),width:i(()=>d(e().option.width)),height:i(()=>d(e().option.height))},classNames:{"au-slider-progress":B}})),clickableAreaDirective:v(()=>({events:{click:e=>{A(l()?e.clientY:e.clientX)}},classNames:{"au-slider-clickable-area":f,"au-slider-clickable-area-vertical":l,"au-slider-clickable-area-with-ticks":i(()=>k()&&te()===0)}})),handleEventsDirective:oe,handleDirective:H(oe,v(e=>({attributes:{role:y("slider"),"aria-valuemin":L,"aria-valuemax":D,"aria-valuenow":i(()=>e().item.value),"aria-valuetext":i(()=>e().item.ariaValueText),"aria-label":i(()=>e().item.ariaLabel),"aria-labelledBy":i(()=>e().item.ariaLabelledBy),"aria-orientation":i(()=>l()?"vertical":void 0),"aria-disabled":i(()=>T()?"true":void 0),disabled:T,"aria-readonly":i(()=>ae()?"true":void 0)},styles:{left:i(()=>d(_()[e().item.id].left)),top:i(()=>d(_()[e().item.id].top))},classNames:{"au-slider-handle":B,"au-slider-handle-vertical":l,"au-slider-handle-horizontal":f}}))),minLabelDirective:H(De,Ae),maxLabelDirective:H($e,He),combinedHandleLabelDisplayDirective:v(()=>({classNames:{"au-slider-label-vertical":l,"au-slider-label-vertical-now":l,"au-slider-label":f,"au-slider-label-now":f},styles:{left:i(()=>d(ne())),top:i(()=>d(re()))},attributes:{"aria-hidden":y("true")}})),handleLabelDisplayDirective:v(e=>({classNames:{"au-slider-label-vertical":l,"au-slider-label-vertical-now":l,"au-slider-label":f,"au-slider-label-now":f},styles:{left:i(()=>d(_()[e().index].left)),top:i(()=>d(_()[e().index].top))},attributes:{"aria-hidden":y("true")}})),tickDirective:v(e=>({classNames:{"au-slider-tick":B,"au-slider-tick-horizontal":f,"au-slider-tick-vertical":l},styles:{left:i(()=>l()?null:d(e().tick.position)),top:i(()=>l()?d(e().tick.position):null)},events:{click:t=>{A(l()?t.clientY:t.clientX)}},attributes:{"aria-hidden":y("true")}})),tickLabelDirective:v(e=>({classNames:{"au-slider-tick-label":B,"au-slider-tick-label-vertical":l},styles:{left:i(()=>l()?null:d(e().tick.position)),top:i(()=>l()?d(e().tick.position):null)},attributes:{"aria-hidden":y("true")}}))}}}export{it as c};
