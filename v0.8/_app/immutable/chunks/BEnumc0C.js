import{_ as i}from"./CmsKOCeN.js";const S=500,$=20,k=300,N="https://stackblitz.com",O=["angular-cli","create-react-app","html","javascript","node","polymer","typescript","vue"],F=["project","search","ports","settings"],C=["light","dark"],M=["editor","preview"],A={clickToLoad:t=>p("ctl",t),devToolsHeight:t=>j("devtoolsheight",t),forceEmbedLayout:t=>p("embed",t),hideDevTools:t=>p("hidedevtools",t),hideExplorer:t=>p("hideExplorer",t),hideNavigation:t=>p("hideNavigation",t),openFile:t=>f("file",t),showSidebar:t=>U("showSidebar",t),sidebarView:t=>g("sidebarView",t,F),startScript:t=>f("startScript",t),terminalHeight:t=>j("terminalHeight",t),theme:t=>g("theme",t,C),view:t=>g("view",t,M),zenMode:t=>p("zenMode",t),organization:t=>`${f("orgName",t?.name)}&${f("orgProvider",t?.provider)}`,crossOriginIsolated:t=>p("corp",t)};function D(t={}){const e=Object.entries(t).map(([r,n])=>n!=null&&A.hasOwnProperty(r)?A[r](n):"").filter(Boolean);return e.length?`?${e.join("&")}`:""}function p(t,e){return e===!0?`${t}=1`:""}function U(t,e){return typeof e=="boolean"?`${t}=${e?"1":"0"}`:""}function j(t,e){if(typeof e=="number"&&!Number.isNaN(e)){const r=Math.min(100,Math.max(0,e));return`${t}=${encodeURIComponent(Math.round(r))}`}return""}function g(t,e="",r=[]){return r.includes(e)?`${t}=${encodeURIComponent(e)}`:""}function f(t,e){return(Array.isArray(e)?e:[e]).filter(n=>typeof n=="string"&&n.trim()!=="").map(n=>`${t}=${encodeURIComponent(n)}`).join("&")}function L(){return Math.random().toString(36).slice(2,6)+Math.random().toString(36).slice(2,6)}function b(t,e){return`${R(e)}${t}${D(e)}`}function P(t,e){const r={forceEmbedLayout:!0};return e&&typeof e=="object"&&Object.assign(r,e),`${R(r)}${t}${D(r)}`}function R(t={}){return(typeof t.origin=="string"?t.origin:N).replace(/\/$/,"")}function I(t,e,r){if(!e||!t||!t.parentNode)throw new Error("Invalid Element");t.id&&(e.id=t.id),t.className&&(e.className=t.className),q(e,r),x(t,e,r),t.replaceWith(e)}function T(t){if(typeof t=="string"){const e=document.getElementById(t);if(!e)throw new Error(`Could not find element with id '${t}'`);return e}else if(t instanceof HTMLElement)return t;throw new Error(`Invalid element: ${t}`)}function w(t){return t&&t.newWindow===!1?"_self":"_blank"}function q(t,e={}){const r=Object.hasOwnProperty.call(e,"height")?`${e.height}`:`${k}`,n=Object.hasOwnProperty.call(e,"width")?`${e.width}`:void 0;t.setAttribute("height",r),n?t.setAttribute("width",n):t.setAttribute("style","width:100%;")}function x(t,e,r={}){const n=t.allow?.split(";")?.map(o=>o.trim())??[];r.crossOriginIsolated&&!n.includes("cross-origin-isolated")&&n.push("cross-origin-isolated"),n.length>0&&(e.allow=n.join("; "))}class H{constructor(e){this.pending={},this.port=e,this.port.onmessage=this.messageListener.bind(this)}request({type:e,payload:r}){return new Promise((n,o)=>{const s=L();this.pending[s]={resolve:n,reject:o},this.port.postMessage({type:e,payload:{...r,__reqid:s}})})}messageListener(e){if(typeof e.data.payload?.__reqid!="string")return;const{type:r,payload:n}=e.data,{__reqid:o,__success:s,__error:a}=n;this.pending[o]&&(s?this.pending[o].resolve(this.cleanResult(n)):this.pending[o].reject(a?`${r}: ${a}`:r),delete this.pending[o])}cleanResult(e){const r={...e};return delete r.__reqid,delete r.__success,delete r.__error,Object.keys(r).length?r:null}}class K{constructor(e,r){this.editor={openFile:n=>this._rdc.request({type:"SDK_OPEN_FILE",payload:{path:n}}),setCurrentFile:n=>this._rdc.request({type:"SDK_SET_CURRENT_FILE",payload:{path:n}}),setTheme:n=>this._rdc.request({type:"SDK_SET_UI_THEME",payload:{theme:n}}),setView:n=>this._rdc.request({type:"SDK_SET_UI_VIEW",payload:{view:n}}),showSidebar:(n=!0)=>this._rdc.request({type:"SDK_TOGGLE_SIDEBAR",payload:{visible:n}})},this.preview={origin:"",getUrl:()=>this._rdc.request({type:"SDK_GET_PREVIEW_URL",payload:{}}).then(n=>n?.url??null),setUrl:(n="/")=>{if(typeof n!="string"||!n.startsWith("/"))throw new Error(`Invalid argument: expected a path starting with '/', got '${n}'`);return this._rdc.request({type:"SDK_SET_PREVIEW_URL",payload:{path:n}})}},this._rdc=new H(e),Object.defineProperty(this.preview,"origin",{value:typeof r.previewOrigin=="string"?r.previewOrigin:null,writable:!1})}applyFsDiff(e){const r=n=>n!==null&&typeof n=="object";if(!r(e)||!r(e.create))throw new Error("Invalid diff object: expected diff.create to be an object.");if(!Array.isArray(e.destroy))throw new Error("Invalid diff object: expected diff.destroy to be an array.");return this._rdc.request({type:"SDK_APPLY_FS_DIFF",payload:e})}getDependencies(){return this._rdc.request({type:"SDK_GET_DEPS_SNAPSHOT",payload:{}})}getFsSnapshot(){return this._rdc.request({type:"SDK_GET_FS_SNAPSHOT",payload:{}})}}const h=[];class B{constructor(e){this.id=L(),this.element=e,this.pending=new Promise((r,n)=>{const o=({data:u,ports:d})=>{u?.action==="SDK_INIT_SUCCESS"&&u.id===this.id&&(this.vm=new K(d[0],u.payload),r(this.vm),a())},s=()=>{this.element.contentWindow?.postMessage({action:"SDK_INIT",id:this.id},"*")};function a(){window.clearInterval(l),window.removeEventListener("message",o)}window.addEventListener("message",o),s();let c=0;const l=window.setInterval(()=>{if(this.vm){a();return}if(c>=$){a(),n("Timeout: Unable to establish a connection with the StackBlitz VM"),h.forEach((u,d)=>{u.id===this.id&&h.splice(d,1)});return}c++,s()},S)}),h.push(this)}}const W=t=>{const e=t instanceof Element?"element":"id";return h.find(r=>r[e]===t)??null};function G(t,e){const r=document.createElement("input");return r.type="hidden",r.name=t,r.value=e,r}function z(t){return t.replace(/\[/g,"%5B").replace(/\]/g,"%5D")}function v({template:t,title:e,description:r,dependencies:n,files:o,settings:s}){if(!O.includes(t)){const u=O.map(d=>`'${d}'`).join(", ");console.warn(`Unsupported project.template: must be one of ${u}`)}const a=[],c=(u,d,V="")=>{a.push(G(u,typeof d=="string"?d:V))};c("project[title]",e),typeof r=="string"&&r.length>0&&c("project[description]",r),c("project[template]",t,"javascript"),n&&(t==="node"?console.warn("Invalid project.dependencies: dependencies must be provided as a 'package.json' file when using the 'node' template."):c("project[dependencies]",JSON.stringify(n))),s&&c("project[settings]",JSON.stringify(s)),Object.entries(o).forEach(([u,d])=>{c(`project[files][${z(u)}]`,d)});const l=document.createElement("form");return l.method="POST",l.setAttribute("style","display:none!important;"),l.append(...a),l}function J(t,e){const r=v(t);return r.action=P("/run",e),r.id="sb_run",`<!doctype html>
<html>
<head><title></title></head>
<body>
  ${r.outerHTML}
  <script>document.getElementById('${r.id}').submit();<\/script>
</body>
</html>`}function X(t,e){const r=v(t);r.action=b("/run",e),r.target=w(e),document.body.appendChild(r),r.submit(),document.body.removeChild(r)}function E(t){return t?.contentWindow?(W(t)??new B(t)).pending:Promise.reject("Provided element is not an iframe.")}function Y(t,e){X(t,e)}function Q(t,e){const r=b(`/edit/${t}`,e),n=w(e);window.open(r,n)}function Z(t,e){const r=b(`/github/${t}`,e),n=w(e);window.open(r,n)}function tt(t,e,r){const n=T(t),o=J(e,r),s=document.createElement("iframe");return I(n,s,r),s.contentDocument?.write(o),E(s)}function et(t,e,r){const n=T(t),o=document.createElement("iframe");return o.src=P(`/edit/${e}`,r),I(n,o,r),E(o)}function rt(t,e,r){const n=T(t),o=document.createElement("iframe");return o.src=P(`/github/${e}`,r),I(n,o,r),E(o)}const nt={connect:E,embedGithubProject:rt,embedProject:tt,embedProjectId:et,openGithubProject:Z,openProject:Y,openProjectId:Q},y=t=>t.style==="bootstrap",m=t=>t.style==="daisyui",_=(t,e="",r,n=()=>!0)=>async(o,s)=>{n(s)&&await Promise.all(Object.keys(t).map(async a=>{const c=e+(r&&a.startsWith(r)?a.substring(r.length):a);o.files[c]=await t[a]()}))},it=()=>({angular:[_(Object.assign({"./angular-bootstrap/angular.json":()=>i(()=>import("./UGXp65VM.js"),[],import.meta.url).then(t=>t.default),"./angular-bootstrap/index.html":()=>i(()=>import("./zoV_22Nd.js"),[],import.meta.url).then(t=>t.default),"./angular-bootstrap/package-lock.json":()=>i(()=>import("./Bni-h341.js"),[],import.meta.url).then(t=>t.default),"./angular-bootstrap/package.json":()=>i(()=>import("./DvpF9u9z.js"),[],import.meta.url).then(t=>t.default),"./angular-bootstrap/src/main.css":()=>i(()=>import("./C9OmxNZT.js"),[],import.meta.url).then(t=>t.default),"./angular-bootstrap/src/polyfills.ts":()=>i(()=>import("./cvO7zebP.js"),[],import.meta.url).then(t=>t.default),"./angular-bootstrap/src/raw-loader.d.ts":()=>i(()=>import("./C5Bwl_T2.js"),[],import.meta.url).then(t=>t.default),"./angular-bootstrap/tsconfig.json":()=>i(()=>import("./D3bJfTXp.js"),[],import.meta.url).then(t=>t.default)}),"","./angular-bootstrap/",y),_(Object.assign({"./angular-daisyui/angular.json":()=>i(()=>import("./D--MS6SL.js"),[],import.meta.url).then(t=>t.default),"./angular-daisyui/index.html":()=>i(()=>import("./7_4nm6b0.js"),[],import.meta.url).then(t=>t.default),"./angular-daisyui/package-lock.json":()=>i(()=>import("./CCB937RS.js"),[],import.meta.url).then(t=>t.default),"./angular-daisyui/package.json":()=>i(()=>import("./CqTT99uF.js"),[],import.meta.url).then(t=>t.default),"./angular-daisyui/src/main.css":()=>i(()=>import("./C1CxZFf2.js"),[],import.meta.url).then(t=>t.default),"./angular-daisyui/src/polyfills.ts":()=>i(()=>import("./0Vyd12dT.js"),[],import.meta.url).then(t=>t.default),"./angular-daisyui/src/raw-loader.d.ts":()=>i(()=>import("./CihDBm0o.js"),[],import.meta.url).then(t=>t.default),"./angular-daisyui/tsconfig.json":()=>i(()=>import("./BBPsXRDl.js"),[],import.meta.url).then(t=>t.default)}),"","./angular-daisyui/",m),(t,e)=>{t.files["src/main.ts"]=`import {bootstrapApplication} from '@angular/platform-browser';
import MainComponent from './${e.files.angular.entryPoint.replace(/\.ts$/,"")}';
${m(e)?`import '@tailwindcss/browser';
`:""}
bootstrapApplication(MainComponent).catch((err) => console.error(err));`}],react:[_(Object.assign({"./react-bootstrap/index.html":()=>i(()=>import("./CIFoE5Sx.js"),[],import.meta.url).then(t=>t.default),"./react-bootstrap/package-lock.json":()=>i(()=>import("./C1QRoxuq.js"),[],import.meta.url).then(t=>t.default),"./react-bootstrap/package.json":()=>i(()=>import("./jkNuJVjo.js"),[],import.meta.url).then(t=>t.default),"./react-bootstrap/src/main.css":()=>i(()=>import("./DNJegUnv.js"),[],import.meta.url).then(t=>t.default),"./react-bootstrap/src/vite-env.d.ts":()=>i(()=>import("./DWSAnUdW.js"),[],import.meta.url).then(t=>t.default),"./react-bootstrap/tsconfig.json":()=>i(()=>import("./C40rB0Dp.js"),[],import.meta.url).then(t=>t.default),"./react-bootstrap/vite.config.ts":()=>i(()=>import("./Dnv89lCz.js"),[],import.meta.url).then(t=>t.default)}),"","./react-bootstrap/",y),_(Object.assign({"./react-daisyui/index.html":()=>i(()=>import("./BrGP54gV.js"),[],import.meta.url).then(t=>t.default),"./react-daisyui/package-lock.json":()=>i(()=>import("./BmHUHNm4.js"),[],import.meta.url).then(t=>t.default),"./react-daisyui/package.json":()=>i(()=>import("./5Rp4QO_e.js"),[],import.meta.url).then(t=>t.default),"./react-daisyui/src/main.css":()=>i(()=>import("./CUXDL2PX.js"),[],import.meta.url).then(t=>t.default),"./react-daisyui/src/vite-env.d.ts":()=>i(()=>import("./DaOiv1oo.js"),[],import.meta.url).then(t=>t.default),"./react-daisyui/tsconfig.json":()=>i(()=>import("./BId8BjcK.js"),[],import.meta.url).then(t=>t.default),"./react-daisyui/vite.config.ts":()=>i(()=>import("./Dyasu8hp.js"),[],import.meta.url).then(t=>t.default)}),"","./react-daisyui/",m),(t,e)=>{t.files["src/main.tsx"]=`import {createRoot} from "react-dom/client";
import "./main.css";
import App from ${JSON.stringify(`./${e.files.react.entryPoint.replace(/\.tsx?$/,"")}`)};
${m(e)?`import '@tailwindcss/browser';
`:""}
const rootElement = document.getElementById('root')!;
const root = createRoot(rootElement);
root.render(<App />)`}],svelte:[_(Object.assign({"./svelte-bootstrap/index.html":()=>i(()=>import("./CSvTNRQH.js"),[],import.meta.url).then(t=>t.default),"./svelte-bootstrap/package-lock.json":()=>i(()=>import("./xaRDgTG2.js"),[],import.meta.url).then(t=>t.default),"./svelte-bootstrap/package.json":()=>i(()=>import("./sLo-rEuC.js"),[],import.meta.url).then(t=>t.default),"./svelte-bootstrap/src/main.css":()=>i(()=>import("./B2sGN3i3.js"),[],import.meta.url).then(t=>t.default),"./svelte-bootstrap/src/vite-env.d.ts":()=>i(()=>import("./BDc_3yBB.js"),[],import.meta.url).then(t=>t.default),"./svelte-bootstrap/svelte.config.js":()=>i(()=>import("./DWm-87YB.js"),[],import.meta.url).then(t=>t.default),"./svelte-bootstrap/tsconfig.json":()=>i(()=>import("./BQ6yow3M.js"),[],import.meta.url).then(t=>t.default),"./svelte-bootstrap/vite.config.ts":()=>i(()=>import("./BAv7YOyr.js"),[],import.meta.url).then(t=>t.default)}),"","./svelte-bootstrap/",y),_(Object.assign({"./svelte-daisyui/index.html":()=>i(()=>import("./Bc_x1pbm.js"),[],import.meta.url).then(t=>t.default),"./svelte-daisyui/package-lock.json":()=>i(()=>import("./BmCsmUxY.js"),[],import.meta.url).then(t=>t.default),"./svelte-daisyui/package.json":()=>i(()=>import("./BvBsWqwT.js"),[],import.meta.url).then(t=>t.default),"./svelte-daisyui/src/main.css":()=>i(()=>import("./DMqp1EMY.js"),[],import.meta.url).then(t=>t.default),"./svelte-daisyui/src/vite-env.d.ts":()=>i(()=>import("./CDC67F1K.js"),[],import.meta.url).then(t=>t.default),"./svelte-daisyui/svelte.config.js":()=>i(()=>import("./BtdtTcyg.js"),[],import.meta.url).then(t=>t.default),"./svelte-daisyui/tsconfig.json":()=>i(()=>import("./C_lTJ7ze.js"),[],import.meta.url).then(t=>t.default),"./svelte-daisyui/vite.config.ts":()=>i(()=>import("./CdjHn5n5.js"),[],import.meta.url).then(t=>t.default)}),"","./svelte-daisyui/",m),(t,e)=>{t.files["src/main.ts"]=`import "./main.css";
import {mount} from 'svelte';
import App from ${JSON.stringify(`./${e.files.svelte.entryPoint}`)};
${m(e)?`import '@tailwindcss/browser';
`:""}
const app = mount(App, {target: document.getElementById('root')!});
export default app;`,t.template="node"}]}),ot=async(t,e,r)=>{const n={title:`AgnosUI ${e} demo - ${t.componentName} - ${t.sampleName} (${t.style})`,files:{},template:"node"},o=t.files[e],{entryPoint:s,files:a}=o,c=[_(a,"src/"),...r[e]];for(const u of c)await u(n,t,e);const l=[s,...Object.keys(a).filter(u=>u!=s)].map(u=>`src/${u}`).join(",");return{project:n,openFile:l}},st=()=>it(),at=st(),ct=async(t,e)=>{const{project:r,openFile:n}=await ot(t,e,at);nt.openProject(r,{newWindow:!0,openFile:n})};export{ct as openInStackblitz};
