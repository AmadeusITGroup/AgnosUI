import{j as t,r as we}from"./App-XYQ6f2LA.js";import{S as E}from"./slot-BM2EyfWv.js";import{u as y}from"./directive-Ds3K8r_f-7Q8HsK8u.js";import{P as ge}from"./portal-CX8X69NK-PpUSpBRh.js";import{u as $e}from"./config-DpsepUKv.js";import{n as c,b as r,d as De,g as M,h as ke,m as p,a as m,r as D,i as ye,w as W,u as L,j as ze}from"./dom-DD1hAVZy-CRhXymqz.js";import{p as R,r as xe,a as Se,f as je,s as Ce}from"./focusElement-mLESWoh7.js";import{c as Me}from"./pointerdownPosition-C9U6qdLt.js";import{c as I}from"./baseTransitions-Dz-bPBkA.js";import{w as Ee,b as Te,s as He,t as f}from"./stores-HF2X-Ulc.js";import{c as F}from"./widget-1S5HWugh.js";import{d as Ne,c as v,b as d,e as Ve,t as k}from"./writables-Is1bF1Vt-Dtgdsc6k.js";import{e as Pe}from"./extendWidget-C031X1rx.js";import{c as Be,a as Ae}from"./collapse-CVjUhnIz-iXivJJgs.js";import{f as We}from"./fade-uOobJKgw-tz7A_H-K.js";const Le={animated:!0,ariaDescribedBy:"",ariaLabelledBy:"",backdropClass:"",backdropTransition:c,className:"w-full",visible:!1,container:typeof window<"u"?document.body:null,transition:c,verticalTransition:c,onHidden:c,onShown:c,onSizeChange:c,onVisibleChange:c,onMinimizedChange:c,onMaximizedChange:c,onResizingChange:c,resizable:!1,backdrop:!0,bodyScroll:!1,size:null},Re={animated:v,ariaDescribedBy:k,ariaLabelledBy:k,backdropClass:k,backdropTransition:d,className:k,visible:v,transition:d,verticalTransition:d,container:Ve,onHidden:d,onShown:d,onSizeChange:d,onVisibleChange:d,onMinimizedChange:d,onMaximizedChange:d,onResizingChange:d,resizable:v,backdrop:v,bodyScroll:v,size:Ne},Ie=F("drawer",i=>{const[{backdrop$:s,backdropTransition$:a,backdropClass$:T,bodyScroll$:H,transition$:O,verticalTransition$:X,visible$:Y,container$:h,className$:w,size$:_,animated$:z,ariaDescribedBy$:q,ariaLabelledBy$:U,onHidden$:G,onShown$:J,onSizeChange$:K,onVisibleChange$:Q,onMinimizedChange$:Z,onMaximizedChange$:ee,onResizingChange$:b,...ie},te]=Ee(Le,i,Re),x=Te(_,K,e=>e&&Math.round(e)),g=r(()=>["block-start","block-end"].some(n=>w().includes(n))),l=I({props:{animated:z,animatedOnInit:z,transition:De(r(()=>g()?X():O())),visible:Y,onVisibleChange:Q,onHidden:G,onShown:J}}),re=M(R,r(()=>({container:h()}))),{directive:se,element$:S}=ke(),ae=p(se,m(()=>({attributes:{class:w,role:D("dialog"),"aria-describedby":q,"aria-labelledby":U,"aria-modal":D("true"),tabIndex:D("-1")},styles:{position:r(()=>{const e=h();return e&&ye(e)&&e!==document.body?"relative":"fixed"}),outline:D("none")},events:{keydown:async e=>{e.key==="Escape"&&await l.api.hide()}}}))),N=I({props:{animated:z,transition:a}}),ne=M(R,r(()=>{const e=h(),n=e?l.stores.element$():void 0;return{container:e,insertBefore:n?.parentElement===e?n:void 0}})),oe=r(()=>(H()||(C()?xe():Se()),!s()||C())),ce=m(()=>({attributes:{class:T,"data-agnos-ignore-inert":f},events:{click:async()=>await l.api.hide()}})),de=r(()=>["inline-start","block-start"].some(e=>w().includes(e))?1:-1),V=W(void 0),P=W(void 0);function j(e){const n=S(),o=g();e=Math.round(Math.max(0,e)),n.style[o?"height":"width"]=`${e}px`;const u=Math.round(n[o?"offsetHeight":"offsetWidth"]);return x.set(u),V.set(e!=null&&(e<u||e===0)),P.set(!!e&&e>u),u}const le=p(Me(e=>{const n=S(),o=g(),u=n[o?"offsetHeight":"offsetWidth"],A=o?"clientY":"clientX",ve=e[A],fe=de();let $=!1;return{onMove(he){j(u+fe*(he[A]-ve)),$||($=!0,b()(!0))},onEnd(){n.style[o?"height":"width"]="",$&&(b()(!1),$=!1)}}}),m(()=>({events:{keydown:e=>{const{key:n}=e,o=x()||S()?.[g()?"offsetHeight":"offsetWidth"];if(o!=null)switch(n){case"ArrowLeft":case"ArrowDown":b()(!0),j(o-10),b()(!1);break;case"ArrowRight":case"ArrowUp":b()(!0),j(o+10),b()(!1);break}}}}))),B=l.stores.visible$,pe=r(()=>l.stores.transitioning$()||N.stores.transitioning$()),C=r(()=>!pe()&&!B()),me=r(()=>{const e=V();e!=null&&L(()=>Z()(e))}),be=r(()=>{const e=P();e!=null&&L(()=>ee()(e))}),ue=r(()=>{me(),be()});return{...He({...ie,backdropClass$:T,className$:w,container$:h,size$:x,visible$:B,backdropHidden$:oe,hidden$:C}),patch:te,api:{open:l.api.show,close:l.api.hide},directives:{drawerPortalDirective:re,drawerDirective:p(ze(ue),ae,M(Ce,r(()=>!H())),l.directives.directive,je),backdropPortalDirective:ne,backdropDirective:p(N.directives.directive,ce),splitterDirective:le}}}),Fe={structure:void 0,header:void 0,children:void 0},Oe={structure:void 0,header:void 0,children:void 0},Xe={backdropTransition:We,transition:Ae,verticalTransition:Be},Ye=F("drawer",i=>{const s=Pe(Ie,Fe,Oe,Xe)(i);return{...s,directives:{...s.directives,drawerDirective:p(m(()=>({classNames:{"au-drawer":f,show:s.stores.visible$},styles:{"--bs-drawer-size":r(()=>{const a=s.stores.size$();return a==null?void 0:a+"px"})}})),s.directives.drawerDirective),backdropDirective:p(s.directives.backdropDirective,m(()=>({classNames:{"au-drawer-backdrop":f,show:s.stores.visible$}}))),splitterDirective:p(s.directives.splitterDirective,m(()=>({classNames:{"au-splitter":f}}))),containerDirective:m(()=>({classNames:{"au-drawer-container":f}}))}}}),_e=Ye,qe=({directives:i})=>t.jsx("div",{...y(i.backdropDirective)}),Ue=i=>t.jsxs("div",{...y(i.directives.drawerDirective),children:[t.jsx("div",{...y(i.directives.containerDirective),children:t.jsx(E,{slotContent:i.state.structure,props:i})}),i.state.resizable&&t.jsx(Je,{...i})]}),Ge=i=>t.jsx(t.Fragment,{children:t.jsxs("div",{className:"au-drawer-content",children:[t.jsx("div",{className:"au-drawer-header",children:t.jsx(E,{slotContent:i.state.header,props:i})}),t.jsx("div",{className:"au-drawer-body",children:t.jsx(E,{slotContent:i.state.children,props:i})})]})}),Je=i=>t.jsx("div",{...y(i.directives.splitterDirective),tabIndex:0}),Ke={structure:Ge};function ui({ref:i,...s}){const a=$e(_e,s,{...Ke});return we.useImperativeHandle(i,()=>a.api,[a.api]),t.jsxs(ge,{container:a.state.container,children:[!a.state.backdropHidden&&t.jsx(qe,{...a}),!a.state.hidden&&t.jsx(Ue,{...a})]})}export{ui as D};
