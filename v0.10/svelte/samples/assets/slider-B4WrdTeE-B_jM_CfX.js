import{Z as a,a1 as pt,Y as x}from"./AppCommon-Wa4AmAan.js";import{e as oe,t as vt,m as T,a as y,b as gt,n as $t}from"./dom-DD1hAVZy-DF7A35x4.js";import{w as Lt,b as Dt,s as wt,t as B}from"./stores-Cnqi-Xzl.js";import{h as yt,a as _e,l as J,c as V,t as Mt,b as K,j as Ve}from"./writables-Is1bF1Vt-BG3Pzxwh.js";import{c as ze,a as kt}from"./resizeObserver-BDnvdKy5.js";import{c as Re}from"./pointerdownPosition-BorTzqud.js";import{c as Pt}from"./widget-dYgkJFv4.js";const St=/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/;function ce(n){const o=(""+n).match(St);return Math.max(0,(o[1]?.length??0)-(+o[2]||0))}const de=(n,o,u,b,m,v,h,d)=>{let f=n[o+b];if(f==null||Math.abs(f-u)>=m)return u;if(d){const k=u+m*b;f=de(n,o+b,k,b,m,v,h,d),f=Math.max(Math.min(f,h),v),n[o+b]=f}return Math.abs(f-u)<m&&(u=f-m*b,n[o]=u),u},me=(n,o,u,b,m,v,h,d)=>{let f=n[o+b];if(f==null||Math.abs(f-u)<=m)return u;if(d){const k=u+m*b;f=me(n,o+b,k,b,m,v,h,d),f=Math.max(Math.min(f,h),v),n[o+b]=f}return Math.abs(f-u)>m&&(u=f-m*b,n[o]=u),u},Vt=(n,o,u,b,m,v,h)=>{let d=n[o];const f=n[o-1],k=n[o+1];return f!=null&&d<f?d=n[o]=f:k!=null&&d>k&&(d=n[o]=k),u&&(d=de(n,o,d,1,u,m,v,h),d=de(n,o,d,-1,u,m,v,h)),b&&(d=me(n,o,d,1,b,m,v,h),me(n,o,d,-1,b,m,v,h)),n},ue={min:0,max:100,stepSize:1,readonly:!1,disabled:!1,vertical:!1,className:"",ariaLabel:()=>"Value",ariaLabelledBy:()=>"",ariaValueText:()=>"",onValuesChange:$t,values:[0],showValueLabels:!0,showMinMaxLabels:!0,showTicks:!1,showTickValues:!0,tickInterval:0,minRange:0,maxRange:0,pushRange:!1,rtl:!1},zt={min:Ve,max:Ve,stepSize:J(0,1/0,{strict:!0}),readonly:V,disabled:V,vertical:V,ariaLabel:K,ariaLabelledBy:K,ariaValueText:K,onValuesChange:K,values:_e,showValueLabels:V,showMinMaxLabels:V,showTicks:V,showTickValues:V,tickInterval:J(0,1/0,{strict:!0}),rtl:V,className:Mt,minRange:J(0,1/0),maxRange:J(0,1/0),pushRange:V},Te=(n,o,u,b,m)=>{const v=Math.pow(10,m);if(n>=u)return u;if(n<=o)return o;const h=Math.floor((n-o)*v/b);return+(((n-o)*v%b<b/2?h:h+1)*b/v+o).toFixed(m)},Q=(n,o,u,b)=>{o.update(m=>(m=[...m],m[n]=m[n]+u*b,m))},ee=(n,o,u)=>n&&o?u?1:-1:n&&!o?-1:!n&&o?u?-1:1:!n&&!o?-1:1,$=n=>n!=null?`${n}%`:"",Ht=Pt("slider",n=>{const[{min$:o,max$:u,minRange$:b,maxRange$:m,pushRange$:v,stepSize$:h,rtl$:d,values$:f,ariaLabel$:k,ariaLabelledBy$:xe,ariaValueText$:Ne,onValuesChange$:Be,showValueLabels$:A,showMinMaxLabels$:E,showTicks$:_,showTickValues$:I,tickInterval$:be,...j},Ie]=Lt(ue,n,zt),{vertical$:c,disabled$:O,readonly$:fe}=j,te=new Map,P=a(()=>{const e=o(),t=u();return e===t?ue.min:Math.min(e,t)}),z=a(()=>{const e=o(),t=u();return e===t?ue.max:Math.max(e,t)}),Oe=a(()=>{const e=b();if(e<=0)return 0;const t=m();return t===0?e:Math.min(e,t)}),He=a(()=>{const e=m();if(e<=0)return 0;const t=b();return t===0?e:Math.max(t,e)}),ie=a(()=>Math.max(ce(h()),ce(P()),ce(z()))),he=a(()=>h()*Math.pow(10,ie()));let pe=f();const w=Dt(f,Be,e=>{const t=P(),i=z(),l=he(),s=ie(),r=e.map(g=>Te(g,t,i,l,s));if(e.length>1){const g=Oe(),L=He();if(g||L){const M=v(),p=r.findIndex((R,G)=>R!==pe[G]);p!==-1&&Vt(r,p,g,L,t,i,M)}}return pe=r,r},_e.equal),{directive:Ae,element$:Ee}=oe(),{directive:je,element$:Fe}=oe(),{directive:Ye,element$:qe}=oe(),{directive:Xe,elements$:ve}=vt(),{directive:Ue,dimensions$:ae}=ze(),{directive:Ce,dimensionsMap$:We}=kt(),{directive:Ze,dimensions$:Ge}=ze(),F=pt({}),ge=a(()=>(ae(),F(),Ee()?.getBoundingClientRect()??{}),{equal:Object.is}),Je=a(()=>(ae(),F(),Fe()?.getBoundingClientRect()??{}),{equal:(e,t)=>Object.is(e,t)}),Ke=a(()=>(ae(),F(),qe()?.getBoundingClientRect()??{}),{equal:(e,t)=>Object.is(e,t)}),Qe=a(()=>ge()[c()?"top":"left"]),$e=a(()=>ge()[c()?"height":"width"]),Y=a(()=>[...w()].sort((e,t)=>e-t)),et=a(()=>w().map((e,t)=>({id:t,value:e})).sort((e,t)=>e.value-t.value)),tt=a(()=>{const e=k(),t=Ne(),i=xe();return et().map((l,s)=>({...l,ariaLabel:i(s)?void 0:e(s),ariaLabelledBy:i(s)||void 0,ariaValueText:t(l.value,s)||void 0}))}),Le=a(()=>w().map(e=>Z(e))),H=a(()=>[...Le()].sort((e,t)=>e-t)),q=a(()=>c()?"height":"width"),it=a(()=>c()?"top":"left"),at=a(()=>X(Je()[q()])),st=a(()=>X(Ke()[q()])),lt=a(()=>A()&&(!_()||!I())),X=e=>e?e/$e()*100:0,se=a(()=>X(Ge()?.contentRect[q()])),De=a(()=>c()?ne():le()),S=e=>X(We().get(ve()[e])?.contentRect[q()]),we=a(()=>{if(!E()||_()&&I())return!1;if(!A())return!0;const e=at(),t=c(),i=d();if(U()){const s=se(),r=De();return i&&!t||t&&!i?r+s/2<100-e-1:r-s/2>e+1}const l=H();return i?l[0]-S(l.length-1)/2>e+1:l[0]-S(0)/2>e+1}),ye=a(()=>{if(!E()||_()&&I())return!1;if(!A())return!0;const e=st(),t=c(),i=d();if(U()){const s=se(),r=De();return i&&!t||t&&!i?r-s/2>e+1:r+s/2<100-e-1}const l=H();return i?100-l[l.length-1]-S(0)/2>e+1:l[l.length-1]+S(l.length-1)/2<100-e-1}),U=a(()=>ve().length==2?nt():!1);function nt(){const e=N(),t=it(),i=W(e[0][t],S(0)),l=W(e[1][t],S(1)),s=S(0),r=S(1);if(s===100||r===100)return!1;const g=i-s,L=i+s,M=l-r,p=l+r;return!(L<M||g>p)}const C=a(()=>!O()&&!fe()),le=a(()=>{const e=H(),t=se();let i=(e[0]+e[1])/2;return i=W(i,t),c()||e.length!=2?0:d()?100-i:i}),ne=a(()=>{const e=H(),t=100-(e[0]+e[1])/2;return c()&&e.length==2?d()?100-t:t:0}),N=a(()=>{const e=c(),t=d();return Le().map(i=>({left:t?e?null:100-i:e?null:i,top:t?e?i:null:e?100-i:null}))}),W=(e,t)=>yt(e,100-t/2,t/2),rt=a(()=>{const e=c(),t=H(),i=d();return t.length===1?[{left:e||i?null:0,right:e?null:i?0:null,bottom:e?i?null:0:null,top:e&&i?0:null,width:e?100:t[0],height:e?t[0]:100,id:0}]:t.map((l,s,r)=>({left:e||i?null:l,right:e?null:i?r[s]:null,bottom:e?i?null:l:null,top:e&&i?r[s]:null,width:e?100:s===r.length-1?l:r[s+1]-l,height:e?s===r.length-1?l:r[s+1]-l:100,id:s})).slice(0,t.length-1)}),ot=a(()=>{if(!_())return[];const e=c(),t=P(),i=z(),l=d(),s=I(),r=be()||h(),g=[],L=he(),M=ie(),p=R=>!!l!=!!e?100-R:R;for(let R=t;R<i;R+=r){const G=Te(R,t,i,L,M),ht=Z(G);g.push({position:p(ht),selected:!1,value:G,displayLabel:s})}return g.push({position:p(100),selected:!1,value:i,displayLabel:s}),g}),ct=a(()=>{const e=Y(),t=i=>{const l=e.length>1,s=l?e[e.length-1]:e[0],r=l?e[0]:0;return i<=s&&i>=r};return ot().map(i=>({...i,selected:t(i.value)}))}),Z=e=>{const t=P(),i=z();return(e-t)*100/(i-t)},Me=e=>{const t=w();if(t.length===1)return 0;const i=Y(),l=i.find(L=>Z(L)>e*100),s=l?i.indexOf(l):i.length-1,r=Z(i[s-1]+(i[s]-i[s-1])/2),g=i[e*100<=r?s-1:s];return t.indexOf(g)},ke=e=>{const t=$e(),i=Qe();let l=c()?(t-e+i)/t:(e-i)/t;return l=d()?1-l:l,l},re=(e,t)=>{if(C()){const i=ke(e),l=t??Me(i),s=i*(z()-P())+P();w.update(r=>(r=[...r],r[l]=s,r))}},D=a(()=>!c()),ut=y(()=>({classNames:{"au-slider":B,"au-slider-vertical":c,"au-slider-horizontal":D},attributes:{class:j.className$}})),dt=y(()=>({attributes:{"aria-disabled":a(()=>O()?"true":void 0),class:j.className$},classNames:{"au-slider-content":B,"au-slider-vertical":c,"au-slider-horizontal":D,"au-slider-with-labels":a(()=>A()||E()||I()&&_()),disabled:O}})),mt=y(()=>({classNames:{"au-slider-label-vertical":c,"au-slider-label-vertical-min":c,"au-slider-label":D,"au-slider-label-min":D,"au-slider-rtl":d,invisible:a(()=>!we())},attributes:{"aria-hidden":x("true")}})),bt=y(()=>({classNames:{"au-slider-label-vertical":c,"au-slider-label-vertical-max":c,"au-slider-label":D,"au-slider-label-max":D,"au-slider-rtl":d,invisible:a(()=>!ye())},attributes:{"aria-hidden":x("true")}})),ft=gt((e,t)=>{const i=()=>{te.delete(t.item.id)},l=s=>{te.set(s.item.id,e)};return l(t),{update:l,destroy:i}}),Pe=(e,t)=>{const i=t!==void 0?te.get(t):e.target;if(C()){const s=c()?"clientY":"clientX";let r=e[s];return F.set({}),i?.focus(),{onMove:g=>{i?.focus();const L=g[s];r!==L&&(r=L,re(L,t))}}}},Se=T(y(e=>({events:{keydown:t=>{const i=e().item.id,{key:l}=t,s=d(),r=h(),g=P(),L=z(),M=c();if(C()){switch(l){case"ArrowDown":Q(i,w,r,ee(M,s,!0));break;case"ArrowLeft":Q(i,w,r,ee(M,s,!1));break;case"ArrowUp":Q(i,w,r,-1*ee(M,s,!0));break;case"ArrowRight":Q(i,w,r,-1*ee(M,s,!1));break;case"Home":w.update(p=>(p=[...p],p[i]=g,p));break;case"End":w.update(p=>(p=[...p],p[i]=L,p));break;case"PageUp":break;case"PageDown":break;default:return}t.preventDefault()}}}})),Re((e,{item:{id:t}})=>Pe(e,t)));return{...wt({min$:P,max$:z,stepSize$:h,values$:w,sortedValues$:Y,sortedHandles$:tt,minValueLabelDisplay$:we,maxValueLabelDisplay$:ye,combinedLabelDisplay$:U,interactive$:C,combinedLabelPositionLeft$:le,combinedLabelPositionTop$:ne,progressDisplayOptions$:rt,handleDisplayOptions$:N,showValueLabels$:lt,showMinMaxLabels$:E,showTicks$:_,rtl$:d,ticks$:ct,...j}),patch:Ie,api:{},directives:{sliderDirective:T(Ae,Ue,dt),containerDirective:ut,progressDisplayDirective:y(e=>({styles:{left:a(()=>$(e().option.left)),right:a(()=>$(e().option.right)),top:a(()=>$(e().option.top)),bottom:a(()=>$(e().option.bottom)),width:a(()=>$(e().option.width)),height:a(()=>$(e().option.height))},classNames:{"au-slider-progress":B}})),clickableAreaDirective:T(y(()=>({classNames:{"au-slider-clickable-area":D,"au-slider-clickable-area-vertical":c,"au-slider-clickable-area-with-ticks":a(()=>_()&&be()===0)}})),Re(e=>{const t=c()?e.clientY:e.clientX,i=Me(ke(t));return re(t,i),Pe(e,i)})),handleEventsDirective:Se,handleDirective:T(ft,Se,y(e=>({attributes:{role:x("slider"),"aria-valuemin":P,"aria-valuemax":z,"aria-valuenow":a(()=>e().item.value),"aria-valuetext":a(()=>e().item.ariaValueText),"aria-label":a(()=>e().item.ariaLabel),"aria-labelledBy":a(()=>e().item.ariaLabelledBy),"aria-orientation":a(()=>c()?"vertical":void 0),"aria-disabled":a(()=>O()?"true":void 0),disabled:O,"aria-readonly":a(()=>fe()?"true":void 0)},styles:{left:a(()=>$(N()[e().item.id].left)),top:a(()=>$(N()[e().item.id].top))},classNames:{"au-slider-handle":B,"au-slider-handle-vertical":c,"au-slider-handle-horizontal":D}}))),minLabelDirective:T(je,mt),maxLabelDirective:T(Ye,bt),combinedHandleLabelDisplayDirective:T(Ze,y(()=>({classNames:{"au-slider-label-vertical":c,"au-slider-label-vertical-now":c,"au-slider-label":D,"au-slider-label-now":D},styles:{left:a(()=>$(le())),top:a(()=>$(ne()))},attributes:{"aria-hidden":x("true")}}))),handleLabelDisplayDirective:T(Xe,Ce,y(e=>({classNames:{"au-slider-label-vertical":c,"au-slider-label-vertical-now":c,"au-slider-label":D,"au-slider-label-now":D},styles:{left:a(()=>{const t=e().index,i=N()[t].left;return i===null?"":$(W(i,S(t)))}),top:a(()=>$(N()[e().index].top)),opacity:a(()=>U()?"0":"1")},attributes:{"aria-hidden":x("true")}}))),tickDirective:y(e=>({classNames:{"au-slider-tick":B,"au-slider-tick-horizontal":D,"au-slider-tick-vertical":c},styles:{left:a(()=>c()?null:$(e().tick.position)),top:a(()=>c()?$(e().tick.position):null)},events:{click:t=>{re(c()?t.clientY:t.clientX)}},attributes:{"aria-hidden":x("true")}})),tickLabelDirective:y(e=>({classNames:{"au-slider-tick-label":B,"au-slider-tick-label-vertical":c,"au-slider-tick-label-now":a(()=>Y().some(t=>t===e().tick.value))},styles:{left:a(()=>c()?null:$(e().tick.position)),top:a(()=>c()?$(e().tick.position):null)},attributes:{"aria-hidden":x("true")}}))}}});export{Ht as c};
