import{k as f,ak as a,g as b,al as l,aa as o,a3 as g,am as d,an as k}from"./AppCommon-yGDLvh0E.js";function m(e){f(e,e.v+1)}function v(e){let t=0,n=l(0),r;return()=>{a()&&(b(n),o(()=>(t===0&&(r=g(()=>e(()=>m(n)))),t+=1,()=>{d().then(()=>{t-=1,t===0&&(r==null||r(),r=void 0)})})))}}function _(e){let t;const n=v(u=>{let s=!1;const c=e.subscribe(i=>{t=i,s&&u()});return s=!0,c});function r(){return a()?(n(),t):k(e)}return"set"in e?{get current(){return r()},set current(u){e.set(u)}}:{get current(){return r()}}}export{v as c,_ as f};
