<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="icon" type="image/svg+xml" href="../agnosui-logo.svg" />
		
		<link href="../_app/immutable/assets/0.gTADaXvH.css" rel="stylesheet">
		<link href="../_app/immutable/assets/Markdown.WWXIpym3.css" rel="stylesheet">
		<link href="../_app/immutable/assets/Heading.yv4Axiq2.css" rel="stylesheet">
		<link href="../_app/immutable/assets/Header.4vKsJ04k.css" rel="stylesheet">
		<link href="../_app/immutable/assets/Code.L6QTLY0L.css" rel="stylesheet">
		<link href="../_app/immutable/assets/Sample.yFTl-hoS.css" rel="stylesheet">
		<link rel="modulepreload" href="../_app/immutable/entry/start.dhpbF0L0.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/entry.o167osyC.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/scheduler.tfzHh09E.js">
		<link rel="modulepreload" href="../_app/immutable/entry/app.DGIXb048.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/preload-helper.0HuHagjb.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/index.W5QrqZq7.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/0.ph6KWDtS.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/Svg.eLiSUGpW.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/stores.Zo-PpteV.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/stores.rBLUfFID.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/app.Fpe6ZBW6.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/directive.YQGJMkyA.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/collapse.FvAiEg2l.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/dom.cPEdNxJP.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/agnosui-logo.vybuZ773.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/2.FZw1zKfS.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/12.2hsr1_r6.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/14.EbV7kxis.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/Markdown.Vue8meIx.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/tooltip.rssOlCiB.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/Heading.0vtEEYGX.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/Header.NyVLVIw8.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/Code.nl9FJ1uD.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/Sample.E-eMkQ_O.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/icon.evb6Ct3j.js"><title>AgnosUI - State management with Tansu for angular</title><!-- HEAD_svelte-k3ymff_START --><link rel="canonical" href="https://www.agnosui.dev/latest/blog/2024-02-01"><!-- HEAD_svelte-k3ymff_END --><!-- HEAD_svelte-1fpim28_START --><!-- HEAD_svelte-1fpim28_END -->
		<title>AgnosUI</title>
		<link rel="preload" href="https://www.agnosui.dev/versions.json" as="fetch" crossorigin="anonymous" />
	</head>

	<body data-sveltekit-preload-data="hover">
		<div id="root">   <div class="agnos-ui svelte-1wa1xth"><nav class="navbar-nav demo-nav-top navbar z-1 svelte-1wa1xth"><div class="container-xxl"><a class="navbar-brand d-flex align-items-center" href="../"> <span class="svg agnosui-logo-brand me-2"><!-- HTML_TAG_START --><?xml version="1.0" encoding="UTF-8"?>
<!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg width="191.25" height="191.22" enable-background="new 0 0 595.28 841.89" version="1.1" viewBox="0 0 191.25 191.22" xml:space="preserve" xmlns="http://www.w3.org/2000/svg">
<path d="m136.68 88.889 27.935 0.687c-1.118-12.791-5.735-24.55-12.874-34.393-31.886-5.798-60.51-0.785-60.51-0.785l2.277-27.81c-14.131 0.438-27.185 5.093-37.955 12.78-6.017 31.858-1.188 60.522-1.188 60.522l-27.817-2.476c0.319 12.909 4.16 24.915 10.61 35.139 31.456 7.829 60.355 4.656 60.355 4.656l-4.059 27.608c0.75 0.028 1.482 0.118 2.236 0.118 16.56 0 31.753-5.833 43.661-15.529 3.988-32.193-2.671-60.517-2.671-60.517z" fill="#9240CC"/>
<path d="m151.74 55.183c11.332 2.063 23.061 5.451 34.073 10.964-21.637-59.963-90.122-66.147-90.122-66.147l-2.184 26.588c0.736-0.024 1.447-0.111 2.184-0.111 23.08 1e-3 43.474 11.34 56.049 28.706z" fill="#FCE649"/>
<path d="m151.74 55.183c-12.575-17.367-32.969-28.706-56.049-28.706-0.736 0-1.447 0.086-2.184 0.111l-2.277 27.81c0 1e-3 28.624-5.012 60.51 0.785z" fill="#E9CF1C"/>
<path d="m164.62 89.576c0.181 2.021 0.313 4.063 0.313 6.132 0 21.675-9.972 41.006-25.574 53.7-1.402 11.412-4.125 23.286-8.985 34.58 58.62-25.029 60.877-93.756 60.877-93.756z" fill="#FCE649"/>
<path d="m164.93 95.708c0-2.069-0.132-4.111-0.313-6.132l-27.935-0.687s6.658 28.324 2.673 60.519c15.604-12.694 25.575-32.025 25.575-53.7z" fill="#E9CF1C"/>
<path d="m37.163 132.56c-11.173-2.781-22.651-6.916-33.289-13.12 17.755 61.231 85.708 71.785 85.708 71.785l3.877-26.4c-23.736-0.758-44.415-13.43-56.296-32.265z" fill="#FCE649"/>
<path d="m37.163 132.56c11.881 18.835 32.56 31.507 56.296 32.264l4.059-27.608s-28.899 3.173-60.355-4.656z" fill="#E9CF1C"/>
<path d="m55.557 39.369c2.139-11.308 5.604-23.008 11.187-33.987-60.099 21.231-66.744 89.68-66.744 89.68l26.553 2.354c-0.014-0.573-0.083-1.132-0.083-1.708 0-23.255 11.502-43.781 29.087-56.339z" fill="#FCE649"/>
<path d="m55.557 39.369c-17.585 12.558-29.088 33.084-29.088 56.339 0 0.576 0.07 1.135 0.083 1.708l27.817 2.476c1e-3 -1e-3 -4.828-28.665 1.188-60.523z" fill="#E9CF1C"/>
</svg>
<!-- HTML_TAG_END --></span> AgnosUI</a> <div class="align-items-center d-none d-md-flex gap-3"><div class="d-flex align-items-center"></div> <a class="nav-link svelte-1wa1xth" href="../docs/angular/getting-started/introduction">Documentation</a> <a class="nav-link svelte-1wa1xth active" href="../blog/2024-02-01" aria-current="page">Blog</a> <div class="vr my-1"></div> <div class="nav-item"><div class="dropdown"><button class="btn nav-link dropdown-toggle align-items-center d-flex  svelte-1cdjb5" aria-label="demo version select" type="button" data-bs-toggle="dropdown" aria-expanded="false">v0.1.1</button> </div> </div> <div class="vr my-1"></div> <a class="nav-link" href="https://github.com/AmadeusITGroup/AgnosUI" aria-label="link to GitHub repository" target="_blank"> <span class="svg icon-24 align-middle"><!-- HTML_TAG_START --><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-github" viewBox="0 0 16 16">
  <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8"/>
</svg><!-- HTML_TAG_END --></span></a> <a class="nav-link" href="https://twitter.com/AgnosUI" aria-label="link to twitter / x account" target="_blank"> <span class="svg icon-24 align-middle"><!-- HTML_TAG_START --><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-twitter-x" viewBox="0 0 16 16">
  <path d="M12.6.75h2.454l-5.36 6.142L16 15.25h-4.937l-3.867-5.07-4.425 5.07H.316l5.733-6.57L0 .75h5.063l3.495 4.633L12.601.75Zm-.86 13.028h1.36L4.323 2.145H2.865z"/>
</svg><!-- HTML_TAG_END --></span></a></div> <div class="align-items-center d-flex d-md-none gap-3"><div class="nav-item"><div class="dropdown"><button class="btn nav-link dropdown-toggle align-items-center d-flex  svelte-1cdjb5" aria-label="demo version select" type="button" data-bs-toggle="dropdown" aria-expanded="false">v0.1.1</button> </div> </div> <button class="btn d-flex align-items-center px-0" aria-expanded="false"> <span class="svg icon-20 me-1"><!-- HTML_TAG_START --><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-three-dots-vertical" viewBox="0 0 16 16">
  <path d="M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0"/>
</svg><!-- HTML_TAG_END --></span></button>   <dialog class="svelte-7z99pq"><div class="menu-title text-center border-bottom pb-2 svelte-7z99pq"><span class="menu-title-text svelte-7z99pq">AgnosUI</span> <button type="button" class="btn-close pb-3 pe-3 svelte-7z99pq" aria-label="Close menu"></button></div> <nav class="navbar navbar-light flex-column align-items-stretch"><a class="nav-item nav-link svelte-1anas1w" href="../docs/angular/getting-started/introduction">Documentation</a> <hr> <a class="nav-item nav-link svelte-1anas1w active" href="../blog/2024-02-01" aria-current="page">Blog</a> <hr></nav> <div class="d-flex justify-content-center"><a class="nav-link" href="https://github.com/AmadeusITGroup/AgnosUI" aria-label="link to GitHub repository" target="_blank"> <span class="svg icon-24 align-middle"><!-- HTML_TAG_START --><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-github" viewBox="0 0 16 16">
  <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8"/>
</svg><!-- HTML_TAG_END --></span></a> <a class="nav-link ms-3" href="https://twitter.com/AgnosUI" aria-label="link to twitter / x account" target="_blank"> <span class="svg icon-24 align-middle"><!-- HTML_TAG_START --><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-twitter-x" viewBox="0 0 16 16">
  <path d="M12.6.75h2.454l-5.36 6.142L16 15.25h-4.937l-3.867-5.07-4.425 5.07H.316l5.733-6.57L0 .75h5.063l3.495 4.633L12.601.75Zm-.86 13.028h1.36L4.323 2.145H2.865z"/>
</svg><!-- HTML_TAG_END --></span></a></div> </dialog></div></div></nav> <div class="demo-main d-flex flex-column z-0 svelte-1wa1xth"><div class="container-xxl"><div class="row flex-wrap flex-sm-nowrap align-content-between"><aside class="demo-sidebar d-none d-md-flex align-items-center align-items-sm-start col-auto side-menu me-3 svelte-1wa1xth"><nav class="w-100 mt-1"> <div class="mb-2"><button class="btn p-1 d-flex align-items-center btn-header fw-semibold w-100 justify-content-between svelte-1vysjxf" aria-expanded="false">News 2024 <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 100 100" class="ms-1 svelte-1vysjxf"><rect class="horizontal svelte-1vysjxf" x="20" y="45" width="60" height="10" fill="black"></rect><rect class="vertical svelte-1vysjxf" x="45" y="20" width="10" height="60" fill="black"></rect></svg></button> <div class="contents collapse"><div> <a class="menu-item menu-item-sidenav active" aria-current="page" href="../blog/2024-02-01">02-01-2024 State management with Tansu </a></div> </div> </div></nav></aside> <div class="pb-4 col"><div class="demo-mobile-menu d-block d-lg-none svelte-1wa1xth"><div class="d-flex align-items-center justify-content-between"><button class="d-md-none text-dark d-flex align-items-center btn btn-link link-underline link-underline-opacity-0" aria-expanded="false"> <span class="svg icon-20 me-1"><!-- HTML_TAG_START --><svg data-v-5b7ea3a9="" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewBox="0 0 24 24"
    class="menu-icon">
    <path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path>
    <path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path>
    <path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path>
    <path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path>
</svg><!-- HTML_TAG_END --></span><span class="menu-text" data-svelte-h="svelte-pf72vn">Menu</span></button> <button class="text-dark d-flex align-items-center btn btn-link link-underline link-underline-opacity-0" aria-expanded="false"><span class="menu-text" data-svelte-h="svelte-mykh62">On this page</span>  <span class="svg icon-20 me-1"><!-- HTML_TAG_START --><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-right" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708"/>
</svg><!-- HTML_TAG_END --></span></button></div>   <dialog class="svelte-7z99pq"><div class="menu-title text-center border-bottom pb-2 svelte-7z99pq"><span class="menu-title-text svelte-7z99pq"></span> <button type="button" class="btn-close pb-3 pe-3 svelte-7z99pq" aria-label="Close menu"></button></div>  </dialog></div> <div> <header class="au-header bg-light pt-3 px-4 px-lg-5 d-flex mb-4 align-items-center title svelte-q1c5tl rounded   pb-3"><div class="row align-items-center w-100"><h1 class="text-primary col-auto me-auto me-md-none mb-0 p-0 p-md-3 text-center text-md-start w-100">State management with Tansu</h1></div>  </header><p class="svelte-1v6ypct"><strong>Published on 02/01/2024.</strong></p><p class="svelte-1v6ypct">In <a href="https://www.agnosui.dev/latest/">AgnosUI</a>, we employ <a href="https://github.com/AmadeusITGroup/tansu">Tansu</a> to handle our widget states.</p><p class="svelte-1v6ypct">This article explores the effective ways to use Tansu for broader state management, drawing upon our practical experience in developing AgnosUI. To follow along, we assume that you have a basic understanding of Tansu's API, as explained in the <a href="https://github.com/AmadeusITGroup/tansu/blob/master/README.md">README</a> (no need to know them in detail). Feel free to refer to it for reference if needed.</p><section class="mb-5"><h2 id="first-example" class=" text-primary mt-2 svelte-1fw63p">First example <a class="anchor-link svelte-1fw63p" href="#first-example" aria-label="link to First example"> <span class="svg icon-24 align-middle"><!-- HTML_TAG_START --><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-link-45deg" viewBox="0 0 16 16">
  <path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1 1 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4 4 0 0 1-.128-1.287z"/>
  <path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243z"/>
</svg><!-- HTML_TAG_END --></span></a></h2><h3 id="local-storage" class=" text-primary mt-2 svelte-1fw63p">Local storage <a class="anchor-link svelte-1fw63p" href="#local-storage" aria-label="link to Local storage"> <span class="svg icon-24 align-middle"><!-- HTML_TAG_START --><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-link-45deg" viewBox="0 0 16 16">
  <path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1 1 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4 4 0 0 1-.128-1.287z"/>
  <path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243z"/>
</svg><!-- HTML_TAG_END --></span></a></h3><p class="svelte-1v6ypct">Before going deeper into the various ways to utilize Tansu, let's start with a simple example.</p><p class="svelte-1v6ypct">The primary building block of Tansu is the writable store.</p><div class="bg-light-subtle doc p-1 d-flex flex-nowrap align-items-start py-2  px-2 px-sm-4 mb-4 svelte-l9wxw2"> <pre class="mb-0 align-self-center svelte-l9wxw2" tabindex="0"><code class="svelte-l9wxw2"><!-- HTML_TAG_START --><span class="hljs-comment">// Create the store somewhere in the code</span>

<span class="hljs-keyword">const</span> myStore$ = <span class="hljs-title function_">writable</span>(<span class="hljs-string">&#x27;value&#x27;</span>);

<span class="hljs-comment">// Listen for changes somewhere in the code</span>
<span class="hljs-keyword">const</span> unsubscribe = myStore$.<span class="hljs-title function_">subscribe</span>(<span class="hljs-function">(<span class="hljs-params">currentValue</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Value changed for&#x27;</span>, currentValue);
});

<span class="hljs-comment">// Set a new value somewhere in the code</span>
myStore$.<span class="hljs-title function_">set</span>(<span class="hljs-string">&#x27;new value&#x27;</span>);<!-- HTML_TAG_END --></code></pre> <button class="btn flex-grow-0 flex-shrink-0 ms-auto" aria-label="copy to clipboard"> <span class="svg align-middle icon-20"><!-- HTML_TAG_START --><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16">
  <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1z"/>
  <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0z"/>
</svg><!-- HTML_TAG_END --></span></button> </div><p class="svelte-1v6ypct">From a pure data management perspective, this is all we need. A store is created, containing internal data. Once we acquire the store in another part of the code, we express interest in changes to this specific data, such as for refreshing a display. The method to set a new value allows subscribers to be notified.</p><p class="svelte-1v6ypct">This coding approach aligns with the trend in how reactive states are implemented on the internet. Examples include Svelte stores (which influenced Tansu's development), the new Runes (also using Svelte), Angular with Signals, or even SolidJS. While their APIs may differ (for instance, using <code class="fw-semibold svelte-ft6yr2">useEffect</code> to subscribe to a store with Signals or <code class="fw-semibold svelte-ft6yr2">$effect</code> with Runes), they share fundamental ideas.</p><ul><li class="mb-2 svelte-1v6b06d">a <code class="fw-semibold svelte-ft6yr2">$</code> is conventionally added at the end of the store name, purely for clarity. As these stores are everywhere in AgnosUI, this naming convention provides an instant visual distinction from other variables. Throughout this article, we use this convention in our examples. </li><li class="mb-2 svelte-1v6b06d">A store is a function that allows you to retrieve the current value (for example <code class="fw-semibold svelte-ft6yr2">const currentValue = myStore$()</code>). </li><li class="mb-2 svelte-1v6b06d">Additionally, a store comes with a convenient method, <code class="fw-semibold svelte-ft6yr2">update</code>. This method takes a function as a parameter. The function receives the current store value and is expected to return the new value. This is convenient when calculating the new value requires knowledge of the old one.  (for example <code class="fw-semibold svelte-ft6yr2">counterStore$.update((count) => count + 1)</code>) </li></ul><p class="svelte-1v6ypct">Let's examine the following code snippet:</p><div class="bg-light-subtle doc p-1 d-flex flex-nowrap align-items-start py-2  px-2 px-sm-4 mb-4 svelte-l9wxw2"> <pre class="mb-0 align-self-center svelte-l9wxw2" tabindex="0"><code class="svelte-l9wxw2"><!-- HTML_TAG_START --><span class="hljs-keyword">import</span> {getLocalStorageStore} <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./stores&#x27;</span>;

<span class="hljs-keyword">const</span> settings$ = <span class="hljs-title function_">getLocalStorageStore</span>(<span class="hljs-string">&#x27;settings&#x27;</span>);
<span class="hljs-keyword">const</span> unsubscribe = appSettings$.<span class="hljs-title function_">subscribe</span>(<span class="hljs-function">(<span class="hljs-params">settings</span>) =&gt;</span> { 
   <span class="hljs-comment">// Do something with settings here...</span>
   <span class="hljs-keyword">const</span> sidebarColor = settings.<span class="hljs-property">sidebarColor</span> ;
   ...
});

...

<span class="hljs-comment">// onDestroy:</span>
<span class="hljs-title function_">unsubscribe</span>();<!-- HTML_TAG_END --></code></pre> <button class="btn flex-grow-0 flex-shrink-0 ms-auto" aria-label="copy to clipboard"> <span class="svg align-middle icon-20"><!-- HTML_TAG_START --><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16">
  <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1z"/>
  <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0z"/>
</svg><!-- HTML_TAG_END --></span></button> </div><p class="svelte-1v6ypct">We can understand from this code that we get a store from the local storage relative to the key <code class="fw-semibold svelte-ft6yr2">settings</code>. Since local storage values are stored as strings, we can expect this store to contain settings directly as a JSON object. Following the same logic, we also expect that invoking <code class="fw-semibold svelte-ft6yr2">settings$.set</code> would modify the internal value and save the corresponding JSON string in the localStorage.</p><p class="svelte-1v6ypct">Let's improve it.</p><div class="bg-light-subtle doc p-1 d-flex flex-nowrap align-items-start py-2  px-2 px-sm-4 mb-4 svelte-l9wxw2"> <pre class="mb-0 align-self-center svelte-l9wxw2" tabindex="0"><code class="svelte-l9wxw2"><!-- HTML_TAG_START --><span class="hljs-comment">// stores.ts</span>

<span class="hljs-keyword">import</span> {writable} <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@amadeus-it-group/tansu&#x27;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> {<span class="hljs-title class_">WritableSignal</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@amadeus-it-group/tansu&#x27;</span>;

<span class="hljs-keyword">const</span> cache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">WritableSignal</span>&lt;<span class="hljs-built_in">any</span>&gt;&gt;();
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getLocalStorageStore</span>(<span class="hljs-params">key: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-keyword">let</span> store$ = cache.<span class="hljs-title function_">get</span>(key);
    <span class="hljs-keyword">if</span> (store$) {
        <span class="hljs-keyword">return</span> store$;
    }
    store$ = <span class="hljs-title function_">writable</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(key) ?? <span class="hljs-string">&#x27;{}&#x27;</span>));
    <span class="hljs-keyword">const</span> storeSet = store$.set.<span class="hljs-title function_">bind</span>(store$);
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(store$, {
        <span class="hljs-title function_">set</span>(<span class="hljs-params">value: <span class="hljs-built_in">any</span></span>) {
            <span class="hljs-title function_">storeSet</span>(value);
            <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(key, value);
        },
    });

    cache.<span class="hljs-title function_">set</span>(key, store$);
    <span class="hljs-keyword">return</span> store$;
}<!-- HTML_TAG_END --></code></pre> <button class="btn flex-grow-0 flex-shrink-0 ms-auto" aria-label="copy to clipboard"> <span class="svg align-middle icon-20"><!-- HTML_TAG_START --><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16">
  <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1z"/>
  <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0z"/>
</svg><!-- HTML_TAG_END --></span></button> </div><p class="svelte-1v6ypct">And that's it for this initial iteration. We've successfully crafted a custom store, designed to offer more than just the basic functionality.</p><p class="svelte-1v6ypct">To enhance our code, we can use the <code class="fw-semibold svelte-ft6yr2">asWritable</code> utility provided in Tansu. The issue with the current example lies in the fact that:</p><ol start="1"><li class="mb-2 svelte-1v6b06d">a <code class="fw-semibold svelte-ft6yr2">writable</code> provides an <code class="fw-semibold svelte-ft6yr2">update</code> method that internally uses the <code class="fw-semibold svelte-ft6yr2">set</code> method. It's crucial to ensure that our customized set method is the one being executed. </li><li class="mb-2 svelte-1v6b06d">The current code is not as straightforward as it could be; we have to explicitly bind the primary <code class="fw-semibold svelte-ft6yr2">set</code> method. </li></ol><p class="svelte-1v6ypct">This is precisely what <code class="fw-semibold svelte-ft6yr2">asWritable</code> is designed for. Let's proceed to rewrite the example:</p><div class="bg-light-subtle doc p-1 d-flex flex-nowrap align-items-start py-2  px-2 px-sm-4 mb-4 svelte-l9wxw2"> <pre class="mb-0 align-self-center svelte-l9wxw2" tabindex="0"><code class="svelte-l9wxw2"><!-- HTML_TAG_START --><span class="hljs-comment">// stores.ts</span>

<span class="hljs-keyword">import</span> {writable, asWritable} <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@amadeus-it-group/tansu&#x27;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> {<span class="hljs-title class_">WritableSignal</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@amadeus-it-group/tansu&#x27;</span>;

<span class="hljs-keyword">const</span> cache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">WritableSignal</span>&lt;<span class="hljs-built_in">any</span>&gt;&gt;();
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getLocalStorageStore</span>(<span class="hljs-params">key: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-keyword">const</span> store$ = cache.<span class="hljs-title function_">get</span>(key);
    <span class="hljs-keyword">if</span> (store$) {
        <span class="hljs-keyword">return</span> store$;
    }

    <span class="hljs-keyword">const</span> innerStore$ = <span class="hljs-title function_">writable</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(key) ?? <span class="hljs-string">&#x27;{}&#x27;</span>));
    <span class="hljs-keyword">const</span> localStorageStore$ = <span class="hljs-title function_">asWritable</span>(innerStore$, <span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">any</span></span>) =&gt;</span> {
        innerStore$.<span class="hljs-title function_">set</span>(value);
        <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(key, value);
    });

    cache.<span class="hljs-title function_">set</span>(key, localStorageStore$);
    <span class="hljs-keyword">return</span> localStorageStore$;
}<!-- HTML_TAG_END --></code></pre> <button class="btn flex-grow-0 flex-shrink-0 ms-auto" aria-label="copy to clipboard"> <span class="svg align-middle icon-20"><!-- HTML_TAG_START --><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16">
  <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1z"/>
  <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0z"/>
</svg><!-- HTML_TAG_END --></span></button> </div><h3 id="enhancing-functionality" class=" text-primary mt-2 svelte-1fw63p">Enhancing Functionality <a class="anchor-link svelte-1fw63p" href="#enhancing-functionality" aria-label="link to Enhancing Functionality"> <span class="svg icon-24 align-middle"><!-- HTML_TAG_START --><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-link-45deg" viewBox="0 0 16 16">
  <path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1 1 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4 4 0 0 1-.128-1.287z"/>
  <path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243z"/>
</svg><!-- HTML_TAG_END --></span></a></h3><p class="svelte-1v6ypct">Our custom store currently lacks one essential feature: value synchronization across browser tabs. Given that we can listen for storage changes, why not incorporate this functionality?</p><p class="svelte-1v6ypct">We can achieve this with the following code:</p><div class="bg-light-subtle doc p-1 d-flex flex-nowrap align-items-start py-2  px-2 px-sm-4 mb-4 svelte-l9wxw2"> <pre class="mb-0 align-self-center svelte-l9wxw2" tabindex="0"><code class="svelte-l9wxw2"><!-- HTML_TAG_START --><span class="hljs-comment">// stores.ts</span>
<span class="hljs-keyword">import</span> {writable, asWritable} <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@amadeus-it-group/tansu&#x27;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> {<span class="hljs-title class_">WritableSignal</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@amadeus-it-group/tansu&#x27;</span>;

<span class="hljs-keyword">const</span> cache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">WritableSignal</span>&lt;<span class="hljs-built_in">any</span>&gt;&gt;();

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getLocalStorageStore</span>(<span class="hljs-params">key: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-keyword">const</span> store$ = cache.<span class="hljs-title function_">get</span>(key);
    <span class="hljs-keyword">if</span> (store$) {
        <span class="hljs-keyword">return</span> store$;
    }

    <span class="hljs-keyword">const</span> innerStore$ = <span class="hljs-title function_">writable</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(key) ?? <span class="hljs-string">&#x27;{}&#x27;</span>));
    <span class="hljs-keyword">const</span> localStorageStore$ = <span class="hljs-title function_">asWritable</span>(innerStore$, <span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">any</span></span>) =&gt;</span> {
        innerStore$.<span class="hljs-title function_">set</span>(value);
        <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(key, value);
    });

    <span class="hljs-keyword">function</span> <span class="hljs-title function_">updateFromStorage</span>(<span class="hljs-params">e: StorageEvent</span>) {
        <span class="hljs-keyword">if</span> (e.<span class="hljs-property">key</span> === key) {
            innerStore$.<span class="hljs-title function_">set</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(e.<span class="hljs-property">newValue</span> || <span class="hljs-string">&#x27;{}&#x27;</span>));
        }
    }
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;storage&#x27;</span>, updateFromStorage);

    cache.<span class="hljs-title function_">set</span>(key, localStorageStore$);
    <span class="hljs-keyword">return</span> localStorageStore$;
}<!-- HTML_TAG_END --></code></pre> <button class="btn flex-grow-0 flex-shrink-0 ms-auto" aria-label="copy to clipboard"> <span class="svg align-middle icon-20"><!-- HTML_TAG_START --><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16">
  <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1z"/>
  <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0z"/>
</svg><!-- HTML_TAG_END --></span></button> </div><p class="svelte-1v6ypct">However, a potential issue arises: the event listener is never removed. After its first usage, it will persist, whether we still need it or not (for example, if the component using it is destroyed). Introducing another function to unlisten to the event isn't a viable solution either, as we might have multiple components using it simultaneously, with the active one still requiring synchronization.</p><p class="svelte-1v6ypct">To address this, let's leverage a powerful feature provided by Tansu: the setup and teardown methods as the second parameter of the writable. This function is called when the number of subscribers changes from 0 to 1. If this function returns another function, the latter is called when the number of subscribers changes from 1 to 0.</p><p class="svelte-1v6ypct">Here's the rewritten version:</p><div class="bg-light-subtle doc p-1 d-flex flex-nowrap align-items-start py-2  px-2 px-sm-4 mb-4 svelte-l9wxw2"> <pre class="mb-0 align-self-center svelte-l9wxw2" tabindex="0"><code class="svelte-l9wxw2"><!-- HTML_TAG_START --><span class="hljs-comment">// stores.ts</span>

<span class="hljs-keyword">import</span> {writable, asWritable} <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@amadeus-it-group/tansu&#x27;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> {<span class="hljs-title class_">WritableSignal</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@amadeus-it-group/tansu&#x27;</span>;

<span class="hljs-keyword">const</span> cache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">WritableSignal</span>&lt;<span class="hljs-built_in">any</span>&gt;&gt;();
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getLocalStorageStore</span>(<span class="hljs-params">key: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-keyword">const</span> store$ = cache.<span class="hljs-title function_">get</span>(key);
    <span class="hljs-keyword">if</span> (store$) {
        <span class="hljs-keyword">return</span> store$;
    }

    <span class="hljs-keyword">function</span> <span class="hljs-title function_">updateFromStorage</span>(<span class="hljs-params">e: StorageEvent</span>) {
        <span class="hljs-keyword">if</span> (e.<span class="hljs-property">key</span> === key) {
            innerStore$.<span class="hljs-title function_">set</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(e.<span class="hljs-property">newValue</span> || <span class="hljs-string">&#x27;{}&#x27;</span>));
        }
    }

    <span class="hljs-keyword">const</span> innerStore$ = <span class="hljs-title function_">writable</span>(&lt;<span class="hljs-built_in">any</span>&gt;<span class="hljs-literal">undefined</span>, <span class="hljs-function">() =&gt;</span> {
        innerStore$.<span class="hljs-title function_">set</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(key) ?? <span class="hljs-string">&#x27;{}&#x27;</span>));
        <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;storage&#x27;</span>, updateFromStorage);
        <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">&#x27;storage&#x27;</span>, updateFromStorage);
    });

    <span class="hljs-keyword">const</span> localStorageStore$ = <span class="hljs-title function_">asWritable</span>(innerStore$, <span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">any</span></span>) =&gt;</span> {
        innerStore$.<span class="hljs-title function_">set</span>(value);
        <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(key, value);
    });

    cache.<span class="hljs-title function_">set</span>(key, localStorageStore$);
    <span class="hljs-keyword">return</span> localStorageStore$;
}<!-- HTML_TAG_END --></code></pre> <button class="btn flex-grow-0 flex-shrink-0 ms-auto" aria-label="copy to clipboard"> <span class="svg align-middle icon-20"><!-- HTML_TAG_START --><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16">
  <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1z"/>
  <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0z"/>
</svg><!-- HTML_TAG_END --></span></button> </div><p class="svelte-1v6ypct">Now, the code is complete. All tabs utilizing this store will stay synchronized.</p><p class="svelte-1v6ypct">The setup and teardown functionality, as demonstrated here, is not available with signals in Angular, though it is present in Svelte stores.</p><h3 id="concluding-remarks-for-this-example" class=" text-primary mt-2 svelte-1fw63p">Concluding remarks for this example <a class="anchor-link svelte-1fw63p" href="#concluding-remarks-for-this-example" aria-label="link to Concluding remarks for this example"> <span class="svg icon-24 align-middle"><!-- HTML_TAG_START --><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-link-45deg" viewBox="0 0 16 16">
  <path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1 1 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4 4 0 0 1-.128-1.287z"/>
  <path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243z"/>
</svg><!-- HTML_TAG_END --></span></a></h3><p class="svelte-1v6ypct">While this seemingly straightforward store may be perceived as a tool or helper, it actually embodies a comprehensive state management system: specifically, the state management for a particular key in the localStorage.</p><p class="svelte-1v6ypct">From the user's perspective, interacting with the store is remarkably straightforward:</p><ul><li class="mb-2 svelte-1v6b06d">No need to understand how local storage operates. </li><li class="mb-2 svelte-1v6b06d">No concerns about parsing or stringifying values; working with the object is possible. </li><li class="mb-2 svelte-1v6b06d">No manual addition or removal of events is required. </li></ul><p class="svelte-1v6ypct">All that is needed is straightforward utilization. The storage value remains synchronized seamlessly.</p><p class="svelte-1v6ypct">Regardless of the specific store in use, the workflow remains consistent:</p><ul><li class="mb-2 svelte-1v6b06d">Get the store, </li><li class="mb-2 svelte-1v6b06d">Subscribe to retrieve the value and perform related actions. </li><li class="mb-2 svelte-1v6b06d">Unsubscribe when the store is no longer needed. </li></ul><p class="svelte-1v6ypct">In AgnosUI, we provide various examples to abstract different levels of complexity. For instance:</p><ul><li class="mb-2 svelte-1v6b06d"><code class="fw-semibold svelte-ft6yr2">activeElement$</code>: consistently captures the active element on the page. Use it to access the state of the activeElement, regardless of the user's focus movement. This is a global store, as there is only one activeElement. </li><li class="mb-2 svelte-1v6b06d"><a href="http://sveltekit-prerender/docs/angular/services/focustrack"><code class="fw-semibold svelte-ft6yr2">focusTrack$</code></a>: provide a parameter of DOM elements, and the store returns a boolean value—either true or false—indicating whether the focus is within your elements or not. This functionality is very useful, for instance, when closing a dropdown if the user moves outside a component. Notably, it utilizes the activeElement$ store, and these stores can be seamlessly combined. </li><li class="mb-2 svelte-1v6b06d"><code class="fw-semibold svelte-ft6yr2">intersection$</code>: provide a store of DOM elements, ensuring you always have elements within the viewport. </li><li class="mb-2 svelte-1v6b06d"><a href="http://sveltekit-prerender/docs/angular/services/floating-ui"><code class="fw-semibold svelte-ft6yr2">floatingui$</code></a>: provides the store of the anchor element and the store of the element to position. It delivers position updates to be applied with <a href="https://floating-ui.com/">floating UI</a>, dynamically updated as the user scrolls. </li></ul></section><section class="mb-5"><h2 id="state-management-for-applications" class=" text-primary mt-2 svelte-1fw63p">State management for applications <a class="anchor-link svelte-1fw63p" href="#state-management-for-applications" aria-label="link to State management for applications"> <span class="svg icon-24 align-middle"><!-- HTML_TAG_START --><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-link-45deg" viewBox="0 0 16 16">
  <path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1 1 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4 4 0 0 1-.128-1.287z"/>
  <path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243z"/>
</svg><!-- HTML_TAG_END --></span></a></h2><h3 id="build-your-custom-stores" class=" text-primary mt-2 svelte-1fw63p">Build your custom stores <a class="anchor-link svelte-1fw63p" href="#build-your-custom-stores" aria-label="link to Build your custom stores"> <span class="svg icon-24 align-middle"><!-- HTML_TAG_START --><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-link-45deg" viewBox="0 0 16 16">
  <path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1 1 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4 4 0 0 1-.128-1.287z"/>
  <path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243z"/>
</svg><!-- HTML_TAG_END --></span></a></h3><p class="svelte-1v6ypct">As demonstrated in the previous example, building a custom store becomes effortless with Tansu's <code class="fw-semibold svelte-ft6yr2">asWritable</code>. However, the more conventional approach is to utilize <code class="fw-semibold svelte-ft6yr2">asReadable</code>. The key distinction is that it entirely removes the <code class="fw-semibold svelte-ft6yr2">set</code> and <code class="fw-semibold svelte-ft6yr2">update</code> methods while preserving the flexibility to extend the store with a custom API.</p><p class="svelte-1v6ypct">Let's illustrate this with a counter store:</p><div class="bg-light-subtle doc p-1 d-flex flex-nowrap align-items-start py-2  px-2 px-sm-4 mb-4 svelte-l9wxw2"> <pre class="mb-0 align-self-center svelte-l9wxw2" tabindex="0"><code class="svelte-l9wxw2"><!-- HTML_TAG_START --><span class="hljs-comment">// counter.ts</span>
<span class="hljs-keyword">import</span> {writable, asReadable} <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@amadeus-it-group/tansu&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">createCounter</span>(<span class="hljs-params">initialValue = <span class="hljs-number">0</span></span>) {
    <span class="hljs-keyword">const</span> counter$ = <span class="hljs-title function_">writable</span>(initialValue);
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">asReadable</span>(counter$, {
        <span class="hljs-attr">increase</span>: <span class="hljs-function">() =&gt;</span> counter$.<span class="hljs-title function_">update</span>(<span class="hljs-function">(<span class="hljs-params">count</span>) =&gt;</span> count + <span class="hljs-number">1</span>),
        <span class="hljs-attr">decrease</span>: <span class="hljs-function">() =&gt;</span> counter$.<span class="hljs-title function_">update</span>(<span class="hljs-function">(<span class="hljs-params">count</span>) =&gt;</span> count - <span class="hljs-number">1</span>),
        <span class="hljs-attr">reset</span>: <span class="hljs-function">() =&gt;</span> counter$.<span class="hljs-title function_">set</span>(initialValue),
    });
}

<span class="hljs-comment">// usage.ts</span>
<span class="hljs-keyword">const</span> counter$ = <span class="hljs-title function_">createCounter</span>();
counter$.<span class="hljs-title function_">increase</span>();
counter$.<span class="hljs-title function_">subscribe</span>(<span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;value:&#x27;</span>, value));

<span class="hljs-comment">// output:</span>
<span class="hljs-comment">// value: 1</span><!-- HTML_TAG_END --></code></pre> <button class="btn flex-grow-0 flex-shrink-0 ms-auto" aria-label="copy to clipboard"> <span class="svg align-middle icon-20"><!-- HTML_TAG_START --><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16">
  <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1z"/>
  <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0z"/>
</svg><!-- HTML_TAG_END --></span></button> </div><p class="svelte-1v6ypct">In this example, we've crafted a counter store with <code class="fw-semibold svelte-ft6yr2">increase</code>, <code class="fw-semibold svelte-ft6yr2">decrease</code>, and <code class="fw-semibold svelte-ft6yr2">reset</code> APIs available, intentionally excluding the ability to set the value directly. Internally, you still have access to <code class="fw-semibold svelte-ft6yr2">set</code> and <code class="fw-semibold svelte-ft6yr2">update</code> to modify the value.</p><p class="svelte-1v6ypct">From a ES6 perspective, creating a global state or local state is straightforward:</p><ul><li class="mb-2 svelte-1v6b06d">using createCounter at the component level will create a local state, </li><li class="mb-2 svelte-1v6b06d"><code class="fw-semibold svelte-ft6yr2">export const counter$ = createCounter()</code> will create a global state. </li></ul><p class="svelte-1v6ypct">The approach may vary based on the framework you are using. For instance, in Angular, you would employ dependency injection to inject the store at the root level or component level.</p><h3 id="multiple-custom-stores-to-manage-your-state" class=" text-primary mt-2 svelte-1fw63p">Multiple custom stores to manage your state <a class="anchor-link svelte-1fw63p" href="#multiple-custom-stores-to-manage-your-state" aria-label="link to Multiple custom stores to manage your state"> <span class="svg icon-24 align-middle"><!-- HTML_TAG_START --><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-link-45deg" viewBox="0 0 16 16">
  <path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1 1 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4 4 0 0 1-.128-1.287z"/>
  <path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243z"/>
</svg><!-- HTML_TAG_END --></span></a></h3><p class="svelte-1v6ypct">While the idea of creating a store that integrates data along with all the associated APIs for management may seem appealing, it's not necessarily the most efficient approach to state management.</p><p class="svelte-1v6ypct">In typical discussions about state management in applications, we encounter two types of data: data originating from the server and data generated locally.</p><p class="svelte-1v6ypct">When dealing with server-side data, it's common to handle a substantial amount of information simultaneously. These data sets are usually stored in a comprehensive main store, ready to be segmented as necessary when different parts of the application request it.</p><p class="svelte-1v6ypct">Conversely, for locally generated data, the approach tends to be quite the opposite. The goal is to create stores with minimal data. Imagining a large store containing the complete state of panels, selected tabs, and all information for each tab is impractical. The strategy involves fragmenting the state into numerous smaller stores, a concept known as fine-grain reactivity. The objective is to ensure that when the application state undergoes changes, only the relevant parts of the application responsive to these changes are triggered.</p><p class="svelte-1v6ypct">Consider the scenario where, in our previous example, we wish to keep track of the number of reset operations. One approach could be as follows:</p><div class="bg-light-subtle doc p-1 d-flex flex-nowrap align-items-start py-2  px-2 px-sm-4 mb-4 svelte-l9wxw2"> <pre class="mb-0 align-self-center svelte-l9wxw2" tabindex="0"><code class="svelte-l9wxw2"><!-- HTML_TAG_START --><span class="hljs-comment">// counter.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">createCounter</span>(<span class="hljs-params">initialValue = <span class="hljs-number">0</span></span>) {
    <span class="hljs-keyword">const</span> counter$ = <span class="hljs-title function_">writable</span>({
        <span class="hljs-attr">resetOperations</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">value</span>: initialValue,
    });

    <span class="hljs-keyword">return</span> <span class="hljs-title function_">asReadable</span>(counter$, {
        <span class="hljs-attr">increase</span>: <span class="hljs-function">() =&gt;</span>
            counter$.<span class="hljs-title function_">update</span>(<span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> {
                state.<span class="hljs-property">value</span>++;
                <span class="hljs-keyword">return</span> state;
            }),

        <span class="hljs-attr">decrease</span>: <span class="hljs-function">() =&gt;</span>
            counter$.<span class="hljs-title function_">update</span>(<span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> {
                state.<span class="hljs-property">value</span>--;
                <span class="hljs-keyword">return</span> state;
            }),

        <span class="hljs-attr">reset</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-function">() =&gt;</span>
            counter$.<span class="hljs-title function_">update</span>(<span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> {
                state.<span class="hljs-property">resetOperations</span>++;
                state.<span class="hljs-property">value</span> = initialValue;
                <span class="hljs-keyword">return</span> state;
            }),
    });
}<!-- HTML_TAG_END --></code></pre> <button class="btn flex-grow-0 flex-shrink-0 ms-auto" aria-label="copy to clipboard"> <span class="svg align-middle icon-20"><!-- HTML_TAG_START --><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16">
  <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1z"/>
  <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0z"/>
</svg><!-- HTML_TAG_END --></span></button> </div><p class="svelte-1v6ypct">However, a more effective approach is to work with separate stores:</p><div class="bg-light-subtle doc p-1 d-flex flex-nowrap align-items-start py-2  px-2 px-sm-4 mb-4 svelte-l9wxw2"> <pre class="mb-0 align-self-center svelte-l9wxw2" tabindex="0"><code class="svelte-l9wxw2"><!-- HTML_TAG_START --><span class="hljs-comment">// counter.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">createCounter</span>(<span class="hljs-params">initialValue = <span class="hljs-number">0</span></span>) {
    <span class="hljs-keyword">const</span> counter$ = <span class="hljs-title function_">writable</span>(initialValue);
    <span class="hljs-keyword">const</span> resetOperations$ = <span class="hljs-title function_">writable</span>(<span class="hljs-number">0</span>);
    <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">counter$</span>: <span class="hljs-title function_">asReadable</span>(counter$),
        <span class="hljs-attr">resetOperations$</span>: <span class="hljs-title function_">asReadable</span>(resetOperations$),
        <span class="hljs-attr">increase</span>: <span class="hljs-function">() =&gt;</span> counter$.<span class="hljs-title function_">update</span>(<span class="hljs-function">(<span class="hljs-params">count</span>) =&gt;</span> count + <span class="hljs-number">1</span>),
        <span class="hljs-attr">decrease</span>: <span class="hljs-function">() =&gt;</span> counter$.<span class="hljs-title function_">update</span>(<span class="hljs-function">(<span class="hljs-params">count</span>) =&gt;</span> count - <span class="hljs-number">1</span>),
        <span class="hljs-attr">reset</span>: <span class="hljs-function">() =&gt;</span> {
            counter$.<span class="hljs-title function_">set</span>(initialValue);
            resetOperations$.<span class="hljs-title function_">update</span>(<span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> value + <span class="hljs-number">1</span>);
        },
    };
}

<span class="hljs-comment">// usage.ts</span>
<span class="hljs-keyword">const</span> {counter$, resetOperations$, increase, reset} = <span class="hljs-title function_">createCounter</span>();
<span class="hljs-title function_">reset</span>();
<span class="hljs-title function_">increase</span>();

counter$.<span class="hljs-title function_">subscribe</span>(<span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Counter value:&#x27;</span>, value));
resetOperations$.<span class="hljs-title function_">subscribe</span>(<span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Reset operations:&#x27;</span>, value));

<span class="hljs-title function_">increase</span>();

<span class="hljs-comment">// Output</span>
<span class="hljs-comment">// Counter value: 0</span>
<span class="hljs-comment">// Reset operations: 1</span>
<span class="hljs-comment">// Counter value: 1</span><!-- HTML_TAG_END --></code></pre> <button class="btn flex-grow-0 flex-shrink-0 ms-auto" aria-label="copy to clipboard"> <span class="svg align-middle icon-20"><!-- HTML_TAG_START --><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16">
  <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1z"/>
  <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0z"/>
</svg><!-- HTML_TAG_END --></span></button> </div><p class="svelte-1v6ypct">Even though we have separate stores, they collaborate seamlessly. Only the subscribers interested in the changes are notified.</p><p class="svelte-1v6ypct">This is the technique that is mostly used in AgnosUI.</p><p class="svelte-1v6ypct">To conclude with a more practical example, let's consider a search panel containing a search input, a possible error list, a table with the results, and a loading indicator.</p><p class="svelte-1v6ypct">The corresponding state for a search panel can be created using the following (simplified) code:</p><div class="bg-light-subtle doc p-1 d-flex flex-nowrap align-items-start py-2  px-2 px-sm-4 mb-4 svelte-l9wxw2"> <pre class="mb-0 align-self-center svelte-l9wxw2" tabindex="0"><code class="svelte-l9wxw2"><!-- HTML_TAG_START --><span class="hljs-keyword">import</span> {writable, asReadable} <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@amadeus-it-group/tansu&#x27;</span>;
<span class="hljs-keyword">import</span> {fetchResults} <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./queryManagement.ts&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">createSearchPanel</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">const</span> errors$ = <span class="hljs-title function_">writable</span>(&lt;string[]&gt;[]);
    const results$ = writable(&lt;any[]&gt;[]);
    const isLoading$ = writable(false);

    return {
        errors$: asReadable(errors$),
        results$: asReadable(results$),
        isLoading$: asReadable(isLoading$),
        async query(text: string) {
            const errors: string[] = [];
            if (!text) {
                errors.push(&#x27;Search term is mandatory&#x27;);
            }

            if (text &amp;&amp; text.length &lt; 3) {
                errors.push(&#x27;You must type at least 3 characters&#x27;);
            } // ...

            errors$.set(errors);
            if (!errors.length) {
                isLoading$.set(true);
                const {results, errors: serverErrors} = await fetchResults(text);
                isLoading$.set(false);
                if (errors.length) {
                    errors$.set(serverErrors);
                } else {
                    results$.set(results);
                }
            }
        },
    };
}<!-- HTML_TAG_END --></code></pre> <button class="btn flex-grow-0 flex-shrink-0 ms-auto" aria-label="copy to clipboard"> <span class="svg align-middle icon-20"><!-- HTML_TAG_START --><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16">
  <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1z"/>
  <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0z"/>
</svg><!-- HTML_TAG_END --></span></button> </div><p class="svelte-1v6ypct">To use this in your search panel component:</p><div class="bg-light-subtle doc p-1 d-flex flex-nowrap align-items-start py-2  px-2 px-sm-4 mb-4 svelte-l9wxw2"> <pre class="mb-0 align-self-center svelte-l9wxw2" tabindex="0"><code class="svelte-l9wxw2"><!-- HTML_TAG_START --><span class="hljs-keyword">const</span> {errors$, results$, isLoading$, query} = <span class="hljs-title function_">createSearchPanel</span>();

<span class="hljs-comment">// Use errors$, results$, isLoading$ for your display</span>
<span class="hljs-comment">// Call &quot;query&quot; to launch a search.</span><!-- HTML_TAG_END --></code></pre> <button class="btn flex-grow-0 flex-shrink-0 ms-auto" aria-label="copy to clipboard"> <span class="svg align-middle icon-20"><!-- HTML_TAG_START --><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16">
  <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1z"/>
  <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0z"/>
</svg><!-- HTML_TAG_END --></span></button> </div></section><section class="mb-5"><h2 id="conclusion" class=" text-primary mt-2 svelte-1fw63p">Conclusion <a class="anchor-link svelte-1fw63p" href="#conclusion" aria-label="link to Conclusion"> <span class="svg icon-24 align-middle"><!-- HTML_TAG_START --><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-link-45deg" viewBox="0 0 16 16">
  <path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1 1 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4 4 0 0 1-.128-1.287z"/>
  <path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243z"/>
</svg><!-- HTML_TAG_END --></span></a></h2><p class="svelte-1v6ypct">In this exploration of state management with Tansu, we've delved into powerful techniques for crafting custom stores that suit diverse application needs. By leveraging Tansu's functionalities like <code class="fw-semibold svelte-ft6yr2">asWritable</code>, <code class="fw-semibold svelte-ft6yr2">asReadable</code>, <code class="fw-semibold svelte-ft6yr2">setup</code> and <code class="fw-semibold svelte-ft6yr2">teardown</code> functions, we've seen how to optimize state management, making it more effective and modular.</p><p class="svelte-1v6ypct">The examples presented, highlight the flexibility Tansu offers in managing state at varying levels of complexity. Whether you're dealing with local or server-driven data, the principles explored here provide a foundation for structuring your application's state in a way that promotes maintainability and scalability.</p><p class="svelte-1v6ypct">Incorporating these techniques into your projects not only enhances the clarity of your code but also contributes to a more robust and responsive state management.</p><p class="svelte-1v6ypct"><strong>Fabrice Basso<!-- HTML_TAG_START --><br><!-- HTML_TAG_END -->
Software engineer at Amadeus</strong></p></section></div></div> <div class="demo-toc d-none d-lg-flex col-auto side-menu me-auto svelte-1wa1xth"></div></div></div></div> </div> 
			
			<script>
				{
					__sveltekit_j1c7dy = {
						base: new URL("..", location).pathname.slice(0, -1)
					};

					const element = document.currentScript.parentElement;

					const data = [null,{"type":"data","data":{menu:[{title:"News 2024",submenu:[{label:"02-01-2024 State management with Tansu",path:"blog/2024-02-01",subpath:""}]}],since:"v0.1.1"},"uses":{}},null];

					Promise.all([
						import("../_app/immutable/entry/start.dhpbF0L0.js"),
						import("../_app/immutable/entry/app.DGIXb048.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 2, 14],
							data,
							form: null,
							error: null
						});
					});

					if ('serviceWorker' in navigator) {
						addEventListener('load', function () {
							navigator.serviceWorker.register('../service-worker.js');
						});
					}
				}
			</script>
		</div>
	</body>
</html>
