import{r as n,j as r}from"./App-YOpzkQgd.js";import{S as g}from"./select-BJ4fxVLU-B_Y9bz8Y.js";import{u as h}from"./directive-Ds3K8r_f-BTGf4hNa.js";import"./slot-BgAWWF5d.js";import"./clsx-B-dksMZM.js";import"./config-4zh7-eV2.js";import"./config-B5RVuqcb.js";import"./stores-CmUTCjpT.js";import"./dom-BPD8lUxd-BmYWB-gd.js";import"./stores-C6L5Y6c8-Bru0wHl3.js";import"./floatingUI-B-tBzbQw.js";import"./promise-D-RZVPuv-CKesYrIM.js";import"./focustrack-CtROHaSp.js";import"./navManager-NGw192bz.js";import"./isFocusable-Ckwus82R-adOM025a.js";import"./textDirection-cNgt24LJ-sg3JWs5A.js";import"./widget-Dn9xc9k2.js";import"./extendWidget-B7LcRyoz.js";function x(e,t){let s;return(...i)=>{s&&clearTimeout(s),s=setTimeout(()=>{e(...i)},t)}}const f=e=>{let t;return(...s)=>(t?.abort(),t=new AbortController,e(t.signal,...s))},p="https://en.wikipedia.org/?curid=",j=new Intl.Collator("en").compare;function w(e){const t=document.createElement("div");return t.innerHTML=e,t.innerText}const m=e=>"page-"+e.pageid,S=({itemContext:e,directives:t})=>r.jsxs(r.Fragment,{children:[r.jsx("a",{href:p+e.item.pageid,target:"_blank",rel:"noreferrer",children:e.item.title}),r.jsx("button",{type:"button",className:"btn-close ms-1 wiki-btn-close","aria-label":"Close",...h(t.badgeCloseButtonDirective,e)})]}),C=({itemContext:e})=>{const t=e.item;return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fw-bold",children:t.title}),r.jsx("div",{className:"text-wrap wiki-desc",children:t.snippet})]})},v=e=>e.querySelectorAll("a,button,input"),_=()=>{const[e,t]=n.useState([]),[s,i]=n.useState([]),u=n.useCallback(x(f(async(o,a)=>{const b=await(await fetch("https://en.wikipedia.org/w/api.php?action=query&list=search&prop=info&inprop=url&utf8=&format=json&origin=*&srlimit=5&srsearch="+a,{signal:o})).json();t(b.query?.search.map(c=>({...c,snippet:w(c.snippet)}))??[])}),200),[]),d=n.useCallback(o=>{i((o||[]).sort((a,l)=>j(a.title,l.title)))},[]);return r.jsxs("div",{className:"custom-select my-auto mb-3",children:[r.jsx(g,{items:e,itemIdFn:m,navSelector:v,onFilterTextChange:u,onSelectedChange:d,badgeLabel:S,itemLabel:C,badgeClassName:"badge text-bg-light d-flex align-items-center"}),r.jsx("span",{className:"fw-bold",children:"Selection: "}),s.map(o=>r.jsx("a",{href:`${p}${o.pageid}`,className:"pe-2",children:o.title},m(o))),!s.length&&r.jsx(r.Fragment,{children:"none"})]})};export{_ as default};
