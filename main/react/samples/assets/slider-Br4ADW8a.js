import{j as r,R as we}from"./index-DU6YK2Sv.js";import{c as d,e as De,w as ye,n as je}from"./func-BRtNsj1u.js";import{e as _,m as Se,d as Ve,u as B}from"./directive-C4fYxzsR.js";import{w as Me,c as Re,s as Pe,t as Ee}from"./stores-aWURyaCH.js";import{g as G,e as K,h as Oe,t as w,a as T}from"./writables-CLHVz3oO.js";import{u as ke,S as v}from"./config-CEpwxNPi.js";const He=/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/;function W(e){var o;const n=(""+e).match(He);return Math.max(0,(((o=n[1])==null?void 0:o.length)??0)-(+n[2]||0))}const A={min:0,max:100,stepSize:1,readonly:!1,disabled:!1,vertical:!1,className:"",ariaLabelHandle:e=>""+e,ariaValueText:e=>""+e,onValuesChange:je,values:[0],showValueLabels:!0,showMinMaxLabels:!0,rtl:!1,slotStructure:void 0,slotLabel:({value:e})=>""+e,slotHandle:void 0},Ne={min:K,max:K,stepSize:Oe(0,1/0,{strict:!0}),readonly:w,disabled:w,vertical:w,ariaLabelHandle:T,ariaValueText:T,onValuesChange:T,values:G,showValueLabels:w,showMinMaxLabels:w,rtl:w},Fe=(e,n,o,u,c)=>{const D=Math.pow(10,c);if(e>=o)return o;if(e<=n)return n;const V=Math.floor((e-n)*D/u);return+(((e-n)*D%u<u/2?V:V+1)*u/D+n).toFixed(c)},E=(e,n,o,u)=>{n.update(c=>(c=[...c],c[e]=c[e]+o*u,c))},O=(e,n,o)=>e&&n?o?1:-1:e&&!n?-1:!e&&n?o?-1:1:!e&&!n?-1:1;function ze(e){const[{min$:n,max$:o,stepSize$:u,rtl$:c,values$:D,ariaLabelHandle$:V,ariaValueText$:J,onValuesChange$:Q,showValueLabels$:k,showMinMaxLabels$:H,...q},Z]=Me(A,e,Ne),{vertical$:f,disabled$:I,readonly$:x}=q;let M=-1;const g=d(()=>{const a=n(),t=o();return a===t?A.min:Math.min(a,t)}),$=d(()=>{const a=n(),t=o();return a===t?A.max:Math.max(a,t)}),U=d(()=>Math.max(W(u()),W(g()),W($()))),C=d(()=>u()*Math.pow(10,U())),b=Re(D,Q,a=>{const t=g(),s=$(),l=C(),i=U();return a.map(m=>Fe(m,t,s,l,i))},G.equal),{directive:ee,element$:X}=_(),{directive:ae,element$:te}=_(),{directive:se,element$:ie}=_(),R=De(X,(a,t)=>{if(!a){t({});return}const s=new ResizeObserver(()=>{t({})});return s.observe(a),()=>s.disconnect()},{}),y=ye({}),P=d(()=>{var a;return R(),y(),((a=X())==null?void 0:a.getBoundingClientRect())??{}},{equal:Object.is}),re=d(()=>{var a;return R(),y(),((a=te())==null?void 0:a.getBoundingClientRect())??{}},{equal:(a,t)=>Object.is(a,t)}),le=d(()=>{var a;return R(),y(),((a=ie())==null?void 0:a.getBoundingClientRect())??{}},{equal:(a,t)=>Object.is(a,t)}),ne=d(()=>f()?P().top:P().left),N=d(()=>f()?P().height:P().width),Y=d(()=>[...b()].sort((a,t)=>a-t)),ce=d(()=>b().map((a,t)=>({id:t,value:a})).sort((a,t)=>a.value-t.value)),ue=d(()=>{const a=V(),t=J();return ce().map((s,l)=>({...s,ariaLabel:a(s.value,l,s.id),ariaValueText:t(s.value,l,s.id)}))}),L=d(()=>b().map(a=>$e(a))),F=d(()=>[...L()].sort((a,t)=>a-t)),de=d(()=>re().width/N()*100),oe=d(()=>le().width/N()*100),me=d(()=>{if(H()){if(!k())return!0}else return!1;const a=de();return c()?!L().some(t=>100-t>100-a-1):!L().some(t=>t<a+1)}),be=d(()=>{if(H()){if(!k())return!0}else return!1;const a=oe();return c()?!L().some(t=>100-t<a+1):!L().some(t=>t>100-a-1)}),fe=d(()=>{const a=b();return a.length==2&&Math.abs(a[0]-a[1])<10}),j=d(()=>!I()&&!x()),he=d(()=>{const a=F(),t=(a[0]+a[1])/2;return f()||a.length!=2?0:c()?100-t:t}),pe=d(()=>{const a=F(),t=100-(a[0]+a[1])/2;return f()&&a.length==2?c()?100-t:t:0}),ve=d(()=>{const a=f(),t=c();return L().map((s,l)=>({left:t?a?null:100-s:a?null:s,top:t?a?s:null:a?100-s:null}))}),ge=d(()=>{const a=f(),t=F(),s=c();return t.length===1?[{left:a||s?null:0,right:a?null:s?0:null,bottom:a?s?null:0:null,top:a&&s?0:null,width:a?100:t[0],height:a?t[0]:100}]:t.map((l,i,m)=>({left:a||s?null:l,right:a?null:s?m[i]:null,bottom:a?s?null:l:null,top:a&&s?m[i]:null,width:a?100:i===m.length-1?l:m[i+1]-l,height:a?i===m.length-1?l:m[i+1]-l:100})).slice(0,t.length-1)}),$e=a=>{const t=g();return(a-t)*100/($()-t)},Le=a=>{const t=b();if(t.length===1)return 0;const s=Y(),l=s.find(h=>h>a*100),i=l?s.indexOf(l):s.length-1,m=s[i-1]+(s[i]-s[i-1])/2,S=s[a*100<=m?i-1:i];return t.indexOf(S)},z=(a,t)=>{if(j()){const s=N(),l=ne();let i=f()?(s-a+l)/s:(a-l)/s;i=c()?1-i:i;const m=t??Le(i),S=i*($()-g())+g();b.update(h=>(h=[...h],h[m]=S,h))}};return{...Pe({min$:g,max$:$,stepSize$:u,values$:b,sortedValues$:Y,sortedHandles$:ue,minValueLabelDisplay$:me,maxValueLabelDisplay$:be,combinedLabelDisplay$:fe,isInteractable$:j,combinedLabelPositionLeft$:he,combinedLabelPositionTop$:pe,progressDisplayOptions$:ge,handleDisplayOptions$:ve,showValueLabels$:k,showMinMaxLabels$:H,rtl$:c,...q}),patch:Z,api:{},directives:{sliderDirective:Se(ee,Ve(R)),minLabelDirective:ae,maxLabelDirective:se},actions:{click(a){z(f()?a.clientY:a.clientX)},keydown(a,t){const{key:s}=a,l=c(),i=u(),m=g(),S=$(),h=f();if(j()){switch(s){case"ArrowDown":E(t,b,i,O(h,l,!0));break;case"ArrowLeft":E(t,b,i,O(h,l,!1));break;case"ArrowUp":E(t,b,i,-1*O(h,l,!0));break;case"ArrowRight":E(t,b,i,-1*O(h,l,!1));break;case"Home":b.update(p=>(p=[...p],p[t]=m,p));break;case"End":b.update(p=>(p=[...p],p[t]=S,p));break;case"PageUp":break;case"PageDown":break;default:return}a.preventDefault(),a.stopPropagation()}},mouseDown(a,t){a.preventDefault();const s=a.target,l=i=>{i.preventDefault();const m=f()?i.clientY:i.clientX;s.focus(),M!==m&&(M=m,z(m,t))};j()&&(y.set({}),s.focus(),document.addEventListener("mousemove",l),document.addEventListener("mouseup",()=>{document.removeEventListener("mousemove",l)},{once:!0}))},touchStart(a,t){a.preventDefault();const s=l=>{l.preventDefault();const i=f()?l.touches[0].clientY:l.touches[0].clientX;a.target.focus(),M!==i&&(M=i,z(i,t))};j()&&(y.set({}),a.target.focus(),document.addEventListener("touchmove",s),document.addEventListener("touchend",()=>{document.removeEventListener("touchmove",s),document.removeEventListener("touchcancel",s)},{once:!0}),document.addEventListener("touchcancel",()=>{document.removeEventListener("touchmove",s),document.removeEventListener("touchend",s)},{once:!0}))}}}}const _e=ze,Te=e=>r.jsx("button",{className:`au-slider-handle ${e.state.vertical?"au-slider-handle-vertical":"au-slider-handle-horizontal"}`,role:"slider","aria-valuemin":e.state.min,"aria-valuemax":e.state.max,"aria-valuenow":e.item.value,"aria-valuetext":e.item.ariaValueText,"aria-label":e.item.ariaLabel,"aria-readonly":e.state.readonly?"true":void 0,"aria-disabled":e.state.disabled?"true":void 0,"aria-orientation":e.state.vertical?"vertical":void 0,disabled:e.state.disabled,style:{top:`${e.state.handleDisplayOptions[e.item.id].top}%`,left:`${e.state.handleDisplayOptions[e.item.id].left}%`},onKeyDown:n=>e.widget.actions.keydown(n.nativeEvent,e.item.id),onMouseDown:n=>e.widget.actions.mouseDown(n.nativeEvent,e.item.id),onTouchStart:n=>e.widget.actions.touchStart(n.nativeEvent,e.item.id),children:"Â "}),We=e=>{const n=B(e.widget.directives.minLabelDirective),o=B(e.widget.directives.maxLabelDirective);return r.jsxs(r.Fragment,{children:[e.state.progressDisplayOptions.map((u,c)=>r.jsx("div",{className:"au-slider-progress",style:{left:`${u.left}%`,right:`${u.right}%`,bottom:`${u.bottom}%`,top:`${u.top}%`,width:`${u.width}%`,height:`${u.height}%`}},c)),r.jsx("div",{className:e.state.vertical?"au-slider-clickable-area-vertical":"au-slider-clickable-area",onClick:u=>e.widget.actions.click(u)}),e.state.showMinMaxLabels?r.jsxs(r.Fragment,{children:[r.jsx("div",{ref:n,className:`${e.state.rtl?"au-slider-rtl":""} ${e.state.vertical?"au-slider-label-vertical au-slider-label-vertical-min":"au-slider-label au-slider-label-min"} ${e.state.minValueLabelDisplay?"":" invisible"}
						`,children:r.jsx(v,{slotContent:e.state.slotLabel,props:{value:e.state.min,...e}})}),r.jsx("div",{ref:o,className:`${e.state.rtl?"au-slider-rtl":""} ${e.state.vertical?"au-slider-label-vertical au-slider-label-vertical-max":"au-slider-label au-slider-label-max"} ${e.state.maxValueLabelDisplay?"":" invisible"}`,children:r.jsx(v,{slotContent:e.state.slotLabel,props:{value:e.state.max,...e}})})]}):r.jsx(r.Fragment,{}),e.state.showValueLabels&&e.state.combinedLabelDisplay?r.jsx("div",{className:e.state.vertical?"au-slider-label-vertical au-slider-label-vertical-now":"au-slider-label au-slider-label-now",style:{left:`${e.state.combinedLabelPositionLeft}%`,top:`${e.state.combinedLabelPositionTop}%`},children:e.state.rtl?r.jsxs(r.Fragment,{children:[r.jsx(v,{slotContent:e.state.slotLabel,props:{value:e.state.sortedValues[1],...e}})," - ",r.jsx(v,{slotContent:e.state.slotLabel,props:{value:e.state.sortedValues[0],...e}})]}):r.jsxs(r.Fragment,{children:[r.jsx(v,{slotContent:e.state.slotLabel,props:{value:e.state.sortedValues[0],...e}})," - ",r.jsx(v,{slotContent:e.state.slotLabel,props:{value:e.state.sortedValues[1],...e}})]})}):r.jsx(r.Fragment,{}),e.state.sortedHandles.map((u,c)=>r.jsxs(we.Fragment,{children:[r.jsx(v,{slotContent:e.state.slotHandle,props:{item:u,...e}}),e.state.showValueLabels&&!e.state.combinedLabelDisplay?r.jsx("div",{className:e.state.vertical?"au-slider-label-vertical au-slider-label-vertical-now":"au-slider-label au-slider-label-now",style:{left:`${e.state.handleDisplayOptions[c].left}%`,top:`${e.state.handleDisplayOptions[c].top}%`},children:r.jsx(v,{slotContent:e.state.slotLabel,props:{value:e.state.values[c],...e}})}):r.jsx(r.Fragment,{})]},u.id))]})},Ae={slotStructure:We,slotHandle:Te};function Ge(e){const[n,o]=ke(_e,e,"slider",{...Ae}),u={state:n,widget:Ee(o)},c=B(o.directives.sliderDirective);return r.jsx("div",{ref:c,className:`au-slider ${e.vertical?"au-slider-vertical":"au-slider-horizontal"} ${e.className?e.className:""} ${e.disabled?" disabled":""}`,"aria-disabled":e.disabled?"true":void 0,children:r.jsx(v,{slotContent:n.slotStructure,props:u})})}export{Ge as S};
