import{r,j as C}from"./App-DI9ur9y5.js";import{e as v,i as W,f as d,g as m,h as x}from"./directive-CKEccryv-BXYvEkQs.js";import{a as h,b as y}from"./stores-B90XF8Sy-7qJUtm0j.js";const f=(e,t,i=1/0)=>{if(t!==void 0)if(typeof t=="object"&&t&&i>=1){e||(e={});for(const o of Object.keys(t))Object.prototype.hasOwnProperty.call(t,o)&&(o==="__proto__"||o==="constructor"||(e[o]=f(e[o],t[o],i-1)))}else return t;return e},b=(e,t=W)=>{const i=v({}),o=t===W?e:d(()=>t(f({},e==null?void 0:e(),2)));return m(d(()=>f(f({},o==null?void 0:o(),2),i(),2)),{...i,own$:i,adaptedParent$:o,parent$:e})};function j(e,t={},i){const o=r.useMemo(()=>e({...i,props:{...i==null?void 0:i.props,...t}}),[]),n=r.useRef(t);return r.useEffect(()=>{const s=x(n.current,t);n.current=t,s&&o.patch(s)},[t]),{state:h(o.stores),api:o.api,directives:o.directives}}const P=(e=r.createContext(void 0))=>{const t=(n,u)=>{const s=r.useContext(e),c=y(u);return r.useMemo(()=>d(()=>({...c(),...n?s==null?void 0:s()[n]:void 0})),[s])};return{widgetsConfigContext:e,useWidgetContext:t,useWidgetWithConfig:(n,u,s,c)=>j(n,u,{config:t(s,c)}),WidgetsDefaultConfig:({children:n,adaptParentConfig:u,...s})=>{const c=r.useContext(e);let g=!1;const a=r.useMemo(()=>{const l=b(c,u);return l.set(s),g=!0,l},[c,u]);return r.useEffect(()=>{g||a.set(s)},[s]),C.jsx(e.Provider,{value:a,children:n})}}},{widgetsConfigContext:E,WidgetsDefaultConfig:O,useWidgetContext:_,useWidgetWithConfig:M}=P();export{M as u,P as w};
