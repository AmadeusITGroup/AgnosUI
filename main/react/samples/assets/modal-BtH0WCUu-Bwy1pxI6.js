import{f as N,D as oe,b as a,m as T,k as q,n as c,z as w,r as B,j as ne,a as E,E as re}from"./dom-Bcg9ORcA-WqVLZWvA.js";import{c as b,b as p,t as D,j as se}from"./writables-e0tyaQpe-CjYdKy22.js";import{w as ie,s as ae}from"./stores-4lfDy9AV.js";import{c as x}from"./baseTransitions-2dB302vm.js";import{d as ce}from"./promise-XSP94FjG-B7gfYTWC.js";import{c as le}from"./widget-Cks0GYyt.js";import{i as de}from"./isFocusable-Ckwus82R-adOM025a.js";const L=N((e,t)=>{let o,n;const i=()=>{n&&(n.parentNode?.replaceChild(e,n),n=null)},r=d=>{if(d!==o&&(d?.container!==o?.container||d?.insertBefore!==o?.insertBefore)){o=d;const u=o?.container??o?.insertBefore?.parentElement;if(u){const v=o?.insertBefore??null;(e.parentElement!==u||e.nextSibling!==v)&&(n||(n=e.parentNode?.insertBefore(e.ownerDocument.createComment("portal"),e)),u.insertBefore(e,v))}else i()}};return r(t),{update:r,destroy:()=>{i(),e.parentNode?.removeChild(e)}}}),me="data-agnos-ignore-inert",pe=e=>{const t=new Map,o=n=>{const i=n.parentElement;i&&n!==document.body&&(Array.from(i.children).forEach(r=>{r!==n&&r.nodeName!=="SCRIPT"&&!r.hasAttribute(me)&&(t.set(r,r.hasAttribute("inert")),r.toggleAttribute("inert",!0))}),o(i))};return o(e),()=>t.forEach((n,i)=>{i.toggleAttribute("inert",n)})};let W=c;const ue=e=>{W(),W=e?pe(e):c},{directive:be,elements$:fe}=oe(),ve=a(()=>{const e=fe();return e[e.length-1]},{equal:Object.is}),ge=a(()=>ue(ve())),he=T(be,q(ge)),f=[];let A=!1;const $e=()=>{A=!1;const e=[];for(;f.length>0;){const t=f[f.length-1];if(t.element){e.push(t.element);break}else t.previousElement&&e.push(t.previousElement),f.pop()}for(const t of e)if(de(t)){t.focus();return}},j=()=>{A||(A=!0,setTimeout($e,0))},ke=N(e=>{const t={element:e,previousElement:document.activeElement};return f.push(t),j(),{destroy(){t.element=null,j()}}}),Ce=()=>{const e=Math.abs(window.innerWidth-document.documentElement.clientWidth),t=document.body,o=t.style,{overflow:n,paddingRight:i}=o;if(e>0){const r=parseFloat(window.getComputedStyle(t).paddingRight);o.paddingRight=`${r+e}px`}return o.overflow="hidden",()=>{e>0&&(o.paddingRight=i),o.overflow=n}};let y=c;const ye=()=>{y(),y=Ce()},Se=()=>{y(),y=c},we=Symbol(),Be=Symbol(),Ee=Symbol(),De={animated:!0,ariaCloseButtonLabel:"Close",backdrop:!0,backdropClass:"",backdropTransition:c,closeButton:!0,closeOnOutsideClick:!0,container:typeof window<"u"?document.body:null,className:"",modalTransition:c,onBeforeClose:c,onVisibleChange:c,onHidden:c,onShown:c,visible:!1},Te={animated:b,ariaCloseButtonLabel:D,backdrop:b,backdropClass:D,backdropTransition:p,closeButton:b,closeOnOutsideClick:b,container:se,className:D,modalTransition:p,onBeforeClose:p,onVisibleChange:p,onHidden:p,onShown:p,visible:b},z=ne(),Ae=a(()=>z().length>0),Ne=a(()=>{Ae()?ye():Se()}),Oe=a(()=>{Ne()}),xe=le("modal",e=>{const[{animated$:t,backdrop$:o,backdropTransition$:n,closeOnOutsideClick$:i,container$:r,modalTransition$:d,onBeforeClose$:u,onVisibleChange$:v,onHidden$:O,onShown$:G,ariaCloseButtonLabel$:P,className$:R,backdropClass$:I,visible$:H,...J},g]=ie(De,e,Te),m=x({props:{transition:d,visible:H,animated:t,animatedOnInit:t,onVisibleChange:v,onHidden:O,onShown:G}}),S=m.stores.visible$,M=x({props:{transition:n,visible:H,animated:t,animatedOnInit:t}}),V=a(()=>m.stores.transitioning$()||o()&&M.stores.transitioning$()),h=a(()=>!V()&&!S()),K=a(()=>!o()||h());let $;const k=s=>{$=s;const l={get result(){return $},set result(C){$=C},cancel:!1};u()(l),!l.cancel&&g({visible:!1})},Q=w(L,a(()=>({container:r()}))),U=w(L,a(()=>{const s=r(),l=s?m.stores.element$():void 0;return{container:s,insertBefore:l?.parentElement===s?l:void 0}})),X=B(void 0,()=>z.register(F)),Y=a(()=>{m.stores.elementPresent$()&&!h()&&X(),Oe()}),Z=E(()=>({attributes:{type:B("button"),"aria-label":P},events:{click:()=>k(Be)}})),_=E(()=>({attributes:{class:I}})),ee=E(()=>({attributes:{class:R,tabIndex:B("-1")},events:{click:s=>{s.currentTarget===s.target&&i()&&k(we)},keydown:s=>{const{key:l}=s;switch(l){case"Escape":k(Ee),s.stopPropagation();break}}}})),F={...ae({backdropHidden$:K,container$:r,hidden$:h,transitioning$:V,visible$:S,modalElement$:m.stores.element$,ariaCloseButtonLabel$:P,className$:R,backdropClass$:I,...J}),directives:{modalPortalDirective:Q,backdropPortalDirective:U,backdropDirective:T(M.directives.directive,_),modalDirective:T(m.directives.directive,re(he),q(Y),ee,ke),closeButtonDirective:Z,dialogDirective:w(N((s,l)=>{const C=te=>{te?s.showModal():s.close()};return C(l),{update:C}}),S)},patch:g,api:{close:k,async open(){return g({visible:!0}),await ce(h).promise,$},patch:g}};return F});export{we as a,Be as b,xe as c,Ee as m};
