import{j as i,R as ve}from"./index-nWr1WHku.js";import{u as Le}from"./config-8OLCzJ_O.js";import{c as r,f as xe,w as De,n as we}from"./func-DcknktoK.js";import{w as ye,c as Me,s as Ve}from"./stores-iE2K2nv0.js";import{e as Z,m as je,d as Re,u as I}from"./directive-Pj1yGRzy.js";import{g as re,e as se,h as Pe,t as C,a as ne}from"./writables-yA7alIj4.js";const Se=/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/;function ee(o){var d;const l=(""+o).match(Se);return Math.max(0,(((d=l[1])==null?void 0:d.length)??0)-(+l[2]||0))}const te={min:0,max:100,stepSize:1,readonly:!1,disabled:!1,vertical:!1,className:"",ariaLabelHandle:(o,l)=>""+o,onValuesChange:we,values:[0],showValueLabels:!0,showMinMaxLabels:!0,rtl:!1},Ce={min:se,max:se,stepSize:Pe(0,1/0,{strict:!0}),readonly:C,disabled:C,vertical:C,ariaLabelHandle:ne,onValuesChange:ne,values:re,showValueLabels:C,showMinMaxLabels:C,rtl:C},ke=(o,l,d,h,c)=>{const g=Math.pow(10,c);if(o>=d)return d;if(o<=l)return l;const v=Math.floor((o-l)*g/h);return+(((o-l)*g%h<h/2?v:v+1)*h/g+l).toFixed(c)},A=(o,l,d,h)=>{l.update(c=>(c=[...c],c[o]=c[o]+d*h,c))},B=(o,l,d)=>o&&l?d?1:-1:o&&!l?-1:!o&&l?d?-1:1:!o&&!l?-1:1;function Ee(o){const[{min$:l,max$:d,stepSize$:h,rtl$:c,values$:g,ariaLabelHandle$:v,onValuesChange$:_,showValueLabels$:k,showMinMaxLabels$:M,...z},W]=ye(te,o,Ce),{vertical$:p,disabled$:q,readonly$:V}=z;let j=-1;const m=r(()=>{const e=l(),t=d();return e===t?te.min:Math.min(e,t)}),L=r(()=>{const e=l(),t=d();return e===t?te.max:Math.max(e,t)}),F=r(()=>Math.max(ee(h()),ee(m()),ee(L()))),E=r(()=>h()*Math.pow(10,F())),b=Me(g,_,e=>{const t=m(),a=L(),n=E(),s=F();return e.map(f=>ke(f,t,a,n,s))},re.equal),{directive:T,element$:H}=Z(),{directive:U,element$:X}=Z(),{directive:Y,element$:K}=Z(),R=xe(H,(e,t)=>{if(!e){t({});return}const a=new ResizeObserver(()=>{t({})});return a.observe(e),()=>a.disconnect()},{}),D=De({}),P=r(()=>{var e;return R(),D(),((e=H())==null?void 0:e.getBoundingClientRect())??{}},{equal:Object.is}),u=r(()=>{var e;return R(),D(),((e=X())==null?void 0:e.getBoundingClientRect())??{}},{equal:(e,t)=>Object.is(e,t)}),w=r(()=>{var e;return R(),D(),((e=K())==null?void 0:e.getBoundingClientRect())??{}},{equal:(e,t)=>Object.is(e,t)}),y=r(()=>p()?P().top:P().left),G=r(()=>p()?P().height:P().width),ae=r(()=>[...b()].sort((e,t)=>e-t)),le=r(()=>b().map((e,t)=>({id:t,value:e})).sort((e,t)=>e.value-t.value)),ie=r(()=>{const e=v();return le().map((t,a)=>({...t,ariaLabel:e(t.value,a,t.id)}))}),S=r(()=>b().map(e=>$e(e))),J=r(()=>[...S()].sort((e,t)=>e-t)),oe=r(()=>u().width/G()*100),ce=r(()=>w().width/G()*100),ue=r(()=>{if(M()){if(!k())return!0}else return!1;const e=oe();return c()?!S().some(t=>100-t>100-e-1):!S().some(t=>t<e+1)}),de=r(()=>{if(M()){if(!k())return!0}else return!1;const e=ce();return c()?!S().some(t=>100-t<e+1):!S().some(t=>t>100-e-1)}),me=r(()=>{const e=b();return e.length==2&&Math.abs(e[0]-e[1])<10}),O=r(()=>!q()&&!V()),be=r(()=>{const e=J(),t=(e[0]+e[1])/2;return p()||e.length!=2?0:c()?100-t:t}),fe=r(()=>{const e=J(),t=100-(e[0]+e[1])/2;return p()&&e.length==2?c()?100-t:t:0}),he=r(()=>{const e=p(),t=c();return S().map((a,n)=>({left:t?e?null:100-a:e?null:a,top:t?e?a:null:e?100-a:null}))}),pe=r(()=>{const e=p(),t=J(),a=c();return t.length===1?[{left:e||a?null:0,right:e?null:a?0:null,bottom:e?a?null:0:null,top:e&&a?0:null,width:e?100:t[0],height:e?t[0]:100}]:t.map((n,s,f)=>({left:e||a?null:n,right:e?null:a?f[s]:null,bottom:e?a?null:n:null,top:e&&a?f[s]:null,width:e?100:s===f.length-1?n:f[s+1]-n,height:e?s===f.length-1?n:f[s+1]-n:100})).slice(0,t.length-1)}),$e=e=>{const t=m();return(e-t)*100/(L()-t)},ge=e=>{const t=b();if(t.length===1)return 0;const a=ae(),n=a.find($=>$>e*100),s=n?a.indexOf(n):a.length-1,f=a[s-1]+(a[s]-a[s-1])/2,N=a[e*100<=f?s-1:s];return t.indexOf(N)},Q=(e,t)=>{if(O()){const a=G(),n=y();let s=p()?(a-e+n)/a:(e-n)/a;s=c()?1-s:s;const f=t??ge(s),N=s*(L()-m())+m();b.update($=>($=[...$],$[f]=N,$))}};return{...Ve({min$:m,max$:L,stepSize$:h,values$:b,sortedValues$:ae,sortedHandles$:ie,minValueLabelDisplay$:ue,maxValueLabelDisplay$:de,combinedLabelDisplay$:me,isInteractable$:O,combinedLabelPositionLeft$:be,combinedLabelPositionTop$:fe,progressDisplayOptions$:pe,handleDisplayOptions$:he,showValueLabels$:k,showMinMaxLabels$:M,rtl$:c,...z}),patch:W,api:{},directives:{sliderDirective:je(T,Re(R)),minLabelDirective:U,maxLabelDirective:Y},actions:{click(e){Q(p()?e.clientY:e.clientX)},keydown(e,t){const{key:a}=e,n=c(),s=h(),f=m(),N=L(),$=p();if(O()){switch(a){case"ArrowDown":A(t,b,s,B($,n,!0));break;case"ArrowLeft":A(t,b,s,B($,n,!1));break;case"ArrowUp":A(t,b,s,-1*B($,n,!0));break;case"ArrowRight":A(t,b,s,-1*B($,n,!1));break;case"Home":b.update(x=>(x=[...x],x[t]=f,x));break;case"End":b.update(x=>(x=[...x],x[t]=N,x));break;case"PageUp":break;case"PageDown":break;default:return}e.preventDefault(),e.stopPropagation()}},mouseDown(e,t){e.preventDefault();const a=n=>{n.preventDefault();const s=p()?n.clientY:n.clientX;e.target.focus(),j!==s&&(j=s,Q(s,t))};O()&&(D.set({}),e.target.focus(),document.addEventListener("mousemove",a),document.addEventListener("mouseup",()=>{document.removeEventListener("mousemove",a)},{once:!0}))},touchStart(e,t){e.preventDefault();const a=n=>{n.preventDefault();const s=p()?n.touches[0].clientY:n.touches[0].clientX;e.target.focus(),j!==s&&(j=s,Q(s,t))};O()&&(D.set({}),e.target.focus(),document.addEventListener("touchmove",a),document.addEventListener("touchend",()=>{document.removeEventListener("touchmove",a),document.removeEventListener("touchcancel",a)},{once:!0}),document.addEventListener("touchcancel",()=>{document.removeEventListener("touchmove",a),document.removeEventListener("touchend",a)},{once:!0}))}}}}function Ae(o){const[{className:l,combinedLabelDisplay:d,combinedLabelPositionLeft:h,combinedLabelPositionTop:c,disabled:g,handleDisplayOptions:v,max:_,maxValueLabelDisplay:k,min:M,minValueLabelDisplay:z,progressDisplayOptions:W,readonly:p,sortedHandles:q,sortedValues:V,values:j,vertical:m,showValueLabels:L,showMinMaxLabels:F,rtl:E},{actions:{click:b,keydown:T,mouseDown:H,touchStart:U},directives:{sliderDirective:X,minLabelDirective:Y,maxLabelDirective:K}}]=Le(Ee,o,"slider"),R=I(X),D=I(Y),P=I(K);return i.jsxs("div",{ref:R,className:`au-slider ${m?"au-slider-vertical":"au-slider-horizontal"} ${l} ${g?" disabled":""}`,"aria-disabled":g?"true":void 0,children:[W.map((u,w)=>i.jsx("div",{className:"au-slider-progress",style:{left:`${u.left}%`,right:`${u.right}%`,bottom:`${u.bottom}%`,top:`${u.top}%`,width:`${u.width}%`,height:`${u.height}%`}},w)),i.jsx("div",{className:m?"au-slider-clickable-area-vertical":"au-slider-clickable-area",onClick:u=>b(u)}),F?i.jsxs(i.Fragment,{children:[i.jsx("div",{ref:D,className:`${E?"au-slider-rtl":""} ${m?"au-slider-label-vertical au-slider-label-vertical-min":"au-slider-label au-slider-label-min"} ${z?"":" invisible"}
						`,children:M}),i.jsx("div",{ref:P,className:`${E?"au-slider-rtl":""} ${m?"au-slider-label-vertical au-slider-label-vertical-max":"au-slider-label au-slider-label-max"} ${k?"":" invisible"}`,children:_})]}):i.jsx(i.Fragment,{}),L&&d?i.jsx("div",{className:m?"au-slider-label-vertical au-slider-label-vertical-now":"au-slider-label au-slider-label-now",style:{left:`${h}%`,top:`${c}%`},children:E?i.jsxs(i.Fragment,{children:[V[1]," - ",V[0]]}):i.jsxs(i.Fragment,{children:[V[0]," - ",V[1]]})}):i.jsx(i.Fragment,{}),q.map((u,w)=>i.jsxs(ve.Fragment,{children:[i.jsx("button",{className:`au-slider-handle ${m?"au-slider-handle-vertical":"au-slider-handle-horizontal"}`,role:"slider","aria-valuemin":M,"aria-valuemax":_,"aria-valuenow":u.value,"aria-valuetext":""+u.value,"aria-label":u.ariaLabel,"aria-readonly":p?"true":void 0,"aria-disabled":g?"true":void 0,"aria-orientation":m?"vertical":void 0,disabled:g,style:{top:`${v[u.id].top}%`,left:`${v[u.id].left}%`},onKeyDown:y=>T(y,u.id),onMouseDown:y=>H(y,u.id),onTouchStart:y=>U(y,u.id),children:"Â "}),L&&!d?i.jsx("div",{className:m?"au-slider-label-vertical au-slider-label-vertical-now":"au-slider-label au-slider-label-now",style:{left:`${v[w].left}%`,top:`${v[w].top}%`},children:j[w]}):i.jsx(i.Fragment,{})]},u.id))]})}export{Ae as S};
