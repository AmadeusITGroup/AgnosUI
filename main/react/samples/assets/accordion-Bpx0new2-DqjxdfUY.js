import{r as C,j as d}from"./App-CMLx6mqi.js";import{u as M,S as N}from"./config-BPae8Kmn.js";import{a as D}from"./directive-Kqp31pwt-DbLI8uLM.js";import{w as W,r as Q,c as l,a as z,s as q,m as U,n as X,b as R,d as F,e as O,f as p,g as Y,h as $,i as Z,j as ee,k as y}from"./directive-DCYlDznf-D2hjAqcK.js";import{c as te}from"./baseTransitions-Amn6yFiO.js";import{t as b,a as f,b as c}from"./writables-DoU_XYTX-Dq9jyVLj.js";import{c as ie}from"./collapse-CVjUhnIz-C0ad2rwi.js";import{e as se}from"./extendWidget-B-unuY20.js";function oe(e,s,n){let a;return s.length==2?(n=n??s[0],a=s.find(r=>r!==n)):s.length>2&&(a=s[0]),a&&e.forEach(r=>{r.state$().itemId!==a&&r.state$().itemVisible&&r.patch({itemVisible:!1})}),e}function _(e,s){return e.find(n=>n.state$().itemId===s)}const o={closeOthers:!1,onShown:$,onHidden:$,className:"",itemId:"",itemDestroyOnHide:!0,itemDisabled:!1,itemVisible:!1,itemAnimated:!0,itemTransition:async()=>{},itemHeadingTag:"",onItemShown:$,onItemHidden:$,onItemVisibleChange:$,itemClass:"",itemHeaderClass:"",itemButtonClass:"",itemBodyContainerClass:"",itemBodyClass:""},T={itemId:o.itemId,itemDestroyOnHide:o.itemDestroyOnHide,itemDisabled:o.itemDisabled,itemVisible:o.itemVisible,itemAnimated:o.itemAnimated,itemTransition:o.itemTransition,onItemShown:o.onItemShown,onItemHidden:o.onItemHidden,onItemVisibleChange:o.onItemVisibleChange,itemClass:o.itemClass,itemHeaderClass:o.itemHeaderClass,itemButtonClass:o.itemButtonClass,itemBodyContainerClass:o.itemBodyContainerClass,itemBodyClass:o.itemBodyClass,itemHeadingTag:o.itemHeadingTag},ne=Object.keys(T);function ae(){return{...o}}const re={closeOthers:b,onShown:f,onHidden:f,itemId:c,itemDestroyOnHide:b,itemDisabled:b,itemVisible:b,itemAnimated:b,itemTransition:f,onItemShown:f,onItemHidden:f,onItemVisibleChange:f,itemClass:c,itemHeaderClass:c,itemButtonClass:c,itemBodyContainerClass:c,itemBodyClass:c,itemHeadingTag:c},ce={itemId:c,itemDestroyOnHide:b,itemDisabled:b,itemVisible:b,itemAnimated:b,itemTransition:f,onItemShown:f,onItemHidden:f,onItemVisibleChange:f,itemClass:c,itemHeaderClass:c,itemButtonClass:c,itemBodyContainerClass:c,itemBodyClass:c,itemHeadingTag:c};function G(e){const[{itemBodyClass$:s,itemButtonClass$:n,itemBodyContainerClass$:a,itemHeaderClass$:r,itemAnimated$:h,itemTransition$:H,itemDestroyOnHide$:V,onItemShown$:E,onItemHidden$:P,onItemVisibleChange$:S,itemVisible$:I,itemId$:u,itemDisabled$:v,...B},k]=W(T,e,ce),j=z(!1),t=l(()=>Z()),i=l(()=>u()||t()),x=l(()=>V()===!1||!A.state$().hidden),A=te({props:{transition:H,visible:I,onVisibleChange:S,animated:h,animatedOnInit:!1,initDone:j,onHidden:()=>{P()()},onShown:()=>{E()()}}}),w=()=>{v()||I.update(m=>!m)},g=p(()=>({attributes:{id:l(()=>`${i()}-toggle`),"aria-expanded":l(()=>`${I()}`),"aria-disabled":l(()=>`${v()}`),"aria-controls":l(()=>`${i()}-body-container`),disabled:v},classNames:{collapsed:l(()=>!I())},events:{click:w}}));return{...q({itemVisible$:I,itemId$:i,shouldBeInDOM$:x,itemDisabled$:v,itemBodyClass$:s,itemButtonClass$:n,itemBodyContainerClass$:a,itemHeaderClass$:r,...B}),patch:k,actions:{click:w},api:{initDone:()=>{j.set(!0)},collapse:()=>{I.set(!1)},expand:()=>{I.set(!0)},toggle:()=>{I.update(m=>!m)}},directives:{toggleDirective:g,buttonDirective:O(g,p(()=>({attributes:{type:"button",class:n()}}))),headerDirective:p(()=>({attributes:{class:r()}})),bodyDirective:p(()=>({attributes:{class:s()}})),bodyContainerDirective:O(ee(A.directives.directive),p(()=>({attributes:{id:l(()=>`${i()}-body-container`),class:a(),"aria-labelledby":l(()=>`${i()}-toggle`)}}))),accordionItemDirective:$}}}function de(e=G,s=ne,n=o,a=re){return r=>{const[h,H]=W(n,r,a),{closeOthers$:V,onShown$:E,onHidden$:P,className$:S}=h,I=Object.fromEntries(Object.entries(h).map(t=>[t[0].slice(0,-1),t[1]])),u=Q(),v=l(()=>{const t=[];return u().forEach(i=>{i.state$().itemVisible&&t.push(i.state$().itemId)}),t}),B=z(v()[0]),k=l(()=>{V()&&(oe(u(),v(),B()),B.set(v()[0]))}),j=l(()=>{k()});return{...q({itemsWidget$:u,className$:S}),patch:H,actions:{},api:{expand:t=>{var i;(i=_(u(),t))==null||i.api.expand()},collapse:t=>{var i;(i=_(u(),t))==null||i.api.collapse()},toggle:t=>{var i;(i=_(u(),t))==null||i.api.toggle()},expandAll:()=>{u().forEach(t=>t.api.expand())},collapseAll:()=>{u().forEach(t=>t.api.collapse())},registerItem:t=>{const i=s,x=U(i,X(i,t==null?void 0:t.config),I),[{onItemHidden$:A,onItemShown$:w}]=W({onItemHidden:T.onItemHidden,onItemShown:T.onItemShown},{config:x,props:t==null?void 0:t.props}),g=e({config:x,props:{...t==null?void 0:t.props,onItemHidden:R(F(()=>{var m;P()(g.stores.itemId$()),(m=A())==null||m()}),m=>{A.set(m)}),onItemShown:R(F(()=>{var m;E()(g.stores.itemId$()),(m=w())==null||m()}),m=>{w.set(m)})}});return g.directives.accordionItemDirective=O(()=>({destroy:u.register(g)}),p(()=>({attributes:{class:g.stores.itemClass$,id:g.stores.itemId$}}))),g}},directives:{accordionDirective:O(Y(j),p(()=>({attributes:{class:S()},classNames:{"au-accordion":!0}})))}}}}const J={slotItemStructure:void 0,slotItemBody:void 0,slotItemHeader:void 0},K={...ae(),...J},me=Object.keys(K),le=se(G,J),ue={itemTransition:ie};function Ie(){return{...K,...ue}}const ge=de(le,me,Ie()),fe=ge,he=e=>{const n=new RegExp("^h[1-6]$").test(e.headerTag)?e.headerTag:"h2";return d.jsx(n,{...D([y,"accordion-header"],e.directive),children:e.children})},be=e=>d.jsx("div",{...D([y,"accordion-collapse"],e.widget.directives.bodyContainerDirective),children:d.jsx("div",{...D([y,"accordion-body"],e.widget.directives.bodyDirective),children:d.jsx(N,{slotContent:e.state.slotItemBody,props:e})})}),L=C.createContext({}),ve=e=>d.jsxs(d.Fragment,{children:[d.jsx(he,{directive:e.widget.directives.headerDirective,headerTag:e.state.itemHeadingTag,children:d.jsx("button",{...D([y,"accordion-button"],e.widget.directives.buttonDirective),children:d.jsx(N,{slotContent:e.state.slotItemHeader,props:e})})}),e.state.shouldBeInDOM&&d.jsx(be,{...e})]}),pe={slotItemStructure:ve},Be=C.forwardRef(function(s,n){const{registerItem:a}=C.useContext(L),[r,h]=M(a,s,null,{...pe}),H={state:r,widget:h};return C.useImperativeHandle(n,()=>h.api,[]),C.useEffect(()=>{h.api.initDone()},[]),d.jsx("div",{...D([y,`accordion-item ${r.itemClass}`],h.directives.accordionItemDirective),children:d.jsx(N,{slotContent:r.slotItemStructure,props:H})})}),je=C.forwardRef(function(s,n){const a=M(fe,s,"accordion")[1];return C.useImperativeHandle(n,()=>a.api,[]),d.jsx(L.Provider,{value:a.api,children:d.jsx("div",{...D([y,"accordion"],a.directives.accordionDirective),children:s.children})})});export{je as A,Be as a};
