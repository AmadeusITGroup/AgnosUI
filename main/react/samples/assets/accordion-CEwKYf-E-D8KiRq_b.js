import{r as h,j as m}from"./App-XNADZBio.js";import{u as G,S as M}from"./config-CU1Tiraw.js";import{u as y}from"./directive-_62WM8Ul-DhygzKo7.js";import{w as J,c,a as K,s as L,m as Z,n as ee,b as v}from"./stores-CbKlqneq.js";import{c as te}from"./baseTransitions-B0Uz6_1l.js";import{t as b,a as u,b as d}from"./writables-DoU_XYTX-dxvvE_8w.js";import{r as ie,m as w,c as $,d as se,g as oe,b as ae}from"./directive-DpAaJgAE-dbIg0imW.js";import{c as ne}from"./collapse-CVjUhnIz-CTQJmzKC.js";import{e as re}from"./extendWidget-DH6bFaPr.js";function de(e,t,s){let n;return t.length==2?(s=s??t[0],n=t.find(r=>r!==s)):t.length>2&&(n=t[0]),n&&e.forEach(r=>{r.state$().itemId!==n&&r.state$().itemVisible&&r.patch({itemVisible:!1})}),e}function F(e,t){return e.find(s=>s.state$().itemId===t)}const i={closeOthers:!1,onShown:v,onHidden:v,className:"",itemId:"",itemDestroyOnHide:!0,itemDisabled:!1,itemVisible:!1,itemAnimated:!0,itemTransition:async()=>{},itemHeadingTag:"",onItemShown:v,onItemHidden:v,onItemVisibleChange:v,slotItemStructure:void 0,slotItemBody:void 0,slotItemHeader:void 0,itemClass:"",itemHeaderClass:"",itemButtonClass:"",itemBodyContainerClass:"",itemBodyClass:""},Q={itemId:i.itemId,itemDestroyOnHide:i.itemDestroyOnHide,itemDisabled:i.itemDisabled,itemVisible:i.itemVisible,itemAnimated:i.itemAnimated,itemTransition:i.itemTransition,onItemShown:i.onItemShown,onItemHidden:i.onItemHidden,onItemVisibleChange:i.onItemVisibleChange,slotItemStructure:i.slotItemStructure,slotItemBody:i.slotItemBody,slotItemHeader:i.slotItemHeader,itemClass:i.itemClass,itemHeaderClass:i.itemHeaderClass,itemButtonClass:i.itemButtonClass,itemBodyContainerClass:i.itemBodyContainerClass,itemBodyClass:i.itemBodyClass,itemHeadingTag:i.itemHeadingTag},q=Object.keys(Q),ce={closeOthers:b,onShown:u,onHidden:u,itemId:d,itemDestroyOnHide:b,itemDisabled:b,itemVisible:b,itemAnimated:b,itemTransition:u,onItemShown:u,onItemHidden:u,onItemVisibleChange:u,itemClass:d,itemHeaderClass:d,itemButtonClass:d,itemBodyContainerClass:d,itemBodyClass:d,itemHeadingTag:d},me={itemId:d,itemDestroyOnHide:b,itemDisabled:b,itemVisible:b,itemAnimated:b,itemTransition:u,onItemShown:u,onItemHidden:u,onItemVisibleChange:u,itemClass:d,itemHeaderClass:d,itemButtonClass:d,itemBodyContainerClass:d,itemBodyClass:d,itemHeadingTag:d};function le(e,t,s){const[{itemBodyClass$:n,itemButtonClass$:r,itemBodyContainerClass$:I,itemHeaderClass$:f,itemAnimated$:T,itemTransition$:V,itemDestroyOnHide$:x,onItemShown$:O,onItemHidden$:j,onItemVisibleChange$:N,itemVisible$:l,itemId$:E,itemDisabled$:p,...k},P]=J(Q,s,me),D=K(!1),R=c(()=>oe()),g=c(()=>E()||R()),_=c(()=>x()===!1||!B.state$().hidden),B=te({props:{transition:V,visible:l,onVisibleChange:N,animated:T,animatedOnInit:!1,initDone:D,onHidden:()=>{t()(g()),j()()},onShown:()=>{e()(g()),O()()}}}),S=()=>{p()||l.update(H=>!H)},A=$(()=>({attributes:{id:c(()=>`${g()}-toggle`),"aria-expanded":c(()=>`${l()}`),"aria-disabled":c(()=>`${p()}`),"aria-controls":c(()=>`${g()}-body-container`),disabled:p()},classNames:{collapsed:c(()=>!l())},events:{click:S}}));return{...L({itemVisible$:l,itemId$:g,shouldBeInDOM$:_,itemDisabled$:p,itemBodyClass$:n,itemButtonClass$:r,itemBodyContainerClass$:I,itemHeaderClass$:f,...k}),patch:P,actions:{click:S},api:{initDone:()=>{D.set(!0)},collapse:()=>{l.set(!1)},expand:()=>{l.set(!0)},toggle:()=>{l.update(H=>!H)}},directives:{toggleDirective:A,buttonDirective:w(A,$(()=>({attributes:{type:"button",class:r()}}))),headerDirective:$(()=>({attributes:{class:f()}})),bodyDirective:$(()=>({attributes:{class:n()}})),bodyContainerDirective:w(ae(B.directives.directive),$(()=>({attributes:{id:c(()=>`${g()}-body-container`),class:I(),"aria-labelledby":c(()=>`${g()}-toggle`)}}))),accordionItemDirective:v}}}function ue(e){const[{closeOthers$:t,onShown$:s,onHidden$:n,className$:r,itemId$:I,itemAnimated$:f,itemClass$:T,itemDisabled$:V,itemVisible$:x,itemTransition$:O,itemDestroyOnHide$:j,itemBodyClass$:N,itemButtonClass$:l,itemBodyContainerClass$:E,itemHeaderClass$:p,itemHeadingTag$:k,onItemVisibleChange$:P,onItemHidden$:D,onItemShown$:R,slotItemStructure$:g,slotItemBody$:_,slotItemHeader$:B,...S},A]=J(i,e,ce),H={itemId:I,itemClass:T,itemAnimated:f,itemDisabled:V,itemVisible:x,itemTransition:O,itemDestroyOnHide:j,itemBodyClass:N,itemButtonClass:l,itemBodyContainerClass:E,itemHeaderClass:p,itemHeadingTag:k,onItemVisibleChange:P,onItemHidden:D,onItemShown:R,slotItemStructure:g,slotItemBody:_,slotItemHeader:B},C=ie(),W=c(()=>{const o=[];return C().forEach(a=>{a.state$().itemVisible&&o.push(a.state$().itemId)}),o}),z=K(W()[0]),X=c(()=>{t()&&(de(C(),W(),z()),z.set(W()[0]))}),Y=c(()=>{X()});return{...L({itemsWidget$:C,className$:r,...S}),patch:A,actions:{},api:{expand:o=>{var a;(a=F(C(),o))==null||a.api.expand()},collapse:o=>{var a;(a=F(C(),o))==null||a.api.collapse()},toggle:o=>{var a;(a=F(C(),o))==null||a.api.toggle()},expandAll:()=>{C().forEach(o=>o.api.expand())},collapseAll:()=>{C().forEach(o=>o.api.collapse())},registerItem:o=>{const a=le(s,n,{config:Z(q,ee(q,o==null?void 0:o.config),H),props:o==null?void 0:o.props});return a.directives.accordionItemDirective=w(()=>({destroy:C.register(a)}),$(()=>({attributes:{class:a.stores.itemClass$,id:a.stores.itemId$}}))),a}},directives:{accordionDirective:w(se(Y),$(()=>({attributes:{class:r()},classNames:{"au-accordion":!0}})))}}}const Ie={itemTransition:ne},ge=re(ue,{},{},Ie),Ce=ge,be=e=>{const s=new RegExp("^h[1-6]$").test(e.headerTag)?e.headerTag:"h2";return m.jsx(s,{className:"accordion-header",...y(e.directive),children:e.children})},U=h.createContext({}),$e=e=>{const t=y(e.widget.directives.bodyContainerDirective),s=y(e.widget.directives.bodyDirective);return m.jsxs(m.Fragment,{children:[m.jsx(be,{directive:e.widget.directives.headerDirective,headerTag:e.state.itemHeadingTag,children:m.jsx("button",{className:"accordion-button",...y(e.widget.directives.buttonDirective),children:m.jsx(M,{slotContent:e.state.slotItemHeader,props:e})})}),e.state.shouldBeInDOM?m.jsx("div",{className:"accordion-collapse",...t,children:m.jsx("div",{className:"accordion-body",...s,children:m.jsx(M,{slotContent:e.state.slotItemBody,props:e})})}):null]})},he={slotItemStructure:$e},we=h.forwardRef(function(t,s){const{registerItem:n}=h.useContext(U),[r,I]=G(n,t,null,{...he}),f={state:r,widget:I};return h.useImperativeHandle(s,()=>I.api,[]),h.useEffect(()=>{I.api.initDone()},[]),m.jsx("div",{className:`accordion-item ${r.itemClass}`,...y(I.directives.accordionItemDirective),children:m.jsx(M,{slotContent:r.slotItemStructure,props:f})})}),Te=h.forwardRef(function(t,s){const n=G(Ce,t,"accordion")[1];return h.useImperativeHandle(s,()=>n.api,[]),m.jsx(U.Provider,{value:n.api,children:m.jsx("div",{className:"accordion",...y(n.directives.accordionDirective),children:t.children})})});export{Te as A,we as a};
