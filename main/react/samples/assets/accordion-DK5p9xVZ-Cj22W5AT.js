import{r as h,j as c}from"./App-XNADZBio.js";import{u as G,S as M}from"./config-CU1Tiraw.js";import{u as y}from"./directive-_62WM8Ul-DhygzKo7.js";import{w as J,c as m,a as K,s as L,m as Z,n as ee,b as v}from"./stores-CbKlqneq.js";import{c as te}from"./baseTransitions-B0Uz6_1l.js";import{t as $,a as u,b as d}from"./writables-DoU_XYTX-dxvvE_8w.js";import{r as ie,m as w,c as b,d as se,g as oe,b as ae}from"./directive-DpAaJgAE-dbIg0imW.js";import{c as ne}from"./collapse-CVjUhnIz-CTQJmzKC.js";import{e as re}from"./extendWidget-DH6bFaPr.js";function de(e,i,a){let n;return i.length==2?(a=a??i[0],n=i.find(r=>r!==a)):i.length>2&&(n=i[0]),n&&e.forEach(r=>{r.state$().itemId!==n&&r.state$().itemVisible&&r.patch({itemVisible:!1})}),e}function F(e,i){return e.find(a=>a.state$().itemId===i)}const t={closeOthers:!1,onShown:v,onHidden:v,className:"",itemId:"",itemDestroyOnHide:!0,itemDisabled:!1,itemVisible:!1,itemAnimated:!0,itemTransition:async()=>{},itemHeadingTag:"",onItemShown:v,onItemHidden:v,onItemVisibleChange:v,slotItemStructure:void 0,slotItemBody:void 0,slotItemHeader:void 0,itemClass:"",itemHeaderClass:"",itemButtonClass:"",itemBodyContainerClass:"",itemBodyClass:""},Q={itemId:t.itemId,itemDestroyOnHide:t.itemDestroyOnHide,itemDisabled:t.itemDisabled,itemVisible:t.itemVisible,itemAnimated:t.itemAnimated,itemTransition:t.itemTransition,onItemShown:t.onItemShown,onItemHidden:t.onItemHidden,onItemVisibleChange:t.onItemVisibleChange,slotItemStructure:t.slotItemStructure,slotItemBody:t.slotItemBody,slotItemHeader:t.slotItemHeader,itemClass:t.itemClass,itemHeaderClass:t.itemHeaderClass,itemButtonClass:t.itemButtonClass,itemBodyContainerClass:t.itemBodyContainerClass,itemBodyClass:t.itemBodyClass,itemHeadingTag:t.itemHeadingTag},q=Object.keys(Q),ce={closeOthers:$,onShown:u,onHidden:u,itemId:d,itemDestroyOnHide:$,itemDisabled:$,itemVisible:$,itemAnimated:$,itemTransition:u,onItemShown:u,onItemHidden:u,onItemVisibleChange:u,itemClass:d,itemHeaderClass:d,itemButtonClass:d,itemBodyContainerClass:d,itemBodyClass:d,itemHeadingTag:d},me={itemId:d,itemDestroyOnHide:$,itemDisabled:$,itemVisible:$,itemAnimated:$,itemTransition:u,onItemShown:u,onItemHidden:u,onItemVisibleChange:u,itemClass:d,itemHeaderClass:d,itemButtonClass:d,itemBodyContainerClass:d,itemBodyClass:d,itemHeadingTag:d};function le(e,i,a){const[{itemBodyClass$:n,itemButtonClass$:r,itemBodyContainerClass$:I,itemHeaderClass$:f,itemAnimated$:T,itemTransition$:V,itemDestroyOnHide$:x,onItemShown$:O,onItemHidden$:j,onItemVisibleChange$:N,itemVisible$:l,itemId$:E,itemDisabled$:p,...k},P]=J(Q,a,me),D=K(!1),_=m(()=>oe()),g=m(()=>E()||_()),R=m(()=>x()===!1||!B.state$().hidden),B=te({props:{transition:V,visible:l,onVisibleChange:N,animated:T,animatedOnInit:!1,initDone:D,onHidden:()=>{i()(g()),j()()},onShown:()=>{e()(g()),O()()}}}),S=()=>{p()||l.update(H=>!H)},A=b(()=>({attributes:{id:m(()=>`${g()}-toggle`),"aria-expanded":m(()=>`${l()}`),"aria-disabled":m(()=>`${p()}`),"aria-controls":m(()=>`${g()}-body-container`),disabled:p()},classNames:{collapsed:m(()=>!l())},events:{click:S}}));return{...L({itemVisible$:l,itemId$:g,shouldBeInDOM$:R,itemDisabled$:p,itemBodyClass$:n,itemButtonClass$:r,itemBodyContainerClass$:I,itemHeaderClass$:f,...k}),patch:P,actions:{click:S},api:{initDone:()=>{D.set(!0)},collapse:()=>{l.set(!1)},expand:()=>{l.set(!0)},toggle:()=>{l.update(H=>!H)}},directives:{toggleDirective:A,buttonDirective:w(A,b(()=>({attributes:{type:"button",class:r()}}))),headerDirective:b(()=>({attributes:{class:f()}})),bodyDirective:b(()=>({attributes:{class:n()}})),bodyContainerDirective:w(ae(B.directives.directive),b(()=>({attributes:{id:m(()=>`${g()}-body-container`),class:I(),"aria-labelledby":m(()=>`${g()}-toggle`)}}))),accordionItemDirective:v}}}function ue(e){const[{closeOthers$:i,onShown$:a,onHidden$:n,className$:r,itemId$:I,itemAnimated$:f,itemClass$:T,itemDisabled$:V,itemVisible$:x,itemTransition$:O,itemDestroyOnHide$:j,itemBodyClass$:N,itemButtonClass$:l,itemBodyContainerClass$:E,itemHeaderClass$:p,itemHeadingTag$:k,onItemVisibleChange$:P,onItemHidden$:D,onItemShown$:_,slotItemStructure$:g,slotItemBody$:R,slotItemHeader$:B,...S},A]=J(t,e,ce),H={itemId:I,itemClass:T,itemAnimated:f,itemDisabled:V,itemVisible:x,itemTransition:O,itemDestroyOnHide:j,itemBodyClass:N,itemButtonClass:l,itemBodyContainerClass:E,itemHeaderClass:p,itemHeadingTag:k,onItemVisibleChange:P,onItemHidden:D,onItemShown:_,slotItemStructure:g,slotItemBody:R,slotItemHeader:B},C=ie(),W=m(()=>{const s=[];return C().forEach(o=>{o.state$().itemVisible&&s.push(o.state$().itemId)}),s}),z=K(W()[0]),X=m(()=>{i()&&(de(C(),W(),z()),z.set(W()[0]))}),Y=m(()=>{X()});return{...L({itemsWidget$:C,className$:r,...S}),patch:A,actions:{},api:{expand:s=>{var o;(o=F(C(),s))==null||o.api.expand()},collapse:s=>{var o;(o=F(C(),s))==null||o.api.collapse()},toggle:s=>{var o;(o=F(C(),s))==null||o.api.toggle()},expandAll:()=>{C().forEach(s=>s.api.expand())},collapseAll:()=>{C().forEach(s=>s.api.collapse())},registerItem:s=>{const o=le(a,n,{config:Z(q,ee(q,s==null?void 0:s.config),H),props:s==null?void 0:s.props});return o.directives.accordionItemDirective=w(()=>({destroy:C.register(o)}),b(()=>({attributes:{class:o.stores.itemClass$,id:o.stores.itemId$}}))),o}},directives:{accordionDirective:w(se(Y),b(()=>({attributes:{class:r()},classNames:{"au-accordion":!0}})))}}}const Ie={itemTransition:ne},ge=re(ue,{},{},Ie),Ce=ge,$e=e=>{const a=new RegExp("^h[1-6]$").test(e.headerTag)?e.headerTag:"h2";return c.jsx(a,{className:"accordion-header",...y(e.directive),children:e.children})},be=e=>c.jsx("div",{className:"accordion-collapse",...y(e.widget.directives.bodyContainerDirective),children:c.jsx("div",{className:"accordion-body",...y(e.widget.directives.bodyDirective),children:c.jsx(M,{slotContent:e.state.slotItemBody,props:e})})}),U=h.createContext({}),he=e=>c.jsxs(c.Fragment,{children:[c.jsx($e,{directive:e.widget.directives.headerDirective,headerTag:e.state.itemHeadingTag,children:c.jsx("button",{className:"accordion-button",...y(e.widget.directives.buttonDirective),children:c.jsx(M,{slotContent:e.state.slotItemHeader,props:e})})}),e.state.shouldBeInDOM&&c.jsx(be,{...e})]}),fe={slotItemStructure:he},Te=h.forwardRef(function(i,a){const{registerItem:n}=h.useContext(U),[r,I]=G(n,i,null,{...fe}),f={state:r,widget:I};return h.useImperativeHandle(a,()=>I.api,[]),h.useEffect(()=>{I.api.initDone()},[]),c.jsx("div",{className:`accordion-item ${r.itemClass}`,...y(I.directives.accordionItemDirective),children:c.jsx(M,{slotContent:r.slotItemStructure,props:f})})}),Ve=h.forwardRef(function(i,a){const n=G(Ce,i,"accordion")[1];return h.useImperativeHandle(a,()=>n.api,[]),c.jsx(U.Provider,{value:n.api,children:c.jsx("div",{className:"accordion",...y(n.directives.accordionDirective),children:i.children})})});export{Ve as A,Te as a};
