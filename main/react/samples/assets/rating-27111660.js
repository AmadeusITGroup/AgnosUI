import{n as d,c as s,w as F}from"./func-f2d0b1ef.js";import{w as N,c as P,s as T,I as _}from"./stores-95180340.js";import{d as H,e as h,i as I,t as f,a as c,b as m}from"./writables-d5389633.js";const R={rating:0,tabindex:0,maxRating:10,disabled:!1,readonly:!1,resettable:!0,ariaValueTextFn:(e,g)=>`${e} out of ${g}`,onHover:d,onLeave:d,onRatingChange:d,className:"",slotStar:({fill:e})=>String.fromCharCode(e===100?9733:9734),ariaLabel:"Rating",ariaLabelledBy:""};function E(){return{...R}}const M={rating:h,tabindex:h,maxRating:{normalizeValue:e=>I(e)?Math.max(0,e):_},disabled:f,readonly:f,resettable:f,ariaValueTextFn:c,onHover:c,onLeave:c,onRatingChange:c,className:m,ariaLabel:m,ariaLabelledBy:m};function z(e){const[{rating$:g,tabindex$:v,ariaValueTextFn$:y,onHover$:w,onLeave$:x,onRatingChange$:L,...u},r]=N(R,e,M),{maxRating$:n,disabled$:$,readonly$:V,resettable$:A}=u,C=s(()=>$()?-1:v()),i=P(L,[g,n],([a,t])=>H(a,t)),l=F(0),o=s(()=>!$()&&!V()),b=s(()=>{const a=i(),t=l();return t!==0?t:a}),k=s(()=>y()(b(),n())),D=s(()=>{const a=b();return Array.from({length:n()},(t,p)=>({fill:Math.round(Math.max(Math.min(a-p,1),0)*100),index:p}))});return{...T({ariaValueText$:k,isInteractive$:o,rating$:i,stars$:D,tabindex$:C,visibleRating$:b,...u}),patch:r,actions:{click:a=>{o()&&a>0&&a<=n()&&r({rating:i()===a&&A()?0:a})},hover:a=>{o()&&a>0&&a<=n()&&(l.set(a),w()(a))},leave:()=>{o()&&(x()(l()),l.set(0))},handleKey(a){if(o()){const{key:t}=a;switch(t){case"ArrowLeft":case"ArrowDown":r({rating:i()-1});break;case"ArrowRight":case"ArrowUp":r({rating:i()+1});break;case"Home":case"PageDown":r({rating:0});break;case"End":case"PageUp":r({rating:n()});break;default:return}a.preventDefault(),a.stopPropagation()}}},directives:{},api:{}}}export{z as c,E as g};
