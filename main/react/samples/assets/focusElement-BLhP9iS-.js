import{n as l,f as v,E as b,b as h,m as g,k as y}from"./dom-BPD8lUxd-BmYWB-gd.js";import{i as E}from"./isFocusable-Ckwus82R-adOM025a.js";const S=()=>{const e=Math.abs(window.innerWidth-document.documentElement.clientWidth),t=document.body,r=t.style,{overflow:o,paddingRight:s}=r;if(e>0){const n=parseFloat(window.getComputedStyle(t).paddingRight);r.paddingRight=`${n+e}px`}return r.overflow="hidden",()=>{e>0&&(r.paddingRight=s),r.overflow=o}};let c=l;const T=()=>{c(),c=S()},x=()=>{c(),c=l},W=v((e,t)=>{let r,o;const s=()=>{o&&(o.parentNode?.replaceChild(e,o),o=null)},n=i=>{if(i!==r&&(i?.container!==r?.container||i?.insertBefore!==r?.insertBefore)){r=i;const d=r?.container??r?.insertBefore?.parentElement;if(d){const p=r?.insertBefore??null;(e.parentElement!==d||e.nextSibling!==p)&&(o||(o=e.parentNode?.insertBefore(e.ownerDocument.createComment("portal"),e)),d.insertBefore(e,p))}else s()}};return n(t),{update:n,destroy:()=>{s(),e.parentNode?.removeChild(e)}}}),R="data-agnos-ignore-inert",w=e=>{const t=new Map,r=o=>{const s=o.parentElement;s&&o!==document.body&&(Array.from(s.children).forEach(n=>{n!==o&&n.nodeName!=="SCRIPT"&&!n.hasAttribute(R)&&(t.set(n,n.hasAttribute("inert")),n.toggleAttribute("inert",!0))}),r(s))};return r(e),()=>t.forEach((o,s)=>{s.toggleAttribute("inert",o)})};let u=l;const k=e=>{u(),u=e?w(e):l},{directive:B,elements$:C}=b(),N=h(()=>{const e=C();return e[e.length-1]},{equal:Object.is}),I=h(()=>k(N())),F=g(B,y(I)),a=[];let m=!1;const A=()=>{m=!1;const e=[];for(;a.length>0;){const t=a[a.length-1];if(t.element){e.push(t.element);break}else t.previousElement&&e.push(t.previousElement),a.pop()}for(const t of e)if(E(t)){t.focus();return}},f=()=>{m||(m=!0,setTimeout(A,0))},M=v(e=>{const t={element:e,previousElement:document.activeElement};return a.push(t),f(),{destroy(){t.element=null,f()}}});export{T as a,M as f,W as p,x as r,F as s};
