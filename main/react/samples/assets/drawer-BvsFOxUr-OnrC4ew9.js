import{j as t,r as ge}from"./App-XYQ6f2LA.js";import{S as E}from"./slot-BM2EyfWv.js";import{u as y}from"./directive-Ds3K8r_f-DG_WK-AZ.js";import{P as $e}from"./portal-CX8X69NK-PpUSpBRh.js";import{u as De}from"./config-CkvKUh6q.js";import{n as c,b as r,d as ke,g as M,h as ye,m as p,a as m,r as D,i as ze,w as I,u as O,j as xe,k as Se}from"./dom-iY0R3D7u-CJOgBizl.js";import{p as W,r as je,a as Ce,s as Me,f as Ee}from"./focusElement-BQGVZb10.js";import{c as Te}from"./pointerdownPosition-DHOztIWG.js";import{c as L}from"./baseTransitions-5ZmnKnJD.js";import{w as He,b as Ne,s as Ve,t as f}from"./stores-CSnOqq8b.js";import{c as R}from"./widget-JYCCuZ7L.js";import{c as v,d as Pe,b as d,e as Be,t as k}from"./writables-Is1bF1Vt-BaJZg7lP.js";import{e as Ae}from"./extendWidget-DsEoDc5i.js";import{c as Ie,a as Oe}from"./collapse-CVjUhnIz-CiwcH5qv.js";import{f as We}from"./fade-uOobJKgw-BVCq47My.js";const Le={animated:!0,ariaDescribedBy:"",ariaLabelledBy:"",backdropClass:"",backdropTransition:c,className:"w-full",visible:!1,container:typeof window<"u"?document.body:null,transition:c,verticalTransition:c,onHidden:c,onShown:c,onSizeChange:c,onVisibleChange:c,onMinimizedChange:c,onMaximizedChange:c,onResizingChange:c,resizable:!1,backdrop:!0,bodyScroll:!1,size:null,focusOnInit:!0},Re={animated:v,ariaDescribedBy:k,ariaLabelledBy:k,backdropClass:k,backdropTransition:d,className:k,visible:v,transition:d,verticalTransition:d,container:Be,onHidden:d,onShown:d,onSizeChange:d,onVisibleChange:d,onMinimizedChange:d,onMaximizedChange:d,onResizingChange:d,resizable:v,backdrop:v,bodyScroll:v,size:Pe,focusOnInit:v},Fe=R("drawer",i=>{const[{backdrop$:s,backdropTransition$:a,backdropClass$:T,bodyScroll$:H,transition$:F,verticalTransition$:X,visible$:Y,container$:h,className$:w,size$:_,animated$:z,ariaDescribedBy$:q,ariaLabelledBy$:U,onHidden$:G,onShown$:J,onSizeChange$:K,onVisibleChange$:Q,onMinimizedChange$:Z,onMaximizedChange$:ee,onResizingChange$:b,focusOnInit$:ie,...te},re]=He(Le,i,Re),x=Ne(_,K,e=>e&&Math.round(e)),g=r(()=>["block-start","block-end"].some(n=>w().includes(n))),l=L({props:{animated:z,animatedOnInit:z,transition:ke(r(()=>g()?X():F())),visible:Y,onVisibleChange:Q,onHidden:G,onShown:J}}),se=M(W,r(()=>({container:h()}))),{directive:ae,element$:S}=ye(),ne=p(ae,m(()=>({attributes:{class:w,role:D("dialog"),"aria-describedby":q,"aria-labelledby":U,"aria-modal":D("true"),tabIndex:D("-1")},styles:{position:r(()=>{const e=h();return e&&ze(e)&&e!==document.body?"relative":"fixed"}),outline:D("none")},events:{keydown:async e=>{e.key==="Escape"&&await l.api.hide()}}}))),N=L({props:{animated:z,transition:a}}),oe=M(W,r(()=>{const e=h(),n=e?l.stores.element$():void 0;return{container:e,insertBefore:n?.parentElement===e?n:void 0}})),ce=r(()=>(H()||(C()?je():Ce()),!s()||C())),de=m(()=>({attributes:{class:T,"data-agnos-ignore-inert":f},events:{click:async()=>await l.api.hide()}})),le=r(()=>["inline-start","block-start"].some(e=>w().includes(e))?1:-1),V=I(void 0),P=I(void 0);function j(e){const n=S(),o=g();e=Math.round(Math.max(0,e)),n.style[o?"height":"width"]=`${e}px`;const u=Math.round(n[o?"offsetHeight":"offsetWidth"]);return x.set(u),V.set(e!=null&&(e<u||e===0)),P.set(!!e&&e>u),u}const pe=p(Te(e=>{const n=S(),o=g(),u=n[o?"offsetHeight":"offsetWidth"],A=o?"clientY":"clientX",fe=e[A],he=le();let $=!1;return{onMove(we){j(u+he*(we[A]-fe)),$||($=!0,b()(!0))},onEnd(){n.style[o?"height":"width"]="",$&&(b()(!1),$=!1)}}}),m(()=>({events:{keydown:e=>{const{key:n}=e,o=x()||S()?.[g()?"offsetHeight":"offsetWidth"];if(o!=null)switch(n){case"ArrowLeft":case"ArrowDown":b()(!0),j(o-10),b()(!1);break;case"ArrowRight":case"ArrowUp":b()(!0),j(o+10),b()(!1);break}}}}))),B=l.stores.visible$,me=r(()=>l.stores.transitioning$()||N.stores.transitioning$()),C=r(()=>!me()&&!B()),be=r(()=>{const e=V();e!=null&&O(()=>Z()(e))}),ue=r(()=>{const e=P();e!=null&&O(()=>ee()(e))}),ve=r(()=>{be(),ue()});return{...Ve({...te,backdropClass$:T,className$:w,container$:h,size$:x,visible$:B,backdropHidden$:ce,hidden$:C}),patch:re,api:{open:l.api.show,close:l.api.hide},directives:{drawerPortalDirective:se,drawerDirective:p(Se(ve),ne,M(Me,r(()=>!H())),l.directives.directive,xe(Ee,ie)),backdropPortalDirective:oe,backdropDirective:p(N.directives.directive,de),splitterDirective:pe}}}),Xe={structure:void 0,header:void 0,children:void 0},Ye={structure:void 0,header:void 0,children:void 0},_e={backdropTransition:We,transition:Oe,verticalTransition:Ie},qe=R("drawer",i=>{const s=Ae(Fe,Xe,Ye,_e)(i);return{...s,directives:{...s.directives,drawerDirective:p(m(()=>({classNames:{"au-drawer":f,show:s.stores.visible$},styles:{"--bs-drawer-size":r(()=>{const a=s.stores.size$();return a==null?void 0:a+"px"})}})),s.directives.drawerDirective),backdropDirective:p(s.directives.backdropDirective,m(()=>({classNames:{"au-drawer-backdrop":f,show:s.stores.visible$}}))),splitterDirective:p(s.directives.splitterDirective,m(()=>({classNames:{"au-splitter":f}}))),containerDirective:m(()=>({classNames:{"au-drawer-container":f}}))}}}),Ue=qe,Ge=({directives:i})=>t.jsx("div",{...y(i.backdropDirective)}),Je=i=>t.jsxs("div",{...y(i.directives.drawerDirective),children:[t.jsx("div",{...y(i.directives.containerDirective),children:t.jsx(E,{slotContent:i.state.structure,props:i})}),i.state.resizable&&t.jsx(Qe,{...i})]}),Ke=i=>t.jsx(t.Fragment,{children:t.jsxs("div",{className:"au-drawer-content",children:[t.jsx("div",{className:"au-drawer-header",children:t.jsx(E,{slotContent:i.state.header,props:i})}),t.jsx("div",{className:"au-drawer-body",children:t.jsx(E,{slotContent:i.state.children,props:i})})]})}),Qe=i=>t.jsx("div",{...y(i.directives.splitterDirective),tabIndex:0}),Ze={structure:Ke};function fi({ref:i,...s}){const a=De(Ue,s,{...Ze});return ge.useImperativeHandle(i,()=>a.api,[a.api]),t.jsxs($e,{container:a.state.container,children:[!a.state.backdropHidden&&t.jsx(Ge,{...a}),!a.state.hidden&&t.jsx(Je,{...a})]})}export{fi as D};
