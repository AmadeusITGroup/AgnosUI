import{w as k,m as F,n as q,s as W,i as z,t as M}from"./stores-CmUTCjpT.js";import{c as _}from"./baseTransitions-DIGqKq6i.js";import{n as f,q as G,b as n,w as j,m as I,a as p,k as J,d as T,r as O}from"./dom-BPD8lUxd-BmYWB-gd.js";import{t as s,b as g,c as C,f as E}from"./writables-DYGjj5T3-rf9CR7xD.js";import{c as K}from"./widget-Dn9xc9k2.js";function Q(m,t,r){let l;return t.length==2?(r=r??t[0],l=t.find(c=>c!==r)):t.length>2&&(l=t[0]),l&&m.forEach(c=>{c.stores.id$()!==l&&c.stores.visible$()&&c.patch({visible:!1})}),m}function V(m,t){return m.find(r=>r.stores.id$()===t)}const o={closeOthers:!1,onItemShown:f,onItemHidden:f,className:"",itemDestroyOnHide:!0,itemAnimated:!0,itemTransition:f,itemHeadingLevel:2,itemClassName:"",itemHeaderClassName:"",itemButtonClassName:"",itemBodyContainerClassName:"",itemBodyClassName:""},S={id:"",destroyOnHide:o.itemDestroyOnHide,disabled:!1,visible:!1,animated:o.itemAnimated,transition:o.itemTransition,onShown:f,onHidden:f,onVisibleChange:f,className:o.itemClassName,headerClassName:o.itemHeaderClassName,buttonClassName:o.itemButtonClassName,bodyContainerClassName:o.itemBodyContainerClassName,bodyClassName:o.itemBodyClassName,headingLevel:o.itemHeadingLevel},R=Object.keys(S);function oe(){return{...o}}const U={closeOthers:C,onItemShown:g,onItemHidden:g,className:s,itemDestroyOnHide:C,itemAnimated:C,itemTransition:g,itemClassName:s,itemHeaderClassName:s,itemButtonClassName:s,itemBodyContainerClassName:s,itemBodyClassName:s,itemHeadingLevel:E([1,2,3,4,5,6])},X={id:s,destroyOnHide:C,disabled:C,visible:C,animated:C,transition:g,onShown:g,onHidden:g,onVisibleChange:g,className:s,headerClassName:s,buttonClassName:s,bodyContainerClassName:s,bodyClassName:s,headingLevel:E([1,2,3,4,5,6])};function Y(m){const[{bodyClassName$:t,buttonClassName$:r,bodyContainerClassName$:l,headerClassName$:c,animated$:$,transition$:B,destroyOnHide$:x,onShown$:h,onHidden$:y,onVisibleChange$:N,visible$:u,id$:a,disabled$:b,...v},L]=k(S,m,X),w=j(!1),e=z(a),i=_({props:{transition:B,visible:u,onVisibleChange:N,animated:$,animatedOnInit:!1,initDone:w,onHidden:()=>{y()()},onShown:()=>{h()()}}}),H=n(()=>!x()||!i.stores.hidden$()),D=p(()=>({attributes:{id:n(()=>`${e()}-toggle`),"aria-expanded":n(()=>`${u()}`),"aria-disabled":n(()=>`${b()}`),"aria-controls":n(()=>`${e()}-body-container`),disabled:b},classNames:{collapsed:n(()=>!u())},events:{click:()=>{b()||i.api.toggle()}}})),A=i.directives.directive,d=p(()=>({attributes:{id:n(()=>`${e()}-body-container`),class:l,"aria-labelledby":n(()=>`${e()}-toggle`),role:O("region")}}));return{...W({visible$:u,id$:e,shouldBeInDOM$:H,disabled$:b,bodyClassName$:t,buttonClassName$:r,bodyContainerClassName$:l,headerClassName$:c,...v}),patch:L,api:{initDone:()=>{w.set(!0)},collapse:i.api.hide,expand:i.api.show,toggle:i.api.toggle},directives:{toggleDirective:D,buttonDirective:I(D,p(()=>({attributes:{type:O("button"),class:r}}))),headerDirective:p(()=>({attributes:{class:c}})),bodyDirective:p(()=>({attributes:{class:t}})),transitionDirective:A,bodyContainerAttrsDirective:d,bodyContainerDirective:I(A,d),itemDirective:f}}}function Z(m=Y,t=R,r=o,l=U){return K("accordion",c=>{const[$,B]=k(r,c,l),{closeOthers$:x,onItemShown$:h,onItemHidden$:y,className$:N}=$,u=Object.fromEntries(Object.entries($).filter(e=>e[0].startsWith("item")).map(e=>[e[0].charAt(4).toLowerCase()+e[0].slice(5,-1),e[1]])),a=G(),b=n(()=>{const e=[];return a().forEach(i=>{i.stores.visible$()&&e.push(i.stores.id$())}),e}),v=j(b()[0]),L=n(()=>{x()&&(Q(a(),b(),v()),v.set(b()[0]))}),w=n(()=>{L()});return{...W({itemWidgets$:a,className$:N}),patch:B,api:{expand:async e=>{await V(a(),e)?.api.expand()},collapse:async e=>{await V(a(),e)?.api.collapse()},toggle:async e=>{await V(a(),e)?.api.toggle()},expandAll:async()=>{await Promise.all(a().map(e=>e.api.expand()))},collapseAll:async()=>{await Promise.all(a().map(e=>e.api.collapse()))},registerItem:e=>{const i=t,H=F(i,q(i,e?.config),u),[{onHidden$:D,onShown$:A}]=k({onHidden:S.onHidden,onShown:S.onShown},{config:H,props:e?.props}),d=m({config:H,props:{...e?.props,onHidden:T(O(()=>{y()(d.stores.id$()),D()?.()}),P=>{y.set(P)}),onShown:T(O(()=>{h()(d.stores.id$()),A()?.()}),P=>{h.set(P)})}});return d.directives.itemDirective=I(()=>({destroy:a.register(d)}),p(()=>({attributes:{class:d.stores.className$,id:d.stores.id$}}))),d}},directives:{accordionDirective:I(J(w),p(()=>({attributes:{class:N},classNames:{"au-accordion":M}})))}}})}const ne=Z();export{ne as a,Y as c,Z as f,oe as g};
