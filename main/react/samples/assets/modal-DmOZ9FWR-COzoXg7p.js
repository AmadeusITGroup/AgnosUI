import{a as Q,j as n,r as E,c as U}from"./App-DHhP8U0X.js";import{c as l,b as d,w as X,r as Y,s as Z,t as ee}from"./stores-B4F_j8QF.js";import{t as b,b as w,a as v,c as te}from"./writables-DoU_XYTX-B5IK4zXo.js";import{c as H}from"./baseTransitions-DcuwCp5y.js";import{f as R}from"./fade-7-Etejps-DC7UaWZU.js";import{p as oe}from"./promise-CY2U8bTP-B6m5TA-Q.js";import{c as ne,m as I,d as V,r as re,a as M,b as O}from"./directive-GSGkMcBJ.js";import{S as h}from"./slot-Is8FqGrj.js";import{u as ie}from"./config-BbThgUal.js";import{u as F}from"./directive-CX0hxCpP-Cj2tDrhJ.js";const P=(e,r)=>{let t,o;const i=()=>{var a;o&&((a=o.parentNode)==null||a.replaceChild(e,o),o=null)},s=a=>{var m,g;if(a!==t&&((a==null?void 0:a.container)!==(t==null?void 0:t.container)||(a==null?void 0:a.insertBefore)!==(t==null?void 0:t.insertBefore))){t=a;const f=(t==null?void 0:t.container)??((m=t==null?void 0:t.insertBefore)==null?void 0:m.parentElement);if(f){const $=(t==null?void 0:t.insertBefore)??null;(e.parentElement!==f||e.nextSibling!==$)&&(o||(o=(g=e.parentNode)==null?void 0:g.insertBefore(e.ownerDocument.createComment("portal"),e)),f.insertBefore(e,$))}else i()}};return s(r),{update:s,destroy:()=>{var a;i(),(a=e.parentNode)==null||a.removeChild(e)}}},se=e=>{const r=new Map,t=o=>{const i=o.parentElement;i&&o!==document.body&&(Array.from(i.children).forEach(s=>{s!==o&&s.nodeName!=="SCRIPT"&&(r.set(s,s.hasAttribute("inert")),s.toggleAttribute("inert",!0))}),t(i))};return t(e),()=>r.forEach((o,i)=>{i.toggleAttribute("inert",o)})};let A=d;const ae=e=>{A(),A=e?se(e):d},{directive:le,elements$:ce}=ne(),de=l(()=>{const e=ce();return e[e.length-1]},{equal:Object.is}),me=l(()=>ae(de())),ue=I(le,V(me)),pe=()=>{const e=Math.abs(window.innerWidth-document.documentElement.clientWidth),r=document.body,t=r.style,{overflow:o,paddingRight:i}=t;if(e>0){const s=parseFloat(window.getComputedStyle(r).paddingRight);t.paddingRight=`${s+e}px`}return t.overflow="hidden",()=>{e>0&&(t.paddingRight=i),t.overflow=o}};let y=d;const ve=()=>{y(),y=pe()},fe=()=>{y(),y=d},be=Symbol(),he=Symbol(),ge={animated:!0,ariaCloseButtonLabel:"Close",backdrop:!0,backdropClass:"",backdropTransition:R,closeButton:!0,closeOnOutsideClick:!0,container:typeof window<"u"?document.body:null,className:"",modalTransition:R,onBeforeClose:d,onVisibleChange:d,onHidden:d,onShown:d,slotDefault:void 0,slotFooter:void 0,slotHeader:void 0,slotStructure:void 0,slotTitle:void 0,visible:!1,contentData:void 0},$e={animated:b,ariaCloseButtonLabel:w,backdrop:b,backdropClass:w,backdropTransition:v,closeButton:b,closeOnOutsideClick:b,container:te,className:w,modalTransition:v,onBeforeClose:v,onVisibleChange:v,onHidden:v,onShown:v,visible:b},W=re(),Ce=l(()=>W().length>0),Se=l(()=>{Ce()?ve():fe()}),ke=l(()=>{Se()});function ye(e){const[{animated$:r,backdrop$:t,backdropTransition$:o,closeOnOutsideClick$:i,container$:s,modalTransition$:a,onBeforeClose$:m,onVisibleChange$:g,onHidden$:f,onShown$:$,visible$:j,...L},C]=X(ge,e,$e),u=H({props:{transition:a,visible:j,animated:r,animatedOnInit:r,onVisibleChange:g,onHidden:f,onShown:$}}),D=u.stores.visible$,N=H({props:{transition:o,visible:j,animated:r,animatedOnInit:r}}),x=l(()=>u.stores.transitioning$()||t()&&N.stores.transitioning$()),S=l(()=>!x()&&!D()),_=l(()=>!t()||S());let k;const B=c=>{k=c;const p={get result(){return k},set result(K){k=K},cancel:!1};m()(p),!p.cancel&&C({visible:!1})},q=M(P,l(()=>({container:s()}))),z=M(P,l(()=>{const c=s(),p=c?u.stores.element$():void 0;return{container:c,insertBefore:(p==null?void 0:p.parentElement)===c?p:void 0}})),G=Y(void 0,()=>W.register(T)),J=l(()=>{u.stores.elementPresent$()&&!S()&&G(),ke()}),T={...Z({backdropHidden$:_,container$:s,hidden$:S,transitioning$:x,visible$:D,modalElement$:u.stores.element$,...L}),directives:{modalPortalDirective:q,backdropPortalDirective:z,backdropDirective:O(N.directives.directive),modalDirective:I(O(u.directives.directive),ue,V(J))},patch:C,api:{close:B,async open(){return C({visible:!0}),await oe(S).promise,k},patch:C},actions:{modalClick(c){c.currentTarget===c.target&&i()&&B(be)},closeButtonClick(c){B(he)}}};return T}const je=ye,Be=({children:e,container:r})=>r?Q.createPortal(e,r):n.jsx(n.Fragment,{children:e}),we=e=>n.jsxs(n.Fragment,{children:[n.jsx("h5",{className:"modal-title",children:n.jsx(h,{slotContent:e.state.slotTitle,props:e})}),e.state.closeButton?n.jsx("button",{type:"button",className:"btn-close","aria-label":e.state.ariaCloseButtonLabel,onClick:e.widget.actions.closeButtonClick}):null]}),De=e=>n.jsxs(n.Fragment,{children:[e.state.slotTitle?n.jsx("div",{className:"modal-header",children:n.jsx(h,{slotContent:e.state.slotHeader,props:e})}):null,n.jsx("div",{className:"modal-body",children:n.jsx(h,{slotContent:e.state.slotDefault,props:e})}),e.state.slotFooter?n.jsx("div",{className:"modal-footer",children:n.jsx(h,{slotContent:e.state.slotFooter,props:e})}):null]}),Ne={slotHeader:we,slotStructure:De},xe=E.forwardRef(function(r,t){const[o,i]=ie(je,r,"modal",{...Ne,slotDefault:r.children});E.useImperativeHandle(t,()=>i.api,[]);const s=F(i.directives.backdropDirective),a=F(i.directives.modalDirective),m={state:o,widget:ee(i)};return n.jsxs(Be,{container:o.container,children:[o.backdropHidden?null:n.jsx("div",{className:`modal-backdrop ${o.backdropClass}`,ref:s}),o.hidden?null:n.jsx("div",{className:`modal d-block ${o.className}`,ref:a,onClick:i.actions.modalClick,children:n.jsx("div",{className:"modal-dialog",children:n.jsx("div",{className:"modal-content",children:n.jsx(h,{slotContent:o.slotStructure,props:m})})})})]})});async function Ve(e){const r=U.createRoot(document.createElement("div"));try{return await(await new Promise(o=>{r.render(n.jsx(xe,{...e,ref:o}))})).open()}finally{r.unmount()}}export{xe as M,be as a,he as m,Ve as o};
