var oe=(t,e,s)=>{if(!e.has(t))throw TypeError("Cannot "+s)};var c=(t,e,s)=>(oe(t,e,"read from private field"),s?s.call(t):e.get(t)),f=(t,e,s)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,s)},l=(t,e,s,n)=>(oe(t,e,"write to private field"),n?n.call(t,s):e.set(t,s),s);var Se=(t,e,s,n)=>({set _(i){l(t,e,i,s)},get _(){return c(t,e,n)}}),b=(t,e,s)=>(oe(t,e,"access private method"),s);var ge;const se=typeof Symbol=="function"&&Symbol.observable||"@@observable",le=Symbol(),N=()=>{},K=()=>{};K.unsubscribe=K;const ce=(t,e)=>{const s=t?t[e]:null;return typeof s=="function"?s.bind(t):N},Ne=t=>({next:typeof t=="function"?t.bind(null):ce(t,"next"),pause:ce(t,"pause"),resume:ce(t,"resume"),_value:void 0,_valueIndex:0,_paused:!1}),Ue=function(){return this},fe=t=>{if(!t)return K;if(t.unsubscribe===t)return t;const e=typeof t=="function"?()=>t():()=>t.unsubscribe();return e.unsubscribe=e,e},ae=new WeakSet,Re=t=>{let e=t.subscribe;return ae.has(e)||(e=(...s)=>fe(t.subscribe(...s)),ae.add(e)),e},ne=t=>{const e="subscribe"in t?t:t[se]();return Re(e)},We=t=>{let e;return t(s=>e=s)(),e};function q(t,e){const s=ne(t),n=Object.assign(()=>be(n),e,{subscribe:s,[se]:Ue});return n}const Ie=function(t){this.set(t(Ee(()=>be(this))))};function de(t,e){return q(t,typeof e=="function"?{set:e,update:Ie}:{...e,set:(e==null?void 0:e.set)??N,update:(e==null?void 0:e.update)??(e!=null&&e.set?Ie:N)})}const S=Symbol(),qe=Symbol();let ue=!1;const W=new Set,Be=1e3,he=t=>{if(t>Be)throw new Error("reached maximum number of store changes in one shot")},U=t=>{const e=!ue;e&&(ue=!0);try{return t()}finally{if(e)try{const s=new Map;for(const n of W){const i=s.get(n)??0;he(i),s.set(n,i+1),W.delete(n),n[qe]()}}finally{W.clear(),ue=!1}}},ke=t=>We(ne(t));let $=ke;const be=t=>$(t),_e=t=>({[t]:!0,[t-1]:!1,0:!1}),F=Symbol(),Ae=(t,e)=>Object.is(t,e)&&(!t||typeof t!="object")&&typeof t!="function";var _,O,w,C,k,V,j,X,xe,Y,Oe,z,G;class ve{constructor(e){f(this,X);f(this,Y);f(this,z);f(this,_,void 0);f(this,O,void 0);f(this,w,void 0);f(this,C,void 0);f(this,k,void 0);f(this,V,void 0);f(this,j,void 0);l(this,_,new Set),l(this,O,null),l(this,w,!1),l(this,C,1),l(this,V,_e(1)),l(this,j,new WeakMap),this[ge]=!1,l(this,k,e)}[(ge=F,qe)](){const e=c(this,C);for(const s of[...c(this,_)]){if(c(this,w)||c(this,C)!==e)return;s._valueIndex!==0&&b(this,z,G).call(this,s)}}[S](){}equal(e,s){return!this.notEqual(e,s)}notEqual(e,s){return!Ae(e,s)}pauseSubscribers(){if(!c(this,w)){l(this,w,!0),W.delete(this);for(const e of[...c(this,_)])e._valueIndex===0||e._paused||(e._paused=!0,e.pause())}}resumeSubscribers(){c(this,w)&&(l(this,w,!1),U(()=>{W.add(this)}))}set(e){const s=this[F];if(s||!this.equal(c(this,k),e)){const n=c(this,C)+1;l(this,C,n),l(this,k,e),l(this,V,_e(n)),s&&delete c(this,V)[n-1],this.pauseSubscribers()}this.resumeSubscribers()}update(e){this.set(e(c(this,k)))}onUse(){}subscribe(e){const s=Ne(e),n=e==null?void 0:e[le];if(n){const r=c(this,j).get(n);r&&(s._value=r._value,s._valueIndex=r._valueIndex)}c(this,_).add(s),U(()=>{c(this,_).size==1?b(this,X,xe).call(this):this[S]()}),b(this,z,G).call(this,s);const i=()=>{const r=c(this,_).delete(s);s.next=N,s.pause=N,s.resume=N,r&&(c(this,j).set(i,s),c(this,_).size===0&&b(this,Y,Oe).call(this))};return i[S]=()=>{this[S](),b(this,z,G).call(this,s)},i.unsubscribe=i,i}[se](){return this}}_=new WeakMap,O=new WeakMap,w=new WeakMap,C=new WeakMap,k=new WeakMap,V=new WeakMap,j=new WeakMap,X=new WeakSet,xe=function(){l(this,O,fe(this.onUse()))},Y=new WeakSet,Oe=function(){const e=c(this,O);e&&(l(this,O,null),e())},z=new WeakSet,G=function(e){const s=c(this,V),n=c(this,C),i=c(this,k);let r=s[e._valueIndex];r==null&&(r=!!this.equal(e._value,i),s[e._valueIndex]=r),e._valueIndex=n,r?!c(this,w)&&e._paused&&(e._paused=!1,e.resume()):(e._value=i,e._paused=!1,e.next(i))};function He(t){const e=s=>(s!=null&&s[le]||Ne(s).next(t),K);return ae.add(e),Object.assign(()=>t,{subscribe:e,[se]:Ue})}class Ve extends ve{constructor(e){super(e)}set(e){super.set(e)}update(e){super.update(e)}}const ie=(t,e)=>{const{onUse:s,equal:n,notEqual:i}=e;return s&&(t.onUse=function(){const r=o=>this.set(o);return r.set=r,r.update=o=>this.update(o),s(r)}),n&&(t.equal=function(r,o){return n(r,o)}),i&&(t.notEqual=function(r,o){return i(r,o)}),t};function pe(t,e={}){return typeof e=="function"&&(e={onUse:e}),e.onUse?q(ie(new Ve(t),e)):He(t)}function Q(t,e={}){typeof e=="function"&&(e={onUse:e});const s=ie(new Ve(t),e);return q(s,{set:s.set.bind(s),update:s.update.bind(s)})}function Qe(t){return t.length<=1}const Ge=t=>t();var B,H,g;class we extends ve{constructor(s,n){super(n);f(this,B,void 0);f(this,H,void 0);f(this,g,0);const i=Array.isArray(s);l(this,B,i),l(this,H,(i?[...s]:[s]).map(ne))}resumeSubscribers(){c(this,g)||super.resumeSubscribers()}onUse(){let s=!1,n=0;const i=c(this,B),r=c(this,H),o=new Array(r.length);let u=null;const v=()=>{const h=u;h&&(u=null,h())},d=(h=!1)=>{h&&(s=!0),s&&!c(this,g)&&(n&&(n=0,v(),u=fe(this.derive(i?o:o[0]))),this.resumeSubscribers())},a=r.map((h,y)=>{const p=re=>{o[y]=re,n|=1<<y,l(this,g,c(this,g)&~(1<<y)),d()};return p.next=p,p.pause=()=>{l(this,g,c(this,g)|1<<y),this.pauseSubscribers()},p.resume=()=>{l(this,g,c(this,g)&~(1<<y)),d()},h(p)}),I=(h,y)=>{var p;c(this,g)&1<<y&&((p=h[S])==null||p.call(h))};return this[S]=()=>{let h=0;for(;c(this,g)&&(he(++h),s=!1,a.forEach(I),!c(this,g));)d(!0)},d(!0),this[S](),()=>{this[S]=N,v(),a.forEach(Ge)}}}B=new WeakMap,H=new WeakMap,g=new WeakMap;function Je(t,e,s){typeof e=="function"&&(e={derive:e});const{derive:n,...i}=e,r=Qe(n)?class extends we{constructor(o,u){super(o,u),this[F]=!0}derive(o){this.set(n(o)),this[F]=!1}}:class extends we{derive(o){const u=v=>this.set(v);return u.set=u,u.update=v=>this.update(v),n(o,u)}};return q(ie(new r(t,s),{...i,onUse:void 0}))}const Ee=t=>{const e=$;try{return $=ke,t()}finally{$=e}},Ke=({unsubscribe:t})=>t(),Xe=({resubscribe:t})=>t();var L,D,A,m,P,Z,$e,ee,Te,E,R,x,T,te,je;class Ye extends ve{constructor(){super(void 0);f(this,Z);f(this,ee);f(this,E);f(this,x);f(this,te);f(this,L,!1);f(this,D,!1);f(this,A,0);f(this,m,new Map);f(this,P,s=>Ee(()=>b(this,ee,Te).call(this,s)));this[F]=!0}resumeSubscribers(){b(this,x,T).call(this)||super.resumeSubscribers()}[S](){var n;if(c(this,L))throw new Error("recursive computed");let s=0;for(;b(this,x,T).call(this);){he(++s),l(this,D,!0);try{for(const[,{pending:i,unsubscribe:r}]of c(this,m))i&&((n=r[S])==null||n.call(r))}finally{l(this,D,!1)}if(b(this,x,T).call(this))break;b(this,E,R).call(this)}}onUse(){return b(this,E,R).call(this,!0),this[S](),()=>c(this,m).forEach(Ke)}}L=new WeakMap,D=new WeakMap,A=new WeakMap,m=new WeakMap,P=new WeakMap,Z=new WeakSet,$e=function(s){const n={versionIndex:c(this,A),unsubscribe:N,resubscribe:N,pending:!1,usedValueIndex:0,value:void 0,valueIndex:0},i=r=>{n.value=r,n.valueIndex++,n.pending=!1,!c(this,D)&&!b(this,x,T).call(this)&&U(()=>b(this,E,R).call(this))};return i.next=i,i.pause=()=>{n.pending=!0,this.pauseSubscribers()},i.resume=()=>{n.pending=!1,!c(this,D)&&!b(this,x,T).call(this)&&U(()=>b(this,E,R).call(this))},n.resubscribe=()=>{n.unsubscribe=s(i),i[le]=n.unsubscribe},n.resubscribe(),n},ee=new WeakSet,Te=function(s){var i,r;let n=c(this,m).get(s);return n?(n.versionIndex=c(this,A),(r=(i=n.unsubscribe)[S])==null||r.call(i)):(n=b(this,Z,$e).call(this,ne(s)),c(this,m).set(s,n)),n.usedValueIndex=n.valueIndex,n.value},E=new WeakSet,R=function(s=!1){l(this,L,!0),l(this,D,!0);try{if(c(this,A)>0&&(s&&c(this,m).forEach(Xe),!b(this,te,je).call(this))){this.resumeSubscribers();return}Se(this,A)._++;const n=c(this,A),i=$;let r;try{$=c(this,P),r=this.compute()}finally{$=i}this.set(r),this[F]=!1;for(const[o,u]of c(this,m))u.versionIndex!==n&&(c(this,m).delete(o),u.unsubscribe())}finally{l(this,D,!1),l(this,L,!1)}},x=new WeakSet,T=function(){for(const[,{pending:s}]of c(this,m))if(s)return!0;return!1},te=new WeakSet,je=function(){for(const[,{valueIndex:s,usedValueIndex:n}]of c(this,m))if(s!=n)return!0;return!1};function M(t,e={}){const s=class extends Ye{compute(){return t()}};return q(ie(new s,{...e,onUse:void 0}))}const Pe=()=>{},ze=t=>t,yt=t=>({actions:t.actions,api:t.api,directives:t.directives,state$:t.state$,stores:t.stores}),Ce=Symbol();function Ze(t){return function(e){U(()=>{var s;for(const[n,i]of Object.entries(e??{}))(s=t[`${n}$`])==null||s.set(i)})}}function mt(t,e){if(t===e)return null;let s=!1;const n={},i=new Set([...Object.keys(t),...Object.keys(e)]);for(const r of i){const o=e[r];t[r]!==o&&(n[r]=o,s=!0)}return s?n:null}function et(t,e=pe(void 0),s={},n=Q(void 0)){const{normalizeValue:i=ze,equal:r=Object.is}=s,o=()=>t,u=(a,I=o)=>{const h=a===void 0?void 0:i(a);return h===Ce?(console.error("Not using invalid value",a),I()):h===void 0?I():h},v=M(()=>u(e()),{equal:r}),d=M(()=>u(n(),v),{equal:r});return de(d,a=>{if(a!==void 0){const I=i(a);if(I===Ce){console.error("Not setting invalid value",a);return}a=I}n.set(a)})}const ye=t=>!!(t&&typeof t=="function"&&"subscribe"in t),J=t=>ye(t)?t:pe(t),tt=t=>ye(t)?t:Q(t),st=(t,e)=>{const s={};if(e){const n=ye(e);for(const i of t)s[i]=n?M(()=>e()[i]):J(e[i])}return s},St=(t,e,s)=>{const n={};for(const i of t){const r=e==null?void 0:e[i],o=s==null?void 0:s[i];n[i]=r&&o?M(()=>r()??o()):r||o}return n},nt=(t,e,s)=>{const n={},i=Object.keys(t),r=st(i,e==null?void 0:e.config),o=e==null?void 0:e.props;for(const u of i){const v=o==null?void 0:o[u];n[`${u}$`]=et(t[u],r[u],s==null?void 0:s[u],tt(v))}return n},gt=(t,e,s)=>{const n=nt(t,e,s);return[n,Ze(n)]},It=t=>{const e=[],s=[],n={};for(const[i,r]of Object.entries(t))i.endsWith("$")&&(e.push(i.substring(0,i.length-1)),s.push(r),n[i]=q(r));return{stores:n,state$:M(()=>{const i=s.map(be),r={};return e.forEach((o,u)=>{r[o]=i[u]}),r})}},_t=(t,e,s=i=>i[0],n=(i,r)=>r===i)=>{let i=e[0]();return de(Je(e,{derive(r){const o=s(r),u=!n(r[0],o);return u&&e[0].set(o),(u||!n(i,o))&&(i=o,t()(o)),o},equal:n}),e[0].set.bind(e[0]))},wt=(t,e,s=ze,n=Ae)=>de(M(()=>s(t()),{equal:n}),i=>{const r=s(i);n(t(),r)||(t.set(r),e()(r))}),Ct=t=>{const e=t.length;if(e===0)return null;let s=t[0];for(let n=1;n<e&&s;n++){const i=t[n];for(;s&&s!==i;){const r=s.compareDocumentPosition(i);if(r&Node.DOCUMENT_POSITION_CONTAINED_BY)break;if(r&Node.DOCUMENT_POSITION_CONTAINS){s=i;break}else if(r&Node.DOCUMENT_POSITION_DISCONNECTED)return null;s=s.parentElement}}return s},Dt=(t=document.body)=>{me(t)&&t.getBoundingClientRect()},Nt=(t,e)=>{e&&e.length>0&&t.classList.add(...e)},Ut=(t,e)=>{e&&e.length>0&&t.classList.remove(...e)};function De(t,e,s,n){return t.addEventListener(e,s,n),function(){t.removeEventListener(e,s,n)}}let it=0;const qt=()=>`auId-${it++}`,Le=t=>t!=null&&t!==!1;function rt(t,e){let s=new Set;return e.subscribe(n=>{const i=new Set(`${n??""}`.split(" "));i.delete("");const r=t.classList;for(const o of s)i.has(o)||r.remove(o);i.size>0&&r.add(...i),s=i})}function ot(t,e,s){return s.subscribe(n=>{Le(n)?t.setAttribute(e,""+(n===!0?e:n)):t.removeAttribute(e)})}function ct(t,e,s){return e==="class"?rt(t,s):ot(t,e,s)}function ut(t,e,s){return s.subscribe(n=>{const i=t.style;i[e]=""+(Le(n)?n:"")})}function at(t,e,s){const n=s.subscribe(i=>{t.classList.toggle(e,i)});return()=>{n(),t.classList.remove(e)}}const me=t=>{var e;const s=((e=t==null?void 0:t.ownerDocument)==null?void 0:e.defaultView)??window;return t instanceof s.HTMLElement},Fe=t=>(e,s)=>{if(me(e))return t(e,s)},lt=(t,e)=>s=>{let n=!0,i;const r=e.subscribe(o=>{var u;n?(n=!1,i=t(s,o)):(u=i==null?void 0:i.update)==null||u.call(i,o)});return{destroy(){var o;(o=i==null?void 0:i.destroy)==null||o.call(i),r()}}},ft=pe(void 0),kt=t=>lt(t,ft),At=(t,e=!0)=>()=>{const s=t.subscribe(Pe);return{destroy:async()=>{e&&await 0,s()}}},xt=t=>(e,s)=>(t(s),{update:t}),Me={equal:Object.is},dt=()=>{const t=Q([],Me);return q(t,{register:e=>{let s=!1;return t.update(n=>[...n,e]),()=>{s||(s=!0,t.update(n=>{const i=n.indexOf(e);if(i>-1){const r=[...n];return r.splice(i,1),r}return n}))}}})},ht=()=>{const t=dt();return{elements$:q(t),directive:e=>({destroy:t.register(e)})}},Ot=()=>{const{directive:t,elements$:e}=ht();return{directive:Fe(t),elements$:e}},bt=()=>{const t=Q(null,Me);return{element$:q(t),directive:e=>{let s=!1;return t.update(n=>n?(console.error("The directive cannot be used on multiple elements.",n,e),n):(s=!0,e)),s?{destroy(){t.update(n=>e===n?null:n)}}:void 0}}},Vt=()=>{const{directive:t,element$:e}=bt();return{directive:Fe(t),element$:e}},Et=(...t)=>(e,s)=>{const n=U(()=>t.map(i=>i(e,s)));return{update(i){U(()=>n.forEach(r=>{var o;return(o=r==null?void 0:r.update)==null?void 0:o.call(r,i)}))},destroy(){U(()=>n.reverse().forEach(i=>{var r;return(r=i==null?void 0:i.destroy)==null?void 0:r.call(i)}))}}},$t=(t,e)=>{const s=[],n=i=>U(()=>{i.forEach((o,u)=>{var v,d,a,I;const[h,y]=Array.isArray(o)?o:[o,void 0],p=s[u];if(p){if(p.directive===h){p.arg!==y&&((d=(v=p.instance)==null?void 0:v.update)==null||d.call(v,y),p.arg=y);return}(I=(a=p.instance)==null?void 0:a.destroy)==null||I.call(a)}const re=h(t,y);s[u]={directive:h,instance:re,arg:y}}),s.splice(i.length).reverse().forEach(({instance:o})=>{var u;return(u=o==null?void 0:o.destroy)==null?void 0:u.call(o)})});return n(e),{update:n,destroy:()=>n([])}},vt=t=>(e,s)=>{const n=[],i=Q(s),{events:r,attributes:o,styles:u,classNames:v}=t(i);if(me(e))for(const[d,a]of Object.entries(r??{}))typeof a=="function"?n.push(De(e,d,a)):n.push(De(e,d,a.handler,a.options));for(const[d,a]of Object.entries(o??{}))a!=null&&n.push(ct(e,d,J(a)));for(const[d,a]of Object.entries(u??{}))a&&n.push(ut(e,d,J(a)));for(const[d,a]of Object.entries(v??{}))n.push(at(e,d,J(a)));return{update:d=>i.set(d),destroy:()=>n.forEach(d=>d())}},Tt=vt(t=>({attributes:{class:t}}));export{ye as A,U as B,mt as C,q as D,bt as E,_t as F,Je as G,xt as H,Ce as I,Ae as J,wt as K,Vt as L,Ot as M,lt as N,Ct as O,De as a,Fe as b,Tt as c,M as d,de as e,gt as f,dt as g,St as h,ze as i,Et as j,vt as k,At as l,$t as m,st as n,Pe as o,qt as p,kt as q,pe as r,It as s,yt as t,me as u,Ut as v,Q as w,Nt as x,Dt as y,nt as z};
