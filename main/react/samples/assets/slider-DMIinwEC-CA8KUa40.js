import{j as r,R as we}from"./App-DHhP8U0X.js";import{w as ye,c as u,o as je,a as Ve,s as Se,b as Me,t as Pe}from"./stores-B4F_j8QF.js";import{f as z,m as Re}from"./directive-DuBTvXZs.js";import{g as K,e as Y,h as Ee,t as D,a as T}from"./writables-DoU_XYTX-B5IK4zXo.js";import{c as Oe}from"./resizeObserver-BzB2j9SA.js";import{u as A}from"./directive-CX0hxCpP-DTIcVnUX.js";import{u as _e}from"./config-BbThgUal.js";import{S as f}from"./slot-Is8FqGrj.js";const ke=/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/;function W(e){var n;const d=(""+e).match(ke);return Math.max(0,(((n=d[1])==null?void 0:n.length)??0)-(+d[2]||0))}const B={min:0,max:100,stepSize:1,readonly:!1,disabled:!1,vertical:!1,className:"",ariaLabelHandle:e=>""+e,ariaValueText:e=>""+e,onValuesChange:Me,values:[0],showValueLabels:!0,showMinMaxLabels:!0,rtl:!1,slotStructure:void 0,slotLabel:({value:e})=>""+e,slotHandle:void 0},He={min:Y,max:Y,stepSize:Ee(0,1/0,{strict:!0}),readonly:D,disabled:D,vertical:D,ariaLabelHandle:T,ariaValueText:T,onValuesChange:T,values:K,showValueLabels:D,showMinMaxLabels:D,rtl:D},Ne=(e,n,d,o,c)=>{const w=Math.pow(10,c);if(e>=d)return d;if(e<=n)return n;const S=Math.floor((e-n)*w/o);return+(((e-n)*w%o<o/2?S:S+1)*o/w+n).toFixed(c)},R=(e,n,d,o)=>{n.update(c=>(c=[...c],c[e]=c[e]+d*o,c))},E=(e,n,d)=>e&&n?d?1:-1:e&&!n?-1:!e&&n?d?-1:1:!e&&!n?-1:1;function Fe(e){const[{min$:n,max$:d,stepSize$:o,rtl$:c,values$:w,ariaLabelHandle$:S,ariaValueText$:G,onValuesChange$:J,showValueLabels$:O,showMinMaxLabels$:_,...q},Q]=ye(B,e,He),{vertical$:v,disabled$:Z,readonly$:x}=q;let M=-1;const g=u(()=>{const a=n(),t=d();return a===t?B.min:Math.min(a,t)}),$=u(()=>{const a=n(),t=d();return a===t?B.max:Math.max(a,t)}),U=u(()=>Math.max(W(o()),W(g()),W($()))),I=u(()=>o()*Math.pow(10,U())),b=je(w,J,a=>{const t=g(),i=$(),l=I(),s=U();return a.map(m=>Ne(m,t,i,l,s))},K.equal),{directive:C,element$:ee}=z(),{directive:ae,element$:te}=z(),{directive:ie,element$:se}=z(),{directive:re,dimensions$:k}=Oe(),y=Ve({}),P=u(()=>{var a;return k(),y(),((a=ee())==null?void 0:a.getBoundingClientRect())??{}},{equal:Object.is}),le=u(()=>{var a;return k(),y(),((a=te())==null?void 0:a.getBoundingClientRect())??{}},{equal:(a,t)=>Object.is(a,t)}),ne=u(()=>{var a;return k(),y(),((a=se())==null?void 0:a.getBoundingClientRect())??{}},{equal:(a,t)=>Object.is(a,t)}),ce=u(()=>v()?P().top:P().left),H=u(()=>v()?P().height:P().width),X=u(()=>[...b()].sort((a,t)=>a-t)),oe=u(()=>b().map((a,t)=>({id:t,value:a})).sort((a,t)=>a.value-t.value)),ue=u(()=>{const a=S(),t=G();return oe().map((i,l)=>({...i,ariaLabel:a(i.value,l,i.id),ariaValueText:t(i.value,l,i.id)}))}),L=u(()=>b().map(a=>Le(a))),N=u(()=>[...L()].sort((a,t)=>a-t)),de=u(()=>le().width/H()*100),me=u(()=>ne().width/H()*100),be=u(()=>{if(_()){if(!O())return!0}else return!1;const a=de();return c()?!L().some(t=>100-t>100-a-1):!L().some(t=>t<a+1)}),ve=u(()=>{if(_()){if(!O())return!0}else return!1;const a=me();return c()?!L().some(t=>100-t<a+1):!L().some(t=>t>100-a-1)}),pe=u(()=>{const a=b();return a.length==2&&Math.abs(a[0]-a[1])<10}),j=u(()=>!Z()&&!x()),he=u(()=>{const a=N(),t=(a[0]+a[1])/2;return v()||a.length!=2?0:c()?100-t:t}),fe=u(()=>{const a=N(),t=100-(a[0]+a[1])/2;return v()&&a.length==2?c()?100-t:t:0}),ge=u(()=>{const a=v(),t=c();return L().map((i,l)=>({left:t?a?null:100-i:a?null:i,top:t?a?i:null:a?100-i:null}))}),$e=u(()=>{const a=v(),t=N(),i=c();return t.length===1?[{left:a||i?null:0,right:a?null:i?0:null,bottom:a?i?null:0:null,top:a&&i?0:null,width:a?100:t[0],height:a?t[0]:100}]:t.map((l,s,m)=>({left:a||i?null:l,right:a?null:i?m[s]:null,bottom:a?i?null:l:null,top:a&&i?m[s]:null,width:a?100:s===m.length-1?l:m[s+1]-l,height:a?s===m.length-1?l:m[s+1]-l:100})).slice(0,t.length-1)}),Le=a=>{const t=g();return(a-t)*100/($()-t)},De=a=>{const t=b();if(t.length===1)return 0;const i=X(),l=i.find(p=>p>a*100),s=l?i.indexOf(l):i.length-1,m=i[s-1]+(i[s]-i[s-1])/2,V=i[a*100<=m?s-1:s];return t.indexOf(V)},F=(a,t)=>{if(j()){const i=H(),l=ce();let s=v()?(i-a+l)/i:(a-l)/i;s=c()?1-s:s;const m=t??De(s),V=s*($()-g())+g();b.update(p=>(p=[...p],p[m]=V,p))}};return{...Se({min$:g,max$:$,stepSize$:o,values$:b,sortedValues$:X,sortedHandles$:ue,minValueLabelDisplay$:be,maxValueLabelDisplay$:ve,combinedLabelDisplay$:pe,interactive$:j,combinedLabelPositionLeft$:he,combinedLabelPositionTop$:fe,progressDisplayOptions$:$e,handleDisplayOptions$:ge,showValueLabels$:O,showMinMaxLabels$:_,rtl$:c,...q}),patch:Q,api:{},directives:{sliderDirective:Re(C,re),minLabelDirective:ae,maxLabelDirective:ie},actions:{click(a){F(v()?a.clientY:a.clientX)},keydown(a,t){const{key:i}=a,l=c(),s=o(),m=g(),V=$(),p=v();if(j()){switch(i){case"ArrowDown":R(t,b,s,E(p,l,!0));break;case"ArrowLeft":R(t,b,s,E(p,l,!1));break;case"ArrowUp":R(t,b,s,-1*E(p,l,!0));break;case"ArrowRight":R(t,b,s,-1*E(p,l,!1));break;case"Home":b.update(h=>(h=[...h],h[t]=m,h));break;case"End":b.update(h=>(h=[...h],h[t]=V,h));break;case"PageUp":break;case"PageDown":break;default:return}a.preventDefault(),a.stopPropagation()}},mouseDown(a,t){a.preventDefault();const i=a.target,l=s=>{s.preventDefault();const m=v()?s.clientY:s.clientX;i.focus(),M!==m&&(M=m,F(m,t))};j()&&(y.set({}),i.focus(),document.addEventListener("mousemove",l),document.addEventListener("mouseup",()=>{document.removeEventListener("mousemove",l)},{once:!0}))},touchStart(a,t){a.preventDefault();const i=l=>{l.preventDefault();const s=v()?l.touches[0].clientY:l.touches[0].clientX;a.target.focus(),M!==s&&(M=s,F(s,t))};j()&&(y.set({}),a.target.focus(),document.addEventListener("touchmove",i),document.addEventListener("touchend",()=>{document.removeEventListener("touchmove",i),document.removeEventListener("touchcancel",i)},{once:!0}),document.addEventListener("touchcancel",()=>{document.removeEventListener("touchmove",i),document.removeEventListener("touchend",i)},{once:!0}))}}}}const ze=Fe,Te=e=>r.jsx("button",{className:`au-slider-handle ${e.state.vertical?"au-slider-handle-vertical":"au-slider-handle-horizontal"}`,role:"slider","aria-valuemin":e.state.min,"aria-valuemax":e.state.max,"aria-valuenow":e.item.value,"aria-valuetext":e.item.ariaValueText,"aria-label":e.item.ariaLabel,"aria-readonly":e.state.readonly?"true":void 0,"aria-disabled":e.state.disabled?"true":void 0,"aria-orientation":e.state.vertical?"vertical":void 0,disabled:e.state.disabled,style:{top:`${e.state.handleDisplayOptions[e.item.id].top}%`,left:`${e.state.handleDisplayOptions[e.item.id].left}%`},onKeyDown:n=>e.widget.actions.keydown(n.nativeEvent,e.item.id),onMouseDown:n=>e.widget.actions.mouseDown(n.nativeEvent,e.item.id),onTouchStart:n=>e.widget.actions.touchStart(n.nativeEvent,e.item.id),children:"Â "}),We=e=>{const n=A(e.widget.directives.minLabelDirective),d=A(e.widget.directives.maxLabelDirective);return r.jsxs(r.Fragment,{children:[e.state.progressDisplayOptions.map((o,c)=>r.jsx("div",{className:"au-slider-progress",style:{left:`${o.left}%`,right:`${o.right}%`,bottom:`${o.bottom}%`,top:`${o.top}%`,width:`${o.width}%`,height:`${o.height}%`}},c)),r.jsx("div",{className:e.state.vertical?"au-slider-clickable-area-vertical":"au-slider-clickable-area",onClick:o=>e.widget.actions.click(o)}),e.state.showMinMaxLabels?r.jsxs(r.Fragment,{children:[r.jsx("div",{ref:n,className:`${e.state.rtl?"au-slider-rtl":""} ${e.state.vertical?"au-slider-label-vertical au-slider-label-vertical-min":"au-slider-label au-slider-label-min"} ${e.state.minValueLabelDisplay?"":" invisible"}
						`,children:r.jsx(f,{slotContent:e.state.slotLabel,props:{value:e.state.min,...e}})}),r.jsx("div",{ref:d,className:`${e.state.rtl?"au-slider-rtl":""} ${e.state.vertical?"au-slider-label-vertical au-slider-label-vertical-max":"au-slider-label au-slider-label-max"} ${e.state.maxValueLabelDisplay?"":" invisible"}`,children:r.jsx(f,{slotContent:e.state.slotLabel,props:{value:e.state.max,...e}})})]}):r.jsx(r.Fragment,{}),e.state.showValueLabels&&e.state.combinedLabelDisplay?r.jsx("div",{className:e.state.vertical?"au-slider-label-vertical au-slider-label-vertical-now":"au-slider-label au-slider-label-now",style:{left:`${e.state.combinedLabelPositionLeft}%`,top:`${e.state.combinedLabelPositionTop}%`},children:e.state.rtl?r.jsxs(r.Fragment,{children:[r.jsx(f,{slotContent:e.state.slotLabel,props:{value:e.state.sortedValues[1],...e}})," - ",r.jsx(f,{slotContent:e.state.slotLabel,props:{value:e.state.sortedValues[0],...e}})]}):r.jsxs(r.Fragment,{children:[r.jsx(f,{slotContent:e.state.slotLabel,props:{value:e.state.sortedValues[0],...e}})," - ",r.jsx(f,{slotContent:e.state.slotLabel,props:{value:e.state.sortedValues[1],...e}})]})}):r.jsx(r.Fragment,{}),e.state.sortedHandles.map((o,c)=>r.jsxs(we.Fragment,{children:[r.jsx(f,{slotContent:e.state.slotHandle,props:{item:o,...e}}),e.state.showValueLabels&&!e.state.combinedLabelDisplay?r.jsx("div",{className:e.state.vertical?"au-slider-label-vertical au-slider-label-vertical-now":"au-slider-label au-slider-label-now",style:{left:`${e.state.handleDisplayOptions[c].left}%`,top:`${e.state.handleDisplayOptions[c].top}%`},children:r.jsx(f,{slotContent:e.state.slotLabel,props:{value:e.state.values[c],...e}})}):r.jsx(r.Fragment,{})]},o.id))]})},Be={slotStructure:We,slotHandle:Te};function Qe(e){const[n,d]=_e(ze,e,"slider",{...Be}),o={state:n,widget:Pe(d)},c=A(d.directives.sliderDirective);return r.jsx("div",{ref:c,className:`au-slider ${e.vertical?"au-slider-vertical":"au-slider-horizontal"} ${e.className?e.className:""} ${e.disabled?" disabled":""}`,"aria-disabled":e.disabled?"true":void 0,children:r.jsx(f,{slotContent:n.slotStructure,props:o})})}export{Qe as S};
