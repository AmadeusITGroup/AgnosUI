import{a as oe,j as s,r as A,c as re}from"./App-XNADZBio.js";import{u as se,S as h}from"./config-CU1Tiraw.js";import{u as x}from"./directive-_62WM8Ul-DhygzKo7.js";import{c as l,b as d,w as ie,r as ne,s as ae,t as le}from"./stores-CbKlqneq.js";import{t as f,b as w,a as v,c as ce}from"./writables-DoU_XYTX-dxvvE_8w.js";import{c as F}from"./baseTransitions-B0Uz6_1l.js";import{p as de}from"./promise-CY2U8bTP-DyoYE_Xk.js";import{a as me,f as ue,m as T,d as q,r as pe,h as I,b as V,c as N}from"./directive-DpAaJgAE-dbIg0imW.js";import{f as W}from"./fade-uOobJKgw-BzWpDnkF.js";import{e as ve}from"./extendWidget-DH6bFaPr.js";const L=me((e,r)=>{let t,o;const i=()=>{var a;o&&((a=o.parentNode)==null||a.replaceChild(e,o),o=null)},n=a=>{var m,g;if(a!==t&&((a==null?void 0:a.container)!==(t==null?void 0:t.container)||(a==null?void 0:a.insertBefore)!==(t==null?void 0:t.insertBefore))){t=a;const b=(t==null?void 0:t.container)??((m=t==null?void 0:t.insertBefore)==null?void 0:m.parentElement);if(b){const $=(t==null?void 0:t.insertBefore)??null;(e.parentElement!==b||e.nextSibling!==$)&&(o||(o=(g=e.parentNode)==null?void 0:g.insertBefore(e.ownerDocument.createComment("portal"),e)),b.insertBefore(e,$))}else i()}};return n(r),{update:n,destroy:()=>{var a;i(),(a=e.parentNode)==null||a.removeChild(e)}}}),be=e=>{const r=new Map,t=o=>{const i=o.parentElement;i&&o!==document.body&&(Array.from(i.children).forEach(n=>{n!==o&&n.nodeName!=="SCRIPT"&&(r.set(n,n.hasAttribute("inert")),n.toggleAttribute("inert",!0))}),t(i))};return t(e),()=>r.forEach((o,i)=>{i.toggleAttribute("inert",o)})};let _=d;const fe=e=>{_(),_=e?be(e):d},{directive:he,elements$:ge}=ue(),$e=l(()=>{const e=ge();return e[e.length-1]},{equal:Object.is}),Ce=l(()=>fe($e())),Se=T(he,q(Ce)),ke=()=>{const e=Math.abs(window.innerWidth-document.documentElement.clientWidth),r=document.body,t=r.style,{overflow:o,paddingRight:i}=t;if(e>0){const n=parseFloat(window.getComputedStyle(r).paddingRight);t.paddingRight=`${n+e}px`}return t.overflow="hidden",()=>{e>0&&(t.paddingRight=i),t.overflow=o}};let B=d;const ye=()=>{B(),B=ke()},Be=()=>{B(),B=d},De=Symbol(),je=Symbol(),we={animated:!0,ariaCloseButtonLabel:"Close",backdrop:!0,backdropClass:"",backdropTransition:async()=>{},closeButton:!0,closeOnOutsideClick:!0,container:typeof window<"u"?document.body:null,className:"",modalTransition:async()=>{},onBeforeClose:d,onVisibleChange:d,onHidden:d,onShown:d,slotDefault:void 0,slotFooter:void 0,slotHeader:void 0,slotStructure:void 0,slotTitle:void 0,visible:!1,contentData:void 0},Ne={animated:f,ariaCloseButtonLabel:w,backdrop:f,backdropClass:w,backdropTransition:v,closeButton:f,closeOnOutsideClick:f,container:ce,className:w,modalTransition:v,onBeforeClose:v,onVisibleChange:v,onHidden:v,onShown:v,visible:f},z=pe(),xe=l(()=>z().length>0),Te=l(()=>{xe()?ye():Be()}),Ee=l(()=>{Te()});function He(e){const[{animated$:r,backdrop$:t,backdropTransition$:o,closeOnOutsideClick$:i,container$:n,modalTransition$:a,onBeforeClose$:m,onVisibleChange$:g,onHidden$:b,onShown$:$,ariaCloseButtonLabel$:D,className$:E,backdropClass$:H,visible$:M,...G},C]=ie(we,e,Ne),u=F({props:{transition:a,visible:M,animated:r,animatedOnInit:r,onVisibleChange:g,onHidden:b,onShown:$}}),R=u.stores.visible$,O=F({props:{transition:o,visible:M,animated:r,animatedOnInit:r}}),P=l(()=>u.stores.transitioning$()||t()&&O.stores.transitioning$()),S=l(()=>!P()&&!R()),J=l(()=>!t()||S());let k;const j=c=>{k=c;const p={get result(){return k},set result(te){k=te},cancel:!1};m()(p),!p.cancel&&C({visible:!1})},K=I(L,l(()=>({container:n()}))),Q=I(L,l(()=>{const c=n(),p=c?u.stores.element$():void 0;return{container:c,insertBefore:(p==null?void 0:p.parentElement)===c?p:void 0}})),U=ne(void 0,()=>z.register(y)),X=l(()=>{u.stores.elementPresent$()&&!S()&&U(),Ee()}),Y=N(()=>({attributes:{type:"button","aria-label":D},events:{click:y.actions.closeButtonClick}})),Z=N(()=>({attributes:{class:H}})),ee=N(()=>({attributes:{class:E},events:{click:y.actions.modalClick}})),y={...ae({backdropHidden$:J,container$:n,hidden$:S,transitioning$:P,visible$:R,modalElement$:u.stores.element$,ariaCloseButtonLabel$:D,className$:E,backdropClass$:H,...G}),directives:{modalPortalDirective:K,backdropPortalDirective:Q,backdropDirective:T(V(O.directives.directive),Z),modalDirective:T(V(u.directives.directive),Se,q(X),ee),closeButtonDirective:Y},patch:C,api:{close:j,async open(){return C({visible:!0}),await de(S).promise,k},patch:C},actions:{modalClick(c){c.currentTarget===c.target&&i()&&j(De)},closeButtonClick(c){j(je)}}};return y}const Me=({children:e,container:r})=>r?oe.createPortal(e,r):s.jsx(s.Fragment,{children:e}),Re={backdropTransition:W,modalTransition:W},Oe=ve(He,{},{},Re),Pe=Oe,Ae=e=>{const r=x(e.widget.directives.closeButtonDirective);return s.jsxs(s.Fragment,{children:[s.jsx("h5",{className:"modal-title",children:s.jsx(h,{slotContent:e.state.slotTitle,props:e})}),e.state.closeButton&&s.jsx("button",{className:"btn-close",...r})]})},Fe=e=>s.jsxs(s.Fragment,{children:[e.state.slotTitle&&s.jsx("div",{className:"modal-header",children:s.jsx(h,{slotContent:e.state.slotHeader,props:e})}),s.jsx("div",{className:"modal-body",children:s.jsx(h,{slotContent:e.state.slotDefault,props:e})}),e.state.slotFooter&&s.jsx("div",{className:"modal-footer",children:s.jsx(h,{slotContent:e.state.slotFooter,props:e})})]}),Ie={slotHeader:Ae,slotStructure:Fe},Ve=A.forwardRef(function(r,t){const[o,i]=se(Pe,r,"modal",{...Ie,slotDefault:r.children});A.useImperativeHandle(t,()=>i.api,[]);const n=x(i.directives.backdropDirective),a=x(i.directives.modalDirective),m={state:o,widget:le(i)};return s.jsxs(Me,{container:o.container,children:[!o.backdropHidden&&s.jsx("div",{className:"modal-backdrop",...n}),!o.hidden&&s.jsx("div",{className:"modal d-block",...a,children:s.jsx("div",{className:"modal-dialog",children:s.jsx("div",{className:"modal-content",children:s.jsx(h,{slotContent:o.slotStructure,props:m})})})})]})});async function Xe(e){const r=re.createRoot(document.createElement("div"));try{return await(await new Promise(o=>{r.render(s.jsx(Ve,{...e,ref:o}))})).open()}finally{r.unmount()}}export{Ve as M,De as a,je as m,Xe as o};
