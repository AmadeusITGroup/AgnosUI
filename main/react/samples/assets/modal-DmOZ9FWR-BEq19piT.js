import{a as Q,j as n,r as E,c as U}from"./App-XNADZBio.js";import{c as l,b as d,w as X,r as Y,s as Z,t as ee}from"./stores-B4F_j8QF.js";import{t as b,b as w,a as v,c as te}from"./writables-DoU_XYTX-DoV7pQAs.js";import{c as H}from"./baseTransitions-CSdQUVlz.js";import{f as R}from"./fade-7-Etejps-BlYUs21K.js";import{p as oe}from"./promise-CY2U8bTP-B6m5TA-Q.js";import{a as ne,e as re,m as I,d as V,r as se,f as M,b as O}from"./directive-CGjTRxRh-C_4hKweU.js";import{S as h}from"./slot-DrPnuT9k.js";import{u as ie}from"./config-DQAExDHC.js";import{u as F}from"./directive-DoNpruyP-DMejdQBJ.js";const P=ne((e,r)=>{let t,o;const s=()=>{var a;o&&((a=o.parentNode)==null||a.replaceChild(e,o),o=null)},i=a=>{var m,g;if(a!==t&&((a==null?void 0:a.container)!==(t==null?void 0:t.container)||(a==null?void 0:a.insertBefore)!==(t==null?void 0:t.insertBefore))){t=a;const f=(t==null?void 0:t.container)??((m=t==null?void 0:t.insertBefore)==null?void 0:m.parentElement);if(f){const $=(t==null?void 0:t.insertBefore)??null;(e.parentElement!==f||e.nextSibling!==$)&&(o||(o=(g=e.parentNode)==null?void 0:g.insertBefore(e.ownerDocument.createComment("portal"),e)),f.insertBefore(e,$))}else s()}};return i(r),{update:i,destroy:()=>{var a;s(),(a=e.parentNode)==null||a.removeChild(e)}}}),ae=e=>{const r=new Map,t=o=>{const s=o.parentElement;s&&o!==document.body&&(Array.from(s.children).forEach(i=>{i!==o&&i.nodeName!=="SCRIPT"&&(r.set(i,i.hasAttribute("inert")),i.toggleAttribute("inert",!0))}),t(s))};return t(e),()=>r.forEach((o,s)=>{s.toggleAttribute("inert",o)})};let A=d;const le=e=>{A(),A=e?ae(e):d},{directive:ce,elements$:de}=re(),me=l(()=>{const e=de();return e[e.length-1]},{equal:Object.is}),ue=l(()=>le(me())),pe=I(ce,V(ue)),ve=()=>{const e=Math.abs(window.innerWidth-document.documentElement.clientWidth),r=document.body,t=r.style,{overflow:o,paddingRight:s}=t;if(e>0){const i=parseFloat(window.getComputedStyle(r).paddingRight);t.paddingRight=`${i+e}px`}return t.overflow="hidden",()=>{e>0&&(t.paddingRight=s),t.overflow=o}};let y=d;const fe=()=>{y(),y=ve()},be=()=>{y(),y=d},he=Symbol(),ge=Symbol(),$e={animated:!0,ariaCloseButtonLabel:"Close",backdrop:!0,backdropClass:"",backdropTransition:R,closeButton:!0,closeOnOutsideClick:!0,container:typeof window<"u"?document.body:null,className:"",modalTransition:R,onBeforeClose:d,onVisibleChange:d,onHidden:d,onShown:d,slotDefault:void 0,slotFooter:void 0,slotHeader:void 0,slotStructure:void 0,slotTitle:void 0,visible:!1,contentData:void 0},Ce={animated:b,ariaCloseButtonLabel:w,backdrop:b,backdropClass:w,backdropTransition:v,closeButton:b,closeOnOutsideClick:b,container:te,className:w,modalTransition:v,onBeforeClose:v,onVisibleChange:v,onHidden:v,onShown:v,visible:b},W=se(),Se=l(()=>W().length>0),ke=l(()=>{Se()?fe():be()}),ye=l(()=>{ke()});function Be(e){const[{animated$:r,backdrop$:t,backdropTransition$:o,closeOnOutsideClick$:s,container$:i,modalTransition$:a,onBeforeClose$:m,onVisibleChange$:g,onHidden$:f,onShown$:$,visible$:B,...L},C]=X($e,e,Ce),u=H({props:{transition:a,visible:B,animated:r,animatedOnInit:r,onVisibleChange:g,onHidden:f,onShown:$}}),D=u.stores.visible$,N=H({props:{transition:o,visible:B,animated:r,animatedOnInit:r}}),x=l(()=>u.stores.transitioning$()||t()&&N.stores.transitioning$()),S=l(()=>!x()&&!D()),_=l(()=>!t()||S());let k;const j=c=>{k=c;const p={get result(){return k},set result(K){k=K},cancel:!1};m()(p),!p.cancel&&C({visible:!1})},q=M(P,l(()=>({container:i()}))),z=M(P,l(()=>{const c=i(),p=c?u.stores.element$():void 0;return{container:c,insertBefore:(p==null?void 0:p.parentElement)===c?p:void 0}})),G=Y(void 0,()=>W.register(T)),J=l(()=>{u.stores.elementPresent$()&&!S()&&G(),ye()}),T={...Z({backdropHidden$:_,container$:i,hidden$:S,transitioning$:x,visible$:D,modalElement$:u.stores.element$,...L}),directives:{modalPortalDirective:q,backdropPortalDirective:z,backdropDirective:O(N.directives.directive),modalDirective:I(O(u.directives.directive),pe,V(J))},patch:C,api:{close:j,async open(){return C({visible:!0}),await oe(S).promise,k},patch:C},actions:{modalClick(c){c.currentTarget===c.target&&s()&&j(he)},closeButtonClick(c){j(ge)}}};return T}const je=Be,we=({children:e,container:r})=>r?Q.createPortal(e,r):n.jsx(n.Fragment,{children:e}),De=e=>n.jsxs(n.Fragment,{children:[n.jsx("h5",{className:"modal-title",children:n.jsx(h,{slotContent:e.state.slotTitle,props:e})}),e.state.closeButton?n.jsx("button",{type:"button",className:"btn-close","aria-label":e.state.ariaCloseButtonLabel,onClick:e.widget.actions.closeButtonClick}):null]}),Ne=e=>n.jsxs(n.Fragment,{children:[e.state.slotTitle?n.jsx("div",{className:"modal-header",children:n.jsx(h,{slotContent:e.state.slotHeader,props:e})}):null,n.jsx("div",{className:"modal-body",children:n.jsx(h,{slotContent:e.state.slotDefault,props:e})}),e.state.slotFooter?n.jsx("div",{className:"modal-footer",children:n.jsx(h,{slotContent:e.state.slotFooter,props:e})}):null]}),xe={slotHeader:De,slotStructure:Ne},Te=E.forwardRef(function(r,t){const[o,s]=ie(je,r,"modal",{...xe,slotDefault:r.children});E.useImperativeHandle(t,()=>s.api,[]);const i=F(s.directives.backdropDirective),a=F(s.directives.modalDirective),m={state:o,widget:ee(s)};return n.jsxs(we,{container:o.container,children:[o.backdropHidden?null:n.jsx("div",{className:`modal-backdrop ${o.backdropClass}`,ref:i}),o.hidden?null:n.jsx("div",{className:`modal d-block ${o.className}`,ref:a,onClick:s.actions.modalClick,children:n.jsx("div",{className:"modal-dialog",children:n.jsx("div",{className:"modal-content",children:n.jsx(h,{slotContent:o.slotStructure,props:m})})})})]})});async function We(e){const r=U.createRoot(document.createElement("div"));try{return await(await new Promise(o=>{r.render(n.jsx(Te,{...e,ref:o}))})).open()}finally{r.unmount()}}export{Te as M,he as a,ge as m,We as o};
