import{f as j,g as q,d as n,w as F,s as W,h as z,n as M,e as N,r as P,j as B,k as $,l as G,o as f,p as J,q as K}from"./directive-DCYlDznf-D6Op6yAr.js";import{c as L}from"./baseTransitions-WYj0FqeN.js";import{t as b,b as u,a as s}from"./writables-DoU_XYTX-CLq9hDK4.js";function Q(g,o,d){let I;return o.length==2?(d=d??o[0],I=o.find(m=>m!==d)):o.length>2&&(I=o[0]),I&&g.forEach(m=>{m.stores.itemId$()!==I&&m.stores.itemVisible$()&&m.patch({itemVisible:!1})}),g}function _(g,o){return g.find(d=>d.stores.itemId$()===o)}const i={closeOthers:!1,onShown:f,onHidden:f,className:"",itemId:"",itemDestroyOnHide:!0,itemDisabled:!1,itemVisible:!1,itemAnimated:!0,itemTransition:async()=>{},itemHeadingTag:"",onItemShown:f,onItemHidden:f,onItemVisibleChange:f,itemClass:"",itemHeaderClass:"",itemButtonClass:"",itemBodyContainerClass:"",itemBodyClass:""},S={itemId:i.itemId,itemDestroyOnHide:i.itemDestroyOnHide,itemDisabled:i.itemDisabled,itemVisible:i.itemVisible,itemAnimated:i.itemAnimated,itemTransition:i.itemTransition,onItemShown:i.onItemShown,onItemHidden:i.onItemHidden,onItemVisibleChange:i.onItemVisibleChange,itemClass:i.itemClass,itemHeaderClass:i.itemHeaderClass,itemButtonClass:i.itemButtonClass,itemBodyContainerClass:i.itemBodyContainerClass,itemBodyClass:i.itemBodyClass,itemHeadingTag:i.itemHeadingTag},R=Object.keys(S);function se(){return{...i}}const U={closeOthers:b,onShown:u,onHidden:u,itemId:s,itemDestroyOnHide:b,itemDisabled:b,itemVisible:b,itemAnimated:b,itemTransition:u,onItemShown:u,onItemHidden:u,onItemVisibleChange:u,itemClass:s,itemHeaderClass:s,itemButtonClass:s,itemBodyContainerClass:s,itemBodyClass:s,itemHeadingTag:s},X={itemId:s,itemDestroyOnHide:b,itemDisabled:b,itemVisible:b,itemAnimated:b,itemTransition:u,onItemShown:u,onItemHidden:u,onItemVisibleChange:u,itemClass:s,itemHeaderClass:s,itemButtonClass:s,itemBodyContainerClass:s,itemBodyClass:s,itemHeadingTag:s};function Y(g){const[{itemBodyClass$:o,itemButtonClass$:d,itemBodyContainerClass$:I,itemHeaderClass$:m,itemAnimated$:v,itemTransition$:w,itemDestroyOnHide$:V,onItemShown$:O,onItemHidden$:T,onItemVisibleChange$:y,itemVisible$:c,itemId$:r,itemDisabled$:C,...H},k]=j(S,g,X),D=F(!1),e=n(()=>J()),t=n(()=>r()||e()),h=L({props:{transition:w,visible:c,onVisibleChange:y,animated:v,animatedOnInit:!1,initDone:D,onHidden:()=>{T()()},onShown:()=>{O()()}}}),A=n(()=>V()===!1||!h.stores.hidden$()),p=()=>{C()||c.update(x=>!x)},l=$(()=>({attributes:{id:n(()=>`${t()}-toggle`),"aria-expanded":n(()=>`${c()}`),"aria-disabled":n(()=>`${C()}`),"aria-controls":n(()=>`${t()}-body-container`),disabled:C},classNames:{collapsed:n(()=>!c())},events:{click:p}})),a=K(h.directives.directive),E=$(()=>({attributes:{id:n(()=>`${t()}-body-container`),class:I(),"aria-labelledby":n(()=>`${t()}-toggle`)}}));return{...W({itemVisible$:c,itemId$:t,shouldBeInDOM$:A,itemDisabled$:C,itemBodyClass$:o,itemButtonClass$:d,itemBodyContainerClass$:I,itemHeaderClass$:m,...H}),patch:k,actions:{click:p},api:{initDone:()=>{D.set(!0)},collapse:()=>{c.set(!1)},expand:()=>{c.set(!0)},toggle:()=>{c.update(x=>!x)}},directives:{toggleDirective:l,buttonDirective:B(l,$(()=>({attributes:{type:"button",class:d()}}))),headerDirective:$(()=>({attributes:{class:m()}})),bodyDirective:$(()=>({attributes:{class:o()}})),transitionDirective:a,bodyContainerAttrsDirective:E,bodyContainerDirective:B(a,E),accordionItemDirective:f}}}function Z(g=Y,o=R,d=i,I=U){return m=>{const[v,w]=j(d,m,I),{closeOthers$:V,onShown$:O,onHidden$:T,className$:y}=v,c=Object.fromEntries(Object.entries(v).map(e=>[e[0].slice(0,-1),e[1]])),r=q(),C=n(()=>{const e=[];return r().forEach(t=>{t.stores.itemVisible$()&&e.push(t.stores.itemId$())}),e}),H=F(C()[0]),k=n(()=>{V()&&(Q(r(),C(),H()),H.set(C()[0]))}),D=n(()=>{k()});return{...W({itemsWidget$:r,className$:y}),patch:w,actions:{},api:{expand:e=>{var t;(t=_(r(),e))==null||t.api.expand()},collapse:e=>{var t;(t=_(r(),e))==null||t.api.collapse()},toggle:e=>{var t;(t=_(r(),e))==null||t.api.toggle()},expandAll:()=>{r().forEach(e=>e.api.expand())},collapseAll:()=>{r().forEach(e=>e.api.collapse())},registerItem:e=>{const t=o,h=z(t,M(t,e==null?void 0:e.config),c),[{onItemHidden$:A,onItemShown$:p}]=j({onItemHidden:S.onItemHidden,onItemShown:S.onItemShown},{config:h,props:e==null?void 0:e.props}),l=g({config:h,props:{...e==null?void 0:e.props,onItemHidden:N(P(()=>{var a;T()(l.stores.itemId$()),(a=A())==null||a()}),a=>{A.set(a)}),onItemShown:N(P(()=>{var a;O()(l.stores.itemId$()),(a=p())==null||a()}),a=>{p.set(a)})}});return l.directives.accordionItemDirective=B(()=>({destroy:r.register(l)}),$(()=>({attributes:{class:l.stores.itemClass$,id:l.stores.itemId$}}))),l}},directives:{accordionDirective:B(G(D),$(()=>({attributes:{class:y()},classNames:{"au-accordion":!0}})))}}}}const ne=Z();export{ne as a,Y as c,Z as f,se as g};
