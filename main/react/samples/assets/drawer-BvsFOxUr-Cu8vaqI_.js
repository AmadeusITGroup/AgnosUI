import{j as t,r as fe}from"./App-XYQ6f2LA.js";import{S as M}from"./slot-BM2EyfWv.js";import{u as k}from"./directive-Ds3K8r_f-7Q8HsK8u.js";import{P as we}from"./portal-CX8X69NK-PpUSpBRh.js";import{u as ge}from"./config-DpsepUKv.js";import{n as c,b as r,d as $e,g as C,h as De,m as p,a as m,r as $,i as ke,w as A,u as W,j as ye}from"./dom-DD1hAVZy-CRhXymqz.js";import{p as L,r as xe,a as ze,f as Se,s as je}from"./focusElement-mLESWoh7.js";import{c as Ce}from"./pointerdownPosition-C9U6qdLt.js";import{c as I}from"./baseTransitions-Dz-bPBkA.js";import{w as Me,b as Ee,s as Te,t as h}from"./stores-HF2X-Ulc.js";import{c as R}from"./widget-1S5HWugh.js";import{d as He,c as u,b as d,e as Ne,t as D}from"./writables-Is1bF1Vt-Dtgdsc6k.js";import{e as Ve}from"./extendWidget-C031X1rx.js";import{c as Pe,a as Be}from"./collapse-CVjUhnIz-iXivJJgs.js";import{f as Ae}from"./fade-uOobJKgw-tz7A_H-K.js";const We={animated:!0,ariaDescribedBy:"",ariaLabelledBy:"",backdropClass:"",backdropTransition:c,className:"w-full",visible:!1,container:typeof window<"u"?document.body:null,transition:c,verticalTransition:c,onHidden:c,onShown:c,onSizeChange:c,onVisibleChange:c,onMinimizedChange:c,onMaximizedChange:c,onResizingChange:c,resizable:!1,backdrop:!0,bodyScroll:!1,size:null},Le={animated:u,ariaDescribedBy:D,ariaLabelledBy:D,backdropClass:D,backdropTransition:d,className:D,visible:u,transition:d,verticalTransition:d,container:Ne,onHidden:d,onShown:d,onSizeChange:d,onVisibleChange:d,onMinimizedChange:d,onMaximizedChange:d,onResizingChange:d,resizable:u,backdrop:u,bodyScroll:u,size:He},Ie=R("drawer",i=>{const[{backdrop$:s,backdropTransition$:a,backdropClass$:E,bodyScroll$:T,transition$:F,verticalTransition$:O,visible$:X,container$:f,className$:w,size$:Y,animated$:y,ariaDescribedBy$:_,ariaLabelledBy$:q,onHidden$:U,onShown$:G,onSizeChange$:J,onVisibleChange$:K,onMinimizedChange$:Q,onMaximizedChange$:Z,onResizingChange$:b,...ee},ie]=Me(We,i,Le),x=Ee(Y,J,e=>e&&Math.round(e)),g=r(()=>["block-start","block-end"].some(n=>w().includes(n))),l=I({props:{animated:y,animatedOnInit:y,transition:$e(r(()=>g()?O():F())),visible:X,onVisibleChange:K,onHidden:U,onShown:G}}),te=C(L,r(()=>({container:f()}))),{directive:re,element$:z}=De(),se=p(re,m(()=>({attributes:{class:w,role:$("dialog"),"aria-describedby":_,"aria-labelledby":q,"aria-modal":$("true"),tabIndex:$("-1")},styles:{position:r(()=>{const e=f();return e&&ke(e)&&e!==document.body?"relative":"fixed"}),outline:$("none")},events:{keydown:async e=>{e.key==="Escape"&&await l.api.hide()}}}))),H=I({props:{animated:y,transition:a}}),ae=C(L,r(()=>{const e=f(),n=e?l.stores.element$():void 0;return{container:e,insertBefore:n?.parentElement===e?n:void 0}})),ne=r(()=>(T()||(j()?xe():ze()),!s()||j())),oe=m(()=>({attributes:{class:E,"data-agnos-ignore-inert":h},events:{click:async()=>await l.api.hide()}})),ce=r(()=>["inline-start","block-start"].some(e=>w().includes(e))?1:-1),N=A(void 0),V=A(void 0);function S(e){const n=z(),o=g();e=Math.round(Math.max(0,e)),n.style[o?"height":"width"]=`${e}px`;const v=Math.round(n[o?"offsetHeight":"offsetWidth"]);return x.set(v),N.set(e!=null&&(e<v||e===0)),V.set(!!e&&e>v),v}const de=p(Ce(e=>{const n=z(),o=g(),v=n[o?"offsetHeight":"offsetWidth"],B=o?"clientY":"clientX",ve=e[B],ue=ce();return b()(!0),{onMove(he){S(v+ue*(he[B]-ve))},onEnd(){n.style[o?"height":"width"]="",b()(!1)}}}),m(()=>({events:{keydown:e=>{const{key:n}=e,o=x()||z()?.[g()?"offsetHeight":"offsetWidth"];if(o!=null)switch(n){case"ArrowLeft":case"ArrowDown":b()(!0),S(o-10),b()(!1);break;case"ArrowRight":case"ArrowUp":b()(!0),S(o+10),b()(!1);break}}}}))),P=l.stores.visible$,le=r(()=>l.stores.transitioning$()||H.stores.transitioning$()),j=r(()=>!le()&&!P()),pe=r(()=>{const e=N();e!=null&&W(()=>Q()(e))}),me=r(()=>{const e=V();e!=null&&W(()=>Z()(e))}),be=r(()=>{pe(),me()});return{...Te({...ee,backdropClass$:E,className$:w,container$:f,size$:x,visible$:P,backdropHidden$:ne,hidden$:j}),patch:ie,api:{open:l.api.show,close:l.api.hide},directives:{drawerPortalDirective:te,drawerDirective:p(ye(be),se,C(je,r(()=>!T())),l.directives.directive,Se),backdropPortalDirective:ae,backdropDirective:p(H.directives.directive,oe),splitterDirective:de}}}),Re={structure:void 0,header:void 0,children:void 0},Fe={structure:void 0,header:void 0,children:void 0},Oe={backdropTransition:Ae,transition:Be,verticalTransition:Pe},Xe=R("drawer",i=>{const s=Ve(Ie,Re,Fe,Oe)(i);return{...s,directives:{...s.directives,drawerDirective:p(m(()=>({classNames:{"au-drawer":h,show:s.stores.visible$},styles:{"--bs-drawer-size":r(()=>{const a=s.stores.size$();return a==null?void 0:a+"px"})}})),s.directives.drawerDirective),backdropDirective:p(s.directives.backdropDirective,m(()=>({classNames:{"au-drawer-backdrop":h,show:s.stores.visible$}}))),splitterDirective:p(s.directives.splitterDirective,m(()=>({classNames:{"au-splitter":h}}))),containerDirective:m(()=>({classNames:{"au-drawer-container":h}}))}}}),Ye=Xe,_e=({directives:i})=>t.jsx("div",{...k(i.backdropDirective)}),qe=i=>t.jsxs("div",{...k(i.directives.drawerDirective),children:[t.jsx("div",{...k(i.directives.containerDirective),children:t.jsx(M,{slotContent:i.state.structure,props:i})}),i.state.resizable&&t.jsx(Ge,{...i})]}),Ue=i=>t.jsx(t.Fragment,{children:t.jsxs("div",{className:"au-drawer-content",children:[t.jsx("div",{className:"au-drawer-header",children:t.jsx(M,{slotContent:i.state.header,props:i})}),t.jsx("div",{className:"au-drawer-body",children:t.jsx(M,{slotContent:i.state.children,props:i})})]})}),Ge=i=>t.jsx("div",{...k(i.directives.splitterDirective),tabIndex:0}),Je={structure:Ue};function bi({ref:i,...s}){const a=ge(Ye,s,{...Je});return fe.useImperativeHandle(i,()=>a.api,[a.api]),t.jsxs(we,{container:a.state.container,children:[!a.state.backdropHidden&&t.jsx(_e,{...a}),!a.state.hidden&&t.jsx(qe,{...a})]})}export{bi as D};
