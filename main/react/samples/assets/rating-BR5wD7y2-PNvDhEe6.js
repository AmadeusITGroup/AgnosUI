import{w as B,c as e,M as C,a as H,s as K,f as R,h as v,K as U}from"./directive-DCYlDznf-D2hjAqcK.js";import{e as E,f as x,i as I,t as m,a as u,b as f}from"./writables-DoU_XYTX-Dq9jyVLj.js";const w={rating:0,tabindex:0,maxRating:10,disabled:!1,readonly:!1,resettable:!0,ariaValueTextFn:(i,b)=>`${i} out of ${b}`,onHover:v,onLeave:v,onRatingChange:v,className:"",ariaLabel:"Rating",ariaLabelledBy:""};function q(){return{...w}}const S={rating:x,tabindex:x,maxRating:{normalizeValue:i=>I(i)?Math.max(0,i):U},disabled:m,readonly:m,resettable:m,ariaValueTextFn:u,onHover:u,onLeave:u,onRatingChange:u,className:f,ariaLabel:f,ariaLabelledBy:f};function G(i){const[{rating$:b,tabindex$:L,ariaValueTextFn$:k,onHover$:A,onLeave$:D,onRatingChange$:N,...p},V]=B(w,i,S),{ariaLabel$:P,ariaLabelledBy$:F,className$:M,disabled$:g,maxRating$:t,readonly$:$,resettable$:T}=p,y=e(()=>g()?-1:L()),r=C(b,N,a=>E(a,t())),l=H(0),n=e(()=>!g()&&!$()),c=e(()=>{const a=l();return a!==0?a:r()}),h=e(()=>k()(c(),t())),_=e(()=>{const a=c();return Array.from({length:t()},(d,s)=>({fill:Math.round(Math.max(Math.min(a-s,1),0)*100),index:s}))}),o={...K({ariaValueText$:h,interactive$:n,rating$:r,stars$:_,tabindex$:y,visibleRating$:c,...p}),patch:V,actions:{click:a=>{n()&&a>0&&a<=t()&&r.update(d=>d===a&&T()?0:a)},hover:a=>{n()&&a>0&&a<=t()&&(l.set(a),A()(a))},leave:()=>{n()&&(D()(l()),l.set(0))},handleKey(a){if(n()){const{key:d}=a;switch(d){case"ArrowLeft":case"ArrowDown":r.update(s=>s-1);break;case"ArrowRight":case"ArrowUp":r.update(s=>s+1);break;case"Home":case"PageDown":r.set(0);break;case"End":case"PageUp":r.set(t());break;default:return}a.preventDefault(),a.stopPropagation()}}},directives:{containerDirective:R(()=>({events:{keydown:a=>o.actions.handleKey(a),mouseleave:()=>o.actions.leave()},attributes:{role:"slider",class:M,"aria-valuemin":0,tabindex:y,"aria-valuemax":t,"aria-valuenow":c,"aria-valuetext":h,"aria-readonly":e(()=>$()?"true":void 0),"aria-disabled":e(()=>g()?"true":void 0),"aria-label":P,"aria-labelledby":e(()=>F()||void 0)},classNames:{"au-rating":!0}})),starDirective:R(a=>({events:{mouseenter:()=>o.actions.hover(a().index+1),click:()=>o.actions.click(a().index+1)},styles:{cursor:e(()=>n()?"pointer":"default")},classNames:{"au-rating-star":!0}}))},api:{}};return o}export{G as c,q as g};
