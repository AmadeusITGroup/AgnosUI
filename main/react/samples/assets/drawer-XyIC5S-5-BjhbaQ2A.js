import{j as t,r as de}from"./App-Dy53TPcb.js";import{S as C}from"./slot-BckPQ7DD.js";import{u as y}from"./directive-Ds3K8r_f-Dv4kLSik.js";import{P as le}from"./portal-CX8X69NK-ClXPb5ge.js";import{u as pe}from"./config-BLaE0H-C.js";import{n as c,b as r,d as be,g as T,w as H,m as b,a as l,r as m}from"./dom-Bcg9ORcA-M5rAttAR.js";import{p as W,r as ve,a as me,f as ue,s as he}from"./focusElement-BfCJk8CA.js";import{c as F}from"./baseTransitions-BWdsh-HB.js";import{w as ge,b as z,s as we,t as h}from"./stores-D2Z0mQG4.js";import{c as A}from"./widget-D4NOSiJx.js";import{c as u,b as d,d as L,e as fe,t as D}from"./writables-e0tyaQpe-BaB23qQJ.js";import{e as $e}from"./extendWidget-Dodkjqtv.js";import{c as De,a as ye}from"./collapse-CVjUhnIz-DXzgblSq.js";import{f as ke}from"./fade-uOobJKgw-beTiqGxJ.js";const xe={animated:!0,ariaDescribedBy:"",ariaLabelledBy:"",backdropClass:"",backdropTransition:c,className:"w-full",visible:!1,container:typeof window<"u"?document.body:null,transition:c,verticalTransition:c,onHidden:c,onShown:c,width:200,height:200,onWidthChange:c,onHeightChange:c,onVisibleChange:c,resizable:!1,backdrop:!0,bodyScroll:!1},je={animated:u,ariaDescribedBy:D,ariaLabelledBy:D,backdropClass:D,backdropTransition:d,className:D,visible:u,transition:d,verticalTransition:d,container:fe,onHidden:d,onShown:d,width:L(0,1/0),height:L(0,1/0),onWidthChange:d,onHeightChange:d,onVisibleChange:d,resizable:u,backdrop:u,bodyScroll:u},Se=A("drawer",i=>{const[{backdrop$:a,backdropTransition$:s,backdropClass$:N,bodyScroll$:V,transition$:O,verticalTransition$:X,visible$:Y,container$:v,className$:g,animated$:k,ariaDescribedBy$:_,ariaLabelledBy$:R,onHidden$:q,onShown$:M,width$:G,height$:J,onWidthChange$:K,onHeightChange$:Q,onVisibleChange$:U,...Z},ee]=ge(xe,i,je),n=r(()=>["block-start","block-end"].some(p=>g().includes(p))),o=F({props:{animated:k,animatedOnInit:k,transition:be(r(()=>n()?X():O())),visible:Y,onVisibleChange:U,onHidden:q,onShown:M}}),w=z(G,K),f=z(J,Q),ie=T(W,r(()=>({container:v()}))),te=l(()=>({attributes:{class:g,role:m("dialog"),"aria-describedby":_,"aria-labelledby":R,"aria-modal":m("true"),tabIndex:m("-1")},styles:{width:r(()=>n()?"100%":`${w()}px`),height:r(()=>n()?`${f()}px`:"100%"),position:r(()=>v()!==document.body&&v()!==null?"relative":"fixed"),outline:m("none")},events:{keydown:async e=>{const{key:p}=e;p==="Escape"&&await o.api.hide()}}})),re=l(()=>({styles:{width:r(()=>n()?"100%":`${w()}px`),height:r(()=>n()?`${f()}px`:"100%")}})),P=F({props:{animated:k,transition:s}}),ae=T(W,r(()=>{const e=v(),p=e?o.stores.element$():void 0;return{container:e,insertBefore:p?.parentElement===e?p:void 0}})),se=r(()=>(V()||(S()?ve():me()),!a()||S())),ne=l(()=>({attributes:{class:N,"data-agnos-ignore-inert":h},events:{click:async()=>{await o.api.hide()}}})),B=r(()=>["inline-start","block-start"].some(e=>g().includes(e))?1:-1),x=H(0),j=H(0),$=H(0),oe=l(()=>({attributes:{draggable:m("true")},events:{dragstart:e=>{j.set(n()?e.clientY:e.clientX),x.set(n()?f():w()),e.dataTransfer?.setDragImage(new Image,0,0)},dragend:e=>{document.body.style.cursor="",E(e)},dragover:e=>{e.preventDefault()},drag:e=>{E(e)}}})),E=e=>{!n()&&e.clientX>0?($.set(x()+B()*(e.clientX-j())),w.set($())):n()&&e.clientY>0&&($.set(x()+B()*(e.clientY-j())),f.set($()))},I=o.stores.visible$,ce=r(()=>o.stores.transitioning$()||P.stores.transitioning$()),S=r(()=>!ce()&&!I());return{...we({...Z,backdropClass$:N,className$:g,container$:v,visible$:I,backdropHidden$:se,hidden$:S}),patch:ee,api:{open:o.api.show,close:o.api.hide},directives:{containerDirective:re,drawerPortalDirective:ie,drawerDirective:b(o.directives.directive,T(he,r(()=>!V())),te,ue),backdropPortalDirective:ae,backdropDirective:b(P.directives.directive,ne),splitterDirective:oe}}}),Te={structure:void 0,header:void 0,children:void 0},He={structure:void 0,header:void 0,children:void 0},Ce={backdropTransition:ke,transition:ye,verticalTransition:De},Ne=A("drawer",i=>{const a=$e(Se,Te,He,Ce)(i);return{...a,directives:{...a.directives,drawerDirective:b(a.directives.drawerDirective,l(()=>({classNames:{"au-drawer":h,show:a.stores.visible$}}))),backdropDirective:b(a.directives.backdropDirective,l(()=>({classNames:{"au-drawer-backdrop":h,show:a.stores.visible$}}))),splitterDirective:b(a.directives.splitterDirective,l(()=>({classNames:{"au-splitter":h}}))),containerDirective:b(a.directives.containerDirective,l(()=>({classNames:{"au-drawer-container":h}})))}}}),Ve=Ne,Pe=({directives:i})=>t.jsx("div",{...y(i.backdropDirective)}),Be=i=>t.jsx("div",{...y(i.directives.drawerDirective),children:t.jsx("div",{...y(i.directives.containerDirective),children:t.jsx(C,{slotContent:i.state.structure,props:i})})}),Ee=i=>t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"au-drawer-header",children:t.jsx(C,{slotContent:i.state.header,props:i})}),t.jsx("div",{className:"au-drawer-body",children:t.jsx(C,{slotContent:i.state.children,props:i})}),i.state.resizable&&t.jsx(Ie,{...i})]}),Ie=i=>t.jsx("div",{...y(i.directives.splitterDirective)}),We={structure:Ee};function Ue({ref:i,...a}){const s=pe(Ve,a,{...We});return de.useImperativeHandle(i,()=>s.api,[s.api]),t.jsxs(le,{container:s.state.container,children:[!s.state.backdropHidden&&t.jsx(Pe,{...s}),!s.state.hidden&&t.jsx(Be,{...s})]})}export{Ue as D};
