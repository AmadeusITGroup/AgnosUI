import{r as h,j as m}from"./App-XNADZBio.js";import{w as G,c,a as J,s as K,m as Z,n as ee,b as v}from"./stores-B4F_j8QF.js";import{c as te}from"./baseTransitions-CSdQUVlz.js";import{c as ie}from"./collapse-BQC9zBIz-DHzMBOUC.js";import{t as b,a as u,b as d}from"./writables-DoU_XYTX-DoV7pQAs.js";import{r as se,m as w,c as $,d as oe,g as ae,b as ne}from"./directive-CGjTRxRh-C_4hKweU.js";import{S as M}from"./slot-DrPnuT9k.js";import{u as L}from"./config-DQAExDHC.js";import{u as y}from"./directive-_62WM8Ul-BR2Seio5.js";function re(e,t,s){let n;return t.length==2?(s=s??t[0],n=t.find(r=>r!==s)):t.length>2&&(n=t[0]),n&&e.forEach(r=>{r.state$().itemId!==n&&r.state$().itemVisible&&r.patch({itemVisible:!1})}),e}function W(e,t){return e.find(s=>s.state$().itemId===t)}const i={closeOthers:!1,onShown:v,onHidden:v,className:"",itemId:"",itemDestroyOnHide:!0,itemDisabled:!1,itemVisible:!1,itemAnimated:!0,itemTransition:ie,itemHeadingTag:"",onItemShown:v,onItemHidden:v,onItemVisibleChange:v,slotItemStructure:void 0,slotItemBody:void 0,slotItemHeader:void 0,itemClass:"",itemHeaderClass:"",itemButtonClass:"",itemBodyContainerClass:"",itemBodyClass:""},Q={itemId:i.itemId,itemDestroyOnHide:i.itemDestroyOnHide,itemDisabled:i.itemDisabled,itemVisible:i.itemVisible,itemAnimated:i.itemAnimated,itemTransition:i.itemTransition,onItemShown:i.onItemShown,onItemHidden:i.onItemHidden,onItemVisibleChange:i.onItemVisibleChange,slotItemStructure:i.slotItemStructure,slotItemBody:i.slotItemBody,slotItemHeader:i.slotItemHeader,itemClass:i.itemClass,itemHeaderClass:i.itemHeaderClass,itemButtonClass:i.itemButtonClass,itemBodyContainerClass:i.itemBodyContainerClass,itemBodyClass:i.itemBodyClass,itemHeadingTag:i.itemHeadingTag},q=Object.keys(Q),de={closeOthers:b,onShown:u,onHidden:u,itemId:d,itemDestroyOnHide:b,itemDisabled:b,itemVisible:b,itemAnimated:b,itemTransition:u,onItemShown:u,onItemHidden:u,onItemVisibleChange:u,itemClass:d,itemHeaderClass:d,itemButtonClass:d,itemBodyContainerClass:d,itemBodyClass:d,itemHeadingTag:d},ce={itemId:d,itemDestroyOnHide:b,itemDisabled:b,itemVisible:b,itemAnimated:b,itemTransition:u,onItemShown:u,onItemHidden:u,onItemVisibleChange:u,itemClass:d,itemHeaderClass:d,itemButtonClass:d,itemBodyContainerClass:d,itemBodyClass:d,itemHeadingTag:d};function me(e,t,s){const[{itemBodyClass$:n,itemButtonClass$:r,itemBodyContainerClass$:I,itemHeaderClass$:f,itemAnimated$:V,itemTransition$:T,itemDestroyOnHide$:x,onItemShown$:O,onItemHidden$:j,onItemVisibleChange$:N,itemVisible$:l,itemId$:E,itemDisabled$:p,...k},R]=G(Q,s,ce),D=J(!1),P=c(()=>ae()),g=c(()=>E()||P()),_=c(()=>x()===!1||!B.state$().hidden),B=te({props:{transition:T,visible:l,onVisibleChange:N,animated:V,animatedOnInit:!1,initDone:D,onHidden:()=>{t()(g()),j()()},onShown:()=>{e()(g()),O()()}}}),S=()=>{p()||l.update(H=>!H)},A=$(()=>({attributes:{id:c(()=>`${g()}-toggle`),"aria-expanded":c(()=>`${l()}`),"aria-disabled":c(()=>`${p()}`),"aria-controls":c(()=>`${g()}-body-container`),disabled:p()},classNames:{collapsed:c(()=>!l())},events:{click:S}}));return{...K({itemVisible$:l,itemId$:g,shouldBeInDOM$:_,itemDisabled$:p,itemBodyClass$:n,itemButtonClass$:r,itemBodyContainerClass$:I,itemHeaderClass$:f,...k}),patch:R,actions:{click:S},api:{initDone:()=>{D.set(!0)},collapse:()=>{l.set(!1)},expand:()=>{l.set(!0)},toggle:()=>{l.update(H=>!H)}},directives:{toggleDirective:A,buttonDirective:w(A,$(()=>({attributes:{type:"button",class:r()}}))),headerDirective:$(()=>({attributes:{class:f()}})),bodyDirective:$(()=>({attributes:{class:n()}})),bodyContainerDirective:w(ne(B.directives.directive),$(()=>({attributes:{id:c(()=>`${g()}-body-container`),class:I(),"aria-labelledby":c(()=>`${g()}-toggle`)}}))),accordionItemDirective:v}}}function le(e){const[{closeOthers$:t,onShown$:s,onHidden$:n,className$:r,itemId$:I,itemAnimated$:f,itemClass$:V,itemDisabled$:T,itemVisible$:x,itemTransition$:O,itemDestroyOnHide$:j,itemBodyClass$:N,itemButtonClass$:l,itemBodyContainerClass$:E,itemHeaderClass$:p,itemHeadingTag$:k,onItemVisibleChange$:R,onItemHidden$:D,onItemShown$:P,slotItemStructure$:g,slotItemBody$:_,slotItemHeader$:B,...S},A]=G(i,e,de),H={itemId:I,itemClass:V,itemAnimated:f,itemDisabled:T,itemVisible:x,itemTransition:O,itemDestroyOnHide:j,itemBodyClass:N,itemButtonClass:l,itemBodyContainerClass:E,itemHeaderClass:p,itemHeadingTag:k,onItemVisibleChange:R,onItemHidden:D,onItemShown:P,slotItemStructure:g,slotItemBody:_,slotItemHeader:B},C=se(),F=c(()=>{const o=[];return C().forEach(a=>{a.state$().itemVisible&&o.push(a.state$().itemId)}),o}),z=J(F()[0]),X=c(()=>{t()&&(re(C(),F(),z()),z.set(F()[0]))}),Y=c(()=>{X()});return{...K({itemsWidget$:C,className$:r,...S}),patch:A,actions:{},api:{expand:o=>{var a;(a=W(C(),o))==null||a.api.expand()},collapse:o=>{var a;(a=W(C(),o))==null||a.api.collapse()},toggle:o=>{var a;(a=W(C(),o))==null||a.api.toggle()},expandAll:()=>{C().forEach(o=>o.api.expand())},collapseAll:()=>{C().forEach(o=>o.api.collapse())},registerItem:o=>{const a=me(s,n,{config:Z(q,ee(q,o==null?void 0:o.config),H),props:o==null?void 0:o.props});return a.directives.accordionItemDirective=w(()=>({destroy:C.register(a)}),$(()=>({attributes:{class:a.stores.itemClass$,id:a.stores.itemId$}}))),a}},directives:{accordionDirective:w(oe(Y),$(()=>({attributes:{class:r()},classNames:{"au-accordion":!0}})))}}}const ue=le,Ie=e=>{const s=new RegExp("^h[1-6]$").test(e.headerTag)?e.headerTag:"h2";return m.jsx(s,{className:"accordion-header",...y(e.directive),children:e.children})},U=h.createContext({}),ge=e=>{const t=y(e.widget.directives.bodyContainerDirective),s=y(e.widget.directives.bodyDirective);return m.jsxs(m.Fragment,{children:[m.jsx(Ie,{directive:e.widget.directives.headerDirective,headerTag:e.state.itemHeadingTag,children:m.jsx("button",{className:"accordion-button",...y(e.widget.directives.buttonDirective),children:m.jsx(M,{slotContent:e.state.slotItemHeader,props:e})})}),e.state.shouldBeInDOM?m.jsx("div",{className:"accordion-collapse",...t,children:m.jsx("div",{className:"accordion-body",...s,children:m.jsx(M,{slotContent:e.state.slotItemBody,props:e})})}):null]})},Ce={slotItemStructure:ge},Be=h.forwardRef(function(t,s){const{registerItem:n}=h.useContext(U),[r,I]=L(n,t,null,{...Ce}),f={state:r,widget:I};return h.useImperativeHandle(s,()=>I.api,[]),h.useEffect(()=>{I.api.initDone()},[]),m.jsx("div",{className:`accordion-item ${r.itemClass}`,...y(I.directives.accordionItemDirective),children:m.jsx(M,{slotContent:r.slotItemStructure,props:f})})}),Se=h.forwardRef(function(t,s){const n=L(ue,t,"accordion")[1];return h.useImperativeHandle(s,()=>n.api,[]),m.jsx(U.Provider,{value:n.api,children:m.jsx("div",{className:"accordion",...y(n.directives.accordionDirective),children:t.children})})});export{Se as A,Be as a};
