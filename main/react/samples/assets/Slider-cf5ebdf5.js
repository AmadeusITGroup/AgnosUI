import{j as g,R as be}from"./index-3fb541b7.js";import{b as pe,c as i,z as q,i as fe,e as T,d as $e,w as ve,s as he,n as ge,u as U}from"./utils-925d60ed.js";import{g as Q,e as I,h as De,t as X,b as J}from"./writables-3b79b637.js";import{u as ye}from"./config-9cf547d9.js";const Y={min:0,max:100,stepSize:1,readonly:!1,disabled:!1,vertical:!1,className:"",ariaLabelHandle:(m,n)=>""+m,onValuesChange:ge,values:[0]},Le={min:I,max:I,stepSize:De(0,1/0,{strict:!0}),readonly:X,disabled:X,vertical:X,ariaLabelHandle:J,onValuesChange:J,values:Q},we=(m,n,b,o,d)=>{const f=Math.pow(10,d);if(m>=b)return b;if(m<=n)return n;const $=Math.floor((m-n)*f/o);return+(((m-n)*f%o<o/2?$:$+1)*o/f+n).toFixed(d)};function xe(m){const[{min$:n,max$:b,stepSize$:o,values$:d,ariaLabelHandle$:f,onValuesChange$:$,...w},S]=pe(Y,m,Le),{vertical$:c,disabled$:N,readonly$:M}=w;let P=-1;const v=i(()=>n()===b()?Y.min:Math.min(n(),b())),h=i(()=>n()===b()?Y.max:Math.max(n(),b())),j=i(()=>Math.max(q(o()),q(v()),q(h()))),u=i(()=>o()*Math.pow(10,j())),p=fe($,[d,v,h,u,j],([e,t,s,a,l])=>e.map(V=>we(V,t,s,a,l)),Q.equal),{directive:z,element$:C}=T(),{directive:H,element$:_}=T(),{directive:B,element$:W}=T(),x=$e(C,(e,t)=>{if(!e){t({});return}const s=new ResizeObserver(()=>{t({})});return s.observe(e),()=>s.disconnect()},{}),y=ve({}),r=i(()=>{var e;return x(),y(),((e=C())==null?void 0:e.getBoundingClientRect())??{}},{equal:Object.is}),D=i(()=>{var e;return x(),y(),((e=_())==null?void 0:e.getBoundingClientRect())??{}},{equal:(e,t)=>Object.is(e,t)}),R=i(()=>{var e;return x(),y(),((e=W())==null?void 0:e.getBoundingClientRect())??{}},{equal:(e,t)=>Object.is(e,t)}),Z=i(()=>c()?r().top:r().left),A=i(()=>c()?r().height:r().width),K=i(()=>[...p()].sort((e,t)=>e-t)),ee=i(()=>p().map((e,t)=>({id:t,value:e})).sort((e,t)=>e.value-t.value)),te=i(()=>{const e=f();return ee().map((t,s)=>({...t,ariaLabel:e(t.value,s,t.id)}))}),k=i(()=>p().map(e=>ue(e))),E=i(()=>[...k()].sort((e,t)=>e-t)),ae=i(()=>D().width/A()*100),se=i(()=>R().width/A()*100),ie=i(()=>{const e=ae();return!k().some(t=>t<e+1)}),re=i(()=>{const e=se();return!k().some(t=>t>100-e-1)}),le=i(()=>{const e=p();return e.length==2&&Math.abs(e[0]-e[1])<10}),O=i(()=>!N()&&!M()),ne=i(()=>{const e=E();return c()||e.length!=2?0:(e[0]+e[1])/2}),oe=i(()=>{const e=E();return c()&&e.length==2?100-(e[0]+e[1])/2:0}),ce=i(()=>{const e=c();return k().map((t,s)=>({left:e?0:t,top:e?100-t:0}))}),de=i(()=>{const e=c(),t=E();return t.length===1?[{left:0,bottom:0,width:e?100:t[0],height:e?t[0]:100}]:t.map((s,a,l)=>({left:e?0:s,bottom:e?s:0,width:e?100:a===l.length-1?s:l[a+1]-s,height:e?a===l.length-1?s:l[a+1]-s:100})).slice(0,t.length-1)}),ue=e=>{const t=v();return(e-t)*100/(h()-t)},me=e=>{const t=p();if(t.length===1)return 0;const s=K(),a=s.find(L=>L>e*100),l=a?s.indexOf(a):s.length-1,V=s[l-1]+(s[l]-s[l-1])/2,F=s[e*100<=V?l-1:l];return t.indexOf(F)},G=(e,t)=>{if(O()){const s=A(),a=Z(),l=c()?(s-e+a)/s:(e-a)/s,V=t??me(l),F=l*(h()-v())+v();d.update(L=>(L=[...L],L[V]=F,L))}};return{...he({min$:v,max$:h,stepSize$:o,values$:p,sortedValues$:K,sortedHandles$:te,minValueLabelDisplay$:ie,maxValueLabelDisplay$:re,combinedLabelDisplay$:le,isInteractable$:O,combinedLabelPositionLeft$:ne,combinedLabelPositionTop$:oe,progressDisplayOptions$:de,handleDisplayOptions$:ce,...w}),patch:S,api:{},directives:{sliderDirective:z,minLabelDirective:H,maxLabelDirective:B},actions:{click(e){y.set({}),G(c()?e.clientY:e.clientX)},keydown(e,t){const{key:s}=e;if(O()){switch(s){case"ArrowDown":case"ArrowLeft":d.update(a=>(a=[...a],a[t]=p()[t]-o(),a));break;case"ArrowUp":case"ArrowRight":d.update(a=>(a=[...a],a[t]=p()[t]+o(),a));break;case"Home":d.update(a=>(a=[...a],a[t]=v(),a));break;case"End":d.update(a=>(a=[...a],a[t]=h(),a));break;case"PageUp":break;case"PageDown":break;default:return}e.preventDefault(),e.stopPropagation()}},mouseDown(e,t){e.preventDefault();const s=a=>{a.preventDefault();const l=c()?a.clientY:a.clientX;e.target.focus(),P!==l&&(P=l,G(l,t))};O()&&(e.target.focus(),document.addEventListener("mousemove",s),document.addEventListener("mouseup",()=>{document.removeEventListener("mousemove",s)},{once:!0}))}}}}function Ce(m){const[{className:n,combinedLabelDisplay:b,combinedLabelPositionLeft:o,combinedLabelPositionTop:d,disabled:f,handleDisplayOptions:$,max:w,maxValueLabelDisplay:S,min:c,minValueLabelDisplay:N,progressDisplayOptions:M,readonly:P,sortedHandles:v,sortedValues:h,values:j,vertical:u},{actions:{click:p,keydown:z,mouseDown:C},directives:{sliderDirective:H,minLabelDirective:_,maxLabelDirective:B}}]=ye(xe,m,"slider"),W=U(H),x=U(_),y=U(B);return g.jsxs("div",{ref:W,className:`au-slider ${u?"au-slider-vertical":"au-slider-horizontal"} ${n} ${f?" disabled":""}`,children:[M.map((r,D)=>g.jsx("div",{className:"au-slider-progress",style:{left:`${r.left}%`,bottom:`${r.bottom}%`,width:`${r.width}%`,height:`${r.height}%`}},D)),g.jsx("div",{className:u?"au-slider-clickable-area-vertical":"au-slider-clickable-area",onClick:r=>p(r)}),g.jsx("div",{ref:x,className:u?"au-slider-label-vertical au-slider-label-vertical-min":"au-slider-label au-slider-label-min",style:{visibility:N?"visible":"hidden"},children:c}),g.jsx("div",{ref:y,className:u?"au-slider-label-vertical au-slider-label-vertical-max":"au-slider-label au-slider-label-max",style:{visibility:S?"visible":"hidden"},children:w}),g.jsxs("div",{className:u?"au-slider-label-vertical au-slider-label-vertical-now":"au-slider-label au-slider-label-now",style:{visibility:b?"visible":"hidden",left:`${o}%`,top:`${d}%`},children:[h[0]," - ",h[1]]}),v.map((r,D)=>g.jsxs(be.Fragment,{children:[g.jsx("button",{className:`au-slider-handle ${u?"au-slider-handle-vertical":"au-slider-handle-horizontal"}`,role:"slider","aria-valuemin":c,"aria-valuemax":w,"aria-valuenow":r.value,"aria-valuetext":""+r.value,"aria-label":r.ariaLabel,"aria-readonly":P?"true":void 0,"aria-disabled":f?"true":void 0,"aria-orientation":u?"vertical":void 0,disabled:f,style:u?{top:`${$[r.id].top}%`}:{left:`${$[r.id].left}%`},onKeyDown:R=>z(R,r.id),onMouseDown:R=>C(R,r.id),children:"Â "}),g.jsx("div",{className:u?"au-slider-label-vertical au-slider-label-vertical-now":"au-slider-label au-slider-label-now",style:{left:`${$[D].left}%`,top:`${$[D].top}%`,visibility:b?"hidden":"visible"},children:j[D]})]},r.id))]})}export{Ce as S};
