import{r as p,w as b,a as d,b as l,n as y}from"./func-DR0n-ShK-BRtNsj1u.js";import{r as u}from"./App-DHhP8U0X.js";const m=(e,s)=>o=>{let t=!0,r;const n=s.subscribe(a=>{var i;t?(t=!1,r=e(o,a)):(i=r==null?void 0:r.update)==null||i.call(r,a)});return{destroy(){var a;(a=r==null?void 0:r.destroy)==null||a.call(r),n()}}},D=p(void 0),A=e=>m(e,D),R=(e,s=!0)=>()=>{const o=e.subscribe(y);return{destroy:async()=>{s&&await 0,o()}}},w=e=>(s,o)=>(e(o),{update:e}),f={equal:Object.is},_=()=>{const e=b([],f);return d(e,{register:s=>{let o=!1;return e.update(t=>[...t,s]),()=>{o||(o=!0,e.update(t=>{const r=t.indexOf(s);if(r>-1){const n=[...t];return n.splice(r,1),n}return t}))}}})},O=()=>{const e=_();return{elements$:d(e),directive:s=>({destroy:e.register(s)})}},S=()=>{const e=b(null,f);return{element$:d(e),directive:s=>{let o=!1;return e.update(t=>t?(console.error("The directive cannot be used on multiple elements.",t,s),t):(o=!0,s)),o?{destroy(){e.update(t=>s===t?null:t)}}:void 0}}},g=(...e)=>(s,o)=>{const t=l(()=>e.map(r=>r(s,o)));return{update(r){l(()=>t.forEach(n=>{var a;return(a=n==null?void 0:n.update)==null?void 0:a.call(n,r)}))},destroy(){l(()=>t.reverse().forEach(r=>{var n;return(n=r==null?void 0:r.destroy)==null?void 0:n.call(r)}))}}};function $(e,s){var o,t;const r=u.useRef(),n=u.useRef(),a=u.useCallback(i=>{var c,v;(v=(c=r.current)==null?void 0:c.destroy)==null||v.call(c),r.current=void 0,i&&(r.current=e(i,n.current))},[e]);return n.current=s,(t=(o=r.current)==null?void 0:o.update)==null||t.call(o,s),a}function q(e,s){const o=u.useMemo(()=>g(...e),e);return $(o,s)}export{m as a,A as b,O as c,R as d,S as e,w as f,q as g,g as m,_ as r,$ as u};
