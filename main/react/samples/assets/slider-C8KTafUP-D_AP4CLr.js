import{w as Pe,c as a,M as ke,N as F,a as _e,s as Re,b as W,d as D,f as Se}from"./directive-DCYlDznf-DygjZu6c.js";import{g as te,e as ee,h as Ee,t as $,a as U}from"./writables-DoU_XYTX-BokfCV5E.js";import{c as Ne}from"./resizeObserver-D-bqi4MP.js";const ze=/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/;function X(r){var c;const d=(""+r).match(ze);return Math.max(0,(((c=d[1])==null?void 0:c.length)??0)-(+d[2]||0))}const Y={min:0,max:100,stepSize:1,readonly:!1,disabled:!1,vertical:!1,className:"",ariaLabelHandle:r=>""+r,ariaValueText:r=>""+r,onValuesChange:Se,values:[0],showValueLabels:!0,showMinMaxLabels:!0,rtl:!1,slotStructure:void 0,slotLabel:({value:r})=>""+r,slotHandle:void 0},He={min:ee,max:ee,stepSize:Ee(0,1/0,{strict:!0}),readonly:$,disabled:$,vertical:$,ariaLabelHandle:U,ariaValueText:U,onValuesChange:U,values:te,showValueLabels:$,showMinMaxLabels:$,rtl:$},Oe=(r,c,d,v,o)=>{const y=Math.pow(10,o);if(r>=d)return d;if(r<=c)return c;const R=Math.floor((r-c)*y/v);return+(((r-c)*y%v<v/2?R:R+1)*v/y+c).toFixed(o)},N=(r,c,d,v)=>{c.update(o=>(o=[...o],o[r]=o[r]+d*v,o))},z=(r,c,d)=>r&&c?d?1:-1:r&&!c?-1:!r&&c?d?-1:1:!r&&!c?-1:1,b=r=>r!=null?`${r}%`:"";function je(r){const[{min$:c,max$:d,stepSize$:v,rtl$:o,values$:y,ariaLabelHandle$:R,ariaValueText$:ae,onValuesChange$:ie,showValueLabels$:H,showMinMaxLabels$:O,...T},le]=Pe(Y,r,He),{vertical$:n,disabled$:M,readonly$:C}=T;let S=-1;const g=a(()=>{const e=c(),t=d();return e===t?Y.min:Math.min(e,t)}),L=a(()=>{const e=c(),t=d();return e===t?Y.max:Math.max(e,t)}),G=a(()=>Math.max(X(v()),X(g()),X(L()))),se=a(()=>v()*Math.pow(10,G())),m=ke(y,ie,e=>{const t=g(),i=L(),s=se(),l=G();return e.map(u=>Oe(u,t,i,s,l))},te.equal),{directive:re,element$:ne}=F(),{directive:oe,element$:ce}=F(),{directive:ue,element$:de}=F(),{directive:me,dimensions$:A}=Ne(),V=_e({}),E=a(()=>{var e;return A(),V(),((e=ne())==null?void 0:e.getBoundingClientRect())??{}},{equal:Object.is}),be=a(()=>{var e;return A(),V(),((e=ce())==null?void 0:e.getBoundingClientRect())??{}},{equal:(e,t)=>Object.is(e,t)}),ve=a(()=>{var e;return A(),V(),((e=de())==null?void 0:e.getBoundingClientRect())??{}},{equal:(e,t)=>Object.is(e,t)}),fe=a(()=>n()?E().top:E().left),B=a(()=>n()?E().height:E().width),J=a(()=>[...m()].sort((e,t)=>e-t)),pe=a(()=>m().map((e,t)=>({id:t,value:e})).sort((e,t)=>e.value-t.value)),he=a(()=>{const e=R(),t=ae();return pe().map((i,s)=>({...i,ariaLabel:e(i.value,s,i.id),ariaValueText:t(i.value,s,i.id)}))}),w=a(()=>m().map(e=>$e(e))),j=a(()=>[...w()].sort((e,t)=>e-t)),ge=a(()=>be().width/B()*100),De=a(()=>ve().width/B()*100),K=a(()=>{if(O()){if(!H())return!0}else return!1;const e=ge();return o()?!w().some(t=>100-t>100-e-1):!w().some(t=>t<e+1)}),Q=a(()=>{if(O()){if(!H())return!0}else return!1;const e=De();return o()?!w().some(t=>100-t<e+1):!w().some(t=>t>100-e-1)}),Le=a(()=>{const e=m();return e.length==2&&Math.abs(e[0]-e[1])<10}),x=a(()=>!M()&&!C()),Z=a(()=>{const e=j(),t=(e[0]+e[1])/2;return n()||e.length!=2?0:o()?100-t:t}),I=a(()=>{const e=j(),t=100-(e[0]+e[1])/2;return n()&&e.length==2?o()?100-t:t:0}),P=a(()=>{const e=n(),t=o();return w().map((i,s)=>({left:t?e?null:100-i:e?null:i,top:t?e?i:null:e?100-i:null}))}),we=a(()=>{const e=n(),t=j(),i=o();return t.length===1?[{left:e||i?null:0,right:e?null:i?0:null,bottom:e?i?null:0:null,top:e&&i?0:null,width:e?100:t[0],height:e?t[0]:100}]:t.map((s,l,u)=>({left:e||i?null:s,right:e?null:i?u[l]:null,bottom:e?i?null:s:null,top:e&&i?u[l]:null,width:e?100:l===u.length-1?s:u[l+1]-s,height:e?l===u.length-1?s:u[l+1]-s:100})).slice(0,t.length-1)}),$e=e=>{const t=g();return(e-t)*100/(L()-t)},ye=e=>{const t=m();if(t.length===1)return 0;const i=J(),s=i.find(p=>p>e*100),l=s?i.indexOf(s):i.length-1,u=i[l-1]+(i[l]-i[l-1])/2,_=i[e*100<=u?l-1:l];return t.indexOf(_)},q=(e,t)=>{if(x()){const i=B(),s=fe();let l=n()?(i-e+s)/i:(e-s)/i;l=o()?1-l:l;const u=t??ye(l),_=l*(L()-g())+g();m.update(p=>(p=[...p],p[u]=_,p))}},f=a(()=>!n()),Me=D(()=>({attributes:{"aria-disabled":a(()=>M()?"true":void 0),class:T.className$},classNames:{"au-slider":!0,"au-slider-vertical":n,"au-slider-horizontal":f,disabled:M}})),Ve=D(()=>({classNames:{"au-slider-label-vertical":n,"au-slider-label-vertical-min":n,"au-slider-label":f,"au-slider-label-min":f,"au-slider-rtl":o,invisible:a(()=>!K())}})),xe=D(()=>({classNames:{"au-slider-label-vertical":n,"au-slider-label-vertical-max":n,"au-slider-label":f,"au-slider-label-max":f,"au-slider-rtl":o,invisible:a(()=>!Q())}})),k={...Re({min$:g,max$:L,stepSize$:v,values$:m,sortedValues$:J,sortedHandles$:he,minValueLabelDisplay$:K,maxValueLabelDisplay$:Q,combinedLabelDisplay$:Le,interactive$:x,combinedLabelPositionLeft$:Z,combinedLabelPositionTop$:I,progressDisplayOptions$:we,handleDisplayOptions$:P,showValueLabels$:H,showMinMaxLabels$:O,rtl$:o,...T}),patch:le,api:{},directives:{sliderDirective:W(re,me,Me),progressDisplayDirective:D(e=>({styles:{left:a(()=>b(e().option.left)),right:a(()=>b(e().option.right)),top:a(()=>b(e().option.top)),bottom:a(()=>b(e().option.bottom)),width:a(()=>b(e().option.width)),height:a(()=>b(e().option.height))},classNames:{"au-slider-progress":!0}})),clickableAreaDirective:D(()=>({events:{click:e=>k.actions.click(e)},classNames:{"au-slider-clickable-area":f,"au-slider-clickable-area-vertical":n}})),handleDirective:D(e=>({events:{keydown:t=>k.actions.keydown(t,e().item.id),mousedown:t=>k.actions.mouseDown(t,e().item.id),touchstart:t=>k.actions.touchStart(t,e().item.id)},attributes:{role:"slider","aria-valuemin":g,"aria-valuemax":L,"aria-valuenow":a(()=>e().item.value),"aria-valuetext":a(()=>e().item.ariaValueText),"aria-label":a(()=>e().item.ariaLabel),"aria-orientation":a(()=>n()?"vertical":void 0),"aria-disabled":a(()=>M()?"true":void 0),disabled:M,"aria-readonly":a(()=>C()?"true":void 0)},styles:{left:a(()=>b(P()[e().item.id].left)),top:a(()=>b(P()[e().item.id].top))},classNames:{"au-slider-handle":!0,"au-slider-handle-vertical":n,"au-slider-handle-horizontal":f}})),minLabelDirective:W(oe,Ve),maxLabelDirective:W(ue,xe),combinedHandleLabelDisplayDirective:D(()=>({classNames:{"au-slider-label-vertical":n,"au-slider-label-vertical-now":n,"au-slider-label":f,"au-slider-label-now":f},styles:{left:a(()=>b(Z())),top:a(()=>b(I()))}})),handleLabelDisplayDirective:D(e=>({classNames:{"au-slider-label-vertical":n,"au-slider-label-vertical-now":n,"au-slider-label":f,"au-slider-label-now":f},styles:{left:a(()=>b(P()[e().index].left)),top:a(()=>b(P()[e().index].top))}}))},actions:{click(e){q(n()?e.clientY:e.clientX)},keydown(e,t){const{key:i}=e,s=o(),l=v(),u=g(),_=L(),p=n();if(x()){switch(i){case"ArrowDown":N(t,m,l,z(p,s,!0));break;case"ArrowLeft":N(t,m,l,z(p,s,!1));break;case"ArrowUp":N(t,m,l,-1*z(p,s,!0));break;case"ArrowRight":N(t,m,l,-1*z(p,s,!1));break;case"Home":m.update(h=>(h=[...h],h[t]=u,h));break;case"End":m.update(h=>(h=[...h],h[t]=_,h));break;case"PageUp":break;case"PageDown":break;default:return}e.preventDefault(),e.stopPropagation()}},mouseDown(e,t){e.preventDefault();const i=e.target,s=l=>{l.preventDefault();const u=n()?l.clientY:l.clientX;i.focus(),S!==u&&(S=u,q(u,t))};x()&&(V.set({}),i.focus(),document.addEventListener("mousemove",s),document.addEventListener("mouseup",()=>{document.removeEventListener("mousemove",s)},{once:!0}))},touchStart(e,t){e.preventDefault();const i=s=>{s.preventDefault();const l=n()?s.touches[0].clientY:s.touches[0].clientX;e.target.focus(),S!==l&&(S=l,q(l,t))};x()&&(V.set({}),e.target.focus(),document.addEventListener("touchmove",i,{passive:!1}),document.addEventListener("touchend",()=>{document.removeEventListener("touchmove",i),document.removeEventListener("touchcancel",i)},{once:!0}),document.addEventListener("touchcancel",()=>{document.removeEventListener("touchmove",i),document.removeEventListener("touchend",i)},{once:!0}))}}};return k}export{je as c};
