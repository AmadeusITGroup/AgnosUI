var he=t=>{throw TypeError(t)};var ee=(t,e,s)=>e.has(t)||he("Cannot "+s);var c=(t,e,s)=>(ee(t,e,"read from private field"),s?s.call(t):e.get(t)),b=(t,e,s)=>e.has(t)?he("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),l=(t,e,s,n)=>(ee(t,e,"write to private field"),n?n.call(t,s):e.set(t,s),s),v=(t,e,s)=>(ee(t,e,"access private method"),s);var be=(t,e,s,n)=>({set _(i){l(t,e,i,s)},get _(){return c(t,e,n)}});var ve;const X=typeof Symbol=="function"&&Symbol.observable||"@@observable",ie=Symbol(),q=()=>{},J=()=>{};J.unsubscribe=J;const te=(t,e)=>{const s=t?t[e]:null;return typeof s=="function"?s.bind(t):q},_e=t=>({next:typeof t=="function"?t.bind(null):te(t,"next"),pause:te(t,"pause"),resume:te(t,"resume"),_value:void 0,_valueIndex:0,_paused:!1}),Ie=function(){return this},re=t=>{if(!t)return J;if(t.unsubscribe===t)return t;const e=typeof t=="function"?()=>t():()=>t.unsubscribe();return e.unsubscribe=e,e},ne=new WeakSet,je=t=>{let e=t.subscribe;return ne.has(e)||(e=(...s)=>re(t.subscribe(...s)),ne.add(e)),e},Y=t=>{const e="subscribe"in t?t:t[X]();return je(e)},ze=t=>{let e;return t(s=>e=s)(),e};function A(t,e){const s=Y(t),n=Object.assign(()=>ue(n),e,{subscribe:s,[X]:Ie});return n}const pe=function(t){this.set(t(ke(()=>ue(this))))};function oe(t,e){return A(t,typeof e=="function"?{set:e,update:pe}:{...e,set:(e==null?void 0:e.set)??q,update:(e==null?void 0:e.update)??(e!=null&&e.set?pe:q)})}const g=Symbol(),we=Symbol();let se=!1;const R=new Set,Le=1e3,ce=t=>{if(t>Le)throw new Error("reached maximum number of store changes in one shot")},k=t=>{const e=!se;e&&(se=!0);try{return t()}finally{if(e)try{const s=new Map;for(const n of R){const i=s.get(n)??0;ce(i),s.set(n,i+1),R.delete(n),n[we]()}}finally{R.clear(),se=!1}}},Ce=t=>ze(Y(t));let $=Ce;const ue=t=>$(t),ye=t=>({[t]:!0,[t-1]:!1,0:!1}),L=Symbol(),De=(t,e)=>Object.is(t,e)&&(!t||typeof t!="object")&&typeof t!="function";var w,V,C,N,x,E,j,D,Ne,Ue,Q;class ae{constructor(e){b(this,D);b(this,w);b(this,V);b(this,C);b(this,N);b(this,x);b(this,E);b(this,j);l(this,w,new Set),l(this,V,null),l(this,C,!1),l(this,N,1),l(this,E,ye(1)),l(this,j,new WeakMap),this[ve]=!1,l(this,x,e)}[(ve=L,we)](){const e=c(this,N);for(const s of[...c(this,w)]){if(c(this,C)||c(this,N)!==e)return;s._valueIndex!==0&&v(this,D,Q).call(this,s)}}[g](){}equal(e,s){return!this.notEqual(e,s)}notEqual(e,s){return!De(e,s)}pauseSubscribers(){if(!c(this,C)){l(this,C,!0),R.delete(this);for(const e of[...c(this,w)])e._valueIndex===0||e._paused||(e._paused=!0,e.pause())}}resumeSubscribers(){c(this,C)&&(l(this,C,!1),k(()=>{R.add(this)}))}set(e){const s=this[L];if(s||!this.equal(c(this,x),e)){const n=c(this,N)+1;l(this,N,n),l(this,x,e),l(this,E,ye(n)),s&&delete c(this,E)[n-1],this.pauseSubscribers()}this.resumeSubscribers()}update(e){this.set(e(c(this,x)))}onUse(){}subscribe(e){const s=_e(e),n=e==null?void 0:e[ie];if(n){const r=c(this,j).get(n);r&&(s._value=r._value,s._valueIndex=r._valueIndex)}c(this,w).add(s),k(()=>{c(this,w).size==1?v(this,D,Ne).call(this):this[g]()}),v(this,D,Q).call(this,s);const i=()=>{const r=c(this,w).delete(s);s.next=q,s.pause=q,s.resume=q,r&&(c(this,j).set(i,s),c(this,w).size===0&&v(this,D,Ue).call(this))};return i[g]=()=>{this[g](),v(this,D,Q).call(this,s)},i.unsubscribe=i,i}[X](){return this}}w=new WeakMap,V=new WeakMap,C=new WeakMap,N=new WeakMap,x=new WeakMap,E=new WeakMap,j=new WeakMap,D=new WeakSet,Ne=function(){l(this,V,re(this.onUse()))},Ue=function(){const e=c(this,V);e&&(l(this,V,null),e())},Q=function(e){const s=c(this,E),n=c(this,N),i=c(this,x);let r=s[e._valueIndex];r==null&&(r=!!this.equal(e._value,i),s[e._valueIndex]=r),e._valueIndex=n,r?!c(this,C)&&e._paused&&(e._paused=!1,e.resume()):(e._value=i,e._paused=!1,e.next(i))};function Fe(t){const e=s=>(s!=null&&s[ie]||_e(s).next(t),J);return ne.add(e),Object.assign(()=>t,{subscribe:e,[X]:Ie})}class qe extends ae{constructor(e){super(e)}set(e){super.set(e)}update(e){super.update(e)}}const P=(t,e)=>{const{onUse:s,equal:n,notEqual:i}=e;return s&&(t.onUse=function(){const r=o=>this.set(o);return r.set=r,r.update=o=>this.update(o),s(r)}),n&&(t.equal=function(r,o){return n(r,o)}),i&&(t.notEqual=function(r,o){return i(r,o)}),t};function le(t,e={}){return typeof e=="function"&&(e={onUse:e}),e.onUse?A(P(new qe(t),e)):Fe(t)}function H(t,e={}){typeof e=="function"&&(e={onUse:e});const s=P(new qe(t),e);return A(s,{set:s.set.bind(s),update:s.update.bind(s)})}function Me(t){return t.length<=1}const Re=t=>t();var W,B,_;class me extends ae{constructor(s,n){super(n);b(this,W);b(this,B);b(this,_,0);const i=Array.isArray(s);l(this,W,i),l(this,B,(i?[...s]:[s]).map(Y))}resumeSubscribers(){c(this,_)||super.resumeSubscribers()}onUse(){let s=!1,n=0;const i=c(this,W),r=c(this,B),o=new Array(r.length);let u=null;const p=()=>{const d=u;d&&(u=null,d())},f=(d=!1)=>{d&&(s=!0),s&&!c(this,_)&&(n&&(n=0,p(),u=re(this.derive(i?o:o[0]))),this.resumeSubscribers())},a=r.map((d,m)=>{const y=Z=>{o[m]=Z,n|=1<<m,l(this,_,c(this,_)&~(1<<m)),f()};return y.next=y,y.pause=()=>{l(this,_,c(this,_)|1<<m),this.pauseSubscribers()},y.resume=()=>{l(this,_,c(this,_)&~(1<<m)),f()},d(y)}),I=(d,m)=>{var y;c(this,_)&1<<m&&((y=d[g])==null||y.call(d))};return this[g]=()=>{let d=0;for(;c(this,_)&&(ce(++d),s=!1,a.forEach(I),!c(this,_));)f(!0)},f(!0),this[g](),()=>{this[g]=q,p(),a.forEach(Re)}}}W=new WeakMap,B=new WeakMap,_=new WeakMap;function We(t,e,s){typeof e=="function"&&(e={derive:e});const{derive:n,...i}=e,r=Me(n)?class extends me{constructor(o,u){super(o,u),this[L]=!0}derive(o){this.set(n(o)),this[L]=!1}}:class extends me{derive(o){const u=p=>this.set(p);return u.set=u,u.update=p=>this.update(p),n(o,u)}};return A(P(new r(t,s),{...i,onUse:void 0}))}const ke=t=>{const e=$;try{return $=Ce,t()}finally{$=e}},Be=({unsubscribe:t})=>t(),He=({resubscribe:t})=>t();var z,U,O,S,K,h,Ae,xe,M,T,Oe;class Qe extends ae{constructor(){super(void 0);b(this,h);b(this,z,!1);b(this,U,!1);b(this,O,0);b(this,S,new Map);b(this,K,s=>ke(()=>v(this,h,xe).call(this,s)));this[L]=!0}resumeSubscribers(){v(this,h,T).call(this)||super.resumeSubscribers()}[g](){var n;if(c(this,z))throw new Error("recursive computed");let s=0;for(;v(this,h,T).call(this);){ce(++s),l(this,U,!0);try{for(const[,{pending:i,unsubscribe:r}]of c(this,S))i&&((n=r[g])==null||n.call(r))}finally{l(this,U,!1)}if(v(this,h,T).call(this))break;v(this,h,M).call(this)}}onUse(){return v(this,h,M).call(this,!0),this[g](),()=>c(this,S).forEach(Be)}}z=new WeakMap,U=new WeakMap,O=new WeakMap,S=new WeakMap,K=new WeakMap,h=new WeakSet,Ae=function(s){const n={versionIndex:c(this,O),unsubscribe:q,resubscribe:q,pending:!1,usedValueIndex:0,value:void 0,valueIndex:0},i=r=>{n.value=r,n.valueIndex++,n.pending=!1,!c(this,U)&&!v(this,h,T).call(this)&&k(()=>v(this,h,M).call(this))};return i.next=i,i.pause=()=>{n.pending=!0,this.pauseSubscribers()},i.resume=()=>{n.pending=!1,!c(this,U)&&!v(this,h,T).call(this)&&k(()=>v(this,h,M).call(this))},n.resubscribe=()=>{n.unsubscribe=s(i),i[ie]=n.unsubscribe},n.resubscribe(),n},xe=function(s){var i,r;let n=c(this,S).get(s);return n?(n.versionIndex=c(this,O),(r=(i=n.unsubscribe)[g])==null||r.call(i)):(n=v(this,h,Ae).call(this,Y(s)),c(this,S).set(s,n)),n.usedValueIndex=n.valueIndex,n.value},M=function(s=!1){l(this,z,!0),l(this,U,!0);try{if(c(this,O)>0&&(s&&c(this,S).forEach(He),!v(this,h,Oe).call(this))){this.resumeSubscribers();return}be(this,O)._++;const n=c(this,O),i=$;let r;try{$=c(this,K),r=this.compute()}finally{$=i}this.set(r),this[L]=!1;for(const[o,u]of c(this,S))u.versionIndex!==n&&(c(this,S).delete(o),u.unsubscribe())}finally{l(this,U,!1),l(this,z,!1)}},T=function(){for(const[,{pending:s}]of c(this,S))if(s)return!0;return!1},Oe=function(){for(const[,{valueIndex:s,usedValueIndex:n}]of c(this,S))if(s!=n)return!0;return!1};function F(t,e={}){const s=class extends Qe{compute(){return t()}};return A(P(new s,{...e,onUse:void 0}))}const Ge=()=>{},Ve=t=>t,dt=t=>({actions:t.actions,api:t.api,directives:t.directives,state$:t.state$,stores:t.stores}),Se=Symbol();function Je(t){return function(e){k(()=>{var s;for(const[n,i]of Object.entries(e))(s=t[`${n}$`])==null||s.set(i)})}}function ht(t,e){if(t===e)return null;let s=!1;const n={},i=new Set([...Object.keys(t),...Object.keys(e)]);for(const r of i){const o=e[r];t[r]!==o&&(n[r]=o,s=!0)}return s?n:null}function Ke(t,e=le(void 0),s={},n=H(void 0)){const{normalizeValue:i=Ve,equal:r=Object.is}=s,o=()=>t,u=(a,I=o)=>{const d=a===void 0?void 0:i(a);return d===Se?(console.error("Not using invalid value",a),I()):d===void 0?I():d},p=F(()=>u(e()),{equal:r}),f=F(()=>u(n(),p),{equal:r});return oe(f,a=>{if(a!==void 0){const I=i(a);if(I===Se){console.error("Not setting invalid value",a);return}a=I}n.set(a)})}const fe=t=>!!(t&&typeof t=="function"&&"subscribe"in t),G=t=>fe(t)?t:le(t),Xe=t=>fe(t)?t:H(t),Ye=(t,e)=>{const s={};if(e){const n=fe(e);for(const i of t)s[i]=n?F(()=>e()[i]):G(e[i])}return s},bt=(t,e,s)=>{const n={};for(const i of t){const r=e==null?void 0:e[i],o=s==null?void 0:s[i];n[i]=r&&o?F(()=>r()??o()):r||o}return n},Pe=(t,e,s)=>{const n={},i=Object.keys(t),r=Ye(i,e==null?void 0:e.config),o=e==null?void 0:e.props;for(const u of i){const p=o==null?void 0:o[u];n[`${u}$`]=Ke(t[u],r[u],s==null?void 0:s[u],Xe(p))}return n},vt=(t,e,s)=>{const n=Pe(t,e,s);return[n,Je(n)]},pt=t=>{const e=[],s=[],n={};for(const[i,r]of Object.entries(t))i.endsWith("$")&&(e.push(i.substring(0,i.length-1)),s.push(r),n[i]=A(r));return{stores:n,state$:F(()=>{const i=s.map(ue),r={};return e.forEach((o,u)=>{r[o]=i[u]}),r})}},yt=(t,e,s=i=>i[0],n=(i,r)=>r===i)=>{let i=e[0]();return oe(We(e,{derive(r){const o=s(r),u=!n(r[0],o);return u&&e[0].set(o),(u||!n(i,o))&&(i=o,t()(o)),o},equal:n}),e[0].set.bind(e[0]))},mt=(t,e,s=Ve,n=De)=>oe(F(()=>s(t()),{equal:n}),i=>{const r=s(i);n(t(),r)||(t.set(r),e()(r))}),St=t=>{const e=t.length;if(e===0)return null;let s=t[0];for(let n=1;n<e&&s;n++){const i=t[n];for(;s&&s!==i;){const r=s.compareDocumentPosition(i);if(r&Node.DOCUMENT_POSITION_CONTAINED_BY)break;if(r&Node.DOCUMENT_POSITION_CONTAINS){s=i;break}else if(r&Node.DOCUMENT_POSITION_DISCONNECTED)return null;s=s.parentElement}}return s},gt=(t=document.body)=>{de(t)&&t.getBoundingClientRect()},_t=(t,e)=>{e&&e.length>0&&t.classList.add(...e)},It=(t,e)=>{e&&e.length>0&&t.classList.remove(...e)};function ge(t,e,s,n){return t.addEventListener(e,s,n),function(){t.removeEventListener(e,s,n)}}let Ze=0;const wt=()=>`auId-${Ze++}`,Ee=t=>t!=null&&t!==!1;function et(t,e){let s=new Set;return e.subscribe(n=>{const i=new Set(`${n??""}`.split(" "));i.delete("");const r=t.classList;for(const o of s)i.has(o)||r.remove(o);i.size>0&&r.add(...i),s=i})}function tt(t,e,s){return s.subscribe(n=>{Ee(n)?t.setAttribute(e,""+(n===!0?e:n)):t.removeAttribute(e)})}function st(t,e,s){return e==="class"?et(t,s):tt(t,e,s)}function nt(t,e,s){return s.subscribe(n=>{const i=t.style;i[e]=""+(Ee(n)?n:"")})}function it(t,e,s){const n=s.subscribe(i=>{t.classList.toggle(e,i)});return()=>{n(),t.classList.remove(e)}}const de=t=>{var e;const s=((e=t==null?void 0:t.ownerDocument)==null?void 0:e.defaultView)??window;return t instanceof s.HTMLElement},$e=t=>(e,s)=>{if(de(e))return t(e,s)},rt=(t,e)=>s=>{let n=!0,i;const r=e.subscribe(o=>{var u;n?(n=!1,i=t(s,o)):(u=i==null?void 0:i.update)==null||u.call(i,o)});return{destroy(){var o;(o=i==null?void 0:i.destroy)==null||o.call(i),r()}}},ot=le(void 0),Ct=t=>rt(t,ot),Dt=(t,e=!0)=>()=>{const s=t.subscribe(Ge);return{destroy:async()=>{e&&await 0,s()}}},Nt=t=>(e,s)=>(t(s),{update:t}),Te={equal:Object.is},ct=()=>{const t=H([],Te);return A(t,{register:e=>{let s=!1;return t.update(n=>[...n,e]),()=>{s||(s=!0,t.update(n=>{const i=n.indexOf(e);if(i>-1){const r=[...n];return r.splice(i,1),r}return n}))}}})},ut=()=>{const t=ct();return{elements$:A(t),directive:e=>({destroy:t.register(e)})}},Ut=()=>{const{directive:t,elements$:e}=ut();return{directive:$e(t),elements$:e}},at=()=>{const t=H(null,Te);return{element$:A(t),directive:e=>{let s=!1;return t.update(n=>n?(console.error("The directive cannot be used on multiple elements.",n,e),n):(s=!0,e)),s?{destroy(){t.update(n=>e===n?null:n)}}:void 0}}},qt=()=>{const{directive:t,element$:e}=at();return{directive:$e(t),element$:e}},kt=(...t)=>(e,s)=>{const n=k(()=>t.map(i=>i(e,s)));return{update(i){k(()=>n.forEach(r=>{var o;return(o=r==null?void 0:r.update)==null?void 0:o.call(r,i)}))},destroy(){k(()=>n.reverse().forEach(i=>{var r;return(r=i==null?void 0:i.destroy)==null?void 0:r.call(i)}))}}},At=(t,e)=>{const s=[],n=i=>k(()=>{i.forEach((o,u)=>{var p,f,a,I;const[d,m]=Array.isArray(o)?o:[o,void 0],y=s[u];if(y){if(y.directive===d){y.arg!==m&&((f=(p=y.instance)==null?void 0:p.update)==null||f.call(p,m),y.arg=m);return}(I=(a=y.instance)==null?void 0:a.destroy)==null||I.call(a)}const Z=d(t,m);s[u]={directive:d,instance:Z,arg:m}}),s.splice(i.length).reverse().forEach(({instance:o})=>{var u;return(u=o==null?void 0:o.destroy)==null?void 0:u.call(o)})});return n(e),{update:n,destroy:()=>n([])}},lt=t=>(e,s)=>{const n=[],i=H(s),{events:r,attributes:o,styles:u,classNames:p}=t(i);if(de(e))for(const[f,a]of Object.entries(r??{}))typeof a=="function"?n.push(ge(e,f,a)):n.push(ge(e,f,a.handler,a.options));for(const[f,a]of Object.entries(o??{}))a!=null&&n.push(st(e,f,G(a)));for(const[f,a]of Object.entries(u??{}))a&&n.push(nt(e,f,G(a)));for(const[f,a]of Object.entries(p??{}))n.push(it(e,f,G(a)));return{update:f=>i.set(f),destroy:()=>n.forEach(f=>f())}},xt=lt(t=>({attributes:{class:t}}));export{fe as A,k as B,ht as C,A as D,at as E,yt as F,We as G,Nt as H,Se as I,De as J,mt as K,qt as L,Ut as M,rt as N,St as O,ge as a,$e as b,xt as c,F as d,oe as e,vt as f,ct as g,bt as h,Ve as i,kt as j,lt as k,Dt as l,At as m,Ye as n,Ge as o,wt as p,Ct as q,le as r,pt as s,dt as t,de as u,It as v,H as w,_t as x,gt as y,Pe as z};
