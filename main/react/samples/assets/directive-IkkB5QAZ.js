import{r as v,w as l,a as n,b as f,n as y}from"./func-B0ufEirG.js";import{r as a}from"./index-9m2SOxX7.js";const m=(e,s)=>o=>{let t=!0,r;const u=s.subscribe(d=>{var i;t?(t=!1,r=e(o,d)):(i=r==null?void 0:r.update)==null||i.call(r,d)});return{destroy(){var d;(d=r==null?void 0:r.destroy)==null||d.call(r),u()}}},D=v(void 0),R=e=>m(e,D),w=(e,s=!0)=>()=>{const o=e.subscribe(y);return{destroy:async()=>{s&&await 0,o()}}},O=e=>(s,o)=>(e(o),{update:e}),p={equal:Object.is},g=()=>{const e=l([],p);return n(e,{register:s=>{let o=!1;return e.update(t=>[...t,s]),()=>{o||(o=!0,e.update(t=>{const r=t.indexOf(s);if(r>-1){const u=[...t];return u.splice(r,1),u}return t}))}}})},S=()=>{const e=g();return{elements$:n(e),directive:s=>({destroy:e.register(s)})}},q=()=>{const e=l(null,p);return{element$:n(e),directive:s=>{let o=!1;return e.update(t=>t?(console.error("The directive cannot be used on multiple elements.",t,s),t):(o=!0,s)),o?{destroy(){e.update(t=>s===t?null:t)}}:void 0}}},$=(...e)=>(s,o)=>{const t=f(()=>e.map(r=>r(s,o)));return{update(r){f(()=>t.forEach(u=>{var d;return(d=u==null?void 0:u.update)==null?void 0:d.call(u,r)}))},destroy(){f(()=>t.reverse().forEach(r=>{var u;return(u=r==null?void 0:r.destroy)==null?void 0:u.call(r)}))}}};function h(e,s){var u,d;const o=a.useRef(),t=a.useRef(),r=a.useCallback(i=>{var c,b;(b=(c=o.current)==null?void 0:c.destroy)==null||b.call(c),o.current=void 0,i&&(o.current=e(i,t.current))},[e]);return t.current=s,(d=(u=o.current)==null?void 0:u.update)==null||d.call(u,s),r}function T(e,s){const o=a.useMemo(()=>$(...e),e);return h(o,s)}export{m as a,R as b,S as c,w as d,q as e,O as f,T as g,$ as m,g as r,h as u};
