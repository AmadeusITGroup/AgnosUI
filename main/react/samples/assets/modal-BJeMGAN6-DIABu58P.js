import{f as L,D as _,b as a,m as D,k as W,n as c,z as S,r as M,j as ee,a as B,E as te}from"./dom-Bcg9ORcA-WqVLZWvA.js";import{c as p,b as u,t as w,j as oe}from"./writables-e0tyaQpe-CjYdKy22.js";import{w as re,s as ne}from"./stores-4lfDy9AV.js";import{c as P}from"./baseTransitions-2dB302vm.js";import{d as ie}from"./promise-XSP94FjG-B7gfYTWC.js";import{c as se}from"./widget-Cks0GYyt.js";const V=L((e,n)=>{let t,o;const i=()=>{o&&(o.parentNode?.replaceChild(e,o),o=null)},r=d=>{if(d!==t&&(d?.container!==t?.container||d?.insertBefore!==t?.insertBefore)){t=d;const b=t?.container??t?.insertBefore?.parentElement;if(b){const v=t?.insertBefore??null;(e.parentElement!==b||e.nextSibling!==v)&&(o||(o=e.parentNode?.insertBefore(e.ownerDocument.createComment("portal"),e)),b.insertBefore(e,v))}else i()}};return r(n),{update:r,destroy:()=>{i(),e.parentNode?.removeChild(e)}}}),ae="data-agnos-ignore-inert",ce=e=>{const n=new Map,t=o=>{const i=o.parentElement;i&&o!==document.body&&(Array.from(i.children).forEach(r=>{r!==o&&r.nodeName!=="SCRIPT"&&!r.hasAttribute(ae)&&(n.set(r,r.hasAttribute("inert")),r.toggleAttribute("inert",!0))}),t(i))};return t(e),()=>n.forEach((o,i)=>{i.toggleAttribute("inert",o)})};let F=c;const le=e=>{F(),F=e?ce(e):c},{directive:de,elements$:me}=_(),ue=a(()=>{const e=me();return e[e.length-1]},{equal:Object.is}),be=a(()=>le(ue())),pe=D(de,W(be)),ve=()=>{const e=Math.abs(window.innerWidth-document.documentElement.clientWidth),n=document.body,t=n.style,{overflow:o,paddingRight:i}=t;if(e>0){const r=parseFloat(window.getComputedStyle(n).paddingRight);t.paddingRight=`${r+e}px`}return t.overflow="hidden",()=>{e>0&&(t.paddingRight=i),t.overflow=o}};let C=c;const fe=()=>{C(),C=ve()},$e=()=>{C(),C=c},ge=Symbol(),he=Symbol(),Ce={animated:!0,ariaCloseButtonLabel:"Close",backdrop:!0,backdropClass:"",backdropTransition:c,closeButton:!0,closeOnOutsideClick:!0,container:typeof window<"u"?document.body:null,className:"",modalTransition:c,onBeforeClose:c,onVisibleChange:c,onHidden:c,onShown:c,visible:!1},ye={animated:p,ariaCloseButtonLabel:w,backdrop:p,backdropClass:w,backdropTransition:u,closeButton:p,closeOnOutsideClick:p,container:oe,className:w,modalTransition:u,onBeforeClose:u,onVisibleChange:u,onHidden:u,onShown:u,visible:p},j=ee(),ke=a(()=>j().length>0),Se=a(()=>{ke()?fe():$e()}),Be=a(()=>{Se()}),Oe=se("modal",e=>{const[{animated$:n,backdrop$:t,backdropTransition$:o,closeOnOutsideClick$:i,container$:r,modalTransition$:d,onBeforeClose$:b,onVisibleChange$:v,onHidden$:T,onShown$:x,ariaCloseButtonLabel$:A,className$:E,backdropClass$:N,visible$:O,...q},f]=re(Ce,e,ye),m=P({props:{transition:d,visible:O,animated:n,animatedOnInit:n,onVisibleChange:v,onHidden:T,onShown:x}}),y=m.stores.visible$,R=P({props:{transition:o,visible:O,animated:n,animatedOnInit:n}}),I=a(()=>m.stores.transitioning$()||t()&&R.stores.transitioning$()),$=a(()=>!I()&&!y()),z=a(()=>!t()||$());let g;const k=s=>{g=s;const l={get result(){return g},set result(h){g=h},cancel:!1};b()(l),!l.cancel&&f({visible:!1})},G=S(V,a(()=>({container:r()}))),J=S(V,a(()=>{const s=r(),l=s?m.stores.element$():void 0;return{container:s,insertBefore:l?.parentElement===s?l:void 0}})),K=M(void 0,()=>j.register(H)),Q=a(()=>{m.stores.elementPresent$()&&!$()&&K(),Be()}),U=B(()=>({attributes:{type:M("button"),"aria-label":A},events:{click:()=>k(he)}})),X=B(()=>({attributes:{class:N}})),Y=B(()=>({attributes:{class:E},events:{click:s=>{s.currentTarget===s.target&&i()&&k(ge)}}})),H={...ne({backdropHidden$:z,container$:r,hidden$:$,transitioning$:I,visible$:y,modalElement$:m.stores.element$,ariaCloseButtonLabel$:A,className$:E,backdropClass$:N,...q}),directives:{modalPortalDirective:G,backdropPortalDirective:J,backdropDirective:D(R.directives.directive,X),modalDirective:D(m.directives.directive,te(pe),W(Q),Y),closeButtonDirective:U,dialogDirective:S(L((s,l)=>{const h=Z=>{Z?s.showModal():s.close()};return h(l),{update:h}}),y)},patch:f,api:{close:k,async open(){return f({visible:!0}),await ie($).promise,g},patch:f}};return H});export{ge as a,Oe as c,he as m};
