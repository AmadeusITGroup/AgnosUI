import{j as t,r as be}from"./App-XYQ6f2LA.js";import{S as A}from"./slot-BM2EyfWv.js";import{u as T}from"./directive-Ds3K8r_f-C5EAp1_N.js";import{P as fe}from"./portal-CX8X69NK-PpUSpBRh.js";import{u as we}from"./config-CU0lT7kt.js";import{f as he,g as M,n as a,b as s,d as ge,h as O,i as $e,m as b,a as f,r as j,j as De,w as U,u as X,k as ye}from"./dom-DD1hAVZy-BwOJ91na.js";import{p as Y,r as xe,a as ke,f as Se,s as ze}from"./focusElement-hpsP237H.js";import{c as _}from"./baseTransitions-DAj9EsuB.js";import{w as Ee,b as Ce,s as Me,t as x}from"./stores-1XzkTox7.js";import{c as q}from"./widget-BWPho1Nc.js";import{d as je,c as y,b as l,e as Pe,t as P}from"./writables-Is1bF1Vt-DL__9Nx5.js";import{e as Te}from"./extendWidget-BNToPcxe.js";import{c as He,a as Ve}from"./collapse-CVjUhnIz-BmzCmcDy.js";import{f as Ne}from"./fade-uOobJKgw-DTKL9pEP.js";function Be({onMoveStart:i,onMove:r,onMoveEnd:n}={}){return he(k=>{let g=a,$=a,D=a,d={xOrigin:0,yOrigin:0,dx:0,dy:0};function m(o){return Object.assign(d,{dx:o.clientX-d.xOrigin,dy:o.clientY-d.yOrigin})}const V=M(k,"pointerdown",o=>{o.preventDefault(),o.target.setPointerCapture(o.pointerId),d={xOrigin:o.clientX,yOrigin:o.clientY,dx:0,dy:0},i?.(d),g=M(document,"pointermove",u=>{u.preventDefault(),r?.(m(u))});function S(u){u.preventDefault(),g(),$(),D(),n?.(m(u))}$=M(document,"pointerup",S),D=M(document,"pointercancel",S)});return{destroy(){V(),g(),$(),D()}}})}const Oe={animated:!0,ariaDescribedBy:"",ariaLabelledBy:"",backdropClass:"",backdropTransition:a,className:"w-full",visible:!1,container:typeof window<"u"?document.body:null,transition:a,verticalTransition:a,onHidden:a,onShown:a,onSizeChange:a,onVisibleChange:a,onMinimizedChange:a,onMaximizedChange:a,onResizingChange:a,resizable:!1,backdrop:!0,bodyScroll:!1,size:null},Ae={animated:y,ariaDescribedBy:P,ariaLabelledBy:P,backdropClass:P,backdropTransition:l,className:P,visible:y,transition:l,verticalTransition:l,container:Pe,onHidden:l,onShown:l,onSizeChange:l,onVisibleChange:l,onMinimizedChange:l,onMaximizedChange:l,onResizingChange:l,resizable:y,backdrop:y,bodyScroll:y,size:je},We=q("drawer",i=>{const[{backdrop$:r,backdropTransition$:n,backdropClass$:H,bodyScroll$:k,transition$:g,verticalTransition$:$,visible$:D,container$:d,className$:m,size$:V,animated$:o,ariaDescribedBy$:S,ariaLabelledBy$:u,onHidden$:G,onShown$:J,onSizeChange$:K,onVisibleChange$:Q,onMinimizedChange$:Z,onMaximizedChange$:ee,onResizingChange$:w,...ie},te]=Ee(Oe,i,Ae),z=Ce(V,K,e=>e&&Math.round(e)),h=s(()=>["block-start","block-end"].some(c=>m().includes(c))),p=_({props:{animated:o,animatedOnInit:o,transition:ge(s(()=>h()?$():g())),visible:D,onVisibleChange:Q,onHidden:G,onShown:J}}),re=O(Y,s(()=>({container:d()}))),{directive:ne,element$:E}=$e(),se=b(ne,f(()=>({attributes:{class:m,role:j("dialog"),"aria-describedby":S,"aria-labelledby":u,"aria-modal":j("true"),tabIndex:j("-1")},styles:{position:s(()=>{const e=d();return e&&De(e)&&e!==document.body?"relative":"fixed"}),outline:j("none")},events:{keydown:async e=>{e.key==="Escape"&&await p.api.hide()}}}))),W=_({props:{animated:o,transition:n}}),ae=O(Y,s(()=>{const e=d(),c=e?p.stores.element$():void 0;return{container:e,insertBefore:c?.parentElement===e?c:void 0}})),oe=s(()=>(k()||(B()?xe():ke()),!r()||B())),ce=f(()=>({attributes:{class:H,"data-agnos-ignore-inert":x},events:{click:async()=>await p.api.hide()}})),de=s(()=>["inline-start","block-start"].some(e=>m().includes(e))?1:-1);let I=0;const L=U(void 0),R=U(void 0);function N(e){const c=E(),v=h();e=Math.round(Math.max(0,e)),c.style[v?"height":"width"]=`${e}px`;const C=Math.round(c[v?"offsetHeight":"offsetWidth"]);return z.set(C),L.set(e!=null&&(e<C||e===0)),R.set(!!e&&e>C),C}const le=b(Be({onMoveStart(){const e=h();I=E()[e?"offsetHeight":"offsetWidth"],w()(!0)},onMove(e){N(I+de()*e[h()?"dy":"dx"])},onMoveEnd(){const e=h(),c=E(),v=c[e?"offsetHeight":"offsetWidth"];c.style[e?"height":"width"]="",z.set(v),w()(!1)}}),f(()=>({events:{keydown:e=>{const{key:c}=e,v=z()||E()?.[h()?"offsetHeight":"offsetWidth"];if(v!=null)switch(c){case"ArrowLeft":case"ArrowDown":w()(!0),N(v-10),w()(!1);break;case"ArrowRight":case"ArrowUp":w()(!0),N(v+10),w()(!1);break}}}}))),F=p.stores.visible$,pe=s(()=>p.stores.transitioning$()||W.stores.transitioning$()),B=s(()=>!pe()&&!F()),ve=s(()=>{const e=L();e!=null&&X(()=>Z()(e))}),me=s(()=>{const e=R();e!=null&&X(()=>ee()(e))}),ue=s(()=>{ve(),me()});return{...Me({...ie,backdropClass$:H,className$:m,container$:d,size$:z,visible$:F,backdropHidden$:oe,hidden$:B}),patch:te,api:{open:p.api.show,close:p.api.hide},directives:{drawerPortalDirective:re,drawerDirective:b(ye(ue),se,O(ze,s(()=>!k())),p.directives.directive,Se),backdropPortalDirective:ae,backdropDirective:b(W.directives.directive,ce),splitterDirective:le}}}),Ie={structure:void 0,header:void 0,children:void 0},Le={structure:void 0,header:void 0,children:void 0},Re={backdropTransition:Ne,transition:Ve,verticalTransition:He},Fe=q("drawer",i=>{const r=Te(We,Ie,Le,Re)(i);return{...r,directives:{...r.directives,drawerDirective:b(f(()=>({classNames:{"au-drawer":x,show:r.stores.visible$},styles:{"--bs-drawer-size":s(()=>{const n=r.stores.size$();return n==null?void 0:n+"px"})}})),r.directives.drawerDirective),backdropDirective:b(r.directives.backdropDirective,f(()=>({classNames:{"au-drawer-backdrop":x,show:r.stores.visible$}}))),splitterDirective:b(r.directives.splitterDirective,f(()=>({classNames:{"au-splitter":x}}))),containerDirective:f(()=>({classNames:{"au-drawer-container":x}}))}}}),Ue=Fe,Xe=({directives:i})=>t.jsx("div",{...T(i.backdropDirective)}),Ye=i=>t.jsxs("div",{...T(i.directives.drawerDirective),children:[t.jsx("div",{...T(i.directives.containerDirective),children:t.jsx(A,{slotContent:i.state.structure,props:i})}),i.state.resizable&&t.jsx(qe,{...i})]}),_e=i=>t.jsx(t.Fragment,{children:t.jsxs("div",{className:"au-drawer-content",children:[t.jsx("div",{className:"au-drawer-header",children:t.jsx(A,{slotContent:i.state.header,props:i})}),t.jsx("div",{className:"au-drawer-body",children:t.jsx(A,{slotContent:i.state.children,props:i})})]})}),qe=i=>t.jsx("div",{...T(i.directives.splitterDirective),tabIndex:0}),Ge={structure:_e};function pi({ref:i,...r}){const n=we(Ue,r,{...Ge});return be.useImperativeHandle(i,()=>n.api,[n.api]),t.jsxs(fe,{container:n.state.container,children:[!n.state.backdropHidden&&t.jsx(Xe,{...n}),!n.state.hidden&&t.jsx(Ye,{...n})]})}export{pi as D};
