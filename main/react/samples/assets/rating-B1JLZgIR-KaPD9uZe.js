import{f as t,w as M,a as w,r as h,n as g}from"./dom-BB9jLllr-Cs0LnZpg.js";import{w as I,d as U,s as E,t as L,I as S}from"./stores-BWu8V2zY.js";import{e as z,f as A,i as j,t as f,a as c,b as m}from"./writables-DCiBdIBK-DMDym_DM.js";const D={rating:0,tabindex:0,maxRating:10,disabled:!1,readonly:!1,resettable:!0,ariaValueTextFn:(s,u)=>`${s} out of ${u}`,onHover:g,onLeave:g,onRatingChange:g,className:"",ariaLabel:"Rating",ariaLabelledBy:""};function O(){return{...D}}const q={rating:A,tabindex:A,maxRating:{normalizeValue:s=>j(s)?Math.max(0,s):S},disabled:f,readonly:f,resettable:f,ariaValueTextFn:c,onHover:c,onLeave:c,onRatingChange:c,className:m,ariaLabel:m,ariaLabelledBy:m};function Q(s){const[{rating$:u,tabindex$:N,ariaValueTextFn$:V,onHover$:p,onLeave$:k,onRatingChange$:P,...v},F]=I(D,s,q),{ariaLabel$:H,ariaLabelledBy$:T,className$:_,disabled$:b,maxRating$:i,readonly$:$,resettable$:B}=v,x=t(()=>b()?-1:N()),r=U(u,P,a=>z(a,i(),0)),d=M(0),o=t(()=>!b()&&!$()),l=t(()=>{const a=d();return a!==0?a:r()}),y=t(()=>V()(l(),i())),C=t(()=>{const a=l();return Array.from({length:i()},(e,n)=>({fill:Math.round(Math.max(Math.min(a-n,1),0)*100),index:n}))}),R={...E({ariaValueText$:y,interactive$:o,rating$:r,stars$:C,tabindex$:x,visibleRating$:l,...v}),patch:F,directives:{containerDirective:w(()=>({events:{keydown:a=>{if(o()){const{key:e}=a;switch(e){case"ArrowLeft":case"ArrowDown":r.update(n=>n-1);break;case"ArrowRight":case"ArrowUp":r.update(n=>n+1);break;case"Home":case"PageDown":r.set(0);break;case"End":case"PageUp":r.set(i());break;default:return}a.preventDefault(),a.stopPropagation()}},mouseleave:()=>{o()&&R.api.leave()}},attributes:{role:h("slider"),class:_,"aria-valuemin":h(0),tabindex:x,"aria-valuemax":i,"aria-valuenow":l,"aria-valuetext":y,"aria-readonly":t(()=>$()?"true":void 0),"aria-disabled":t(()=>b()?"true":void 0),"aria-label":H,"aria-labelledby":t(()=>T()||void 0)},classNames:{"au-rating":L}})),starDirective:w(a=>({events:{mouseenter:()=>{const e=a().index+1;o()&&e>0&&e<=i()&&(d.set(e),p()(e))},click:()=>{const e=a().index+1;o()&&e>0&&e<=i()&&r.update(n=>n===e&&B()?0:e)}},styles:{cursor:t(()=>o()?"pointer":"default")},classNames:{"au-rating-star":L}}))},api:{setRating(a){r.set(a)},setHoveredRating(a){p()(a),d.set(a)},leave(){k()(l()),d.set(0)}}};return R}export{Q as c,O as g};
