import{j as r,r as de}from"./App-DznaVqkl.js";import{S as H}from"./slot-fSPgIhDU.js";import{u as D}from"./directive-Ds3K8r_f-BbarE6er.js";import{P as le}from"./portal-CX8X69NK-CTZwvmSz.js";import{u as pe}from"./config-BJ2H4H68.js";import{n as o,b as a,d as be,g as S,w as T,m as p,a as d,r as v}from"./dom-Bcg9ORcA-M5rAttAR.js";import{p as I,r as ve,a as me,f as ue,s as he}from"./focusElement-BfCJk8CA.js";import{c as W}from"./baseTransitions-BtTWYQfd.js";import{w as ge,b as F,s as we,t as u}from"./stores-D2Z0mQG4.js";import{c as L}from"./widget-D4NOSiJx.js";import{c as m,b as c,d as z,e as fe,t as $}from"./writables-e0tyaQpe-cVeRZSkA.js";import{e as $e}from"./extendWidget-Dodkjqtv.js";import{c as De,a as ye}from"./collapse-CVjUhnIz-DXzgblSq.js";import{f as ke}from"./fade-uOobJKgw-beTiqGxJ.js";const xe={animated:!0,ariaDescribedBy:"",ariaLabelledBy:"",backdropClass:"",backdropTransition:o,className:"w-full",visible:!1,container:typeof window<"u"?document.body:null,transition:o,verticalTransition:o,onHidden:o,onShown:o,width:200,height:200,onWidthChange:o,onHeightChange:o,onVisibleChange:o,resizable:!1,backdrop:!0,bodyScroll:!1},je={animated:m,ariaDescribedBy:$,ariaLabelledBy:$,backdropClass:$,backdropTransition:c,className:$,visible:m,transition:c,verticalTransition:c,container:fe,onHidden:c,onShown:c,width:z(0,1/0),height:z(0,1/0),onWidthChange:c,onHeightChange:c,onVisibleChange:c,resizable:m,backdrop:m,bodyScroll:m},Se=L("drawer",i=>{const[{backdrop$:t,backdropTransition$:A,backdropClass$:C,bodyScroll$:N,transition$:O,verticalTransition$:X,visible$:Y,container$:b,className$:h,animated$:y,ariaDescribedBy$:_,ariaLabelledBy$:R,onHidden$:q,onShown$:M,width$:G,height$:J,onWidthChange$:K,onHeightChange$:Q,onVisibleChange$:U,...Z},ee]=ge(xe,i,je),s=a(()=>["block-start","block-end"].some(l=>h().includes(l))),n=W({props:{animated:y,animatedOnInit:y,transition:be(a(()=>s()?X():O())),visible:Y,onVisibleChange:U,onHidden:q,onShown:M}}),g=F(G,K),w=F(J,Q),ie=S(I,a(()=>({container:b()}))),te=d(()=>({attributes:{class:h,role:v("dialog"),"aria-describedby":_,"aria-labelledby":R,"aria-modal":v("true"),tabIndex:v("-1")},styles:{width:a(()=>s()?"100%":`${g()}px`),height:a(()=>s()?`${w()}px`:"100%"),position:a(()=>b()!==document.body&&b()!==null?"relative":"fixed"),outline:v("none")},events:{keydown:async e=>{const{key:l}=e;l==="Escape"&&await n.api.hide()}}})),re=d(()=>({styles:{width:a(()=>s()?"100%":`${g()}px`),height:a(()=>s()?`${w()}px`:"100%")}})),V=W({props:{animated:y,transition:A}}),ae=S(I,a(()=>{const e=b(),l=e?n.stores.element$():void 0;return{container:e,insertBefore:l?.parentElement===e?l:void 0}})),se=a(()=>(N()||(j()?ve():me()),!t()||j())),ne=d(()=>({attributes:{class:C,"data-agnos-ignore-inert":u},events:{click:async()=>{await n.api.hide()}}})),P=a(()=>["inline-start","block-start"].some(e=>h().includes(e))?1:-1),k=T(0),x=T(0),f=T(0),oe=d(()=>({attributes:{draggable:v("true")},events:{dragstart:e=>{x.set(s()?e.clientY:e.clientX),k.set(s()?w():g()),e.dataTransfer?.setDragImage(new Image,0,0)},dragend:e=>{document.body.style.cursor="",B(e)},dragover:e=>{e.preventDefault()},drag:e=>{B(e)}}})),B=e=>{!s()&&e.clientX>0?(f.set(k()+P()*(e.clientX-x())),g.set(f())):s()&&e.clientY>0&&(f.set(k()+P()*(e.clientY-x())),w.set(f()))},E=n.stores.visible$,ce=a(()=>n.stores.transitioning$()||V.stores.transitioning$()),j=a(()=>!ce()&&!E());return{...we({...Z,backdropClass$:C,className$:h,container$:b,visible$:E,backdropHidden$:se,hidden$:j}),patch:ee,api:{open:n.api.show,close:n.api.hide},directives:{containerDirective:re,drawerPortalDirective:ie,drawerDirective:p(n.directives.directive,S(he,a(()=>!N())),te,ue),backdropPortalDirective:ae,backdropDirective:p(V.directives.directive,ne),splitterDirective:oe}}}),Te={structure:void 0,header:void 0,children:void 0},He={structure:void 0,header:void 0,children:void 0},Ce={backdropTransition:ke,transition:ye,verticalTransition:De},Ne=L("drawer",i=>{const t=$e(Se,Te,He,Ce)(i);return{...t,directives:{...t.directives,drawerDirective:p(t.directives.drawerDirective,d(()=>({classNames:{"au-drawer":u,show:t.stores.visible$}}))),backdropDirective:p(t.directives.backdropDirective,d(()=>({classNames:{"au-drawer-backdrop":u,show:t.stores.visible$}}))),splitterDirective:p(t.directives.splitterDirective,d(()=>({classNames:{"au-splitter":u}}))),containerDirective:p(t.directives.containerDirective,d(()=>({classNames:{"au-drawer-container":u}})))}}}),Ve=Ne,Pe=({directives:i})=>r.jsx("div",{...D(i.backdropDirective)}),Be=i=>r.jsx("div",{...D(i.directives.drawerDirective),children:r.jsx("div",{...D(i.directives.containerDirective),children:r.jsx(H,{slotContent:i.state.structure,props:i})})}),Ee=i=>r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"au-drawer-header",children:r.jsx(H,{slotContent:i.state.header,props:i})}),r.jsx("div",{className:"au-drawer-body",children:r.jsx(H,{slotContent:i.state.children,props:i})}),i.state.resizable&&r.jsx(Ie,{...i})]}),Ie=i=>r.jsx("div",{...D(i.directives.splitterDirective)}),We={structure:Ee};function Ue(i){const t=pe(Ve,i,{...We});return de.useImperativeHandle(i.ref,()=>t.api,[t.api]),r.jsxs(le,{container:t.state.container,children:[!t.state.backdropHidden&&r.jsx(Pe,{...t}),!t.state.hidden&&r.jsx(Be,{...t})]})}export{Ue as D};
