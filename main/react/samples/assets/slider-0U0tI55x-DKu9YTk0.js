import{w as _e,f as i,J as Ee,K as I,e as Re,s as ke,o as z,p,n as Ne}from"./directive-CKEccryv-BXYvEkQs.js";import{g as ae,e as te,h as ze,t as w,a as W}from"./writables-DoU_XYTX-CmGvgT4E.js";import{c as Se}from"./resizeObserver-BlNbU5hC.js";const He=/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/;function U(s){var u;const d=(""+s).match(He);return Math.max(0,(((u=d[1])==null?void 0:u.length)??0)-(+d[2]||0))}const X={min:0,max:100,stepSize:1,readonly:!1,disabled:!1,vertical:!1,className:"",ariaLabelHandle:s=>""+s,ariaValueText:s=>""+s,onValuesChange:Ne,values:[0],showValueLabels:!0,showMinMaxLabels:!0,rtl:!1},Oe={min:te,max:te,stepSize:ze(0,1/0,{strict:!0}),readonly:w,disabled:w,vertical:w,ariaLabelHandle:W,ariaValueText:W,onValuesChange:W,values:ae,showValueLabels:w,showMinMaxLabels:w,rtl:w},Te=(s,u,d,v,c)=>{const y=Math.pow(10,c);if(s>=d)return d;if(s<=u)return u;const E=Math.floor((s-u)*y/v);return+(((s-u)*y%v<v/2?E:E+1)*v/y+u).toFixed(c)},S=(s,u,d,v)=>{u.update(c=>(c=[...c],c[s]=c[s]+d*v,c))},H=(s,u,d)=>s&&u?d?1:-1:s&&!u?-1:!s&&u?d?-1:1:!s&&!u?-1:1,b=s=>s!=null?`${s}%`:"";function Fe(s){const[{min$:u,max$:d,stepSize$:v,rtl$:c,values$:y,ariaLabelHandle$:E,ariaValueText$:ie,onValuesChange$:le,showValueLabels$:O,showMinMaxLabels$:T,...A},ne]=_e(X,s,Oe),{vertical$:r,disabled$:x,readonly$:Y}=A;let R=-1;const g=i(()=>{const e=u(),t=d();return e===t?X.min:Math.min(e,t)}),L=i(()=>{const e=u(),t=d();return e===t?X.max:Math.max(e,t)}),C=i(()=>Math.max(U(v()),U(g()),U(L()))),re=i(()=>v()*Math.pow(10,C())),m=Ee(y,le,e=>{const t=g(),a=L(),n=re(),l=C();return e.map(o=>Te(o,t,a,n,l))},ae.equal),{directive:se,element$:oe}=I(),{directive:ce,element$:ue}=I(),{directive:de,element$:me}=I(),{directive:be,dimensions$:B}=Se(),V=Re({}),k=i(()=>{var e;return B(),V(),((e=oe())==null?void 0:e.getBoundingClientRect())??{}},{equal:Object.is}),ve=i(()=>{var e;return B(),V(),((e=ue())==null?void 0:e.getBoundingClientRect())??{}},{equal:(e,t)=>Object.is(e,t)}),he=i(()=>{var e;return B(),V(),((e=me())==null?void 0:e.getBoundingClientRect())??{}},{equal:(e,t)=>Object.is(e,t)}),fe=i(()=>r()?k().top:k().left),j=i(()=>r()?k().height:k().width),J=i(()=>[...m()].sort((e,t)=>e-t)),pe=i(()=>m().map((e,t)=>({id:t,value:e})).sort((e,t)=>e.value-t.value)),ge=i(()=>{const e=E(),t=ie();return pe().map((a,n)=>({...a,ariaLabel:e(a.value,n,a.id),ariaValueText:t(a.value,n,a.id)}))}),$=i(()=>m().map(e=>ye(e))),q=i(()=>[...$()].sort((e,t)=>e-t)),De=i(()=>ve().width/j()*100),Le=i(()=>he().width/j()*100),K=i(()=>{if(T()){if(!O())return!0}else return!1;const e=De();return c()?!$().some(t=>100-t>100-e-1):!$().some(t=>t<e+1)}),G=i(()=>{if(T()){if(!O())return!0}else return!1;const e=Le();return c()?!$().some(t=>100-t<e+1):!$().some(t=>t>100-e-1)}),$e=i(()=>{const e=m();return e.length==2&&Math.abs(e[0]-e[1])<10}),M=i(()=>!x()&&!Y()),Q=i(()=>{const e=q(),t=(e[0]+e[1])/2;return r()||e.length!=2?0:c()?100-t:t}),Z=i(()=>{const e=q(),t=100-(e[0]+e[1])/2;return r()&&e.length==2?c()?100-t:t:0}),P=i(()=>{const e=r(),t=c();return $().map(a=>({left:t?e?null:100-a:e?null:a,top:t?e?a:null:e?100-a:null}))}),we=i(()=>{const e=r(),t=q(),a=c();return t.length===1?[{left:e||a?null:0,right:e?null:a?0:null,bottom:e?a?null:0:null,top:e&&a?0:null,width:e?100:t[0],height:e?t[0]:100}]:t.map((n,l,o)=>({left:e||a?null:n,right:e?null:a?o[l]:null,bottom:e?a?null:n:null,top:e&&a?o[l]:null,width:e?100:l===o.length-1?n:o[l+1]-n,height:e?l===o.length-1?n:o[l+1]-n:100})).slice(0,t.length-1)}),ye=e=>{const t=g();return(e-t)*100/(L()-t)},xe=e=>{const t=m();if(t.length===1)return 0;const a=J(),n=a.find(D=>D>e*100),l=n?a.indexOf(n):a.length-1,o=a[l-1]+(a[l]-a[l-1])/2,_=a[e*100<=o?l-1:l];return t.indexOf(_)},F=(e,t)=>{if(M()){const a=j(),n=fe();let l=r()?(a-e+n)/a:(e-n)/a;l=c()?1-l:l;const o=t??xe(l),_=l*(L()-g())+g();m.update(D=>(D=[...D],D[o]=_,D))}},h=i(()=>!r()),Ve=p(()=>({attributes:{"aria-disabled":i(()=>x()?"true":void 0),class:A.className$},classNames:{"au-slider":!0,"au-slider-vertical":r,"au-slider-horizontal":h,disabled:x}})),Me=p(()=>({classNames:{"au-slider-label-vertical":r,"au-slider-label-vertical-min":r,"au-slider-label":h,"au-slider-label-min":h,"au-slider-rtl":c,invisible:i(()=>!K())}})),Pe=p(()=>({classNames:{"au-slider-label-vertical":r,"au-slider-label-vertical-max":r,"au-slider-label":h,"au-slider-label-max":h,"au-slider-rtl":c,invisible:i(()=>!G())}})),ee=p(e=>({events:{keydown:t=>{const a=e().item.id,{key:n}=t,l=c(),o=v(),_=g(),D=L(),N=r();if(M()){switch(n){case"ArrowDown":S(a,m,o,H(N,l,!0));break;case"ArrowLeft":S(a,m,o,H(N,l,!1));break;case"ArrowUp":S(a,m,o,-1*H(N,l,!0));break;case"ArrowRight":S(a,m,o,-1*H(N,l,!1));break;case"Home":m.update(f=>(f=[...f],f[a]=_,f));break;case"End":m.update(f=>(f=[...f],f[a]=D,f));break;case"PageUp":break;case"PageDown":break;default:return}t.preventDefault(),t.stopPropagation()}},mousedown:t=>{t.preventDefault();const a=t.target,n=l=>{l.preventDefault();const o=r()?l.clientY:l.clientX;a.focus(),R!==o&&(R=o,F(o,e().item.id))};M()&&(V.set({}),a.focus(),document.addEventListener("mousemove",n),document.addEventListener("mouseup",()=>{document.removeEventListener("mousemove",n)},{once:!0}))},touchstart:t=>{t.preventDefault();const a=n=>{n.preventDefault();const l=r()?n.touches[0].clientY:n.touches[0].clientX;t.target.focus(),R!==l&&(R=l,F(l,e().item.id))};M()&&(V.set({}),t.target.focus(),document.addEventListener("touchmove",a,{passive:!1}),document.addEventListener("touchend",()=>{document.removeEventListener("touchmove",a),document.removeEventListener("touchcancel",a)},{once:!0}),document.addEventListener("touchcancel",()=>{document.removeEventListener("touchmove",a),document.removeEventListener("touchend",a)},{once:!0}))}}}));return{...ke({min$:g,max$:L,stepSize$:v,values$:m,sortedValues$:J,sortedHandles$:ge,minValueLabelDisplay$:K,maxValueLabelDisplay$:G,combinedLabelDisplay$:$e,interactive$:M,combinedLabelPositionLeft$:Q,combinedLabelPositionTop$:Z,progressDisplayOptions$:we,handleDisplayOptions$:P,showValueLabels$:O,showMinMaxLabels$:T,rtl$:c,...A}),patch:ne,api:{},directives:{sliderDirective:z(se,be,Ve),progressDisplayDirective:p(e=>({styles:{left:i(()=>b(e().option.left)),right:i(()=>b(e().option.right)),top:i(()=>b(e().option.top)),bottom:i(()=>b(e().option.bottom)),width:i(()=>b(e().option.width)),height:i(()=>b(e().option.height))},classNames:{"au-slider-progress":!0}})),clickableAreaDirective:p(()=>({events:{click:e=>{F(r()?e.clientY:e.clientX)}},classNames:{"au-slider-clickable-area":h,"au-slider-clickable-area-vertical":r}})),handleEventsDirective:ee,handleDirective:z(ee,p(e=>({attributes:{role:"slider","aria-valuemin":g,"aria-valuemax":L,"aria-valuenow":i(()=>e().item.value),"aria-valuetext":i(()=>e().item.ariaValueText),"aria-label":i(()=>e().item.ariaLabel),"aria-orientation":i(()=>r()?"vertical":void 0),"aria-disabled":i(()=>x()?"true":void 0),disabled:x,"aria-readonly":i(()=>Y()?"true":void 0)},styles:{left:i(()=>b(P()[e().item.id].left)),top:i(()=>b(P()[e().item.id].top))},classNames:{"au-slider-handle":!0,"au-slider-handle-vertical":r,"au-slider-handle-horizontal":h}}))),minLabelDirective:z(ce,Me),maxLabelDirective:z(de,Pe),combinedHandleLabelDisplayDirective:p(()=>({classNames:{"au-slider-label-vertical":r,"au-slider-label-vertical-now":r,"au-slider-label":h,"au-slider-label-now":h},styles:{left:i(()=>b(Q())),top:i(()=>b(Z()))}})),handleLabelDisplayDirective:p(e=>({classNames:{"au-slider-label-vertical":r,"au-slider-label-vertical-now":r,"au-slider-label":h,"au-slider-label-now":h},styles:{left:i(()=>b(P()[e().index].left)),top:i(()=>b(P()[e().index].top))}}))}}}export{Fe as c};
