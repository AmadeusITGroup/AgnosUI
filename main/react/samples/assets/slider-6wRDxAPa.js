import{j as o,R as xe}from"./index-uAoNPx9x.js";import{u as Le}from"./config-QPkuvYls.js";import{c as n,f as De,w as we,n as ye}from"./func-DcknktoK.js";import{e as Z,m as Ve,d as Me,u as I}from"./directive-ZvlgkPiG.js";import{w as je,c as Re,s as Pe}from"./stores-QS6mdYTy.js";import{g as ne,e as re,h as Se,t as C,a as ee}from"./writables-QFbew20C.js";const Ce=/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/;function te(i){var d;const c=(""+i).match(Ce);return Math.max(0,(((d=c[1])==null?void 0:d.length)??0)-(+c[2]||0))}const ae={min:0,max:100,stepSize:1,readonly:!1,disabled:!1,vertical:!1,className:"",ariaLabelHandle:i=>""+i,ariaValueText:i=>""+i,onValuesChange:ye,values:[0],showValueLabels:!0,showMinMaxLabels:!0,rtl:!1},ke={min:re,max:re,stepSize:Se(0,1/0,{strict:!0}),readonly:C,disabled:C,vertical:C,ariaLabelHandle:ee,ariaValueText:ee,onValuesChange:ee,values:ne,showValueLabels:C,showMinMaxLabels:C,rtl:C},Ee=(i,c,d,f,u)=>{const g=Math.pow(10,u);if(i>=d)return d;if(i<=c)return c;const x=Math.floor((i-c)*g/f);return+(((i-c)*g%f<f/2?x:x+1)*f/g+c).toFixed(u)},_=(i,c,d,f)=>{c.update(u=>(u=[...u],u[i]=u[i]+d*f,u))},H=(i,c,d)=>i&&c?d?1:-1:i&&!c?-1:!i&&c?d?-1:1:!i&&!c?-1:1;function Oe(i){const[{min$:c,max$:d,stepSize$:f,rtl$:u,values$:g,ariaLabelHandle$:x,ariaValueText$:N,onValuesChange$:T,showValueLabels$:M,showMinMaxLabels$:k,...z},A]=je(ae,i,ke),{vertical$:h,disabled$:j,readonly$:B}=z;let p=-1;const v=n(()=>{const e=c(),t=d();return e===t?ae.min:Math.min(e,t)}),D=n(()=>{const e=c(),t=d();return e===t?ae.max:Math.max(e,t)}),R=n(()=>Math.max(te(f()),te(v()),te(D()))),W=n(()=>f()*Math.pow(10,R())),m=Re(g,T,e=>{const t=v(),a=D(),r=W(),s=R();return e.map(b=>Ee(b,t,a,r,s))},ne.equal),{directive:q,element$:F}=Z(),{directive:U,element$:X}=Z(),{directive:Y,element$:K}=Z(),P=De(F,(e,t)=>{if(!e){t({});return}const a=new ResizeObserver(()=>{t({})});return a.observe(e),()=>a.disconnect()},{}),w=we({}),l=n(()=>{var e;return P(),w(),((e=F())==null?void 0:e.getBoundingClientRect())??{}},{equal:Object.is}),y=n(()=>{var e;return P(),w(),((e=X())==null?void 0:e.getBoundingClientRect())??{}},{equal:(e,t)=>Object.is(e,t)}),V=n(()=>{var e;return P(),w(),((e=K())==null?void 0:e.getBoundingClientRect())??{}},{equal:(e,t)=>Object.is(e,t)}),le=n(()=>h()?l().top:l().left),G=n(()=>h()?l().height:l().width),se=n(()=>[...m()].sort((e,t)=>e-t)),ie=n(()=>m().map((e,t)=>({id:t,value:e})).sort((e,t)=>e.value-t.value)),oe=n(()=>{const e=x(),t=N();return ie().map((a,r)=>({...a,ariaLabel:e(a.value,r,a.id),ariaValueText:t(a.value,r,a.id)}))}),S=n(()=>m().map(e=>ge(e))),J=n(()=>[...S()].sort((e,t)=>e-t)),ce=n(()=>y().width/G()*100),ue=n(()=>V().width/G()*100),de=n(()=>{if(k()){if(!M())return!0}else return!1;const e=ce();return u()?!S().some(t=>100-t>100-e-1):!S().some(t=>t<e+1)}),me=n(()=>{if(k()){if(!M())return!0}else return!1;const e=ue();return u()?!S().some(t=>100-t<e+1):!S().some(t=>t>100-e-1)}),be=n(()=>{const e=m();return e.length==2&&Math.abs(e[0]-e[1])<10}),E=n(()=>!j()&&!B()),fe=n(()=>{const e=J(),t=(e[0]+e[1])/2;return h()||e.length!=2?0:u()?100-t:t}),he=n(()=>{const e=J(),t=100-(e[0]+e[1])/2;return h()&&e.length==2?u()?100-t:t:0}),pe=n(()=>{const e=h(),t=u();return S().map((a,r)=>({left:t?e?null:100-a:e?null:a,top:t?e?a:null:e?100-a:null}))}),$e=n(()=>{const e=h(),t=J(),a=u();return t.length===1?[{left:e||a?null:0,right:e?null:a?0:null,bottom:e?a?null:0:null,top:e&&a?0:null,width:e?100:t[0],height:e?t[0]:100}]:t.map((r,s,b)=>({left:e||a?null:r,right:e?null:a?b[s]:null,bottom:e?a?null:r:null,top:e&&a?b[s]:null,width:e?100:s===b.length-1?r:b[s+1]-r,height:e?s===b.length-1?r:b[s+1]-r:100})).slice(0,t.length-1)}),ge=e=>{const t=v();return(e-t)*100/(D()-t)},ve=e=>{const t=m();if(t.length===1)return 0;const a=se(),r=a.find($=>$>e*100),s=r?a.indexOf(r):a.length-1,b=a[s-1]+(a[s]-a[s-1])/2,O=a[e*100<=b?s-1:s];return t.indexOf(O)},Q=(e,t)=>{if(E()){const a=G(),r=le();let s=h()?(a-e+r)/a:(e-r)/a;s=u()?1-s:s;const b=t??ve(s),O=s*(D()-v())+v();m.update($=>($=[...$],$[b]=O,$))}};return{...Pe({min$:v,max$:D,stepSize$:f,values$:m,sortedValues$:se,sortedHandles$:oe,minValueLabelDisplay$:de,maxValueLabelDisplay$:me,combinedLabelDisplay$:be,isInteractable$:E,combinedLabelPositionLeft$:fe,combinedLabelPositionTop$:he,progressDisplayOptions$:$e,handleDisplayOptions$:pe,showValueLabels$:M,showMinMaxLabels$:k,rtl$:u,...z}),patch:A,api:{},directives:{sliderDirective:Ve(q,Me(P)),minLabelDirective:U,maxLabelDirective:Y},actions:{click(e){Q(h()?e.clientY:e.clientX)},keydown(e,t){const{key:a}=e,r=u(),s=f(),b=v(),O=D(),$=h();if(E()){switch(a){case"ArrowDown":_(t,m,s,H($,r,!0));break;case"ArrowLeft":_(t,m,s,H($,r,!1));break;case"ArrowUp":_(t,m,s,-1*H($,r,!0));break;case"ArrowRight":_(t,m,s,-1*H($,r,!1));break;case"Home":m.update(L=>(L=[...L],L[t]=b,L));break;case"End":m.update(L=>(L=[...L],L[t]=O,L));break;case"PageUp":break;case"PageDown":break;default:return}e.preventDefault(),e.stopPropagation()}},mouseDown(e,t){e.preventDefault();const a=r=>{r.preventDefault();const s=h()?r.clientY:r.clientX;e.target.focus(),p!==s&&(p=s,Q(s,t))};E()&&(w.set({}),e.target.focus(),document.addEventListener("mousemove",a),document.addEventListener("mouseup",()=>{document.removeEventListener("mousemove",a)},{once:!0}))},touchStart(e,t){e.preventDefault();const a=r=>{r.preventDefault();const s=h()?r.touches[0].clientY:r.touches[0].clientX;e.target.focus(),p!==s&&(p=s,Q(s,t))};E()&&(w.set({}),e.target.focus(),document.addEventListener("touchmove",a),document.addEventListener("touchend",()=>{document.removeEventListener("touchmove",a),document.removeEventListener("touchcancel",a)},{once:!0}),document.addEventListener("touchcancel",()=>{document.removeEventListener("touchmove",a),document.removeEventListener("touchend",a)},{once:!0}))}}}}function Ae(i){const[{className:c,combinedLabelDisplay:d,combinedLabelPositionLeft:f,combinedLabelPositionTop:u,disabled:g,handleDisplayOptions:x,max:N,maxValueLabelDisplay:T,min:M,minValueLabelDisplay:k,progressDisplayOptions:z,readonly:A,sortedHandles:h,sortedValues:j,values:B,vertical:p,showValueLabels:v,showMinMaxLabels:D,rtl:R},{actions:{click:W,keydown:m,mouseDown:q,touchStart:F},directives:{sliderDirective:U,minLabelDirective:X,maxLabelDirective:Y}}]=Le(Oe,i,"slider"),K=I(U),P=I(X),w=I(Y);return o.jsxs("div",{ref:K,className:`au-slider ${p?"au-slider-vertical":"au-slider-horizontal"} ${c} ${g?" disabled":""}`,"aria-disabled":g?"true":void 0,children:[z.map((l,y)=>o.jsx("div",{className:"au-slider-progress",style:{left:`${l.left}%`,right:`${l.right}%`,bottom:`${l.bottom}%`,top:`${l.top}%`,width:`${l.width}%`,height:`${l.height}%`}},y)),o.jsx("div",{className:p?"au-slider-clickable-area-vertical":"au-slider-clickable-area",onClick:l=>W(l)}),D?o.jsxs(o.Fragment,{children:[o.jsx("div",{ref:P,className:`${R?"au-slider-rtl":""} ${p?"au-slider-label-vertical au-slider-label-vertical-min":"au-slider-label au-slider-label-min"} ${k?"":" invisible"}
						`,children:M}),o.jsx("div",{ref:w,className:`${R?"au-slider-rtl":""} ${p?"au-slider-label-vertical au-slider-label-vertical-max":"au-slider-label au-slider-label-max"} ${T?"":" invisible"}`,children:N})]}):o.jsx(o.Fragment,{}),v&&d?o.jsx("div",{className:p?"au-slider-label-vertical au-slider-label-vertical-now":"au-slider-label au-slider-label-now",style:{left:`${f}%`,top:`${u}%`},children:R?o.jsxs(o.Fragment,{children:[j[1]," - ",j[0]]}):o.jsxs(o.Fragment,{children:[j[0]," - ",j[1]]})}):o.jsx(o.Fragment,{}),h.map((l,y)=>o.jsxs(xe.Fragment,{children:[o.jsx("button",{className:`au-slider-handle ${p?"au-slider-handle-vertical":"au-slider-handle-horizontal"}`,role:"slider","aria-valuemin":M,"aria-valuemax":N,"aria-valuenow":l.value,"aria-valuetext":l.ariaValueText,"aria-label":l.ariaLabel,"aria-readonly":A?"true":void 0,"aria-disabled":g?"true":void 0,"aria-orientation":p?"vertical":void 0,disabled:g,style:{top:`${x[l.id].top}%`,left:`${x[l.id].left}%`},onKeyDown:V=>m(V,l.id),onMouseDown:V=>q(V,l.id),onTouchStart:V=>F(V,l.id),children:"Â "}),v&&!d?o.jsx("div",{className:p?"au-slider-label-vertical au-slider-label-vertical-now":"au-slider-label au-slider-label-now",style:{left:`${x[y].left}%`,top:`${x[y].top}%`},children:B[y]}):o.jsx(o.Fragment,{})]},l.id))]})}export{Ae as S};
