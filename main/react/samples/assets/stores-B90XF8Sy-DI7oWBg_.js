import{f,B as a,A as b}from"./directive-CKEccryv-BrWl76X8.js";import{r as u}from"./App-C7lISzaa.js";function d(e){const[t,s]=u.useState(()=>e());return u.useEffect(()=>e.subscribe(r=>{s(()=>r)}),[e]),t}function E(e){const[,t]=u.useState({}),s=u.useMemo(()=>{const r={hasEffect:!1,storeInfo:{},checkStoreSubscribed:o=>{const c=e[`${o}$`];if(c){let n=r.storeInfo[o];n||(n={unsubscribe:null},r.storeInfo[o]=n),r.hasEffect&&!n.unsubscribe&&(n.unsubscribe=c.subscribe(()=>{t({})}))}return c},proxy:new Proxy({},{get(o,c){const n=typeof c=="string"?r.checkStoreSubscribed(c):null;return n==null?void 0:n()}})};return r},[]);return u.useEffect(()=>{s.hasEffect=!0;for(const r of Object.keys(s.storeInfo))s.checkStoreSubscribed(r);return()=>{s.hasEffect=!1;for(const r of Object.values(s.storeInfo)){const o=r.unsubscribe;r.unsubscribe=null,o==null||o()}}},[e]),s.proxy}const i=(e,t)=>!b(e,t),h=e=>{const t=u.useRef();return t.current||(t.current=f({...e},{equal:i})),u.useEffect(()=>{t.current.set({...e})},[e]),u.useMemo(()=>a(t.current),[t.current])};export{h as a,E as b,d as u};
