import{r as i,j as s,R as x}from"./App-DI9ur9y5.js";import{S as f}from"./select-CMqzewJR-DVAK5KAI.js";import{u as j}from"./directive-DNXkB1Wc-BlP1YL6e.js";import"./slot-Cdz7cIIo.js";import"./index-DYzswQoO.js";import"./config-BKBdqztu.js";import"./config-BTxUn9MO.js";import"./directive-CKEccryv-BrWl76X8.js";import"./widget-DaA-pe23-CNTrrQO2.js";import"./stores-B90XF8Sy-CocfMxwn.js";import"./floatingUI-D-ZAS4GP.js";import"./promise-CY2U8bTP-BBXElGUG.js";import"./focustrack-BHGf0Wsc.js";import"./navManager-BJWTxkCt.js";import"./extendWidget-DH8OAK3L.js";function w(e,t){let r;return(...o)=>{r&&clearTimeout(r),r=setTimeout(()=>{e(...o)},t)}}const S=e=>{let t;return(...r)=>(t==null||t.abort(),t=new AbortController,e(t.signal,...r))},u="https://en.wikipedia.org/?curid=",v=new Intl.Collator("en").compare;function F(e){const t=document.createElement("div");return t.innerHTML=e,t.innerText}const p=e=>"page-"+e.pageid,k=({itemContext:e,directives:t})=>s.jsxs(s.Fragment,{children:[s.jsx("a",{href:u+e.item.pageid,target:"_blank",rel:"noreferrer",children:e.item.title}),s.jsx("button",{type:"button",className:"btn-close ms-1 wiki-btn-close","aria-label":"Close",...j(t.badgeCloseButtonDirective,e)})]}),C=({itemContext:e})=>{const t=e.item;return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fw-bold",children:t.title}),s.jsx("div",{className:"text-wrap wiki-desc",children:t.snippet})]})},N=e=>e.querySelectorAll("a,button,input"),_=()=>{const[e,t]=i.useState([]),[r,o]=i.useState([]),[,d]=i.useState(void 0),g=i.useCallback(w(S(async(n,a)=>{var c;d(a);const h=await(await fetch("https://en.wikipedia.org/w/api.php?action=query&list=search&prop=info&inprop=url&utf8=&format=json&origin=*&srlimit=5&srsearch="+a,{signal:n})).json();t(((c=h.query)==null?void 0:c.search.map(m=>({...m,snippet:F(m.snippet)})))??[])}),200),[]),b=i.useCallback(n=>{o((n||[]).sort((a,l)=>v(a.title,l.title)))},[]);return s.jsxs("div",{className:"custom-select my-auto mb-3",children:[s.jsx(f,{items:e,itemIdFn:p,navSelector:N,onFilterTextChange:g,onSelectedChange:b,badgeLabel:k,itemLabel:C,badgeClassName:"badge text-bg-light d-flex align-items-center"}),s.jsx("span",{className:"fw-bold",children:"Selection: "}),r.map(n=>s.jsx(x.Fragment,{children:s.jsx("a",{href:`${u}${n.pageid}`,className:"pe-2",children:n.title})},p(n))),!r.length&&s.jsx(s.Fragment,{children:"none"})]})};export{_ as default};
