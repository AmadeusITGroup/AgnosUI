import{r as a,j as s,R as x}from"./App-XNADZBio.js";import{S as f}from"./select-DPkDdzLr-BDc1RH4B.js";import"./config-BbSZcrxs.js";import"./config-BBev6bov.js";import"./directive-DwbtadSh-DtSUHFk6.js";import"./widget-DAs9_HQ1-C8LDzD_S.js";import"./stores-B8YEDwZq-1XSNo5Uf.js";import"./directive-Kqp31pwt-CvS47PEc.js";import"./floatingUI-D1jJvghS.js";import"./promise-CY2U8bTP-DIGlcKrP.js";import"./focustrack-C4Q8fVy2.js";import"./navManager-Civ0MiH-.js";function j(e,t){let n;return(...o)=>{n&&clearTimeout(n),n=setTimeout(()=>{e(...o)},t)}}const w=e=>{let t;return(...n)=>(t==null||t.abort(),t=new AbortController,e(t.signal,...n))},d="https://en.wikipedia.org/?curid=",S=new Intl.Collator("en").compare;function v(e){const t=document.createElement("div");return t.innerHTML=e,t.innerText}const p=e=>"page-"+e.pageid,k=({itemContext:e,widget:t})=>s.jsxs(s.Fragment,{children:[s.jsx("a",{href:d+e.item.pageid,target:"_blank",rel:"noreferrer",children:e.item.title}),s.jsx("button",{type:"button",className:"btn-close ms-1 wiki-btn-close","aria-label":"Close",onClick:n=>t.actions.onRemoveBadgeClick(n.nativeEvent,e.item)})]}),C=({itemContext:e})=>{const t=e.item;return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fw-bold",children:t.title}),s.jsx("div",{className:"text-wrap wiki-desc",children:t.snippet})]})},F=e=>e.querySelectorAll("a,button,input"),$=()=>{const[e,t]=a.useState([]),[n,o]=a.useState([]),[,u]=a.useState(void 0),g=a.useCallback(j(w(async(r,i)=>{var c;u(i);const b=await(await fetch("https://en.wikipedia.org/w/api.php?action=query&list=search&prop=info&inprop=url&utf8=&format=json&origin=*&srlimit=5&srsearch="+i,{signal:r})).json();t(((c=b.query)==null?void 0:c.search.map(m=>({...m,snippet:v(m.snippet)})))??[])}),200),[]),h=a.useCallback(r=>{o((r||[]).sort((i,l)=>S(i.title,l.title)))},[]);return s.jsxs("div",{className:"custom-select my-auto mb-3",children:[s.jsx(f,{items:e,itemIdFn:p,navSelector:F,onFilterTextChange:g,onSelectedChange:h,slotBadgeLabel:k,slotItem:C,badgeClassName:"badge text-bg-light d-flex align-items-center"}),s.jsx("span",{className:"fw-bold",children:"Selection: "}),n.map(r=>s.jsx(x.Fragment,{children:s.jsx("a",{href:`${d}${r.pageid}`,className:"pe-2",children:r.title})},p(r))),!n.length&&s.jsx(s.Fragment,{children:"none"})]})};export{$ as default};
