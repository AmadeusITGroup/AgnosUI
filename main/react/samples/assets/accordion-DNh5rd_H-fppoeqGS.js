import{r as $,j as m}from"./App-XNADZBio.js";import{w as G,c,a as J,s as K,m as Z,n as ee,b as v}from"./stores-B4F_j8QF.js";import{c as te}from"./baseTransitions-Dn4UJ8zK.js";import{c as ie}from"./collapse-BQC9zBIz-ITyvMHsf.js";import{t as b,a as u,b as d}from"./writables-DoU_XYTX-DoV7pQAs.js";import{r as se,m as V,c as C,d as oe,g as ae,b as ne}from"./directive-DYh4g5Bk.js";import{S as M}from"./slot-DrPnuT9k.js";import{u as L}from"./config-DQAExDHC.js";import{u as y}from"./directive-CX0hxCpP-BVZ9V1VD.js";function re(e,t,r){let i;return t.length==2?(r=r??t[0],i=t.find(o=>o!==r)):t.length>2&&(i=t[0]),i&&e.forEach(o=>{o.state$().itemId!==i&&o.state$().itemVisible&&o.patch({itemVisible:!1})}),e}function W(e,t){return e.find(r=>r.state$().itemId===t)}const s={closeOthers:!1,onShown:v,onHidden:v,className:"",itemId:"",itemDestroyOnHide:!0,itemDisabled:!1,itemVisible:!1,itemAnimated:!0,itemTransition:ie,itemHeadingTag:"",onItemShown:v,onItemHidden:v,onItemVisibleChange:v,slotItemStructure:void 0,slotItemBody:void 0,slotItemHeader:void 0,itemClass:"",itemHeaderClass:"",itemButtonClass:"",itemBodyContainerClass:"",itemBodyClass:""},Q={itemId:s.itemId,itemDestroyOnHide:s.itemDestroyOnHide,itemDisabled:s.itemDisabled,itemVisible:s.itemVisible,itemAnimated:s.itemAnimated,itemTransition:s.itemTransition,onItemShown:s.onItemShown,onItemHidden:s.onItemHidden,onItemVisibleChange:s.onItemVisibleChange,slotItemStructure:s.slotItemStructure,slotItemBody:s.slotItemBody,slotItemHeader:s.slotItemHeader,itemClass:s.itemClass,itemHeaderClass:s.itemHeaderClass,itemButtonClass:s.itemButtonClass,itemBodyContainerClass:s.itemBodyContainerClass,itemBodyClass:s.itemBodyClass,itemHeadingTag:s.itemHeadingTag},q=Object.keys(Q),de={closeOthers:b,onShown:u,onHidden:u,itemId:d,itemDestroyOnHide:b,itemDisabled:b,itemVisible:b,itemAnimated:b,itemTransition:u,onItemShown:u,onItemHidden:u,onItemVisibleChange:u,itemClass:d,itemHeaderClass:d,itemButtonClass:d,itemBodyContainerClass:d,itemBodyClass:d,itemHeadingTag:d},ce={itemId:d,itemDestroyOnHide:b,itemDisabled:b,itemVisible:b,itemAnimated:b,itemTransition:u,onItemShown:u,onItemHidden:u,onItemVisibleChange:u,itemClass:d,itemHeaderClass:d,itemButtonClass:d,itemBodyContainerClass:d,itemBodyClass:d,itemHeadingTag:d};function me(e,t,r){const[{itemBodyClass$:i,itemButtonClass$:o,itemBodyContainerClass$:I,itemHeaderClass$:h,itemAnimated$:H,itemTransition$:T,itemDestroyOnHide$:x,onItemShown$:O,onItemHidden$:j,onItemVisibleChange$:N,itemVisible$:l,itemId$:E,itemDisabled$:p,...R},k]=G(Q,r,ce),S=J(!1),P=c(()=>ae()),g=c(()=>E()||P()),_=c(()=>x()===!1||!B.state$().hidden),B=te({props:{transition:T,visible:l,onVisibleChange:N,animated:H,animatedOnInit:!1,initDone:S,onHidden:()=>{t()(g()),j()()},onShown:()=>{e()(g()),O()()}}}),A=()=>{p()||l.update(D=>!D)},w=C(()=>({attributes:{id:c(()=>`${g()}-toggle`),"aria-expanded":c(()=>`${l()}`),"aria-disabled":c(()=>`${p()}`),"aria-controls":c(()=>`${g()}-body-container`),disabled:p()},classNames:{collapsed:c(()=>!l())},events:{click:A}}));return{...K({itemVisible$:l,itemId$:g,shouldBeInDOM$:_,itemDisabled$:p,itemBodyClass$:i,itemButtonClass$:o,itemBodyContainerClass$:I,itemHeaderClass$:h,...R}),patch:k,actions:{click:A},api:{initDone:()=>{S.set(!0)},collapse:()=>{l.set(!1)},expand:()=>{l.set(!0)},toggle:()=>{l.update(D=>!D)}},directives:{toggleDirective:w,buttonDirective:V(w,C(()=>({attributes:{type:"button",class:o()}}))),headerDirective:C(()=>({attributes:{class:h()}})),bodyDirective:C(()=>({attributes:{class:i()}})),bodyContainerDirective:V(ne(B.directives.directive),C(()=>({attributes:{id:c(()=>`${g()}-body-container`),class:I(),"aria-labelledby":c(()=>`${g()}-toggle`)}}))),accordionItemDirective:v}}}function le(e){const[{closeOthers$:t,onShown$:r,onHidden$:i,className$:o,itemId$:I,itemAnimated$:h,itemClass$:H,itemDisabled$:T,itemVisible$:x,itemTransition$:O,itemDestroyOnHide$:j,itemBodyClass$:N,itemButtonClass$:l,itemBodyContainerClass$:E,itemHeaderClass$:p,itemHeadingTag$:R,onItemVisibleChange$:k,onItemHidden$:S,onItemShown$:P,slotItemStructure$:g,slotItemBody$:_,slotItemHeader$:B,...A},w]=G(s,e,de),D={itemId:I,itemClass:H,itemAnimated:h,itemDisabled:T,itemVisible:x,itemTransition:O,itemDestroyOnHide:j,itemBodyClass:N,itemButtonClass:l,itemBodyContainerClass:E,itemHeaderClass:p,itemHeadingTag:R,onItemVisibleChange:k,onItemHidden:S,onItemShown:P,slotItemStructure:g,slotItemBody:_,slotItemHeader:B},f=se(),F=c(()=>{const a=[];return f().forEach(n=>{n.state$().itemVisible&&a.push(n.state$().itemId)}),a}),z=J(F()[0]),X=c(()=>{t()&&(re(f(),F(),z()),z.set(F()[0]))}),Y=c(()=>{X()});return{...K({itemsWidget$:f,className$:o,...A}),patch:w,actions:{},api:{expand:a=>{var n;(n=W(f(),a))==null||n.api.expand()},collapse:a=>{var n;(n=W(f(),a))==null||n.api.collapse()},toggle:a=>{var n;(n=W(f(),a))==null||n.api.toggle()},expandAll:()=>{f().forEach(a=>a.api.expand())},collapseAll:()=>{f().forEach(a=>a.api.collapse())},registerItem:a=>{const n=me(r,i,{config:Z(q,ee(q,a==null?void 0:a.config),D),props:a==null?void 0:a.props});return n.directives.accordionItemDirective=V(()=>({destroy:f.register(n)}),C(()=>({attributes:{class:n.stores.itemClass$,id:n.stores.itemId$}}))),n}},directives:{accordionDirective:V(oe(Y),C(()=>({attributes:{class:o()},classNames:{"au-accordion":!0}})))}}}const ue=le,Ie=e=>{const t=y(e.directive),i=new RegExp("^h[1-6]$").test(e.headerTag)?e.headerTag:"h2";return m.jsx(i,{className:"accordion-header",ref:t,children:e.children})},U=$.createContext({}),ge=e=>{const t=y(e.widget.directives.bodyContainerDirective),r=y(e.widget.directives.bodyDirective),i=y(e.widget.directives.buttonDirective);return m.jsxs(m.Fragment,{children:[m.jsx(Ie,{directive:e.widget.directives.headerDirective,headerTag:e.state.itemHeadingTag,children:m.jsx("button",{className:"accordion-button",ref:i,children:m.jsx(M,{slotContent:e.state.slotItemHeader,props:e})})}),e.state.shouldBeInDOM?m.jsx("div",{className:"accordion-collapse",ref:t,children:m.jsx("div",{className:"accordion-body",ref:r,children:m.jsx(M,{slotContent:e.state.slotItemBody,props:e})})}):null]})},fe={slotItemStructure:ge},Se=$.forwardRef(function(t,r){const{registerItem:i}=$.useContext(U),[o,I]=L(i,t,null,{...fe}),h={state:o,widget:I},H=y(I.directives.accordionItemDirective);return $.useImperativeHandle(r,()=>I.api,[]),$.useEffect(()=>{I.api.initDone()},[]),m.jsx("div",{className:`accordion-item ${o.itemClass}`,id:o.itemId,ref:H,children:m.jsx(M,{slotContent:o.slotItemStructure,props:h})})}),Be=$.forwardRef(function(t,r){const i=L(ue,t,"accordion")[1];$.useImperativeHandle(r,()=>i.api,[]);const o=y(i.directives.accordionDirective);return m.jsx(U.Provider,{value:i.api,children:m.jsx("div",{className:"accordion",ref:o,children:t.children})})});export{Be as A,Se as a};
