import{r as i,j as s,R as x}from"./index-36fc15f3.js";import{S as f}from"./Select-22b88f39.js";import"./index-e97c328e.js";import"./utils-32bfe757.js";import"./baseTransitions-235ceda1.js";import"./writables-69b35f47.js";import"./promise-f5ff916a.js";import"./fade-570ca3b2.js";import"./dom-cc7faf10.js";import"./rating-56e35eae.js";import"./floatingUI-25151740.js";import"./focustrack-50a9cf82.js";import"./config-599933b9.js";function j(t,e){let r;return(...o)=>{r&&clearTimeout(r),r=setTimeout(()=>{t(...o)},e)}}const w=t=>{let e;return(...r)=>(e==null||e.abort(),e=new AbortController,t(e.signal,...r))};const d="https://en.wikipedia.org/?curid=",S=new Intl.Collator("en").compare;function k(t){const e=document.createElement("div");return e.innerHTML=t,e.innerText}const p=t=>"page-"+t.pageid,F=({itemContext:t,widget:e})=>s.jsxs(s.Fragment,{children:[s.jsx("a",{href:d+t.item.pageid,target:"_blank",rel:"noreferrer",children:t.item.title}),s.jsx("button",{type:"button",className:"btn-close ms-1 wiki-btn-close","aria-label":"Close",onClick:()=>e.api.unselect(t.item)})]}),C=({itemContext:t})=>{const e=t.item;return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fw-bold",children:e.title}),s.jsx("div",{className:"text-wrap wiki-desc",children:e.snippet})]})},A=()=>{const[t,e]=i.useState([]),[r,o]=i.useState([]),[,u]=i.useState(void 0),g=i.useCallback(j(w(async(n,a)=>{var c;u(a);const b=await(await fetch("https://en.wikipedia.org/w/api.php?action=query&list=search&prop=info&inprop=url&utf8=&format=json&origin=*&srlimit=5&srsearch="+a,{signal:n})).json();e(((c=b.query)==null?void 0:c.search.map(m=>({...m,snippet:k(m.snippet)})))??[])}),200),[]),h=i.useCallback(n=>{o((n||[]).sort((a,l)=>S(a.title,l.title)))},[]);return s.jsxs("div",{className:"custom-select my-auto mb-3",children:[s.jsx(f,{items:t,itemIdFn:p,onFilterTextChange:g,onSelectedChange:h,slotBadgeLabel:F,slotItem:C,badgeClassName:"badge text-bg-light d-flex align-items-center"}),s.jsx("span",{className:"fw-bold",children:"Selection: "}),r.map(n=>s.jsx(x.Fragment,{children:s.jsx("a",{href:`${d}${n.pageid}`,className:"pe-2",children:n.title})},p(n))),!r.length&&s.jsx(s.Fragment,{children:"none"})]})};export{A as default};
