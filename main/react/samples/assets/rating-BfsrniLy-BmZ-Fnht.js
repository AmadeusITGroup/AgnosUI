import{w as B,c as e,o as H,a as M,s as S,b as m,I}from"./stores-B4F_j8QF.js";import{e as R}from"./directive-DuBTvXZs.js";import{e as x,i as U,t as v,a as u,b as p,d as E}from"./writables-DoU_XYTX-B5IK4zXo.js";const w={rating:0,tabindex:0,maxRating:10,disabled:!1,readonly:!1,resettable:!0,ariaValueTextFn:(t,b)=>`${t} out of ${b}`,onHover:m,onLeave:m,onRatingChange:m,className:"",slotStar:({fill:t})=>String.fromCharCode(t===100?9733:9734),ariaLabel:"Rating",ariaLabelledBy:""};function G(){return{...w}}const K={rating:x,tabindex:x,maxRating:{normalizeValue:t=>U(t)?Math.max(0,t):I},disabled:v,readonly:v,resettable:v,ariaValueTextFn:u,onHover:u,onLeave:u,onRatingChange:u,className:p,ariaLabel:p,ariaLabelledBy:p};function J(t){const[{rating$:b,tabindex$:L,ariaValueTextFn$:k,onHover$:A,onLeave$:D,onRatingChange$:N,...f},V]=B(w,t,K),{ariaLabel$:C,ariaLabelledBy$:P,className$:F,disabled$:g,maxRating$:r,readonly$:$,resettable$:T}=f,y=e(()=>g()?-1:L()),i=H(b,N,a=>E(a,r())),l=M(0),n=e(()=>!g()&&!$()),c=e(()=>{const a=l();return a!==0?a:i()}),h=e(()=>k()(c(),r())),_=e(()=>{const a=c();return Array.from({length:r()},(d,s)=>({fill:Math.round(Math.max(Math.min(a-s,1),0)*100),index:s}))}),o={...S({ariaValueText$:h,interactive$:n,rating$:i,stars$:_,tabindex$:y,visibleRating$:c,...f}),patch:V,actions:{click:a=>{n()&&a>0&&a<=r()&&i.update(d=>d===a&&T()?0:a)},hover:a=>{n()&&a>0&&a<=r()&&(l.set(a),A()(a))},leave:()=>{n()&&(D()(l()),l.set(0))},handleKey(a){if(n()){const{key:d}=a;switch(d){case"ArrowLeft":case"ArrowDown":i.update(s=>s-1);break;case"ArrowRight":case"ArrowUp":i.update(s=>s+1);break;case"Home":case"PageDown":i.set(0);break;case"End":case"PageUp":i.set(r());break;default:return}a.preventDefault(),a.stopPropagation()}}},directives:{containerDirective:R(()=>({events:{keydown:a=>o.actions.handleKey(a),mouseleave:()=>o.actions.leave()},attributes:{role:"slider",class:F,"aria-valuemin":0,tabindex:y,"aria-valuemax":r,"aria-valuenow":c,"aria-valuetext":h,"aria-readonly":e(()=>$()?"true":void 0),"aria-disabled":e(()=>g()?"true":void 0),"aria-label":C,"aria-labelledby":e(()=>P()||void 0)},classNames:{"au-rating":!0}})),starDirective:R(a=>({events:{mouseenter:()=>o.actions.hover(a().index+1),click:()=>o.actions.click(a().index+1)},styles:{cursor:e(()=>n()?"pointer":"default")},classNames:{"au-rating-star":!0}}))},api:{}};return o}export{J as c,G as g};
