import{w as V,s as W,m as F,n as z,i as M,t as _}from"./stores-D2Z0mQG4.js";import{c as q}from"./baseTransitions-BWdsh-HB.js";import{n as g,k as G,b as o,w as j,m as O,a as u,l as J,d as T,r as k}from"./dom-Bcg9ORcA-M5rAttAR.js";import{f as P,t as s,b as C,c as $}from"./writables-e0tyaQpe-BaB23qQJ.js";import{c as K}from"./widget-D4NOSiJx.js";function Q(m,t,n){let l;return t.length==2?(n=n??t[0],l=t.find(r=>r!==n)):t.length>2&&(l=t[0]),l&&m.forEach(r=>{r.stores.id$()!==l&&r.stores.visible$()&&r.patch({visible:!1})}),m}function L(m,t){return m.find(n=>n.stores.id$()===t)}const a={closeOthers:!1,onItemShown:g,onItemHidden:g,className:"",itemDestroyOnHide:!0,itemAnimated:!0,itemTransition:g,itemHeadingLevel:2,itemClassName:"",itemHeaderClassName:"",itemButtonClassName:"",itemBodyContainerClassName:"",itemBodyClassName:""},S={id:"",destroyOnHide:a.itemDestroyOnHide,disabled:!1,visible:!1,animated:a.itemAnimated,transition:a.itemTransition,onShown:g,onHidden:g,onVisibleChange:g,className:a.itemClassName,headerClassName:a.itemHeaderClassName,buttonClassName:a.itemButtonClassName,bodyContainerClassName:a.itemBodyContainerClassName,bodyClassName:a.itemBodyClassName,headingLevel:a.itemHeadingLevel},R=Object.keys(S);function oe(){return{...a}}const U={closeOthers:$,onItemShown:C,onItemHidden:C,className:s,itemDestroyOnHide:$,itemAnimated:$,itemTransition:C,itemClassName:s,itemHeaderClassName:s,itemButtonClassName:s,itemBodyContainerClassName:s,itemBodyClassName:s,itemHeadingLevel:P([1,2,3,4,5,6])},X={id:s,destroyOnHide:$,disabled:$,visible:$,animated:$,transition:C,onShown:C,onHidden:C,onVisibleChange:C,className:s,headerClassName:s,buttonClassName:s,bodyContainerClassName:s,bodyClassName:s,headingLevel:P([1,2,3,4,5,6])};function Y(m){const[{bodyClassName$:t,buttonClassName$:n,bodyContainerClassName$:l,headerClassName$:r,animated$:h,transition$:B,destroyOnHide$:x,onShown$:N,onHidden$:y,onVisibleChange$:v,visible$:c,id$:i,disabled$:b,...H},E]=V(S,m,X),D=j(!1),e=M(i),f=q({props:{transition:B,visible:c,onVisibleChange:v,animated:h,animatedOnInit:!1,initDone:D,onHidden:()=>{y()()},onShown:()=>{N()()}}}),w=o(()=>!x()||!f.stores.hidden$()),A=u(()=>({attributes:{id:o(()=>`${e()}-toggle`),"aria-expanded":o(()=>`${c()}`),"aria-disabled":o(()=>`${b()}`),"aria-controls":o(()=>`${e()}-body-container`),disabled:b},classNames:{collapsed:o(()=>!c())},events:{click:()=>{b()||c.update(p=>!p)}}})),I=f.directives.directive,d=u(()=>({attributes:{id:o(()=>`${e()}-body-container`),class:l,"aria-labelledby":o(()=>`${e()}-toggle`)}}));return{...W({visible$:c,id$:e,shouldBeInDOM$:w,disabled$:b,bodyClassName$:t,buttonClassName$:n,bodyContainerClassName$:l,headerClassName$:r,...H}),patch:E,api:{initDone:()=>{D.set(!0)},collapse:()=>{c.set(!1)},expand:()=>{c.set(!0)},toggle:()=>{c.update(p=>!p)}},directives:{toggleDirective:A,buttonDirective:O(A,u(()=>({attributes:{type:k("button"),class:n}}))),headerDirective:u(()=>({attributes:{class:r}})),bodyDirective:u(()=>({attributes:{class:t}})),transitionDirective:I,bodyContainerAttrsDirective:d,bodyContainerDirective:O(I,d),itemDirective:g}}}function Z(m=Y,t=R,n=a,l=U){return K("accordion",r=>{const[h,B]=V(n,r,l),{closeOthers$:x,onItemShown$:N,onItemHidden$:y,className$:v}=h,c=Object.fromEntries(Object.entries(h).filter(e=>e[0].startsWith("item")).map(e=>[e[0].charAt(4).toLowerCase()+e[0].slice(5,-1),e[1]])),i=G(),b=o(()=>{const e=[];return i().forEach(f=>{f.stores.visible$()&&e.push(f.stores.id$())}),e}),H=j(b()[0]),E=o(()=>{x()&&(Q(i(),b(),H()),H.set(b()[0]))}),D=o(()=>{E()});return{...W({itemWidgets$:i,className$:v}),patch:B,api:{expand:e=>{L(i(),e)?.api.expand()},collapse:e=>{L(i(),e)?.api.collapse()},toggle:e=>{L(i(),e)?.api.toggle()},expandAll:()=>{i().forEach(e=>e.api.expand())},collapseAll:()=>{i().forEach(e=>e.api.collapse())},registerItem:e=>{const f=t,w=F(f,z(f,e?.config),c),[{onHidden$:A,onShown$:I}]=V({onHidden:S.onHidden,onShown:S.onShown},{config:w,props:e?.props}),d=m({config:w,props:{...e?.props,onHidden:T(k(()=>{y()(d.stores.id$()),A()?.()}),p=>{y.set(p)}),onShown:T(k(()=>{N()(d.stores.id$()),I()?.()}),p=>{N.set(p)})}});return d.directives.itemDirective=O(()=>({destroy:i.register(d)}),u(()=>({attributes:{class:d.stores.className$,id:d.stores.id$}}))),d}},directives:{accordionDirective:O(J(D),u(()=>({attributes:{class:v},classNames:{"au-accordion":_}})))}}})}const ne=Z();export{ne as a,Y as c,Z as f,oe as g};
