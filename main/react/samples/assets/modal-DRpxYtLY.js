import{a as U,j as n,r as w,c as X}from"./index-Dwis6gmE.js";import{n as d,c as l,r as Y}from"./func-BRtNsj1u.js";import{t as v,b as D,a as f,c as Z}from"./writables-Gu43HIH7.js";import{w as _,s as ee,t as te}from"./stores-CQ1DcFti.js";import{c as H}from"./baseTransitions-DuFIxwKY.js";import{f as R}from"./fade-Dked202W.js";import{p as oe}from"./promise-DMV7Hn63.js";import{c as ne,m as V,d as W,r as se,a as M,b as O,u as F}from"./directive-D4I8XQIx.js";import{u as ie,S as h}from"./config-BSjodroD.js";const re=()=>{const e=Math.abs(window.innerWidth-document.documentElement.clientWidth),s=document.body,t=s.style,{overflow:o,paddingRight:i}=t;if(e>0){const a=parseFloat(window.getComputedStyle(s).paddingRight);t.paddingRight=`${a+e}px`}return t.overflow="hidden",()=>{e>0&&(t.paddingRight=i),t.overflow=o}};let g=d;const ae=()=>{g(),g=re()},le=()=>{g(),g=d},P=(e,s)=>{let t,o;const i=()=>{var r;o&&((r=o.parentNode)==null||r.replaceChild(e,o),o=null)},a=r=>{var u,$;if(r!==t&&((r==null?void 0:r.container)!==(t==null?void 0:t.container)||(r==null?void 0:r.insertBefore)!==(t==null?void 0:t.insertBefore))){t=r;const b=(t==null?void 0:t.container)??((u=t==null?void 0:t.insertBefore)==null?void 0:u.parentElement);if(b){const C=(t==null?void 0:t.insertBefore)??null;(e.parentElement!==b||e.nextSibling!==C)&&(o||(o=($=e.parentNode)==null?void 0:$.insertBefore(e.ownerDocument.createComment("portal"),e)),b.insertBefore(e,C))}else i()}};return a(s),{update:a,destroy:()=>{var r;i(),(r=e.parentNode)==null||r.removeChild(e)}}},ce=e=>{const s=new Map,t=o=>{const i=o.parentElement;i&&o!==document.body&&(Array.from(i.children).forEach(a=>{a!==o&&a.nodeName!=="SCRIPT"&&(s.set(a,a.hasAttribute("inert")),a.toggleAttribute("inert",!0))}),t(i))};return t(e),()=>s.forEach((o,i)=>{i.toggleAttribute("inert",o)})};let I=d;const de=e=>{I(),I=e?ce(e):d},{directive:me,elements$:ue}=ne(),pe=l(()=>{const e=ue();return e[e.length-1]},{equal:Object.is}),fe=l(()=>de(pe())),be=V(me,W(fe)),ve=Symbol(),he=Symbol(),$e={animation:!0,ariaCloseButtonLabel:"Close",backdrop:!0,backdropClass:"",backdropTransition:R,closeButton:!0,closeOnOutsideClick:!0,container:typeof window<"u"?document.body:null,className:"",modalTransition:R,onBeforeClose:d,onVisibleChange:d,onHidden:d,onShown:d,slotDefault:void 0,slotFooter:void 0,slotHeader:void 0,slotStructure:void 0,slotTitle:void 0,visible:!1,contentData:void 0},Ce={animation:v,ariaCloseButtonLabel:D,backdrop:v,backdropClass:D,backdropTransition:f,closeButton:v,closeOnOutsideClick:v,container:Z,className:D,modalTransition:f,onBeforeClose:f,onVisibleChange:f,onHidden:f,onShown:f,visible:v},L=se(),Se=l(()=>L().length>0),ke=l(()=>{Se()?ae():le()}),ye=l(()=>{ke()});function ge(e){const[{animation$:s,backdrop$:t,backdropTransition$:o,closeOnOutsideClick$:i,container$:a,modalTransition$:r,onBeforeClose$:u,onVisibleChange$:$,onHidden$:b,onShown$:C,visible$:j,...q},S]=_($e,e,Ce),p=H({props:{transition:r,visible:j,animation:s,animationOnInit:s,onVisibleChange:$,onHidden:b,onShown:C}}),N=p.stores.visible$,x=H({props:{transition:o,visible:j,animation:s,animationOnInit:s}}),T=l(()=>p.stores.transitioning$()||t()&&x.stores.transitioning$()),k=l(()=>!T()&&!N()),A=l(()=>!t()||k());let y;const B=c=>{y=c;const m={get result(){return y},set result(Q){y=Q},cancel:!1};u()(m),!m.cancel&&S({visible:!1})},z=M(P,l(()=>({container:a()}))),G=M(P,l(()=>{const c=a(),m=c?p.stores.element$():void 0;return{container:c,insertBefore:(m==null?void 0:m.parentElement)===c?m:void 0}})),J=Y(void 0,()=>L.register(E)),K=l(()=>{p.stores.elementPresent$()&&!k()&&J(),ye()}),E={...ee({backdropHidden$:A,container$:a,hidden$:k,transitioning$:T,visible$:N,modalElement$:p.stores.element$,...q}),directives:{modalPortalDirective:z,backdropPortalDirective:G,backdropDirective:O(x.directives.directive),modalDirective:V(O(p.directives.directive),be,W(K))},patch:S,api:{close:B,async open(){return S({visible:!0}),await oe(k).promise,y},patch:S},actions:{modalClick(c){c.currentTarget===c.target&&i()&&B(ve)},closeButtonClick(c){B(he)}}};return E}const je=ge,Be=({children:e,container:s})=>s?U.createPortal(e,s):n.jsx(n.Fragment,{children:e}),De=e=>n.jsxs(n.Fragment,{children:[n.jsx("h5",{className:"modal-title",children:n.jsx(h,{slotContent:e.state.slotTitle,props:e})}),e.state.closeButton?n.jsx("button",{type:"button",className:"btn-close","aria-label":e.state.ariaCloseButtonLabel,onClick:e.widget.actions.closeButtonClick}):null]}),Ne=e=>n.jsxs(n.Fragment,{children:[e.state.slotTitle?n.jsx("div",{className:"modal-header",children:n.jsx(h,{slotContent:e.state.slotHeader,props:e})}):null,n.jsx("div",{className:"modal-body",children:n.jsx(h,{slotContent:e.state.slotDefault,props:e})}),e.state.slotFooter?n.jsx("div",{className:"modal-footer",children:n.jsx(h,{slotContent:e.state.slotFooter,props:e})}):null]}),xe={slotHeader:De,slotStructure:Ne},Te=w.forwardRef(function(s,t){const[o,i]=ie(je,s,"modal",{...xe,slotDefault:s.children});w.useImperativeHandle(t,()=>i.api,[]);const a=F(i.directives.backdropDirective),r=F(i.directives.modalDirective),u={state:o,widget:te(i)};return n.jsxs(Be,{container:o.container,children:[o.backdropHidden?null:n.jsx("div",{className:`modal-backdrop ${o.backdropClass}`,ref:a}),o.hidden?null:n.jsx("div",{className:`modal d-block ${o.className}`,ref:r,onClick:i.actions.modalClick,children:n.jsx("div",{className:"modal-dialog",children:n.jsx("div",{className:"modal-content",children:n.jsx(h,{slotContent:o.slotStructure,props:u})})})})]})});async function Ve(e){const s=X.createRoot(document.createElement("div"));try{return await(await new Promise(o=>{s.render(n.jsx(Te,{...e,ref:o}))})).open()}finally{s.unmount()}}export{Te as M,ve as a,he as m,Ve as o};
