import{r as n,j as r}from"./App-XYQ6f2LA.js";import{S as g}from"./select-DVQJN33M-drpxXaln.js";import{u as h}from"./directive-Ds3K8r_f-C5EAp1_N.js";import"./slot-BM2EyfWv.js";import"./clsx-B-dksMZM.js";import"./config-CU0lT7kt.js";import"./config-D650d2hM.js";import"./stores-1XzkTox7.js";import"./dom-DD1hAVZy-BwOJ91na.js";import"./stores-BWQ6d_4B-C0JwBLuL.js";import"./floatingUI-CIPL8nG-.js";import"./promise-Y53vc4Ia-2pj5kSfs.js";import"./focustrack-mMQ-eiEh.js";import"./navManager-7lB2SB4Q.js";import"./isFocusable-Ckwus82R-adOM025a.js";import"./widget-BWPho1Nc.js";import"./extendWidget-BNToPcxe.js";function x(e,t){let s;return(...i)=>{s&&clearTimeout(s),s=setTimeout(()=>{e(...i)},t)}}const f=e=>{let t;return(...s)=>(t?.abort(),t=new AbortController,e(t.signal,...s))},p="https://en.wikipedia.org/?curid=",j=new Intl.Collator("en").compare;function w(e){const t=document.createElement("div");return t.innerHTML=e,t.innerText}const m=e=>"page-"+e.pageid,S=({itemContext:e,directives:t})=>r.jsxs(r.Fragment,{children:[r.jsx("a",{href:p+e.item.pageid,target:"_blank",rel:"noreferrer",children:e.item.title}),r.jsx("button",{type:"button",className:"btn-close ms-1 wiki-btn-close","aria-label":"Close",...h(t.badgeCloseButtonDirective,e)})]}),C=({itemContext:e})=>{const t=e.item;return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fw-bold",children:t.title}),r.jsx("div",{className:"text-wrap wiki-desc",children:t.snippet})]})},v=e=>e.querySelectorAll("a,button,input"),U=()=>{const[e,t]=n.useState([]),[s,i]=n.useState([]),u=n.useCallback(x(f(async(o,a)=>{const b=await(await fetch("https://en.wikipedia.org/w/api.php?action=query&list=search&prop=info&inprop=url&utf8=&format=json&origin=*&srlimit=5&srsearch="+a,{signal:o})).json();t(b.query?.search.map(c=>({...c,snippet:w(c.snippet)}))??[])}),200),[]),d=n.useCallback(o=>{i((o||[]).sort((a,l)=>j(a.title,l.title)))},[]);return r.jsxs("div",{className:"custom-select my-auto mb-3",children:[r.jsx(g,{items:e,itemIdFn:m,navSelector:v,onFilterTextChange:u,onSelectedChange:d,badgeLabel:S,itemLabel:C,badgeClassName:"badge text-bg-light d-flex align-items-center"}),r.jsx("span",{className:"fw-bold",children:"Selection: "}),s.map(o=>r.jsx("a",{href:`${p}${o.pageid}`,className:"pe-2",children:o.title},m(o))),!s.length&&r.jsx(r.Fragment,{children:"none"})]})};export{U as default};
