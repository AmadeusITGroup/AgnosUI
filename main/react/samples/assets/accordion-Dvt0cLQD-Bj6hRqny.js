import{w as k,m as F,n as q,s as W,i as z,t as M}from"./stores-CmUTCjpT.js";import{c as _}from"./baseTransitions-DIGqKq6i.js";import{n as $,q as G,b as o,w as j,m as O,a as u,k as J,d as T,r as S}from"./dom-BPD8lUxd-BmYWB-gd.js";import{t as s,b as C,c as g,f as P}from"./writables-DYGjj5T3-rf9CR7xD.js";import{c as K}from"./widget-Dn9xc9k2.js";function Q(m,t,n){let l;return t.length==2?(n=n??t[0],l=t.find(r=>r!==n)):t.length>2&&(l=t[0]),l&&m.forEach(r=>{r.stores.id$()!==l&&r.stores.visible$()&&r.patch({visible:!1})}),m}function V(m,t){return m.find(n=>n.stores.id$()===t)}const a={closeOthers:!1,onItemShown:$,onItemHidden:$,className:"",itemDestroyOnHide:!0,itemAnimated:!0,itemTransition:$,itemHeadingLevel:2,itemClassName:"",itemHeaderClassName:"",itemButtonClassName:"",itemBodyContainerClassName:"",itemBodyClassName:""},B={id:"",destroyOnHide:a.itemDestroyOnHide,disabled:!1,visible:!1,animated:a.itemAnimated,transition:a.itemTransition,onShown:$,onHidden:$,onVisibleChange:$,className:a.itemClassName,headerClassName:a.itemHeaderClassName,buttonClassName:a.itemButtonClassName,bodyContainerClassName:a.itemBodyContainerClassName,bodyClassName:a.itemBodyClassName,headingLevel:a.itemHeadingLevel},R=Object.keys(B);function oe(){return{...a}}const U={closeOthers:g,onItemShown:C,onItemHidden:C,className:s,itemDestroyOnHide:g,itemAnimated:g,itemTransition:C,itemClassName:s,itemHeaderClassName:s,itemButtonClassName:s,itemBodyContainerClassName:s,itemBodyClassName:s,itemHeadingLevel:P([1,2,3,4,5,6])},X={id:s,destroyOnHide:g,disabled:g,visible:g,animated:g,transition:C,onShown:C,onHidden:C,onVisibleChange:C,className:s,headerClassName:s,buttonClassName:s,bodyContainerClassName:s,bodyClassName:s,headingLevel:P([1,2,3,4,5,6])};function Y(m){const[{bodyClassName$:t,buttonClassName$:n,bodyContainerClassName$:l,headerClassName$:r,animated$:h,transition$:x,destroyOnHide$:E,onShown$:N,onHidden$:y,onVisibleChange$:v,visible$:c,id$:i,disabled$:b,...H},L]=k(B,m,X),D=j(!1),e=z(i),f=_({props:{transition:x,visible:c,onVisibleChange:v,animated:h,animatedOnInit:!1,initDone:D,onHidden:()=>{y()()},onShown:()=>{N()()}}}),w=o(()=>!E()||!f.stores.hidden$()),A=u(()=>({attributes:{id:o(()=>`${e()}-toggle`),"aria-expanded":o(()=>`${c()}`),"aria-disabled":o(()=>`${b()}`),"aria-controls":o(()=>`${e()}-body-container`),disabled:b},classNames:{collapsed:o(()=>!c())},events:{click:()=>{b()||c.update(p=>!p)}}})),I=f.directives.directive,d=u(()=>({attributes:{id:o(()=>`${e()}-body-container`),class:l,"aria-labelledby":o(()=>`${e()}-toggle`),role:S("region")}}));return{...W({visible$:c,id$:e,shouldBeInDOM$:w,disabled$:b,bodyClassName$:t,buttonClassName$:n,bodyContainerClassName$:l,headerClassName$:r,...H}),patch:L,api:{initDone:()=>{D.set(!0)},collapse:()=>{c.set(!1)},expand:()=>{c.set(!0)},toggle:()=>{c.update(p=>!p)}},directives:{toggleDirective:A,buttonDirective:O(A,u(()=>({attributes:{type:S("button"),class:n}}))),headerDirective:u(()=>({attributes:{class:r}})),bodyDirective:u(()=>({attributes:{class:t}})),transitionDirective:I,bodyContainerAttrsDirective:d,bodyContainerDirective:O(I,d),itemDirective:$}}}function Z(m=Y,t=R,n=a,l=U){return K("accordion",r=>{const[h,x]=k(n,r,l),{closeOthers$:E,onItemShown$:N,onItemHidden$:y,className$:v}=h,c=Object.fromEntries(Object.entries(h).filter(e=>e[0].startsWith("item")).map(e=>[e[0].charAt(4).toLowerCase()+e[0].slice(5,-1),e[1]])),i=G(),b=o(()=>{const e=[];return i().forEach(f=>{f.stores.visible$()&&e.push(f.stores.id$())}),e}),H=j(b()[0]),L=o(()=>{E()&&(Q(i(),b(),H()),H.set(b()[0]))}),D=o(()=>{L()});return{...W({itemWidgets$:i,className$:v}),patch:x,api:{expand:e=>{V(i(),e)?.api.expand()},collapse:e=>{V(i(),e)?.api.collapse()},toggle:e=>{V(i(),e)?.api.toggle()},expandAll:()=>{i().forEach(e=>e.api.expand())},collapseAll:()=>{i().forEach(e=>e.api.collapse())},registerItem:e=>{const f=t,w=F(f,q(f,e?.config),c),[{onHidden$:A,onShown$:I}]=k({onHidden:B.onHidden,onShown:B.onShown},{config:w,props:e?.props}),d=m({config:w,props:{...e?.props,onHidden:T(S(()=>{y()(d.stores.id$()),A()?.()}),p=>{y.set(p)}),onShown:T(S(()=>{N()(d.stores.id$()),I()?.()}),p=>{N.set(p)})}});return d.directives.itemDirective=O(()=>({destroy:i.register(d)}),u(()=>({attributes:{class:d.stores.className$,id:d.stores.id$}}))),d}},directives:{accordionDirective:O(J(D),u(()=>({attributes:{class:v},classNames:{"au-accordion":M}})))}}})}const ne=Z();export{ne as a,Y as c,Z as f,oe as g};
