import{r as De,j as t}from"./App-YOpzkQgd.js";import{S as T}from"./slot-BgAWWF5d.js";import{u as y}from"./directive-Ds3K8r_f-BTGf4hNa.js";import{P as ke}from"./portal-CX8X69NK-gw8hrTqC.js";import{u as ye}from"./config-4zh7-eV2.js";import{n as c,b as r,d as xe,g as M,h as ze,m as p,a as m,r as D,i as Se,w as I,u as O,j as je,k as Ce}from"./dom-BPD8lUxd-BmYWB-gd.js";import{p as W,r as Me,a as Te,s as Ee,f as He}from"./focusElement-BLhP9iS-.js";import{c as Ne}from"./pointerdownPosition-bcPwz8aS.js";import{c as L}from"./baseTransitions-DIGqKq6i.js";import{w as Ve,b as Pe,s as Be,t as h}from"./stores-CmUTCjpT.js";import{c as R}from"./widget-Dn9xc9k2.js";import{c as v,d as Ae,b as d,e as Ie,t as k}from"./writables-DYGjj5T3-rf9CR7xD.js";import{g as Oe}from"./textDirection-cNgt24LJ-sg3JWs5A.js";import{e as We}from"./extendWidget-B7LcRyoz.js";import{c as Le,a as Re}from"./collapse-B7J7HK0W-BR9K5BVm.js";import{f as Fe}from"./fade-uOobJKgw-kqrrEWr3.js";const Xe={animated:!0,ariaDescribedBy:"",ariaLabelledBy:"",backdropClass:"",backdropTransition:c,className:"w-full",visible:!1,container:typeof window<"u"?document.body:null,transition:c,verticalTransition:c,onHidden:c,onShown:c,onSizeChange:c,onVisibleChange:c,onMinimizedChange:c,onMaximizedChange:c,onResizingChange:c,resizable:!1,backdrop:!0,bodyScroll:!1,size:null,focusOnInit:!0},Ye={animated:v,ariaDescribedBy:k,ariaLabelledBy:k,backdropClass:k,backdropTransition:d,className:k,visible:v,transition:d,verticalTransition:d,container:Ie,onHidden:d,onShown:d,onSizeChange:d,onVisibleChange:d,onMinimizedChange:d,onMaximizedChange:d,onResizingChange:d,resizable:v,backdrop:v,bodyScroll:v,size:Ae,focusOnInit:v},_e=R("drawer",i=>{const[{backdrop$:a,backdropTransition$:n,backdropClass$:E,bodyScroll$:H,transition$:F,verticalTransition$:X,visible$:Y,container$:w,className$:g,size$:_,animated$:x,ariaDescribedBy$:q,ariaLabelledBy$:U,onHidden$:G,onShown$:J,onSizeChange$:K,onVisibleChange$:Q,onMinimizedChange$:Z,onMaximizedChange$:ee,onResizingChange$:u,focusOnInit$:ie,...te},re]=Ve(Xe,i,Ye),z=Pe(_,K,e=>e&&Math.round(e)),f=r(()=>["block-start","block-end"].some(s=>g().includes(s))),l=L({props:{animated:x,animatedOnInit:x,transition:xe(r(()=>f()?X():F())),visible:Y,onVisibleChange:Q,onHidden:G,onShown:J}}),se=M(W,r(()=>({container:w()}))),{directive:ae,element$:S}=ze(),ne=p(ae,m(()=>({attributes:{class:g,role:D("dialog"),"aria-describedby":q,"aria-labelledby":U,"aria-modal":D("true"),tabIndex:D("-1")},styles:{position:r(()=>{const e=w();return e&&Se(e)&&e!==document.body?"relative":"fixed"}),outline:D("none")},events:{keydown:async e=>{e.key==="Escape"&&await l.api.hide()}}}))),N=L({props:{animated:x,transition:n}}),oe=M(W,r(()=>{const e=w(),s=e?l.stores.element$():void 0;return{container:e,insertBefore:s?.parentElement===e?s:void 0}})),ce=r(()=>(H()||(C()?Me():Te()),!a()||C())),de=m(()=>({attributes:{class:E,"data-agnos-ignore-inert":h},events:{click:async()=>await l.api.hide()}})),le=r(()=>["inline-start","block-start"].some(e=>g().includes(e))?1:-1),V=I(void 0),P=I(void 0);function j(e){const s=S(),o=f();e=Math.round(Math.max(0,e)),s.style[o?"height":"width"]=`${e}px`;const b=Math.round(s[o?"offsetHeight":"offsetWidth"]);return z.set(b),V.set(e!=null&&(e<b||e===0)),P.set(!!e&&e>b),b}const pe=p(Ne(e=>{const s=S(),o=f(),b=Oe(s)==="ltr"?1:-1,fe=o?1:b,he=s[o?"offsetHeight":"offsetWidth"],A=o?"clientY":"clientX",we=e[A],ge=le();let $=!1;return{onMove($e){j(he+fe*ge*($e[A]-we)),$||($=!0,u()(!0))},onEnd(){s.style[o?"height":"width"]="",$&&(u()(!1),$=!1)}}}),m(()=>({events:{keydown:e=>{const{key:s}=e,o=z()||S()?.[f()?"offsetHeight":"offsetWidth"];if(o!=null)switch(s){case"ArrowLeft":case"ArrowDown":u()(!0),j(o-10),u()(!1);break;case"ArrowRight":case"ArrowUp":u()(!0),j(o+10),u()(!1);break}}}}))),B=l.stores.visible$,me=r(()=>l.stores.transitioning$()||N.stores.transitioning$()),C=r(()=>!me()&&!B()),ue=r(()=>{const e=V();e!=null&&O(()=>Z()(e))}),be=r(()=>{const e=P();e!=null&&O(()=>ee()(e))}),ve=r(()=>{ue(),be()});return{...Be({...te,backdropClass$:E,className$:g,container$:w,size$:z,visible$:B,backdropHidden$:ce,hidden$:C,isVertical$:f}),patch:re,api:{open:l.api.show,close:l.api.hide},directives:{drawerPortalDirective:se,drawerDirective:p(Ce(ve),ne,M(Ee,r(()=>!H())),l.directives.directive,je(He,ie)),backdropPortalDirective:oe,backdropDirective:p(N.directives.directive,de),splitterDirective:pe}}}),qe={structure:void 0,header:void 0,children:void 0},Ue={structure:void 0,header:void 0,children:void 0},Ge={backdropTransition:Fe,transition:Re,verticalTransition:Le},Je=R("drawer",i=>{const a=We(_e,qe,Ue,Ge)(i);return{...a,directives:{...a.directives,drawerDirective:p(m(()=>({classNames:{"au-drawer":h,show:a.stores.visible$},styles:{"--bs-drawer-size":r(()=>{const n=a.stores.size$();return n==null?void 0:n+"px"})}})),a.directives.drawerDirective),backdropDirective:p(a.directives.backdropDirective,m(()=>({classNames:{"au-drawer-backdrop":h,show:a.stores.visible$}}))),splitterDirective:p(a.directives.splitterDirective,m(()=>({classNames:{"au-splitter":h}}))),containerDirective:m(()=>({classNames:{"au-drawer-container":h}}))}}}),Ke=Je,Qe=({directives:i})=>t.jsx("div",{...y(i.backdropDirective)}),Ze=i=>t.jsxs("div",{...y(i.directives.drawerDirective),children:[t.jsx("div",{...y(i.directives.containerDirective),children:t.jsx(T,{slotContent:i.state.structure,props:i})}),i.state.resizable&&t.jsx(ii,{...i})]}),ei=i=>t.jsx(t.Fragment,{children:t.jsxs("div",{className:"au-drawer-content",children:[t.jsx("div",{className:"au-drawer-header",children:t.jsx(T,{slotContent:i.state.header,props:i})}),t.jsx("div",{className:"au-drawer-body",children:t.jsx(T,{slotContent:i.state.children,props:i})})]})}),ii=i=>t.jsx("div",{...y(i.directives.splitterDirective),tabIndex:0}),ti={structure:ei};function $i({ref:i,...a}){const n=ye(Ke,a,{...ti});return De.useImperativeHandle(i,()=>n.api,[n.api]),t.jsxs(ke,{container:n.state.container,children:[!n.state.backdropHidden&&t.jsx(Qe,{...n}),!n.state.hidden&&t.jsx(Ze,{...n})]})}export{$i as D};
