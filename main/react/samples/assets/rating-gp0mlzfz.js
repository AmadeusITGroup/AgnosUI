import{c as s,w as D,n as b}from"./func-DcknktoK.js";import{w as F,c as N,s as T,I as _}from"./stores-bF192c83.js";import{d as H,e as $,i as I,t as u,a as c,b as p}from"./writables-XBoaTYbN.js";const h={rating:0,tabindex:0,maxRating:10,disabled:!1,readonly:!1,resettable:!0,ariaValueTextFn:(e,g)=>`${e} out of ${g}`,onHover:b,onLeave:b,onRatingChange:b,className:"",slotStar:({fill:e})=>String.fromCharCode(e===100?9733:9734),ariaLabel:"Rating",ariaLabelledBy:""};function E(){return{...h}}const M={rating:$,tabindex:$,maxRating:{normalizeValue:e=>I(e)?Math.max(0,e):_},disabled:u,readonly:u,resettable:u,ariaValueTextFn:c,onHover:c,onLeave:c,onRatingChange:c,className:p,ariaLabel:p,ariaLabelledBy:p};function z(e){const[{rating$:g,tabindex$:R,ariaValueTextFn$:y,onHover$:v,onLeave$:w,onRatingChange$:x,...f},L]=F(h,e,M),{maxRating$:r,disabled$:m,readonly$:V,resettable$:A}=f,C=s(()=>m()?-1:R()),t=N(g,x,a=>H(a,r())),i=D(0),o=s(()=>!m()&&!V()),d=s(()=>{const a=i();return a!==0?a:t()}),k=s(()=>y()(d(),r())),P=s(()=>{const a=d();return Array.from({length:r()},(l,n)=>({fill:Math.round(Math.max(Math.min(a-n,1),0)*100),index:n}))});return{...T({ariaValueText$:k,isInteractive$:o,rating$:t,stars$:P,tabindex$:C,visibleRating$:d,...f}),patch:L,actions:{click:a=>{o()&&a>0&&a<=r()&&t.update(l=>l===a&&A()?0:a)},hover:a=>{o()&&a>0&&a<=r()&&(i.set(a),v()(a))},leave:()=>{o()&&(w()(i()),i.set(0))},handleKey(a){if(o()){const{key:l}=a;switch(l){case"ArrowLeft":case"ArrowDown":t.update(n=>n-1);break;case"ArrowRight":case"ArrowUp":t.update(n=>n+1);break;case"Home":case"PageDown":t.set(0);break;case"End":case"PageUp":t.set(r());break;default:return}a.preventDefault(),a.stopPropagation()}}},directives:{},api:{}}}export{z as c,E as g};
