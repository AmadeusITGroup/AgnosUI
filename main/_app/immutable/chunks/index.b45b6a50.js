const e='"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const a=require("react/jsx-runtime"),u=require("@agnos-ui/core"),o=require("react"),y=require("@amadeus-it-group/tansu"),W=require("react-dom"),A=require("react-dom/client"),k=require("classnames");function B(e){const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const s in e)if(s!=="default"){const n=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(t,s,n.get?n:{enumerable:!0,get:()=>e[s]})}}return t.default=e,Object.freeze(t)}const S=B(o),w=new WeakMap,E=e=>s=>a.jsx(a.Fragment,{children:e(s)}),H=e=>{let t=w.get(e);return t||(t=E(e),w.set(e,t)),t},O=e=>e.prototype instanceof o.Component,c=({slotContent:e,props:t})=>{if(typeof e=="function"){const n=O(e)?e:H(e);return a.jsx(n,{...t})}return a.jsx(a.Fragment,{children:e})};function C(e,t={},...s){const n=o.useRef(void 0);n.current||(n.current=e(...s),n.current.patch(t));const i=n.current,r=o.useRef(t);return o.useEffect(()=>{const d=u.findChangedProperties(r.current,t);r.current=t,d&&i.patch(d)},[t]),[I(i.state$),i]}function I(e){const[t,s]=o.useState(()=>e());return o.useEffect(()=>e.subscribe(n=>{s(()=>n)}),[e]),t}function p(e,t){var r,l;const s=o.useRef(),n=o.useRef(),i=o.useCallback(d=>{var f,g;(g=(f=s.current)==null?void 0:f.destroy)==null||g.call(f),s.current=void 0,d&&(s.current=e(d,n.current))},[e]);return n.current=t,(l=(r=s.current)==null?void 0:r.update)==null||l.call(r,t),i}const v=o.createContext(void 0),q=(e,t)=>!u.findChangedProperties(e,t),T=e=>{const t=o.useRef();return t.current||(t.current=y.writable({...e},{equal:q})),o.useEffect(()=>{t.current.set({...e})},[e]),o.useMemo(()=>y.asReadable(t.current),[t.current])},z=(e,t)=>{const s=o.useContext(v),n=T(t);return o.useMemo(()=>y.computed(()=>({...n(),...e?s==null?void 0:s()[e]:void 0})),[s])},m=(e,t,s,n)=>C(e,t,z(s,n)),K=e=>a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"alert-body",children:a.jsx(c,{slotContent:e.state.slotDefault,props:e})}),e.state.dismissible?a.jsx("button",{type:"button",className:"btn-close ms-auto",onClick:e.widget.api.close,"aria-label":e.state.ariaCloseButtonLabel}):null]}),_={slotStructure:K},V=o.forwardRef(function(t,s){const[n,i]=m(u.createAlert,t,"alert",{..._,slotDefault:t.children}),r=p(i.directives.transitionDirective);o.useImperativeHandle(s,()=>i.api,[]);const l={state:n,widget:i};return a.jsx(a.Fragment,{children:n.hidden?null:a.jsx("div",{className:`au-alert d-flex alert w-100 alert-${n.type}`,role:"alert",ref:r,children:a.jsx(c,{slotContent:n.slotStructure,props:l})})})});function G(e){const[{tabindex:t,maxRating:s,visibleRating:n,ariaValueText:i,readonly:r,disabled:l,isInteractive:d,stars:f,className:g,slotStar:N,ariaLabel:D,ariaLabelledBy:F},x]=m(u.createRating,e,"rating"),M={cursor:d?"pointer":"default"};return a.jsx("div",{role:"slider",className:`d-inline-flex au-rating ${g}`,tabIndex:t,"aria-valuemin":0,"aria-valuemax":s,"aria-valuenow":n,"aria-valuetext":i,"aria-readonly":r||void 0,"aria-disabled":l||void 0,"aria-label":D||void 0,"aria-labelledby":F||void 0,onKeyDown:b=>x.actions.handleKey(b),onMouseLeave:x.actions.leave,children:f.map(b=>a.jsxs(o.Fragment,{children:[a.jsxs("span",{className:"visually-hidden",children:["(",b.index<n?"*":" ",")"]}),a.jsx("span",{className:"au-rating-star",style:M,onMouseEnter:()=>x.actions.hover(b.index+1),onClick:()=>x.actions.click(b.index+1),children:a.jsx(c,{slotContent:N,props:b})})]},b.index))})}const J={backgroundColor:"transparent"};function R(e){e.preventDefault()}function Q({api:e,selected:t}){const s=[];for(const n of t)s.push(a.jsxs("div",{className:"badge rounded-pill text-bg-primary d-inline-flex align-items-center m-1",onMouseDown:R,children:[a.jsx("div",{className:"me-1",children:""+n}),a.jsx("span",{role:"button",tabIndex:-1,"aria-label":"Close",onClick:()=>e.api.unselect(n),children:"x"})]}));return s.length?a.jsx("div",{className:"input-group-text",style:J,children:s}):null}function U({visible:e,highlighted:t}){return a.jsx(a.Fragment,{children:e.map(s=>{const n=`au-select-checkbox-${s.id}`,i=["dropdown-item position-relative"];return s===t&&i.push("bg-light"),a.jsx("li",{className:i.join(" "),children:a.jsxs("div",{className:"form-check",children:[a.jsx("input",{id:n,tabIndex:-1,type:"checkbox",className:"form-check-input",checked:s.selected,onChange:s.toggle}),a.jsx("label",{htmlFor:n,className:"form-check-label stretched-link",onClick:r=>{s.toggle(),r.preventDefault()},children:""+s.item})]})},s.id)})})}function X(e){const[t,s]=m(u.createSelect,e,"select"),{visible:n,selected:i,highlighted:r,filterText:l,opened:d,className:f}=t,{directives:{hasFocusDirective:g}}=s,N=p(g),D=p(g);return a.jsxs("div",{className:`au-select dropdown input-group input-group-sm mb-3 d-block ${f}`,children:[a.jsxs("div",{ref:N,role:"combobox",className:"input-group","aria-haspopup":"listbox","aria-expanded":"true",children:[a.jsx(Q,{api:s,selected:i}),a.jsx("input",{className:"form-control",type:"text",value:l,"aria-autocomplete":"list",autoCorrect:"off",autoCapitalize:"none",autoComplete:"off",onKeyDown:s.actions.onInputKeydown,onInput:s.actions.onInput})]}),d&&n.length>0&&a.jsx("ul",{ref:D,className:"dropdown-menu show w-100",style:{position:"absolute",inset:"0px auto auto 0px",margin:"0px",transform:"translate3d(0px, 45px, 0px)"},"data-popper-placement":"bottom-start",onMouseDown:R,children:a.jsx(U,{visible:n,highlighted:r})})]})}const Y=({children:e,container:t})=>t?W.createPortal(e,t):a.jsx(a.Fragment,{children:e}),Z=e=>a.jsxs(a.Fragment,{children:[a.jsx("h5",{className:"modal-title",children:a.jsx(c,{slotContent:e.state.slotTitle,props:e})}),e.state.closeButton?a.jsx("button",{type:"button",className:"btn-close","aria-label":e.state.ariaCloseButtonLabel,onClick:e.widget.actions.closeButtonClick}):null]}),ee=e=>a.jsxs(a.Fragment,{children:[e.state.slotTitle?a.jsx("div",{className:"modal-header",children:a.jsx(c,{slotContent:e.state.slotHeader,props:e})}):null,a.jsx("div",{className:"modal-body",children:a.jsx(c,{slotContent:e.state.slotDefault,props:e})}),e.state.slotFooter?a.jsx("div",{className:"modal-footer",children:a.jsx(c,{slotContent:e.state.slotFooter,props:e})}):null]}),te={slotHeader:Z,slotStructure:ee},P=o.forwardRef(function(t,s){const[n,i]=m(u.createModal,t,"modal",{...te,slotDefault:t.children});o.useImperativeHandle(s,()=>i.api,[]);const r=p(i.directives.backdropDirective),l=p(i.directives.modalDirective),d={state:n,widget:u.toSlotContextWidget(i)};return a.jsx(a.Fragment,{children:a.jsxs(Y,{container:n.container,children:[n.backdropHidden?null:a.jsx("div",{className:`modal-backdrop ${n.backdropClass}`,ref:r}),n.hidden?null:a.jsx("div",{className:`modal d-block ${n.modalClass}`,ref:l,onClick:i.actions.modalClick,children:a.jsx("div",{className:"modal-dialog",children:a.jsx("div",{className:"modal-content",children:a.jsx(c,{slotContent:n.slotStructure,props:d})})})})]})})}),ae=async e=>{const t=A.createRoot(document.createElement("div"));try{return await(await new Promise(n=>{t.render(a.jsx(P,{...e,ref:n}))})).open()}finally{t.unmount()}},j=S.forwardRef(({disabled:e,active:t,ariaLabel:s,activeLabel:n,className:i,children:r,...l},d)=>a.jsx("li",{ref:d,"aria-current":t?"page":void 0,className:k("page-item",{active:t,disabled:e}),children:a.jsxs("a",{className:k("page-link",i),"aria-label":s||void 0,...l,href:"#",tabIndex:e?-1:void 0,"aria-disabled":e||void 0,children:[r,t&&n&&a.jsx("span",{className:"visually-hidden",children:n})]})}));j.displayName="PageItem";const h=S.forwardRef(({children:e,...t},s)=>a.jsx(j,{...t,ref:s,children:a.jsx("span",{"aria-hidden":"true",children:e})}));h.displayName="NavButton";function $(e){const{widget:t,state:s}=e,n=[];for(let i=0;i<s.pages.length;i++)t.api.isEllipsis(s.pages[i])?n.push(a.jsx(h,{disabled:!0,tabIndex:-1,className:"au-ellipsis",children:a.jsx(c,{slotContent:s.slotEllipsis,props:e})},"Ellipsis"+i)):n.push(a.jsx(j,{className:"au-page",disabled:s.disabled,active:s.pages[i]===s.page,onClick:r=>{t.actions.select(s.pages[i]),r.preventDefault()},ariaLabel:s.pagesLabel[i],activeLabel:s.activeLabel,children:a.jsx(c,{slotContent:s.slotNumberLabel,props:{...e,displayedPage:s.pages[i]}})},s.pages[i]));return n.length?a.jsx(a.Fragment,{children:n}):null}const se={slotPages:$};function ne(e){const[t,s]=m(u.createPagination,e,"pagination",se),n={state:t,widget:u.toSlotContextWidget(s)},i=[],r=[];return t.boundaryLinks&&i.push(a.jsx(h,{className:"au-first",ariaLabel:t.ariaFirstLabel,onClick:l=>{s.actions.first(),l.preventDefault()},disabled:t.previousDisabled,children:a.jsx(c,{slotContent:t.slotFirst,props:n})},"first")),t.directionLinks&&i.push(a.jsx(h,{className:"au-previous",ariaLabel:t.ariaPreviousLabel,onClick:l=>{s.actions.previous(),l.preventDefault()},disabled:t.previousDisabled,children:a.jsx(c,{slotContent:t.slotPrevious,props:n})},"prev")),t.directionLinks&&r.push(a.jsx(h,{className:"au-next",ariaLabel:t.ariaNextLabel,onClick:l=>{s.actions.next(),l.preventDefault()},disabled:t.nextDisabled,children:a.jsx(c,{slotContent:t.slotNext,props:n})},"next")),t.boundaryLinks&&r.push(a.jsx(h,{className:"au-last",ariaLabel:t.ariaLastLabel,onClick:l=>{s.actions.last(),l.preventDefault()},disabled:t.nextDisabled,children:a.jsx(c,{slotContent:t.slotLast,props:n})},"last")),a.jsxs("nav",{"aria-label":t.ariaLabel,children:[a.jsxs("ul",{className:k("au-pagination","pagination",t.size?`pagination-${t.size}`:"",t.className),children:[i,a.jsx(c,{slotContent:t.slotPages,props:n}),r]}),a.jsx("div",{"aria-live":"polite",className:"visually-hidden",children:t.page&&`Current page is ${t.page}`})]})}const ie=({children:e,adaptParentConfig:t,...s})=>{const n=o.useContext(v);let i=!1;const r=o.useMemo(()=>{const l=u.createWidgetsConfig(n,t);return l.set(s),i=!0,l},[n,t]);return o.useEffect(()=>{i||r.set(s)},[s]),a.jsx(v.Provider,{value:r,children:e})},L=o.createContext({}),re=e=>{const t=p(e.widget.directives.collapseDirective);return a.jsxs(a.Fragment,{children:[a.jsx("h2",{className:`accordion-header ${e.state.itemHeaderClass}`,children:a.jsx("button",{type:"button",id:`${e.state.itemId}-toggle`,onClick:e.widget.actions.click,className:`accordion-button ${e.state.itemButtonClass} ${e.state.itemCollapsed?"collapsed":""}`,disabled:e.state.itemDisabled,"aria-controls":`${e.state.itemId}-collapse`,"aria-disabled":e.state.itemDisabled,"aria-expanded":!e.state.itemCollapsed,children:a.jsx(c,{slotContent:e.state.slotItemHeader,props:e})})}),e.state.shouldBeInDOM?a.jsx("div",{className:`accordion-collapse ${e.state.itemCollapseClass}`,id:`${e.state.itemId}-collapse`,"aria-labelledby":`${e.state.itemId}-toggle`,ref:t,children:a.jsx("div",{className:`accordion-body ${e.state.itemBodyClass}`,children:a.jsx(c,{slotContent:e.state.slotItemBody,props:e})})}):null]})},oe={slotItemStructure:re},le=o.forwardRef(function(t,s){const{registerItem:n}=o.useContext(L),[i,r]=m(n,t,null,{...oe}),l={state:i,widget:r},d=p(r.directives.accordionItemDirective);return o.useImperativeHandle(s,()=>r.api,[]),o.useEffect(()=>{r.api.initDone()},[]),a.jsx("div",{className:`accordion-item ${i.itemClass}`,id:i.itemId,ref:d,children:a.jsx(c,{slotContent:i.slotItemStructure,props:l})})}),ce=o.forwardRef(function(t,s){const[n,i]=m(u.createAccordion,t,"accordion");o.useImperativeHandle(s,()=>i.api,[]);const r=p(i.directives.accordionDirective);return a.jsx(L.Provider,{value:i.api,children:a.jsx("div",{className:`accordion ${n.accordionClass}`,ref:r,children:t.children})})});exports.Accordion=ce;exports.AccordionItem=le;exports.Alert=V;exports.DefaultPages=$;exports.Modal=P;exports.NavButton=h;exports.PageItem=j;exports.Pagination=ne;exports.Rating=G;exports.Select=X;exports.Slot=c;exports.WidgetsDefaultConfig=ie;exports.openModal=ae;exports.useDirective=p;exports.useObservable=I;exports.useWidget=C;exports.useWidgetWithConfig=m;exports.widgetsConfigContext=v;\n';export{e as default};
