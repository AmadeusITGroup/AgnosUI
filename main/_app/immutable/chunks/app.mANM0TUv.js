import{b as ae,t as le}from"./index.94WAa3an.js";import{J as fe,y as he}from"./scheduler.l1yozE5D.js";import{p as E}from"./stores.qIgmSeqg.js";function Ke(t){return t?.length!==void 0?t:Array.from(t)}function Xe(t,e){ae(t,1,1,()=>{e.delete(t.key)})}function Be(t,e,s,n,i,r,o,u,l,y,f,a){let c=t.length,d=r.length,m=c;const L={};for(;m--;)L[t[m].key]=m;const R=[],O=new Map,z=new Map,G=[];for(m=d;m--;){const h=a(i,r,m),v=s(h);let g=o.get(v);g?n&&G.push(()=>g.p(h,e)):(g=y(v,h),g.c()),O.set(v,R[m]=g),v in L&&z.set(v,Math.abs(m-L[v]))}const J=new Set,K=new Set;function F(h){le(h,1),h.m(u,f),o.set(h.key,h),f=h.first,d--}for(;c&&d;){const h=R[d-1],v=t[c-1],g=h.key,$=v.key;h===v?(f=h.first,c--,d--):O.has($)?!o.has(g)||J.has(g)?F(h):K.has($)?c--:z.get(g)>z.get($)?(K.add(g),F(h)):(J.add($),c--):(l(v,o),c--)}for(;c--;){const h=t[c];O.has(h.key)||l(h,o)}for(;d;)F(R[d-1]);return fe(G),R}var X;const C=typeof Symbol=="function"&&Symbol.observable||"@@observable",M=Symbol(),S=()=>{},q=()=>{};q.unsubscribe=q;const j=(t,e)=>{const s=t?t[e]:null;return typeof s=="function"?s.bind(t):S},ee=t=>({next:typeof t=="function"?t.bind(null):j(t,"next"),pause:j(t,"pause"),resume:j(t,"resume"),_value:void 0,_valueIndex:0,_paused:!1}),te=function(){return this},N=t=>{if(!t)return q;if(t.unsubscribe===t)return t;const e=typeof t=="function"?()=>t():()=>t.unsubscribe();return e.unsubscribe=e,e},T=new WeakSet,de=t=>{let e=t.subscribe;return T.has(e)||(e=(...s)=>N(t.subscribe(...s)),T.add(e)),e},V=t=>{const e="subscribe"in t?t:t[C]();return de(e)},be=t=>{let e;return t(s=>e=s)(),e};function w(t,e){const s=V(t),n=Object.assign(()=>x(n),e,{subscribe:s,[C]:te});return n}const B=function(t){this.set(t(ue(()=>x(this))))};function pe(t,e){return w(t,typeof e=="function"?{set:e,update:B}:{...e,set:e?.set??S,update:e?.update??(e?.set?B:S)})}const b=Symbol(),se=Symbol();let D=!1;const U=new Set,me=1e3,P=t=>{if(t>me)throw new Error("reached maximum number of store changes in one shot")},k=t=>{const e=!D;e&&(D=!0);try{return t()}finally{if(e)try{const s=new Map;for(const n of U){const i=s.get(n)??0;P(i),s.set(n,i+1),U.delete(n),n[se]()}}finally{U.clear(),D=!1}}},ne=t=>be(V(t));let _=ne;const x=t=>_(t),H=t=>({[t]:!0,[t-1]:!1,0:!1}),I=Symbol(),ve=(t,e)=>Object.is(t,e)&&(!t||typeof t!="object")&&typeof t!="function";class W{#s;#n;#e;#t;#i;#o;#c;constructor(e){this.#s=new Set,this.#n=null,this.#e=!1,this.#t=1,this.#o=H(1),this.#c=new WeakMap,this[X]=!1,this.#i=e}#u(){this.#n=N(this.onUse())}#r(){const e=this.#n;e&&(this.#n=null,e())}[(X=I,se)](){const e=this.#t;for(const s of[...this.#s]){if(this.#e||this.#t!==e)return;s._valueIndex!==0&&this.#a(s)}}[b](){}#a(e){const s=this.#o,n=this.#t,i=this.#i;let r=s[e._valueIndex];r==null&&(r=!!this.equal(e._value,i),s[e._valueIndex]=r),e._valueIndex=n,r?!this.#e&&e._paused&&(e._paused=!1,e.resume()):(e._value=i,e._paused=!1,e.next(i))}equal(e,s){return!this.notEqual(e,s)}notEqual(e,s){return!ve(e,s)}pauseSubscribers(){if(!this.#e){this.#e=!0,U.delete(this);for(const e of[...this.#s])e._valueIndex===0||e._paused||(e._paused=!0,e.pause())}}resumeSubscribers(){this.#e&&(this.#e=!1,k(()=>{U.add(this)}))}set(e){const s=this[I];if(s||!this.equal(this.#i,e)){const n=this.#t+1;this.#t=n,this.#i=e,this.#o=H(n),s&&delete this.#o[n-1],this.pauseSubscribers()}this.resumeSubscribers()}update(e){this.set(e(this.#i))}onUse(){}subscribe(e){const s=ee(e),n=e?.[M];if(n){const r=this.#c.get(n);r&&(s._value=r._value,s._valueIndex=r._valueIndex)}this.#s.add(s),k(()=>{this.#s.size==1?this.#u():this[b]()}),this.#a(s);const i=()=>{const r=this.#s.delete(s);s.next=S,s.pause=S,s.resume=S,r&&(this.#c.set(i,s),this.#s.size===0&&this.#r())};return i[b]=()=>{this[b](),this.#a(s)},i.unsubscribe=i,i}[C](){return this}}function ge(t){const e=s=>(s?.[M]||ee(s).next(t),q);return T.add(e),Object.assign(()=>t,{subscribe:e,[C]:te})}class ie extends W{constructor(e){super(e)}set(e){super.set(e)}update(e){super.update(e)}}const A=(t,e)=>{const{onUse:s,equal:n,notEqual:i}=e;return s&&(t.onUse=function(){const r=o=>this.set(o);return r.set=r,r.update=o=>this.update(o),s(r)}),n&&(t.equal=function(r,o){return n(r,o)}),i&&(t.notEqual=function(r,o){return i(r,o)}),t};function re(t,e={}){return typeof e=="function"&&(e={onUse:e}),e.onUse?w(A(new ie(t),e)):ge(t)}function oe(t,e={}){typeof e=="function"&&(e={onUse:e});const s=A(new ie(t),e);return w(s,{set:s.set.bind(s),update:s.update.bind(s)})}function ye(t){return t.length<=1}const Se=t=>t();class Y extends W{#s;#n;#e=0;constructor(e,s){super(s);const n=Array.isArray(e);this.#s=n,this.#n=(n?[...e]:[e]).map(V)}resumeSubscribers(){this.#e||super.resumeSubscribers()}onUse(){let e=!1,s=0;const n=this.#s,i=this.#n,r=new Array(i.length);let o=null;const u=()=>{const a=o;a&&(o=null,a())},l=(a=!1)=>{a&&(e=!0),e&&!this.#e&&(s&&(s=0,u(),o=N(this.derive(n?r:r[0]))),this.resumeSubscribers())},y=i.map((a,c)=>{const d=m=>{r[c]=m,s|=1<<c,this.#e&=~(1<<c),l()};return d.next=d,d.pause=()=>{this.#e|=1<<c,this.pauseSubscribers()},d.resume=()=>{this.#e&=~(1<<c),l()},a(d)}),f=(a,c)=>{this.#e&1<<c&&a[b]?.()};return this[b]=()=>{let a=0;for(;this.#e&&(P(++a),e=!1,y.forEach(f),!this.#e);)l(!0)},l(!0),this[b](),()=>{this[b]=S,u(),y.forEach(Se)}}}function we(t,e,s){typeof e=="function"&&(e={derive:e});const{derive:n,...i}=e,r=ye(n)?class extends Y{constructor(o,u){super(o,u),this[I]=!0}derive(o){this.set(n(o)),this[I]=!1}}:class extends Y{derive(o){const u=l=>this.set(l);return u.set=u,u.update=l=>this.update(l),n(o,u)}};return w(A(new r(t,s),{...i,onUse:void 0}))}const ue=t=>{const e=_;try{return _=ne,t()}finally{_=e}},xe=({unsubscribe:t})=>t(),_e=({resubscribe:t})=>t();class Ie extends W{#s=!1;#n=!1;#e=0;#t=new Map;#i=e=>ue(()=>this.#c(e));constructor(){super(void 0),this[I]=!0}#o(e){const s={versionIndex:this.#e,unsubscribe:S,resubscribe:S,pending:!1,usedValueIndex:0,value:void 0,valueIndex:0},n=i=>{s.value=i,s.valueIndex++,s.pending=!1,!this.#n&&!this.#r()&&k(()=>this.#u())};return n.next=n,n.pause=()=>{s.pending=!0,this.pauseSubscribers()},n.resume=()=>{s.pending=!1,!this.#n&&!this.#r()&&k(()=>this.#u())},s.resubscribe=()=>{s.unsubscribe=e(n),n[M]=s.unsubscribe},s.resubscribe(),s}#c(e){let s=this.#t.get(e);return s?(s.versionIndex=this.#e,s.unsubscribe[b]?.()):(s=this.#o(V(e)),this.#t.set(e,s)),s.usedValueIndex=s.valueIndex,s.value}#u(e=!1){this.#s=!0,this.#n=!0;try{if(this.#e>0&&(e&&this.#t.forEach(_e),!this.#a())){this.resumeSubscribers();return}this.#e++;const s=this.#e,n=_;let i;try{_=this.#i,i=this.compute()}finally{_=n}this.set(i),this[I]=!1;for(const[r,o]of this.#t)o.versionIndex!==s&&(this.#t.delete(r),o.unsubscribe())}finally{this.#n=!1,this.#s=!1}}#r(){for(const[,{pending:e}]of this.#t)if(e)return!0;return!1}#a(){for(const[,{valueIndex:e,usedValueIndex:s}]of this.#t)if(e!=s)return!0;return!1}resumeSubscribers(){this.#r()||super.resumeSubscribers()}[b](){if(this.#s)throw new Error("recursive computed");let e=0;for(;this.#r();){P(++e),this.#n=!0;try{for(const[,{pending:s,unsubscribe:n}]of this.#t)s&&n[b]?.()}finally{this.#n=!1}if(this.#r())break;this.#u()}}onUse(){return this.#u(!0),this[b](),()=>this.#t.forEach(xe)}}function p(t,e={}){const s=class extends Ie{compute(){return t()}};return w(A(new s,{...e,onUse:void 0}))}const Ue=()=>{},ke=t=>t,Z=Symbol();function Ee(t){return function(e){k(()=>{for(const[s,n]of Object.entries(e??{}))t[`${s}$`]?.set(n)})}}function Re(t,e=re(void 0),s={},n=oe(void 0)){const{normalizeValue:i=ke,equal:r=Object.is}=s,o=()=>t,u=(f,a=o)=>{const c=f===void 0?void 0:i(f);return c===Z?(console.error("Not using invalid value",f),a()):c===void 0?a():c},l=p(()=>u(e()),{equal:r}),y=p(()=>u(n(),l),{equal:r});return pe(y,f=>{if(f!==void 0){const a=i(f);if(a===Z){console.error("Not setting invalid value",f);return}f=a}n.set(f)})}const Q=t=>!!(t&&typeof t=="function"&&"subscribe"in t),$e=t=>Q(t)?t:re(t),qe=t=>Q(t)?t:oe(t),Ce=(t,e)=>{const s={};if(e){const n=Q(e);for(const i of t)s[i]=n?p(()=>e()[i]):$e(e[i])}return s},Ve=(t,e,s)=>{const n={},i=Object.keys(t),r=Ce(i,e?.config),o=e?.props;for(const u of i){const l=o?.[u];n[`${u}$`]=Re(t[u],r[u],s?.[u],qe(l))}return n},Ae=(t,e,s)=>{const n=Ve(t,e,s);return[n,Ee(n)]},He=t=>{const e=[],s=[],n={};for(const i of Object.keys(t))if(i.endsWith("$")){const r=t[i];e.push(i.substring(0,i.length-1)),s.push(r),n[i]=w(r)}return{stores:n,state$:p(()=>{const i=s.map(x),r={};return e.forEach((o,u)=>{r[o]=i[u]}),r})}},Le={elements:[],options:void 0},Oe=t=>{const[{elements$:e,options$:s},n]=Ae(Le,t),i=we([e,s],([r,o],u)=>{if(r.length){const l=new Map,y=new IntersectionObserver(f=>{for(const a of f){const{target:c,isIntersecting:d}=a;d?l.set(c,a):l.delete(c)}u(l)},o);for(const f of r)y.observe(f);return()=>{y.disconnect()}}return Ue},new Map);return{elements$:w(e),visibleElements$:w(i),patch:n}},ze=p(()=>{const t=x(E);if(!t.route.id)throw new Error("Page error");return t.route.id.split("/").length-2+Object.values(t.params).reduce((e,s)=>e+s.split("/").length-1,0)}),ce=p(()=>{const t=ze();return t?"../".repeat(t):"./"}),Ye=p(()=>new URL(ce(),window.location.href).href),Fe="https://amadeusitgroup.github.io/AgnosUI/latest/";p(()=>{const t=x(E).url.href,e=new URL(ce(),t).href;return t.replace(e,Fe)});const Ze=p(()=>x(E).params.framework??"angular"),je=/^\/docs\/\[framework\]\/components\/[^/]*\/([^/]*)/,et=p(()=>je.exec(x(E).route.id||"")?.[1]||"examples"),De=/\/docs\/[a-z]*\//,tt=p(()=>{const t=x(E),e=t.url.pathname.match(De);return e?t.url.pathname.substring(t.url.pathname.indexOf(e[0])+e[0].length):"/"}),Te=Oe(),Me=/\r/g;function st(t,e=""){return`AgnosUI - ${t}`+(e?` for ${e}`:"")}function nt(t){return t.replace(Me,"").split(`

`)}const Ne=/^\([^(]*\)[^=]*=>/,Pe=/^function/,We=/^Slot/;function it(t){return Ne.test(t)||Pe.test(t)?"function":We.test(t)?"slot":t}function rt(t){let e;function s(n){e=n}return he(()=>{Te.patch({elements:e?t(e):[]})}),s}export{Ze as a,it as b,p as c,w as d,Ke as e,k as f,st as g,we as h,ve as i,Ae as j,He as k,tt as l,Te as m,Ue as n,Xe as o,Ye as p,rt as q,re as r,et as s,nt as t,Be as u,ze as v,oe as w};
