var re=(t,e,s)=>{if(!e.has(t))throw TypeError("Cannot "+s)};var r=(t,e,s)=>(re(t,e,"read from private field"),s?s.call(t):e.get(t)),l=(t,e,s)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,s)},c=(t,e,s,n)=>(re(t,e,"write to private field"),n?n.call(t,s):e.set(t,s),s);var be=(t,e,s,n)=>({set _(i){c(t,e,i,s)},get _(){return r(t,e,n)}}),h=(t,e,s)=>(re(t,e,"access private method"),s);import{p as B}from"./stores.4b6c42c1.js";var pe;const se=typeof Symbol=="function"&&Symbol.observable||"@@observable",ae=Symbol(),k=()=>{},J=()=>{};J.unsubscribe=J;const oe=(t,e)=>{const s=t?t[e]:null;return typeof s=="function"?s.bind(t):k},we=t=>({next:typeof t=="function"?t.bind(null):oe(t,"next"),pause:oe(t,"pause"),resume:oe(t,"resume"),_value:void 0,_valueIndex:0,_paused:!1}),ge=function(){return this},le=t=>{if(!t)return J;if(t.unsubscribe===t)return t;const e=typeof t=="function"?()=>t():()=>t.unsubscribe();return e.unsubscribe=e,e},ce=new WeakSet,Ce=t=>{let e=t.subscribe;return ce.has(e)||(e=(...s)=>le(t.subscribe(...s)),ce.add(e)),e},ne=t=>{const e="subscribe"in t?t:t[se]();return Ce(e)},De=t=>{let e;return t(s=>e=s)(),e};function C(t,e){const s=ne(t),n=Object.assign(()=>D(n),e,{subscribe:s,[se]:ge});return n}const me=function(t){this.set(t($e(()=>D(this))))};function je(t,e){return C(t,typeof e=="function"?{set:e,update:me}:{...e,set:(e==null?void 0:e.set)??k,update:(e==null?void 0:e.update)??(e!=null&&e.set?me:k)})}const m=Symbol(),Ie=Symbol();let ue=!1;const Q=new Set,Ne=1e3,fe=t=>{if(t>Ne)throw new Error("reached maximum number of store changes in one shot")},G=t=>{const e=!ue;e&&(ue=!0);try{return t()}finally{if(e)try{const s=new Map;for(const n of Q){const i=s.get(n)??0;fe(i),s.set(n,i+1),Q.delete(n),n[Ie]()}}finally{Q.clear(),ue=!1}}},Ue=t=>De(ne(t));let F=Ue;const D=t=>F(t),ve=t=>({[t]:!0,[t-1]:!1,0:!1}),M=Symbol(),Ee=(t,e)=>Object.is(t,e)&&(!t||typeof t!="object")&&typeof t!="function";var y,L,w,_,R,z,N,Y,_e,Z,xe,E,H;class he{constructor(e){l(this,Y);l(this,Z);l(this,E);l(this,y,void 0);l(this,L,void 0);l(this,w,void 0);l(this,_,void 0);l(this,R,void 0);l(this,z,void 0);l(this,N,void 0);c(this,y,new Set),c(this,L,null),c(this,w,!1),c(this,_,1),c(this,z,ve(1)),c(this,N,new WeakMap),this[pe]=!1,c(this,R,e)}[(pe=M,Ie)](){const e=r(this,_);for(const s of[...r(this,y)]){if(r(this,w)||r(this,_)!==e)return;s._valueIndex!==0&&h(this,E,H).call(this,s)}}[m](){}equal(e,s){return!this.notEqual(e,s)}notEqual(e,s){return!Ee(e,s)}pauseSubscribers(){if(!r(this,w)){c(this,w,!0),Q.delete(this);for(const e of[...r(this,y)])e._valueIndex===0||e._paused||(e._paused=!0,e.pause())}}resumeSubscribers(){r(this,w)&&(c(this,w,!1),G(()=>{Q.add(this)}))}set(e){const s=this[M];if(s||!this.equal(r(this,R),e)){const n=r(this,_)+1;c(this,_,n),c(this,R,e),c(this,z,ve(n)),s&&delete r(this,z)[n-1],this.pauseSubscribers()}this.resumeSubscribers()}update(e){this.set(e(r(this,R)))}onUse(){}subscribe(e){const s=we(e),n=e==null?void 0:e[ae];if(n){const o=r(this,N).get(n);o&&(s._value=o._value,s._valueIndex=o._valueIndex)}r(this,y).add(s),G(()=>{r(this,y).size==1?h(this,Y,_e).call(this):this[m]()}),h(this,E,H).call(this,s);const i=()=>{const o=r(this,y).delete(s);s.next=k,s.pause=k,s.resume=k,o&&(r(this,N).set(i,s),r(this,y).size===0&&h(this,Z,xe).call(this))};return i[m]=()=>{this[m](),h(this,E,H).call(this,s)},i.unsubscribe=i,i}[se](){return this}}y=new WeakMap,L=new WeakMap,w=new WeakMap,_=new WeakMap,R=new WeakMap,z=new WeakMap,N=new WeakMap,Y=new WeakSet,_e=function(){c(this,L,le(this.onUse()))},Z=new WeakSet,xe=function(){const e=r(this,L);e&&(c(this,L,null),e())},E=new WeakSet,H=function(e){const s=r(this,z),n=r(this,_),i=r(this,R);let o=s[e._valueIndex];o==null&&(o=!!this.equal(e._value,i),s[e._valueIndex]=o),e._valueIndex=n,o?!r(this,w)&&e._paused&&(e._paused=!1,e.resume()):(e._value=i,e._paused=!1,e.next(i))};function We(t){const e=s=>(s!=null&&s[ae]||we(s).next(t),J);return ce.add(e),Object.assign(()=>t,{subscribe:e,[se]:ge})}class ke extends he{constructor(e){super(e)}set(e){super.set(e)}update(e){super.update(e)}}const ie=(t,e)=>{const{onUse:s,equal:n,notEqual:i}=e;return s&&(t.onUse=function(){const o=u=>this.set(u);return o.set=o,o.update=u=>this.update(u),s(o)}),n&&(t.equal=function(o,u){return n(o,u)}),i&&(t.notEqual=function(o,u){return i(o,u)}),t};function qe(t,e={}){return typeof e=="function"&&(e={onUse:e}),e.onUse?C(ie(new ke(t),e)):We(t)}function Re(t,e={}){typeof e=="function"&&(e={onUse:e});const s=ie(new ke(t),e);return C(s,{set:s.set.bind(s),update:s.update.bind(s)})}function Me(t){return t.length<=1}const Te=t=>t();var K,X,v;class Se extends he{constructor(s,n){super(n);l(this,K,void 0);l(this,X,void 0);l(this,v,0);const i=Array.isArray(s);c(this,K,i),c(this,X,(i?[...s]:[s]).map(ne))}resumeSubscribers(){r(this,v)||super.resumeSubscribers()}onUse(){let s=!1,n=0;const i=r(this,K),o=r(this,X),u=new Array(o.length);let a=null;const b=()=>{const f=a;f&&(a=null,f())},I=(f=!1)=>{f&&(s=!0),s&&!r(this,v)&&(n&&(n=0,b(),a=le(this.derive(i?u:u[0]))),this.resumeSubscribers())},d=o.map((f,U)=>{const q=Fe=>{u[U]=Fe,n|=1<<U,c(this,v,r(this,v)&~(1<<U)),I()};return q.next=q,q.pause=()=>{c(this,v,r(this,v)|1<<U),this.pauseSubscribers()},q.resume=()=>{c(this,v,r(this,v)&~(1<<U)),I()},f(q)}),S=(f,U)=>{var q;r(this,v)&1<<U&&((q=f[m])==null||q.call(f))};return this[m]=()=>{let f=0;for(;r(this,v)&&(fe(++f),s=!1,d.forEach(S),!r(this,v));)I(!0)},I(!0),this[m](),()=>{this[m]=k,b(),d.forEach(Te)}}}K=new WeakMap,X=new WeakMap,v=new WeakMap;function Qe(t,e,s){typeof e=="function"&&(e={derive:e});const{derive:n,...i}=e,o=Me(n)?class extends Se{constructor(u,a){super(u,a),this[M]=!0}derive(u){this.set(n(u)),this[M]=!1}}:class extends Se{derive(u){const a=b=>this.set(b);return a.set=a,a.update=b=>this.update(b),n(u,a)}};return C(ie(new o(t,s),{...i,onUse:void 0}))}const $e=t=>{const e=F;try{return F=Ue,t()}finally{F=e}},Ge=({unsubscribe:t})=>t(),Ke=({resubscribe:t})=>t();var W,x,$,p,O,P,Ve,ee,Le,A,T,V,j,te,ze;class Xe extends he{constructor(){super(void 0);l(this,P);l(this,ee);l(this,A);l(this,V);l(this,te);l(this,W,!1);l(this,x,!1);l(this,$,0);l(this,p,new Map);l(this,O,s=>$e(()=>h(this,ee,Le).call(this,s)));this[M]=!0}resumeSubscribers(){h(this,V,j).call(this)||super.resumeSubscribers()}[m](){var n;if(r(this,W))throw new Error("recursive computed");let s=0;for(;h(this,V,j).call(this);){fe(++s),c(this,x,!0);try{for(const[,{pending:i,unsubscribe:o}]of r(this,p))i&&((n=o[m])==null||n.call(o))}finally{c(this,x,!1)}if(h(this,V,j).call(this))break;h(this,A,T).call(this)}}onUse(){return h(this,A,T).call(this,!0),this[m](),()=>r(this,p).forEach(Ge)}}W=new WeakMap,x=new WeakMap,$=new WeakMap,p=new WeakMap,O=new WeakMap,P=new WeakSet,Ve=function(s){const n={versionIndex:r(this,$),unsubscribe:k,resubscribe:k,pending:!1,usedValueIndex:0,value:void 0,valueIndex:0},i=o=>{n.value=o,n.valueIndex++,n.pending=!1,!r(this,x)&&!h(this,V,j).call(this)&&G(()=>h(this,A,T).call(this))};return i.next=i,i.pause=()=>{n.pending=!0,this.pauseSubscribers()},i.resume=()=>{n.pending=!1,!r(this,x)&&!h(this,V,j).call(this)&&G(()=>h(this,A,T).call(this))},n.resubscribe=()=>{n.unsubscribe=s(i),i[ae]=n.unsubscribe},n.resubscribe(),n},ee=new WeakSet,Le=function(s){var i,o;let n=r(this,p).get(s);return n?(n.versionIndex=r(this,$),(o=(i=n.unsubscribe)[m])==null||o.call(i)):(n=h(this,P,Ve).call(this,ne(s)),r(this,p).set(s,n)),n.usedValueIndex=n.valueIndex,n.value},A=new WeakSet,T=function(s=!1){c(this,W,!0),c(this,x,!0);try{if(r(this,$)>0&&(s&&r(this,p).forEach(Ke),!h(this,te,ze).call(this))){this.resumeSubscribers();return}be(this,$)._++;const n=r(this,$),i=F;let o;try{F=r(this,O),o=this.compute()}finally{F=i}this.set(o),this[M]=!1;for(const[u,a]of r(this,p))a.versionIndex!==n&&(r(this,p).delete(u),a.unsubscribe())}finally{c(this,x,!1),c(this,W,!1)}},V=new WeakSet,j=function(){for(const[,{pending:s}]of r(this,p))if(s)return!0;return!1},te=new WeakSet,ze=function(){for(const[,{valueIndex:s,usedValueIndex:n}]of r(this,p))if(s!=n)return!0;return!1};function g(t,e={}){const s=class extends Xe{compute(){return t()}};return C(ie(new s,{...e,onUse:void 0}))}const ye=Symbol(),Be=()=>{},He=t=>t;function Je(t){return function(e){G(()=>{var s;for(const[n,i]of Object.entries(e??{}))(s=t[`${n}$`])==null||s.set(i)})}}function Ye(t,e=qe(void 0),s={},n=Re(void 0)){const{normalizeValue:i=He,equal:o=Object.is}=s,u=()=>t,a=(d,S=u)=>{const f=d===void 0?void 0:i(d);return f===ye?(console.error("Not using invalid value",d),S()):f===void 0?S():f},b=g(()=>a(e()),{equal:o}),I=g(()=>a(n(),b),{equal:o});return je(I,d=>{if(d!==void 0){const S=i(d);if(S===ye){console.error("Not setting invalid value",d);return}d=S}n.set(d)})}const de=t=>!!(t&&typeof t=="function"&&"subscribe"in t),Ze=t=>de(t)?t:qe(t),Oe=t=>de(t)?t:Re(t),Pe=(t,e)=>{const s={};if(e){const n=de(e);for(const i of t)s[i]=n?g(()=>e()[i]):Ze(e[i])}return s},et=(t,e,s)=>{const n={},i=Object.keys(t),o=Pe(i,e==null?void 0:e.config),u=e==null?void 0:e.props;for(const a of i){const b=u==null?void 0:u[a];n[`${a}$`]=Ye(t[a],o[a],s==null?void 0:s[a],Oe(b))}return n},tt=(t,e,s)=>{const n=et(t,e,s);return[n,Je(n)]},st={elements:[],options:void 0},nt=t=>{const[{elements$:e,options$:s},n]=tt(st,t),i=Qe([e,s],([o,u],a)=>{if(o.length){const b=new Map,I=new IntersectionObserver(d=>{for(const S of d){const{target:f,isIntersecting:U}=S;U?b.set(f,S):b.delete(f)}a(b)},u);for(const d of o)I.observe(d);return()=>{I.disconnect()}}return Be},new Map);return{elements$:C(e),visibleElements$:C(i),patch:n}},it=g(()=>{const t=D(B);if(!t.route.id)throw new Error("Page error");return t.route.id.split("/").length-2}),Ae=g(()=>{const t=it();return t?"../".repeat(t):"./"}),lt=g(()=>new URL(Ae(),window.location.href).href),rt="https://amadeusitgroup.github.io/AgnosUI/latest/";g(()=>{const t=D(B).url.href,e=new URL(Ae(),t).href;return t.replace(e,rt)});const ft=g(()=>D(B).params.framework??"angular"),ot=/^\/\[framework\]\/components\/[^/]*\/([^/]*)/,ht=g(()=>{const t=ot.exec(D(B).route.id||"");return(t==null?void 0:t[1])||"examples"}),ut=/^\/\[framework\]\//,dt=g(()=>(D(B).route.id||"").replace(ut,"")),bt=nt();export{ht as a,qe as b,C as c,g as d,dt as f,bt as i,Be as n,lt as p,it as r,ft as s,Re as w};
