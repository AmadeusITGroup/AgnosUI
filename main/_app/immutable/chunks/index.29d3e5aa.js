import{_ as n}from"./preload-helper.a4192956.js";const V=500,S=20,$=300,k="https://stackblitz.com",T=["angular-cli","create-react-app","html","javascript","node","polymer","typescript","vue"],N=["project","search","ports","settings"],M=["light","dark"],F=["editor","preview"],O={clickToLoad:e=>m("ctl",e),devToolsHeight:e=>y("devtoolsheight",e),forceEmbedLayout:e=>m("embed",e),hideDevTools:e=>m("hidedevtools",e),hideExplorer:e=>m("hideExplorer",e),hideNavigation:e=>m("hideNavigation",e),openFile:e=>D("file",e),showSidebar:e=>C("showSidebar",e),sidebarView:e=>g("sidebarView",e,N),startScript:e=>D("startScript",e),terminalHeight:e=>y("terminalHeight",e),theme:e=>g("theme",e,M),view:e=>g("view",e,F),zenMode:e=>m("zenMode",e)};function j(e={}){const r=Object.entries(e).map(([t,i])=>i!=null&&O.hasOwnProperty(t)?O[t](i):"").filter(Boolean);return r.length?`?${r.join("&")}`:""}function m(e,r){return r===!0?`${e}=1`:""}function C(e,r){return typeof r=="boolean"?`${e}=${r?"1":"0"}`:""}function y(e,r){if(typeof r=="number"&&!Number.isNaN(r)){const t=Math.min(100,Math.max(0,r));return`${e}=${encodeURIComponent(Math.round(t))}`}return""}function g(e,r="",t=[]){return t.includes(r)?`${e}=${encodeURIComponent(r)}`:""}function D(e,r){return(Array.isArray(r)?r:[r]).filter(i=>typeof i=="string"&&i.trim()!=="").map(i=>`${e}=${encodeURIComponent(i)}`).join("&")}function A(){return Math.random().toString(36).slice(2,6)+Math.random().toString(36).slice(2,6)}function E(e,r){return`${R(r)}${e}${j(r)}`}function b(e,r){const t={forceEmbedLayout:!0};return r&&typeof r=="object"&&Object.assign(t,r),`${R(t)}${e}${j(t)}`}function R(e={}){return(typeof e.origin=="string"?e.origin:k).replace(/\/$/,"")}function v(e,r,t){if(!r||!e||!e.parentNode)throw new Error("Invalid Element");e.id&&(r.id=e.id),e.className&&(r.className=e.className),U(r,t),e.replaceWith(r)}function P(e){if(typeof e=="string"){const r=document.getElementById(e);if(!r)throw new Error(`Could not find element with id '${e}'`);return r}else if(e instanceof HTMLElement)return e;throw new Error(`Invalid element: ${e}`)}function I(e){return e&&e.newWindow===!1?"_self":"_blank"}function U(e,r={}){const t=Object.hasOwnProperty.call(r,"height")?`${r.height}`:`${$}`,i=Object.hasOwnProperty.call(r,"width")?`${r.width}`:void 0;e.setAttribute("height",t),i?e.setAttribute("width",i):e.setAttribute("style","width:100%;")}class x{constructor(r){this.pending={},this.port=r,this.port.onmessage=this.messageListener.bind(this)}request({type:r,payload:t}){return new Promise((i,o)=>{const a=A();this.pending[a]={resolve:i,reject:o},this.port.postMessage({type:r,payload:{...t,__reqid:a}})})}messageListener(r){var u;if(typeof((u=r.data.payload)==null?void 0:u.__reqid)!="string")return;const{type:t,payload:i}=r.data,{__reqid:o,__success:a,__error:s}=i;this.pending[o]&&(a?this.pending[o].resolve(this.cleanResult(i)):this.pending[o].reject(s?`${t}: ${s}`:t),delete this.pending[o])}cleanResult(r){const t={...r};return delete t.__reqid,delete t.__success,delete t.__error,Object.keys(t).length?t:null}}class q{constructor(r,t){this.editor={openFile:i=>this._rdc.request({type:"SDK_OPEN_FILE",payload:{path:i}}),setCurrentFile:i=>this._rdc.request({type:"SDK_SET_CURRENT_FILE",payload:{path:i}}),setTheme:i=>this._rdc.request({type:"SDK_SET_UI_THEME",payload:{theme:i}}),setView:i=>this._rdc.request({type:"SDK_SET_UI_VIEW",payload:{view:i}}),showSidebar:(i=!0)=>this._rdc.request({type:"SDK_TOGGLE_SIDEBAR",payload:{visible:i}})},this.preview={origin:"",getUrl:()=>this._rdc.request({type:"SDK_GET_PREVIEW_URL",payload:{}}).then(i=>(i==null?void 0:i.url)??null),setUrl:(i="/")=>{if(typeof i!="string"||!i.startsWith("/"))throw new Error(`Invalid argument: expected a path starting with '/', got '${i}'`);return this._rdc.request({type:"SDK_SET_PREVIEW_URL",payload:{path:i}})}},this._rdc=new x(r),Object.defineProperty(this.preview,"origin",{value:typeof t.previewOrigin=="string"?t.previewOrigin:null,writable:!1})}applyFsDiff(r){const t=i=>i!==null&&typeof i=="object";if(!t(r)||!t(r.create))throw new Error("Invalid diff object: expected diff.create to be an object.");if(!Array.isArray(r.destroy))throw new Error("Invalid diff object: expected diff.destroy to be an array.");return this._rdc.request({type:"SDK_APPLY_FS_DIFF",payload:r})}getDependencies(){return this._rdc.request({type:"SDK_GET_DEPS_SNAPSHOT",payload:{}})}getFsSnapshot(){return this._rdc.request({type:"SDK_GET_FS_SNAPSHOT",payload:{}})}}const p=[];class W{constructor(r){this.id=A(),this.element=r,this.pending=new Promise((t,i)=>{const o=({data:l,ports:c})=>{(l==null?void 0:l.action)==="SDK_INIT_SUCCESS"&&l.id===this.id&&(this.vm=new q(c[0],l.payload),t(this.vm),s())},a=()=>{var l;(l=this.element.contentWindow)==null||l.postMessage({action:"SDK_INIT",id:this.id},"*")};function s(){window.clearInterval(d),window.removeEventListener("message",o)}window.addEventListener("message",o),a();let u=0;const d=window.setInterval(()=>{if(this.vm){s();return}if(u>=S){s(),i("Timeout: Unable to establish a connection with the StackBlitz VM"),p.forEach((l,c)=>{l.id===this.id&&p.splice(c,1)});return}u++,a()},V)}),p.push(this)}}const H=e=>{const r=e instanceof Element?"element":"id";return p.find(t=>t[r]===e)??null};function K(e,r){const t=document.createElement("input");return t.type="hidden",t.name=e,t.value=r,t}function B(e){return e.replace(/\[/g,"%5B").replace(/\]/g,"%5D")}function L({template:e,title:r,description:t,dependencies:i,files:o,settings:a}){if(!T.includes(e)){const l=T.map(c=>`'${c}'`).join(", ");console.warn(`Unsupported project.template: must be one of ${l}`)}const s=[],u=(l,c,w="")=>{s.push(K(l,typeof c=="string"?c:w))};u("project[title]",r),typeof t=="string"&&t.length>0&&u("project[description]",t),u("project[template]",e,"javascript"),i&&(e==="node"?console.warn("Invalid project.dependencies: dependencies must be provided as a 'package.json' file when using the 'node' template."):u("project[dependencies]",JSON.stringify(i))),a&&u("project[settings]",JSON.stringify(a)),Object.entries(o).forEach(([l,c])=>{u(`project[files][${B(l)}]`,c)});const d=document.createElement("form");return d.method="POST",d.setAttribute("style","display:none!important;"),d.append(...s),d}function J(e,r){const t=L(e);return t.action=b("/run",r),t.id="sb_run",`<!doctype html>
<html>
<head><title></title></head>
<body>
  ${t.outerHTML}
  <script>document.getElementById('${t.id}').submit();<\/script>
</body>
</html>`}function G(e,r){const t=L(e);t.action=E("/run",r),t.target=I(r),document.body.appendChild(t),t.submit(),document.body.removeChild(t)}function f(e){return e!=null&&e.contentWindow?(H(e)??new W(e)).pending:Promise.reject("Provided element is not an iframe.")}function z(e,r){G(e,r)}function X(e,r){const t=E(`/edit/${e}`,r),i=I(r);window.open(t,i)}function Y(e,r){const t=E(`/github/${e}`,r),i=I(r);window.open(t,i)}function Q(e,r,t){var s;const i=P(e),o=J(r,t),a=document.createElement("iframe");return v(i,a,t),(s=a.contentDocument)==null||s.write(o),f(a)}function Z(e,r,t){const i=P(e),o=document.createElement("iframe");return o.src=b(`/edit/${r}`,t),v(i,o,t),f(o)}function tt(e,r,t){const i=P(e),o=document.createElement("iframe");return o.src=b(`/github/${r}`,t),v(i,o,t),f(o)}const et={connect:f,embedGithubProject:tt,embedProject:Q,embedProjectId:Z,openGithubProject:Y,openProject:z,openProjectId:X},_=(e,r="",t)=>async i=>{await Promise.all(Object.keys(e).map(async o=>{const a=r+(t&&o.startsWith(t)?o.substring(t.length):o);i.files[a]=await e[o]()}))},h={angular:[_(Object.assign({"./angular/angular.json":()=>n(()=>import("./angular.92dea5da.js"),[],import.meta.url).then(e=>e.default),"./angular/index.html":()=>n(()=>import("./index.ba4af4d9.js"),[],import.meta.url).then(e=>e.default),"./angular/package.json":()=>n(()=>import("./package.896d82da.js"),[],import.meta.url).then(e=>e.default),"./angular/src/polyfills.ts":()=>n(()=>import("./polyfills.ca93877f.js"),[],import.meta.url).then(e=>e.default),"./angular/tsconfig.json":()=>n(()=>import("./tsconfig.37d3f7d2.js"),[],import.meta.url).then(e=>e.default)}),"","./angular/"),async(e,r)=>{e.files["src/main.ts"]=`import {bootstrapApplication} from '@angular/platform-browser';
import MainComponent from './${r.files.angular.entryPoint.replace(/\.ts$/,"")}';
bootstrapApplication(MainComponent).catch((err) => console.error(err));`}],react:[_(Object.assign({"./react/index.html":()=>n(()=>import("./index.9a9b4a9b.js"),[],import.meta.url).then(e=>e.default),"./react/package.json":()=>n(()=>import("./package.ad5f3f46.js"),[],import.meta.url).then(e=>e.default),"./react/src/vite-env.d.ts":()=>n(()=>import("./vite-env.d.7838e369.js"),[],import.meta.url).then(e=>e.default),"./react/tsconfig.json":()=>n(()=>import("./tsconfig.f7d9505e.js"),[],import.meta.url).then(e=>e.default),"./react/vite.config.ts":()=>n(()=>import("./vite.config.9d6850ed.js"),[],import.meta.url).then(e=>e.default)}),"","./react/"),async(e,r)=>{e.files["src/main.tsx"]=`import {createRoot} from "react-dom/client";
import App from ${JSON.stringify(`./${r.files.react.entryPoint.replace(/\.tsx?$/,"")}`)};
const rootElement = document.getElementById('root');
const root = createRoot(rootElement);
root.render(<App />)`}],svelte:[_(Object.assign({"./svelte/index.html":()=>n(()=>import("./index.9d3e169c.js"),[],import.meta.url).then(e=>e.default),"./svelte/package.json":()=>n(()=>import("./package.6284d38b.js"),[],import.meta.url).then(e=>e.default),"./svelte/src/vite-env.d.ts":()=>n(()=>import("./vite-env.d.2f957e98.js"),[],import.meta.url).then(e=>e.default),"./svelte/svelte.config.js":()=>n(()=>import("./svelte.config.1307a686.js"),[],import.meta.url).then(e=>e.default),"./svelte/tsconfig.json":()=>n(()=>import("./tsconfig.aa2595b6.js"),[],import.meta.url).then(e=>e.default),"./svelte/vite.config.ts":()=>n(()=>import("./vite.config.17a73b3a.js"),[],import.meta.url).then(e=>e.default)}),"","./svelte/"),async(e,r)=>{e.files["src/main.ts"]=`import App from ${JSON.stringify(`./${r.files.svelte.entryPoint}`)};
const app = new App({target: document.getElementById('root')});
export default app;`,e.template="node"}]};{const e=async({files:t})=>{const i=JSON.parse(t["package.json"]);for(const o of Object.keys(t))if(o.startsWith("packages/")&&o.endsWith("/package.json")){const a=JSON.parse(t[o]);i.devDependencies[a.name]=`file:./packages/${a.name}`;for(const s of Object.keys(a.dependencies))t[`packages/${s}/package.json`]||(i.devDependencies[s]=a.dependencies[s])}t["package.json"]=JSON.stringify(i,null,"	")},r=_(Object.assign({"../../../../core/dist/lib/index.d.ts":()=>n(()=>import("./index.d.333c4fd0.js"),[],import.meta.url).then(t=>t.default),"../../../../core/dist/lib/index.mjs":()=>n(()=>import("./index.7fb081f3.js"),[],import.meta.url).then(t=>t.default),"../../../../core/package.json":()=>n(()=>import("./package.d71b57ab.js"),[],import.meta.url).then(t=>t.default)}),"packages/@agnos-ui/core/","../../../../core/");h.angular.push(r,_(Object.assign({"../../../../angular/dist/lib/README.md":()=>n(()=>import("./README.6340ebac.js"),[],import.meta.url).then(t=>t.default),"../../../../angular/dist/lib/esm2022/agnos-ui-angular.mjs":()=>n(()=>import("./agnos-ui-angular.011e2c28.js"),[],import.meta.url).then(t=>t.default),"../../../../angular/dist/lib/esm2022/lib/agnos-ui-angular.module.mjs":()=>n(()=>import("./agnos-ui-angular.module.0c7a1087.js"),[],import.meta.url).then(t=>t.default),"../../../../angular/dist/lib/esm2022/lib/alert/alert.component.mjs":()=>n(()=>import("./alert.component.7ea7ff7f.js"),[],import.meta.url).then(t=>t.default),"../../../../angular/dist/lib/esm2022/lib/modal/modal.component.mjs":()=>n(()=>import("./modal.component.0ed2d355.js"),[],import.meta.url).then(t=>t.default),"../../../../angular/dist/lib/esm2022/lib/modal/modal.service.mjs":()=>n(()=>import("./modal.service.e902fc32.js"),[],import.meta.url).then(t=>t.default),"../../../../angular/dist/lib/esm2022/lib/pagination/pagination.component.mjs":()=>n(()=>import("./pagination.component.ef48a538.js"),[],import.meta.url).then(t=>t.default),"../../../../angular/dist/lib/esm2022/lib/rating/rating.component.mjs":()=>n(()=>import("./rating.component.d8f6f1bd.js"),[],import.meta.url).then(t=>t.default),"../../../../angular/dist/lib/esm2022/lib/select/select.component.mjs":()=>n(()=>import("./select.component.052bde35.js"),[],import.meta.url).then(t=>t.default),"../../../../angular/dist/lib/esm2022/lib/slot.directive.mjs":()=>n(()=>import("./slot.directive.df2570e2.js"),[],import.meta.url).then(t=>t.default),"../../../../angular/dist/lib/esm2022/lib/slotDefault.directive.mjs":()=>n(()=>import("./slotDefault.directive.a00671c0.js"),[],import.meta.url).then(t=>t.default),"../../../../angular/dist/lib/esm2022/lib/transition/use.directive.mjs":()=>n(()=>import("./use.directive.e1367fc6.js"),[],import.meta.url).then(t=>t.default),"../../../../angular/dist/lib/esm2022/lib/utils.mjs":()=>n(()=>import("./utils.cebcb0d8.js"),[],import.meta.url).then(t=>t.default),"../../../../angular/dist/lib/esm2022/public-api.mjs":()=>n(()=>import("./public-api.be7710d5.js"),[],import.meta.url).then(t=>t.default),"../../../../angular/dist/lib/fesm2022/agnos-ui-angular.mjs":()=>n(()=>import("./agnos-ui-angular.25abf530.js"),[],import.meta.url).then(t=>t.default),"../../../../angular/dist/lib/index.d.ts":()=>n(()=>import("./index.d.86b79f99.js"),[],import.meta.url).then(t=>t.default),"../../../../angular/dist/lib/lib/agnos-ui-angular.module.d.ts":()=>n(()=>import("./agnos-ui-angular.module.d.5c7fd4e4.js"),[],import.meta.url).then(t=>t.default),"../../../../angular/dist/lib/lib/alert/alert.component.d.ts":()=>n(()=>import("./alert.component.d.15a342a8.js"),[],import.meta.url).then(t=>t.default),"../../../../angular/dist/lib/lib/modal/modal.component.d.ts":()=>n(()=>import("./modal.component.d.be04ab88.js"),[],import.meta.url).then(t=>t.default),"../../../../angular/dist/lib/lib/modal/modal.service.d.ts":()=>n(()=>import("./modal.service.d.e6673de1.js"),[],import.meta.url).then(t=>t.default),"../../../../angular/dist/lib/lib/pagination/pagination.component.d.ts":()=>n(()=>import("./pagination.component.d.b6ea633c.js"),[],import.meta.url).then(t=>t.default),"../../../../angular/dist/lib/lib/rating/rating.component.d.ts":()=>n(()=>import("./rating.component.d.88a97fc3.js"),[],import.meta.url).then(t=>t.default),"../../../../angular/dist/lib/lib/select/select.component.d.ts":()=>n(()=>import("./select.component.d.5ca0e49d.js"),[],import.meta.url).then(t=>t.default),"../../../../angular/dist/lib/lib/slot.directive.d.ts":()=>n(()=>import("./slot.directive.d.0161fb5f.js"),[],import.meta.url).then(t=>t.default),"../../../../angular/dist/lib/lib/slotDefault.directive.d.ts":()=>n(()=>import("./slotDefault.directive.d.cd78c962.js"),[],import.meta.url).then(t=>t.default),"../../../../angular/dist/lib/lib/transition/use.directive.d.ts":()=>n(()=>import("./use.directive.d.ee7872d1.js"),[],import.meta.url).then(t=>t.default),"../../../../angular/dist/lib/lib/utils.d.ts":()=>n(()=>import("./utils.d.f93bdbaf.js"),[],import.meta.url).then(t=>t.default),"../../../../angular/dist/lib/package.json":()=>n(()=>import("./package.a54d4bf3.js"),[],import.meta.url).then(t=>t.default),"../../../../angular/dist/lib/public-api.d.ts":()=>n(()=>import("./public-api.d.298ca250.js"),[],import.meta.url).then(t=>t.default)}),"packages/@agnos-ui/angular/","../../../../angular/dist/lib/"),e),h.react.push(r,_(Object.assign({"../../../../react/dist/lib/index.d.ts":()=>n(()=>import("./index.d.a1c76610.js"),[],import.meta.url).then(t=>t.default),"../../../../react/dist/lib/index.js":()=>n(()=>import("./index.c1dfcdee.js"),[],import.meta.url).then(t=>t.default),"../../../../react/dist/lib/index.mjs":()=>n(()=>import("./index.f4dcfb12.js"),[],import.meta.url).then(t=>t.default),"../../../../react/package.json":()=>n(()=>import("./package.a1ea1acd.js"),[],import.meta.url).then(t=>t.default)}),"packages/@agnos-ui/react/","../../../../react/"),e),h.svelte.push(r,_(Object.assign({"../../../../svelte/dist/lib/index.d.ts":()=>n(()=>import("./index.d.e11101b6.js"),[],import.meta.url).then(t=>t.default),"../../../../svelte/dist/lib/index.js":()=>n(()=>import("./index.a896f72e.js"),[],import.meta.url).then(t=>t.default),"../../../../svelte/dist/lib/style.css":()=>n(()=>import("./style.808d0faf.js"),[],import.meta.url).then(t=>t.default),"../../../../svelte/package.json":()=>n(()=>import("./package.2edeb4db.js"),[],import.meta.url).then(t=>t.default)}),"packages/@agnos-ui/svelte/","../../../../svelte/"),e)}const it=async(e,r)=>{const t={title:`AgnosUI ${r} demo - ${e.componentName} - ${e.sampleName}`,files:{},template:"node"},i=e.files[r],{entryPoint:o,files:a}=i,s=[_(a,"src/"),...h[r]];for(const d of s)await d(t,e,r);const u=[o,...Object.keys(a).filter(d=>d!=o)].map(d=>`src/${d}`).join(",");et.openProject(t,{newWindow:!0,openFile:u})};export{it as openInStackblitz};
