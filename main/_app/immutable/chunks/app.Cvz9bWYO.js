import{a as O,t as E}from"./index.SN7u1Jvz.js";import{J as F,z as U}from"./scheduler.DPIVRzB8.js";import{n as $,e as W,h as z,r as R,i as A,g as T,j as h,c as S,k as V}from"./stores.CcgkzB9y.js";function oe(e){return e?.length!==void 0?e:Array.from(e)}function ie(e,t){O(e,1,1,()=>{t.delete(e.key)})}function ae(e,t,s,n,r,a,i,D,_,L,g,M){let l=e.length,f=a.length,d=l;const b={};for(;d--;)b[e[d].key]=d;const p=[],v=new Map,y=new Map,x=[];for(d=f;d--;){const o=M(r,a,d),c=s(o);let u=i.get(c);u?n&&x.push(()=>u.p(o,t)):(u=L(c,o),u.c()),v.set(c,p[d]=u),c in b&&y.set(c,Math.abs(d-b[c]))}const j=new Set,k=new Set;function w(o){E(o,1),o.m(D,g),i.set(o.key,o),g=o.first,f--}for(;l&&f;){const o=p[f-1],c=e[l-1],u=o.key,m=c.key;o===c?(g=o.first,l--,f--):v.has(m)?!i.has(u)||j.has(u)?w(o):k.has(m)?l--:y.get(u)>y.get(m)?(k.add(u),w(o)):(j.add(m),l--):(_(c,i),l--)}for(;l--;){const o=e[l];v.has(o.key)||_(o,i)}for(;f;)w(p[f-1]);return F(x),p}const C={status:"pending"},I=e=>{const t=typeof e;return t==="object"&&e!==null||t==="function"?typeof e.then=="function":!1},J=e=>{const t=T(C);return Promise.resolve(e).then(s=>t.set({status:"fulfilled",value:s}),s=>t.set({status:"rejected",reason:s})),h(t)},P=new WeakMap,B=e=>{if(!I(e))return R({status:"fulfilled",value:e});let t=P.get(e);return t||(t=J(e),P.set(e,t)),t},G=(e,t)=>Object.is(e,t)||e.status===t.status&&(e.status!=="fulfilled"||A(e.value,t.value))&&(e.status!=="rejected"||A(e.reason,t.reason)),H=e=>W(()=>B(e())(),{equal:G}),K=(e,t,s)=>z(e,{derive:(n,r)=>{n.status==="fulfilled"&&r(n.value)},equal:s},t),ce=(e,t,s)=>K(H(e),t,s),ue=(e,t)=>{let s;const n=new Promise(i=>s=i);let r=()=>{e.removeEventListener(t,a),r=$};const a=i=>{i.target===e&&(s(i),r())};return e.addEventListener(t,a),{promise:n,unsubscribe(){r()}}},le=e=>{let t;return{promise:new Promise(s=>{t=setTimeout(()=>{t=void 0,s()},e)}),unsubscribe(){t&&(clearTimeout(t),t=void 0)}}},de=()=>{let e;return{promise:new Promise(s=>{e=s}),resolve:e}},N=(e,t)=>s=>{let n=!0,r;const a=t.subscribe(i=>{n?(n=!1,r=e(s,i)):r?.update?.(i)});return{destroy(){r?.destroy?.(),a()}}},Q=R(void 0),fe=e=>N(e,Q),pe=(e,t=!0)=>()=>{const s=e.subscribe($);return{destroy:async()=>{t&&await 0,s()}}},me=e=>(t,s)=>(e(s),{update:e}),q={equal:Object.is},X=()=>{const e=T([],q);return h(e,{register:t=>{let s=!1;return e.update(n=>[...n,t]),()=>{s||(s=!0,e.update(n=>{const r=n.indexOf(t);if(r>-1){const a=[...n];return a.splice(r,1),a}return n}))}}})},he=()=>{const e=X();return{elements$:h(e),directive:t=>({destroy:e.register(t)})}},ge=()=>{const e=T(null,q);return{element$:h(e),directive:t=>{let s=!1;return e.update(n=>n?(console.error("The directive cannot be used on multiple elements.",n,t),n):(s=!0,t)),s?{destroy(){e.update(n=>t===n?null:n)}}:void 0}}},be=(...e)=>(t,s)=>{const n=S(()=>e.map(r=>r(t,s)));return{update(r){S(()=>n.forEach(a=>a?.update?.(r)))},destroy(){S(()=>n.reverse().forEach(r=>r?.destroy?.()))}}},Y=/\r/g;function ve(e,t=""){return`AgnosUI - ${e}`+(t?` for ${t}`:"")}function ye(e){return e.replace(Y,"").split(`

`)}const Z=/^\([^(]*\)[^=]*=>/,ee=/^function/,te=/^Slot/;function we(e){return Z.test(e)||ee.test(e)?"function":te.test(e)?"slot":e}function Se(e){let t;function s(n){t=n}return U(()=>{V.patch({elements:t?e(t):[]})}),s}export{le as a,fe as b,ge as c,de as d,oe as e,pe as f,ve as g,me as h,ce as i,he as j,Se as k,be as m,we as n,ie as o,ue as p,X as r,ye as t,ae as u};
