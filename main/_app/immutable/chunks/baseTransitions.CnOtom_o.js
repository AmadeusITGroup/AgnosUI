import{I as Y,n as $,w as Z,d,e as F,f as H,g as T,a as nn,c as q}from"./stores.XgRSBjgC.js";import{c as en,p as L,m as tn,d as on,a as sn}from"./app.BSnTpaVp.js";function _(e){return e===!0||e===!1}function ln(e){return typeof e=="function"}function an(e){return typeof e=="string"}const rn=e=>l=>l===null||e(l),h=e=>l=>e(l)?l:Y,A={normalizeValue:h(_)},cn={normalizeValue:h(rn(_))},vn={normalizeValue:h(an)},b={normalizeValue:h(ln),equal:Object.is},U=new Promise($),un=async(e,l)=>{e.style.display=l==="show"?"":"none"},dn={animated:!0,animatedOnInit:!1,initDone:null,visible:!0,transition:un,onShown:$,onHidden:$,onVisibleChange:$},fn={animated:A,animatedOnInit:A,visible:A,transition:b,onShown:b,onHidden:b,onVisibleChange:b,initDone:cn},bn=e=>{const[{animated$:l,initDone$:w,visible$:f,transition$:j,onShown$:R,onHidden$:W,onVisibleChange$:k,animatedOnInit$:G},C]=Z(dn,e,fn),{element$:y,directive:J}=en(),I=d(()=>!!y()),p=F(k,[f],([n])=>n),c=H(null),V=d(()=>!!c()),z=()=>{let n;return c.update(t=>(t?.abort.abort(),n=t?.context,null)),n},K=(n,t,a,o)=>q(()=>{const m=new AbortController,s=m.signal,r=z()??{},{promise:u,resolve:S}=L(),v={abort:m,animated:t,visible:n,context:r,element:a,transitionFn:o,promise:u};return c.set(v),S((async()=>{var E;try{await o(a,n?"show":"hide",t,s,r)}finally{s.aborted?await U:(c.set(null),(E=(n?R:W)())==null||E())}})()),v}),M=d(()=>!V()&&p()&&I()),Q=d(()=>!V()&&!p()),O=d(()=>w()?l():G()),g=H(null);let x,N=f(),i=null;const P=T([p,y,O,g,j,c],([n,t,a,o,m,s])=>{const r=x!==t;x=t;const u=N!==n;if(N=n,t){w()==null&&w.set(!0);const S=o!=null&&s&&s.animated!=o;if(r||u||S){(u||o!=null)&&(i=null);const v=o??i?.animated??(r&&!n?!1:a);s=K(n,v,t,m),i?.resolve(s.promise),i=null}}else r&&(z(),s=null),(u||n&&i?.animated!==o)&&(i=n&&o!=null?{animated:o,...L()}:null);return i?.promise??s?.promise});let B={};const D=async(n=!f(),t=O())=>{const a={};B=a;try{await q(()=>{try{return g.set(t),f.set(n),P()}finally{g.set(null)}})}finally{B!==a&&await U}},X=tn(J,sn(C),on(P));return{...nn({visible$:p,element$:y,elementPresent$:I,transitioning$:V,shown$:M,hidden$:Q}),patch:C,directives:{directive:X},actions:{},api:{show:D.bind(null,!0),hide:D.bind(null,!1),toggle:D}}};export{vn as a,bn as c,A as t};
