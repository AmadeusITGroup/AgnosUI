import{a1 as Y,aw as Z,h as T,m as nn,av as tn,$ as en,F as on}from"./runtime.CoJv2S2D.js";import{g as sn}from"./entry.C5J_5E5V.js";import{I as rn,n as y,w as an,e as h,f as ln,g as k,h as cn,i as un,j as q}from"./stores.B3F_mf_Y.js";import{a as dn,p as M,m as fn,d as pn,f as mn,g as bn,h as U,j as vn}from"./logo-typescript.HB618bk9.js";function wn(n){Y(n,n.v+1)}function On(n){let t,r=en(0),i=0,c=on;function f(){return Z()?(T(r),nn(()=>{if(i===0){let u=!1;c=n.subscribe(p=>{t=p,u&&wn(r)}),u=!0}return i+=1,()=>{i-=1,tn().then(()=>{i===0&&c()})}}),t):sn(n)}return"set"in n?{get current(){return f()},set current(u){n.set(u)}}:{get current(){return f()}}}function W(n){return n===!0||n===!1}function hn(n){return typeof n=="function"}function yn(n){return typeof n=="string"}const $n=n=>t=>t===null||n(t),C=n=>t=>n(t)?t:rn,O={normalizeValue:C(W)},gn={normalizeValue:C($n(W))},xn={normalizeValue:C(yn)},D={normalizeValue:C(hn),equal:Object.is},R=new Promise(y),Sn=(n,t)=>{n.style.display=t==="show"?"":"none"},Vn={animated:!0,animatedOnInit:!1,initDone:null,visible:!0,transition:Sn,onShown:y,onHidden:y,onVisibleChange:y},Dn={animated:O,animatedOnInit:O,visible:O,transition:D,onShown:D,onHidden:D,onVisibleChange:D,initDone:gn},Bn=n=>{const[{animated$:t,initDone$:r,visible$:i,transition$:c,onShown$:f,onHidden$:u,onVisibleChange$:p,animatedOnInit$:$},b]=an(Vn,n,Dn),{element$:A,directive:G}=dn(),x=h(()=>!!A()),g=ln(p,[i],([e])=>e),v=k(null),E=h(()=>!!v()),B=()=>{let e;return v.update(o=>(o?.abort.abort(),e=o?.context,null)),e},J=(e,o,d,a)=>q(()=>{const S=new AbortController,l=S.signal,m=B()??{},{promise:w,resolve:z}=M(),V={abort:S,animated:o,visible:e,context:m,element:d,transitionFn:a,promise:w};return v.set(V),z((async()=>{var L;try{await a(d,e?"show":"hide",o,l,m)}finally{l.aborted?await R:(v.set(null),(L=(e?f:u)())==null||L())}})()),V}),K=h(()=>!E()&&g()&&x()),Q=h(()=>!E()&&!g()),H=h(()=>r()?t():$()),I=k(null);let N,_=i(),s=null;const j=cn([g,A,H,I,c,v],([e,o,d,a,S,l])=>{const m=N!==o;N=o;const w=_!==e;if(_=e,o){r()==null&&r.set(!0);const z=a!=null&&l&&l.animated!=a;if(m||w||z){(w||a!=null)&&(s=null);const V=a??s?.animated??(m&&!e?!1:d);l=J(e,V,o,S),s?.resolve(l.promise),s=null}}else m&&(B(),l=null),(w||e&&s?.animated!==a)&&(s=e&&a!=null?{animated:a,...M()}:null);return s?.promise??l?.promise});let F={};const P=async(e=!i(),o=H())=>{const d={};F=d;try{await q(()=>{try{return I.set(o),i.set(e),j()}finally{I.set(null)}})}finally{F!==d&&await R}},X=fn(G,mn(e=>{e&&b(e)}),pn(j));return{...un({visible$:g,element$:A,elementPresent$:x,transitioning$:E,shown$:K,hidden$:Q}),patch:b,directives:{directive:X},api:{show:P.bind(null,!0),hide:P.bind(null,!1),toggle:P}}};function Cn(n){return window.getComputedStyle(n).transitionProperty!=="none"}function An(n){const{transitionDelay:t,transitionDuration:r}=window.getComputedStyle(n),i=parseFloat(t),c=parseFloat(r);return(i+c)*1e3}const Hn=n=>async(t,r,i,c,f)=>{const u=n(t,r,i,f)??y;if(bn(t)&&i&&Cn(t)){const p=U(c,"abort"),$=U(t,"transitionend"),b=vn(An(t));await Promise.race([p.promise,$.promise,b.promise]),p.unsubscribe(),$.unsubscribe(),b.unsubscribe()}c.aborted||u()};export{Bn as a,xn as b,Hn as c,On as f,O as t};
