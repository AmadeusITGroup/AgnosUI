import{e as Y,u as Z,r as ee,W as se,aF as te}from"./COvVlgKq.js";function Pe(s,e,t){Y(()=>{var r=Z(()=>e(s,t?.())||{});if(t&&r?.update){var n=!1,i={};ee(()=>{var u=t();se(u),n&&te(i,u)&&(i=u,r.update(u))}),n=!0}if(r?.destroy)return()=>r.destroy()})}const re=(s,e)=>Object.is(s,e)&&(!s||typeof s!="object")&&typeof s!="function",q=[];let S=!1;const y=s=>{const e=!S;S=!0;let t=!0,r,n;try{r=s()}finally{if(e){for(;q.length>0;){const i=q.shift();try{i.notify()}catch(u){t&&(t=!1,n=u)}}S=!1}}if(t)return r;throw n},w=s=>{try{if(s.skipMarkDirty=!0,s.producer.updateValue(),s.producer.flags&16)throw new Error("assert failed: store still dirty after updating it")}finally{s.skipMarkDirty=!1}},l=()=>{},F=(s,e)=>{const t=s?s[e]:null;return typeof t=="function"?t.bind(s):l},x={next:l,pause:l,resume:l},ne=s=>({next:typeof s=="function"?s.bind(null):F(s,"next"),pause:F(s,"pause"),resume:F(s,"resume")});class ie{constructor(e,t){this.dirtyCount=1,this.subscriber=ne(t),this.link=e.registerConsumer(e.newLink(this)),this.notify(!0)}unsubscribe(){this.subscriber!==x&&(this.subscriber=x,this.link.producer.unregisterConsumer(this.link))}markDirty(){this.dirtyCount++,q.push(this),this.dirtyCount===1&&this.subscriber.pause()}notify(e=!1){if(this.dirtyCount--,this.dirtyCount===0&&this.subscriber!==x){const t=this.link,r=t.producer;if(w(t),r.isLinkUpToDate(t)&&!e)this.subscriber.resume();else{const n=r.updateLink(t);this.subscriber.next(n)}}}}let a=null;const f=s=>{const e=a;return a=s,e},E=s=>{let e;const t=f(null);try{e=s()}finally{f(t)}return e};let p=!1;const h=()=>{if(p)throw new Error("Reading or writing a signal is forbidden during the notification phase.")};let k=0;class ${constructor(e){this.value=e,this.flags=0,this.version=0,this.equalFn=re,this.equalCache=null,this.consumerLinks=[]}newLink(e){return{version:-1,value:void 0,producer:this,indexInProducer:0,consumer:e,skipMarkDirty:!1}}isLinkUpToDate(e){if(e.version===this.version)return!0;if(e.version===this.version-1||e.version<0)return!1;let t=this.equalCache;t||(t={},this.equalCache=t);let r=t[e.version];return r===void 0&&(r=this.equal(e.value,this.value),t[e.version]=r),r}updateLink(e){return e.value=this.value,e.version=this.version,this.readValue()}registerConsumer(e){const t=this.consumerLinks,r=t.length;return e.indexInProducer=r,t[r]=e,e}unregisterConsumer(e){const t=this.consumerLinks,r=e.indexInProducer;if(t[r]!==e)throw new Error("assert failed: invalid indexInProducer");const n=t.pop();e===n?r===0&&this.checkUnused():(t[r]=n,n.indexInProducer=r)}checkUnused(){}updateValue(){}equal(e,t){const r=this.equalFn;return r(e,t)}increaseEpoch(){k++,this.markConsumersDirty()}set(e){h(),this.equal(this.value,e)||y(()=>{this.value=e,this.version++,this.equalCache=null,this.increaseEpoch()})}update(e){this.set(e(this.value))}markConsumersDirty(){const e=p;p=!0;try{const t=this.consumerLinks;for(let r=0,n=t.length;r<n;r++){const i=t[r];i.skipMarkDirty||i.consumer.markDirty()}}finally{p=e}}get(){return h(),a?a.addProducer(this):this.readValue()}readValue(){return this.value}subscribe(e){h();const t=new ie(this,e),r=()=>t.unsubscribe();return r.unsubscribe=r,r}}let b=null,U=!1;const ue=()=>{if(U)throw new Error("assert failed: recursive flushUnused call");U=!0;try{const s=b;if(s){b=null;for(let e=0,t=s.length;e<t;e++){const r=s[e];r.flags&=-5,r.checkUnused()}}}finally{U=!1}};class A extends ${constructor(){super(...arguments),this.extraUsages=0}updateValue(){if(!(this.flags&2)){if(!this.extraUsages&&!this.consumerLinks.length)throw new Error("assert failed: untracked producer usage");this.flags|=2,E(()=>this.startUse())}}checkUnused(){const e=this.flags;e&2&&!this.extraUsages&&!this.consumerLinks.length&&(U||e&1?(this.flags&=-3,E(()=>this.endUse())):e&4||(this.flags|=4,b||(b=[],queueMicrotask(ue)),b.push(this)))}get(){if(h(),a)return a.addProducer(this);this.extraUsages++;try{if(this.updateValue(),this.flags&16)throw new Error("assert failed: store still dirty after updating it");return this.readValue()}finally{--this.extraUsages===0&&this.checkUnused()}}}const L=()=>{};L.unsubscribe=L;const R=s=>{if(!s)return L;if(s.unsubscribe===s)return s;const e=typeof s=="function"?()=>s():()=>s.unsubscribe();return e.unsubscribe=e,e};class oe extends A{constructor(e){super(void 0),this.subscribable=e,this.subscriber=this.createSubscriber(),this.unsubscribe=null,this.flags=1}createSubscriber(){const e=t=>this.set(t);return e.next=e,e.pause=()=>{this.markConsumersDirty()},e}startUse(){this.unsubscribe=R(this.subscribable.subscribe(this.subscriber))}endUse(){const e=this.unsubscribe;e&&(this.unsubscribe=null,e())}}const j=typeof Symbol=="function"&&Symbol.observable||"@@observable",ce=function(){return this},W=Symbol(),M=new WeakMap,T=s=>{const e=s[W];if(e)return e;let t=M.get(s);if(!t){let r=s;"subscribe"in r||(r=r[j]()),t=new oe(r),M.set(s,t)}return t},m=(s,e)=>{const t=s.get.bind(s);return e&&Object.assign(t,e),t.get=t,t.subscribe=s.subscribe.bind(s),t[j]=ce,t[W]=s,t},O=1e3,d=Symbol("UNSET"),g=Symbol("ERRORED"),_=s=>s===d||s===g;class Q extends A{constructor(){super(...arguments),this.flags=16}equal(e,t){return _(e)||_(t)?!1:super.equal(e,t)}markDirty(){this.flags&16||(this.flags|=16,this.markConsumersDirty())}readValue(){const e=this.value;if(e===g)throw this.error;if(e===d)throw new Error("assert failed: computed value is not set");return e}updateValue(){if(this.flags&8)throw new Error("recursive computed");if(super.updateValue(),!(this.flags&16))return;this.flags|=8;const e=f(null);try{let t=0;do{do if(t++,this.flags&=-17,this.areProducersUpToDate())return;while(this.flags&16&&t<O);this.recompute()}while(this.flags&16&&t<O);this.flags&16&&(this.flags&=-17,this.error=new Error("reached maximum number of store changes in one shot"),this.set(g))}finally{f(e),this.flags&=-9}}}class ae extends Q{constructor(e){super(d),this.computeFn=e,this.producerIndex=0,this.producerLinks=[],this.epoch=-1}increaseEpoch(){}updateValue(){this.flags&2&&this.epoch===k||(super.updateValue(),this.epoch=k)}get(){return!a&&!p&&this.epoch===k&&(!(this.flags&1)||this.flags&2)?this.readValue():super.get()}addProducer(e){const t=this.producerLinks,r=this.producerIndex;let n=t[r];return n?.producer!==e&&(n&&t.push(n),n=e.registerConsumer(e.newLink(this))),t[r]=n,this.producerIndex=r+1,w(n),e.flags&1&&(this.flags|=1),e.updateLink(n)}startUse(){const e=this.producerLinks;for(let t=0,r=e.length;t<r;t++){const n=e[t];n.producer.registerConsumer(n)}this.flags|=16}endUse(){const e=this.producerLinks;for(let t=0,r=e.length;t<r;t++){const n=e[t];n.producer.unregisterConsumer(n)}}areProducersUpToDate(){if(this.value===d)return!1;const e=this.producerLinks;for(let t=0,r=e.length;t<r;t++){const n=e[t],i=n.producer;if(w(n),!i.isLinkUpToDate(n))return!1}return!0}recompute(){let e;const t=f(this);try{this.producerIndex=0,this.flags&=-2;const i=this.computeFn;e=i(),this.error=null}catch(i){e=g,this.error=i}finally{f(t)}const r=this.producerLinks,n=this.producerIndex;if(n<r.length)for(let i=0,u=r.length-n;i<u;i++){const v=r.pop();v.producer.unregisterConsumer(v)}this.set(e)}}class le{constructor(e){this.value=e,this.flags=0}newLink(e){return{producer:this}}registerConsumer(e){return e}unregisterConsumer(e){}updateValue(){}isLinkUpToDate(e){return!0}updateLink(e){return this.value}get(){return h(),this.value}subscribe(e){return h(),typeof e=="function"?e(this.value):e?.next?.(this.value),L}}class B extends Q{constructor(e,t){super(t),this.producerLinks=null,this.cleanUpFn=null,this.flags=17;const r=Array.isArray(e);this.arrayMode=r,this.producers=(r?e:[e]).map(T)}callCleanUpFn(){const e=this.cleanUpFn;e&&(this.cleanUpFn=null,e())}startUse(){this.producerLinks=this.producers.map(e=>e.registerConsumer(e.newLink(this))),this.flags|=16}endUse(){this.callCleanUpFn();const e=this.producerLinks;if(this.producerLinks=null,e)for(let t=0,r=e.length;t<r;t++){const n=e[t];n.producer.unregisterConsumer(n)}}areProducersUpToDate(){const e=this.producerLinks;let t=this.value!==d;for(let r=0,n=e.length;r<n;r++){const i=e[r],u=i.producer;w(i),u.isLinkUpToDate(i)||(t=!1)}return t}recompute(){try{this.callCleanUpFn();const e=this.producerLinks.map(t=>t.producer.updateLink(t));this.cleanUpFn=R(this.derive(this.arrayMode?e:e[0]))}catch(e){this.error=e,this.set(g)}}}class he extends B{constructor(e,t,r){super(e,d),this.deriveFn=r}derive(e){const t=this.deriveFn;this.set(t(e))}}const H=s=>{const e=s.set.bind(s);return e.set=e,e.update=s.update.bind(s),e};class fe extends B{constructor(e,t,r){super(e,t),this.deriveFn=r,this.setFn=H(this)}derive(e){const t=this.deriveFn;return t(e,this.setFn)}}class de extends A{constructor(e,t){super(e),this.onUseFn=t,this.cleanUpFn=null,this.flags=1}startUse(){this.cleanUpFn=R(this.onUseFn())}endUse(){const e=this.cleanUpFn;e&&(this.cleanUpFn=null,e())}}function C(s,e){return m(T(s),e)}const I=function(s){this.set(s(E(()=>this.get())))};function Ve(s,e){return C(s,typeof e=="function"?{set:e,update:I}:{...e,set:e?.set??l,update:e?.update??(e?.set?I:l)})}const Me=s=>T(s).get(),z=(s,e)=>{const t=new de(s,()=>e(r)),r=H(t);return t},D=(s,e)=>{if(e){const{equal:t,notEqual:r}=e;t?s.equalFn=t:r&&(s.equalFn=(n,i)=>!r(n,i))}return s};function pe(s,e){typeof e=="function"&&(e={onUse:e});const t=e?.onUse;return m(t?D(z(s,t),e):new le(s))}function P(s,e){typeof e=="function"&&(e={onUse:e});const t=e?.onUse,r=D(t?z(s,t):new $(s),e),n=m(r);return n.set=r.set.bind(r),n.update=r.update.bind(r),n}function be(s){return s.length<=1}function Oe(s,e,t){typeof e=="function"&&(e={derive:e});const{derive:r,...n}=e,i=be(r)?he:fe;return m(D(new i(s,t,r),n))}function ge(s,e){return m(D(new ae(s),e))}const me=()=>{},_e=s=>s;function G(s){var e,t,r="";if(typeof s=="string"||typeof s=="number")r+=s;else if(typeof s=="object")if(Array.isArray(s)){var n=s.length;for(e=0;e<n;e++)s[e]&&(t=G(s[e]))&&(r&&(r+=" "),r+=t)}else for(t in s)s[t]&&(r&&(r+=" "),r+=t);return r}function ve(){for(var s,e,t=0,r="",n=arguments.length;t<n;t++)(s=arguments[t])&&(e=G(s))&&(r&&(r+=" "),r+=e);return r}const V=(s=>{const e=s?.ownerDocument?.defaultView??window;return s instanceof e.HTMLElement}),ye=s=>(e,t)=>{if(V(e))return s(e,t)},ke=(s,e)=>t=>{let r=!0,n;const i=e.subscribe(u=>{r?(r=!1,n=s(t,u)):n?.update?.(u)});return{destroy(){n?.destroy?.(),i()}}},Ue=pe(void 0),we=s=>ke(s,Ue),Ie=(s,e=!0)=>()=>{const t=s.subscribe(me);return{destroy:async()=>{e&&await Promise.resolve(),t()}}},X={equal:Object.is},Le=()=>{const s=P([],X);return C(s,{register:e=>{let t=!1;return s.update(r=>[...r,e]),()=>{t||(t=!0,s.update(r=>{const n=r.indexOf(e);if(n>-1){const i=[...r];return i.splice(n,1),i}return r}))}}})},Ce=()=>{const s=Le();return{elements$:C(s),directive:(e,t=!0)=>{let r;const n=(i=!0)=>{!!i!=!!r&&(i?r=s.register(e):(r?.(),r=void 0))};return n(t),{destroy:()=>n(!1),update:n}}}},De=()=>{const{directive:s,elements$:e}=Ce();return{directive:we(s),elements$:e}},Ne=()=>{const{directive:s,elements$:e}=De();return{directive:ye(s),elements$:e}},$e=()=>{const s=P(null,X);return{element$:C(s),directive:e=>{let t=!1;return s.update(r=>r?(console.error("The directive cannot be used on multiple elements.",r,e),r):(t=!0,e)),t?{destroy(){s.update(r=>e===r?null:r)}}:void 0}}},je=(...s)=>(e,t)=>{const r=y(()=>s.map(n=>n(e,t)));return{update(n){y(()=>r.forEach(i=>i?.update?.(n)))},destroy(){y(()=>r.reverse().forEach(n=>n?.destroy?.()))}}},Se=s=>(e,t)=>{const r=[],n=P(t),{events:i,attributes:u,styles:v,classNames:K}=s(n);if(V(e))for(const[o,c]of Object.entries(i??{}))typeof c=="function"?r.push(N(e,o,c)):r.push(N(e,o,c.handler,c.options));for(const[o,c]of Object.entries(u??{}))c!=null&&r.push(qe(e,o,c));for(const[o,c]of Object.entries(v??{}))c&&r.push(Ae(e,o,c));for(const[o,c]of Object.entries(K??{}))r.push(Re(e,o,c));return{update:o=>n.set(o),destroy:()=>r.forEach(o=>o())}},We=Se(s=>({attributes:{class:ge(()=>ve(s()))}})),Qe=(s=document.body)=>{V(s)&&s.getBoundingClientRect()},Be=(s,e)=>{e&&e.length>0&&s.classList.add(...e)},He=(s,e)=>{e&&e.length>0&&s.classList.remove(...e)};function N(s,e,t,r){return s.addEventListener(e,t,r),function(){s.removeEventListener(e,t,r)}}const J=s=>s!=null&&s!==!1;function Fe(s,e){let t=new Set;return e.subscribe(r=>{const n=new Set(`${r??""}`.split(" "));n.delete("");const i=s.classList;for(const u of t)n.has(u)||i.remove(u);n.size>0&&i.add(...n),t=n})}function xe(s,e,t){return t.subscribe(r=>{J(r)?s.setAttribute(e,""+(r===!0?e:r)):s.removeAttribute(e)})}function qe(s,e,t){return e==="class"?Fe(s,t):xe(s,e,t)}const Ee=s=>s.startsWith("--");function Ae(s,e,t){return t.subscribe(r=>{const n=s.style;r=""+(J(r)?r:""),Ee(e)?n.setProperty(e,r):n[e]=r})}function Re(s,e,t){const r=t.subscribe(n=>{s.classList.toggle(e,n)});return()=>{r(),s.classList.remove(e)}}export{Ve as a,y as b,ge as c,C as d,Oe as e,Ne as f,Me as g,ye as h,_e as i,Pe as j,We as k,$e as l,je as m,me as n,Ie as o,V as p,He as q,pe as r,Be as s,Qe as t,P as w};
