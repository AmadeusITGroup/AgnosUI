var be=(e,t,s)=>{if(!t.has(e))throw TypeError("Cannot "+s)};var r=(e,t,s)=>(be(e,t,"read from private field"),s?s.call(e):t.get(e)),f=(e,t,s)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,s)},l=(e,t,s,n)=>(be(e,t,"write to private field"),n?n.call(e,s):t.set(e,s),s);var Re=(e,t,s,n)=>({set _(i){l(e,t,i,s)},get _(){return r(e,t,n)}}),b=(e,t,s)=>(be(e,t,"access private method"),s);import{b as Je,t as Ke}from"./index.6ksnHcsW.js";import{J as Xe,y as Be}from"./scheduler.f1AlNVPZ.js";import{p as Y}from"./stores.7OMLN4i4.js";function Lt(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function zt(e,t){Je(e,1,1,()=>{t.delete(e.key)})}function Ft(e,t,s,n,i,o,u,a,p,w,h,g){let c=e.length,m=o.length,v=c;const G={};for(;v--;)G[e[v].key]=v;const Z=[],fe=new Map,he=new Map,Ue=[];for(v=m;v--;){const d=g(i,o,v),x=s(d);let _=u.get(x);_?n&&Ue.push(()=>_.p(d,t)):(_=w(x,d),_.c()),fe.set(x,Z[v]=_),x in G&&he.set(x,Math.abs(v-G[x]))}const xe=new Set,_e=new Set;function de(d){Ke(d,1),d.m(a,h),u.set(d.key,d),h=d.first,m--}for(;c&&m;){const d=Z[m-1],x=e[c-1],_=d.key,P=x.key;d===x?(h=d.first,c--,m--):fe.has(P)?!u.has(_)||xe.has(_)?de(d):_e.has(P)?c--:he.get(_)>he.get(P)?(_e.add(_),de(d)):(xe.add(P),c--):(p(x,u),c--)}for(;c--;){const d=e[c];fe.has(d.key)||p(d,u)}for(;m;)de(Z[m-1]);return Xe(Ue),Z}var $e;const ce=typeof Symbol=="function"&&Symbol.observable||"@@observable",ge=Symbol(),V=()=>{},te=()=>{};te.unsubscribe=te;const pe=(e,t)=>{const s=e?e[t]:null;return typeof s=="function"?s.bind(e):V},Le=e=>({next:typeof e=="function"?e.bind(null):pe(e,"next"),pause:pe(e,"pause"),resume:pe(e,"resume"),_value:void 0,_valueIndex:0,_paused:!1}),ze=function(){return this},Se=e=>{if(!e)return te;if(e.unsubscribe===e)return e;const t=typeof e=="function"?()=>e():()=>e.unsubscribe();return t.unsubscribe=t,t},ve=new WeakSet,He=e=>{let t=e.subscribe;return ve.has(t)||(t=(...s)=>Se(e.subscribe(...s)),ve.add(t)),t},ae=e=>{const t="subscribe"in e?e:e[ce]();return He(t)},Ye=e=>{let t;return e(s=>t=s)(),t};function F(e,t){const s=ae(e),n=Object.assign(()=>j(n),t,{subscribe:s,[ce]:ze});return n}const ke=function(e){this.set(e(Ne(()=>j(this))))};function Ze(e,t){return F(e,typeof t=="function"?{set:t,update:ke}:{...t,set:(t==null?void 0:t.set)??V,update:(t==null?void 0:t.update)??(t!=null&&t.set?ke:V)})}const y=Symbol(),Fe=Symbol();let me=!1;const K=new Set,Pe=1e3,ye=e=>{if(e>Pe)throw new Error("reached maximum number of store changes in one shot")},X=e=>{const t=!me;t&&(me=!0);try{return e()}finally{if(t)try{const s=new Map;for(const n of K){const i=s.get(n)??0;ye(i),s.set(n,i+1),K.delete(n),n[Fe]()}}finally{K.clear(),me=!1}}},je=e=>Ye(ae(e));let T=je;const j=e=>T(e),qe=e=>({[e]:!0,[e-1]:!1,0:!1}),O=Symbol(),et=(e,t)=>Object.is(e,t)&&(!e||typeof e!="object")&&typeof e!="function";var R,C,$,k,A,E,N,se,Ce,ne,Ee,W,ee;class we{constructor(t){f(this,se);f(this,ne);f(this,W);f(this,R,void 0);f(this,C,void 0);f(this,$,void 0);f(this,k,void 0);f(this,A,void 0);f(this,E,void 0);f(this,N,void 0);l(this,R,new Set),l(this,C,null),l(this,$,!1),l(this,k,1),l(this,E,qe(1)),l(this,N,new WeakMap),this[$e]=!1,l(this,A,t)}[($e=O,Fe)](){const t=r(this,k);for(const s of[...r(this,R)]){if(r(this,$)||r(this,k)!==t)return;s._valueIndex!==0&&b(this,W,ee).call(this,s)}}[y](){}equal(t,s){return!this.notEqual(t,s)}notEqual(t,s){return!et(t,s)}pauseSubscribers(){if(!r(this,$)){l(this,$,!0),K.delete(this);for(const t of[...r(this,R)])t._valueIndex===0||t._paused||(t._paused=!0,t.pause())}}resumeSubscribers(){r(this,$)&&(l(this,$,!1),X(()=>{K.add(this)}))}set(t){const s=this[O];if(s||!this.equal(r(this,A),t)){const n=r(this,k)+1;l(this,k,n),l(this,A,t),l(this,E,qe(n)),s&&delete r(this,E)[n-1],this.pauseSubscribers()}this.resumeSubscribers()}update(t){this.set(t(r(this,A)))}onUse(){}subscribe(t){const s=Le(t),n=t==null?void 0:t[ge];if(n){const o=r(this,N).get(n);o&&(s._value=o._value,s._valueIndex=o._valueIndex)}r(this,R).add(s),X(()=>{r(this,R).size==1?b(this,se,Ce).call(this):this[y]()}),b(this,W,ee).call(this,s);const i=()=>{const o=r(this,R).delete(s);s.next=V,s.pause=V,s.resume=V,o&&(r(this,N).set(i,s),r(this,R).size===0&&b(this,ne,Ee).call(this))};return i[y]=()=>{this[y](),b(this,W,ee).call(this,s)},i.unsubscribe=i,i}[ce](){return this}}R=new WeakMap,C=new WeakMap,$=new WeakMap,k=new WeakMap,A=new WeakMap,E=new WeakMap,N=new WeakMap,se=new WeakSet,Ce=function(){l(this,C,Se(this.onUse()))},ne=new WeakSet,Ee=function(){const t=r(this,C);t&&(l(this,C,null),t())},W=new WeakSet,ee=function(t){const s=r(this,E),n=r(this,k),i=r(this,A);let o=s[t._valueIndex];o==null&&(o=!!this.equal(t._value,i),s[t._valueIndex]=o),t._valueIndex=n,o?!r(this,$)&&t._paused&&(t._paused=!1,t.resume()):(t._value=i,t._paused=!1,t.next(i))};function tt(e){const t=s=>(s!=null&&s[ge]||Le(s).next(e),te);return ve.add(t),Object.assign(()=>e,{subscribe:t,[ce]:ze})}class De extends we{constructor(t){super(t)}set(t){super.set(t)}update(t){super.update(t)}}const le=(e,t)=>{const{onUse:s,equal:n,notEqual:i}=t;return s&&(e.onUse=function(){const o=u=>this.set(u);return o.set=o,o.update=u=>this.update(u),s(o)}),n&&(e.equal=function(o,u){return n(o,u)}),i&&(e.notEqual=function(o,u){return i(o,u)}),e};function Te(e,t={}){return typeof t=="function"&&(t={onUse:t}),t.onUse?F(le(new De(e),t)):tt(e)}function Me(e,t={}){typeof t=="function"&&(t={onUse:t});const s=le(new De(e),t);return F(s,{set:s.set.bind(s),update:s.update.bind(s)})}function st(e){return e.length<=1}const nt=e=>e();var B,H,I;class Ve extends we{constructor(s,n){super(n);f(this,B,void 0);f(this,H,void 0);f(this,I,0);const i=Array.isArray(s);l(this,B,i),l(this,H,(i?[...s]:[s]).map(ae))}resumeSubscribers(){r(this,I)||super.resumeSubscribers()}onUse(){let s=!1,n=0;const i=r(this,B),o=r(this,H),u=new Array(o.length);let a=null;const p=()=>{const c=a;c&&(a=null,c())},w=(c=!1)=>{c&&(s=!0),s&&!r(this,I)&&(n&&(n=0,p(),a=Se(this.derive(i?u:u[0]))),this.resumeSubscribers())},h=o.map((c,m)=>{const v=G=>{u[m]=G,n|=1<<m,l(this,I,r(this,I)&~(1<<m)),w()};return v.next=v,v.pause=()=>{l(this,I,r(this,I)|1<<m),this.pauseSubscribers()},v.resume=()=>{l(this,I,r(this,I)&~(1<<m)),w()},c(v)}),g=(c,m)=>{var v;r(this,I)&1<<m&&((v=c[y])==null||v.call(c))};return this[y]=()=>{let c=0;for(;r(this,I)&&(ye(++c),s=!1,h.forEach(g),!r(this,I));)w(!0)},w(!0),this[y](),()=>{this[y]=V,p(),h.forEach(nt)}}}B=new WeakMap,H=new WeakMap,I=new WeakMap;function it(e,t,s){typeof t=="function"&&(t={derive:t});const{derive:n,...i}=t,o=st(n)?class extends Ve{constructor(u,a){super(u,a),this[O]=!0}derive(u){this.set(n(u)),this[O]=!1}}:class extends Ve{derive(u){const a=p=>this.set(p);return a.set=a,a.update=p=>this.update(p),n(u,a)}};return F(le(new o(e,s),{...i,onUse:void 0}))}const Ne=e=>{const t=T;try{return T=je,e()}finally{T=t}},ot=({unsubscribe:e})=>e(),rt=({resubscribe:e})=>e();var Q,q,L,S,ie,oe,We,re,Qe,D,J,z,M,ue,Oe;class ut extends we{constructor(){super(void 0);f(this,oe);f(this,re);f(this,D);f(this,z);f(this,ue);f(this,Q,!1);f(this,q,!1);f(this,L,0);f(this,S,new Map);f(this,ie,s=>Ne(()=>b(this,re,Qe).call(this,s)));this[O]=!0}resumeSubscribers(){b(this,z,M).call(this)||super.resumeSubscribers()}[y](){var n;if(r(this,Q))throw new Error("recursive computed");let s=0;for(;b(this,z,M).call(this);){ye(++s),l(this,q,!0);try{for(const[,{pending:i,unsubscribe:o}]of r(this,S))i&&((n=o[y])==null||n.call(o))}finally{l(this,q,!1)}if(b(this,z,M).call(this))break;b(this,D,J).call(this)}}onUse(){return b(this,D,J).call(this,!0),this[y](),()=>r(this,S).forEach(ot)}}Q=new WeakMap,q=new WeakMap,L=new WeakMap,S=new WeakMap,ie=new WeakMap,oe=new WeakSet,We=function(s){const n={versionIndex:r(this,L),unsubscribe:V,resubscribe:V,pending:!1,usedValueIndex:0,value:void 0,valueIndex:0},i=o=>{n.value=o,n.valueIndex++,n.pending=!1,!r(this,q)&&!b(this,z,M).call(this)&&X(()=>b(this,D,J).call(this))};return i.next=i,i.pause=()=>{n.pending=!0,this.pauseSubscribers()},i.resume=()=>{n.pending=!1,!r(this,q)&&!b(this,z,M).call(this)&&X(()=>b(this,D,J).call(this))},n.resubscribe=()=>{n.unsubscribe=s(i),i[ge]=n.unsubscribe},n.resubscribe(),n},re=new WeakSet,Qe=function(s){var i,o;let n=r(this,S).get(s);return n?(n.versionIndex=r(this,L),(o=(i=n.unsubscribe)[y])==null||o.call(i)):(n=b(this,oe,We).call(this,ae(s)),r(this,S).set(s,n)),n.usedValueIndex=n.valueIndex,n.value},D=new WeakSet,J=function(s=!1){l(this,Q,!0),l(this,q,!0);try{if(r(this,L)>0&&(s&&r(this,S).forEach(rt),!b(this,ue,Oe).call(this))){this.resumeSubscribers();return}Re(this,L)._++;const n=r(this,L),i=T;let o;try{T=r(this,ie),o=this.compute()}finally{T=i}this.set(o),this[O]=!1;for(const[u,a]of r(this,S))a.versionIndex!==n&&(r(this,S).delete(u),a.unsubscribe())}finally{l(this,q,!1),l(this,Q,!1)}},z=new WeakSet,M=function(){for(const[,{pending:s}]of r(this,S))if(s)return!0;return!1},ue=new WeakSet,Oe=function(){for(const[,{valueIndex:s,usedValueIndex:n}]of r(this,S))if(s!=n)return!0;return!1};function U(e,t={}){const s=class extends ut{compute(){return e()}};return F(le(new s,{...t,onUse:void 0}))}const ct=()=>{},at=e=>e,Ae=Symbol();function lt(e){return function(t){X(()=>{var s;for(const[n,i]of Object.entries(t??{}))(s=e[`${n}$`])==null||s.set(i)})}}function ft(e,t=Te(void 0),s={},n=Me(void 0)){const{normalizeValue:i=at,equal:o=Object.is}=s,u=()=>e,a=(h,g=u)=>{const c=h===void 0?void 0:i(h);return c===Ae?(console.error("Not using invalid value",h),g()):c===void 0?g():c},p=U(()=>a(t()),{equal:o}),w=U(()=>a(n(),p),{equal:o});return Ze(w,h=>{if(h!==void 0){const g=i(h);if(g===Ae){console.error("Not setting invalid value",h);return}h=g}n.set(h)})}const Ie=e=>!!(e&&typeof e=="function"&&"subscribe"in e),ht=e=>Ie(e)?e:Te(e),dt=e=>Ie(e)?e:Me(e),bt=(e,t)=>{const s={};if(t){const n=Ie(t);for(const i of e)s[i]=n?U(()=>t()[i]):ht(t[i])}return s},pt=(e,t,s)=>{const n={},i=Object.keys(e),o=bt(i,t==null?void 0:t.config),u=t==null?void 0:t.props;for(const a of i){const p=u==null?void 0:u[a];n[`${a}$`]=ft(e[a],o[a],s==null?void 0:s[a],dt(p))}return n},mt=(e,t,s)=>{const n=pt(e,t,s);return[n,lt(n)]},jt=e=>{const t=[],s=[],n={};for(const i of Object.keys(e))if(i.endsWith("$")){const o=e[i];t.push(i.substring(0,i.length-1)),s.push(o),n[i]=F(o)}return{stores:n,state$:U(()=>{const i=s.map(j),o={};return t.forEach((u,a)=>{o[u]=i[a]}),o})}},vt={elements:[],options:void 0},gt=e=>{const[{elements$:t,options$:s},n]=mt(vt,e),i=it([t,s],([o,u],a)=>{if(o.length){const p=new Map,w=new IntersectionObserver(h=>{for(const g of h){const{target:c,isIntersecting:m}=g;m?p.set(c,g):p.delete(c)}a(p)},u);for(const h of o)w.observe(h);return()=>{w.disconnect()}}return ct},new Map);return{elements$:F(t),visibleElements$:F(i),patch:n}},St=U(()=>{const e=j(Y);if(!e.route.id)throw new Error("Page error");return e.route.id.split("/").length-2+Object.values(e.params).reduce((t,s)=>t+s.split("/").length-1,0)}),Ge=U(()=>{const e=St();return e?"../".repeat(e):"./"}),Ct=U(()=>new URL(Ge(),window.location.href).href),yt="https://amadeusitgroup.github.io/AgnosUI/latest/";U(()=>{const e=j(Y).url.href,t=new URL(Ge(),e).href;return e.replace(t,yt)});const Et=U(()=>j(Y).params.framework??"angular"),wt=/^\/docs\/\[framework\]\/components\/[^/]*\/([^/]*)/,Dt=U(()=>{const e=wt.exec(j(Y).route.id||"");return(e==null?void 0:e[1])||"examples"}),It=/\/docs\/[a-z]*\//,Tt=U(()=>{const e=j(Y),t=e.url.pathname.match(It);return t?e.url.pathname.substring(e.url.pathname.indexOf(t[0])+t[0].length):"/"}),Ut=gt(),xt=/\r/g;function Mt(e,t=""){return`AgnosUI - ${e}`+(t?` for ${t}`:"")}function Nt(e){return e.replace(xt,"").split(`

`)}const _t=/^\([^(]*\)[^=]*=>/,Rt=/^function/,$t=/^Slot/;function Wt(e){return _t.test(e)||Rt.test(e)?"function":$t.test(e)?"slot":e}function Qt(e){let t;function s(n){t=n}return Be(()=>{Ut.patch({elements:t?e(t):[]})}),s}export{Et as a,Wt as b,U as c,F as d,Lt as e,X as f,Mt as g,it as h,et as i,mt as j,jt as k,Tt as l,Ut as m,ct as n,zt as o,Ct as p,Qt as q,Te as r,Dt as s,Nt as t,Ft as u,St as v,Me as w};
