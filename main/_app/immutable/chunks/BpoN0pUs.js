import{at as c,g as o,au as b,r as g,u as l,av as i,q as m}from"./CSCPLJ4H.js";import{g as d}from"./V-YpGbKL.js";function p(r){let e=0,n=b(0),t;return()=>{c()&&(o(n),g(()=>(e===0&&(t=l(()=>r(()=>i(n)))),e+=1,()=>{m(()=>{e-=1,e===0&&(t?.(),t=void 0,i(n))})})))}}function v(r){let e;const n=p(u=>{let s=!1;const f=r.subscribe(a=>{e=a,s&&u()});return s=!0,f});function t(){return c()?(n(),e):d(r)}return"set"in r?{get current(){return t()},set current(u){r.set(u)}}:{get current(){return t()}}}export{v as f};
