import{a3 as X,ay as Y,i as Z,m as nn,ax as tn,a1 as en,v as on}from"./runtime.dLey1hba.js";import{g as sn}from"./entry.D2-00FqL.js";import{I as rn,n as w,w as an,e as y,f as ln,g as k,h as un,i as cn,j as q}from"./stores.Dwtluzy0.js";import{c as dn,p as M,m as fn,d as mn,a as pn,f as R,g as bn}from"./logo-typescript.JHeCgVcs.js";function vn(n){X(n,n.v+1)}function xn(n){let t,r=en(0),i=0,u=on;function f(){return Y()?(Z(r),nn(()=>{if(i===0){let c=!1;u=n.subscribe(m=>{t=m,c&&vn(r)}),c=!0}return i+=1,()=>{tn().then(()=>{i-=1,i===0&&u()})}}),t):sn(n)}return"set"in n?{get current(){return f()},set current(c){n.set(c)}}:{get current(){return f()}}}function W(n){return n===!0||n===!1}function yn(n){return typeof n=="function"}function wn(n){return typeof n=="string"}const gn=n=>t=>t===null||n(t);function hn(n){return t=>n.includes(t)}const g=n=>t=>n(t)?t:rn,B={normalizeValue:g(W)},$n={normalizeValue:g(gn(W))},On={normalizeValue:g(wn)},C={normalizeValue:g(yn),equal:Object.is};function Bn(n){return{normalizeValue:g(hn(n))}}const U=new Promise(w),Sn=(n,t)=>{n.style.display=t==="show"?"":"none"},Vn={animated:!0,animatedOnInit:!1,initDone:null,visible:!0,transition:Sn,onShown:w,onHidden:w,onVisibleChange:w},Dn={animated:B,animatedOnInit:B,visible:B,transition:C,onShown:C,onHidden:C,onVisibleChange:C,initDone:$n},Hn=n=>{const[{animated$:t,initDone$:r,visible$:i,transition$:u,onShown$:f,onHidden$:c,onVisibleChange$:m,animatedOnInit$:h},$]=an(Vn,n,Dn),{element$:E,directive:G}=dn(),A=y(()=>!!E()),S=ln(m,[i],([e])=>e),b=k(null),H=()=>{let e;return b.update(o=>(o?.abort.abort(),e=o?.context,null)),e},J=(e,o,d,a)=>q(()=>{const V=new AbortController,l=V.signal,p=H()??{},{promise:v,resolve:O}=M(),D={abort:V,animated:o,visible:e,context:p,element:d,transitionFn:a,promise:v};return b.set(D),O((async()=>{var j;try{await a(d,e?"show":"hide",o,l,p)}finally{l.aborted?await U:(b.set(null),(j=(e?f:c)())==null||j())}})()),D}),N=y(()=>r()?t():h()),z=k(null);let _,F=i(),s=null;const I=un([S,E,N,z,u,b],([e,o,d,a,V,l])=>{const p=_!==o;_=o;const v=F!==e;if(F=e,o){r()==null&&r.set(!0);const O=a!=null&&l&&l.animated!=a;if(p||v||O){(v||a!=null)&&(s=null);const D=a??s?.animated??(p&&!e?!1:d);l=J(e,D,o,V),s?.resolve(l.promise),s=null}}else p&&(H(),l=null),(v||e&&s?.animated!==a)&&(s=e&&a!=null?{animated:a,...M()}:null);return s?.promise??l?.promise});let L={};const P=async(e=!i(),o=N())=>{const d={};L=d;try{await q(()=>{try{return z.set(o),i.set(e),I()}finally{z.set(null)}})}finally{L!==d&&await U}},x=y(()=>(A()&&I(),!!b())),K=y(()=>!x()&&S()&&A()),Q=y(()=>!x()&&!S()),T=fn(G,mn(I));return{...cn({visible$:S,element$:E,elementPresent$:A,transitioning$:x,shown$:K,hidden$:Q}),patch:$,directives:{directive:T},api:{show:P.bind(null,!0),hide:P.bind(null,!1),toggle:P}}};function Cn(n){return window.getComputedStyle(n).transitionProperty!=="none"}function En(n){const{transitionDelay:t,transitionDuration:r}=window.getComputedStyle(n),i=parseFloat(t),u=parseFloat(r);return(i+u)*1e3}const Nn=n=>async(t,r,i,u,f)=>{const c=n(t,r,i,f)??w;if(pn(t)&&i&&Cn(t)){const m=R(u,"abort"),h=R(t,"transitionend"),$=bn(En(t));await Promise.race([m.promise,h.promise,$.promise]),m.unsubscribe(),h.unsubscribe(),$.unsubscribe()}u.aborted||c()};export{Hn as a,C as b,Nn as c,On as d,Bn as e,xn as f,B as t};
