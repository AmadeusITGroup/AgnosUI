var ie=(t,e,s)=>{if(!e.has(t))throw TypeError("Cannot "+s)};var i=(t,e,s)=>(ie(t,e,"read from private field"),s?s.call(t):e.get(t)),l=(t,e,s)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,s)},c=(t,e,s,n)=>(ie(t,e,"write to private field"),n?n.call(t,s):e.set(t,s),s);var be=(t,e,s,n)=>({set _(r){c(t,e,r,s)},get _(){return i(t,e,n)}}),h=(t,e,s)=>(ie(t,e,"access private method"),s);import{p as K}from"./stores.6bf9e7b1.js";var pe;const se=typeof Symbol=="function"&&Symbol.observable||"@@observable",ae=Symbol(),P=()=>{},B=()=>{};B.unsubscribe=B;const oe=(t,e)=>{const s=t?t[e]:null;return typeof s=="function"?s.bind(t):P},ye=t=>({next:typeof t=="function"?t.bind(null):oe(t,"next"),pause:oe(t,"pause"),resume:oe(t,"resume"),_value:void 0,_valueIndex:0,_paused:!1}),we=function(){return this},le=t=>{if(!t)return B;if(t.unsubscribe===t)return t;const e=typeof t=="function"?()=>t():()=>t.unsubscribe();return e.unsubscribe=e,e},ce=new WeakSet,Pe=t=>{let e=t.subscribe;return ce.has(e)||(e=(...s)=>le(t.subscribe(...s)),ce.add(e)),e},ne=t=>{const e="subscribe"in t?t:t[se]();return Pe(e)},Le=t=>{let e;return t(s=>e=s)(),e};function z(t,e){const s=ne(t),n=Object.assign(()=>N(n),e,{subscribe:s,[se]:we});return n}const v=Symbol(),ge=Symbol();let ue=!1;const W=new Set,ze=1e3,fe=t=>{if(t>ze)throw new Error("reached maximum number of store changes in one shot")},T=t=>{const e=!ue;e&&(ue=!0);try{return t()}finally{if(e)try{const s=new Map;for(const n of W){const r=s.get(n)??0;fe(r),s.set(n,r+1),W.delete(n),n[ge]()}}finally{W.clear(),ue=!1}}},xe=t=>Le(ne(t));let L=xe;const N=t=>L(t),ve=t=>({[t]:!0,[t-1]:!1,0:!1}),j=Symbol();var y,$,w,U,k,O,F,H,Ie,J,Ue,C,X;class he{constructor(e){l(this,H);l(this,J);l(this,C);l(this,y,void 0);l(this,$,void 0);l(this,w,void 0);l(this,U,void 0);l(this,k,void 0);l(this,O,void 0);l(this,F,void 0);c(this,y,new Set),c(this,$,null),c(this,w,!1),c(this,U,1),c(this,O,ve(1)),c(this,F,new WeakMap),this[pe]=!1,c(this,k,e)}[(pe=j,ge)](){const e=i(this,U);for(const s of[...i(this,y)]){if(i(this,w)||i(this,U)!==e)return;s._valueIndex!==0&&h(this,C,X).call(this,s)}}[v](){}equal(e,s){return!this.notEqual(e,s)}notEqual(e,s){return!Object.is(e,s)||e&&typeof e=="object"||typeof e=="function"}pauseSubscribers(){if(!i(this,w)){c(this,w,!0),W.delete(this);for(const e of[...i(this,y)])e._valueIndex===0||e._paused||(e._paused=!0,e.pause())}}resumeSubscribers(){i(this,w)&&(c(this,w,!1),T(()=>{W.add(this)}))}set(e){const s=this[j];if(s||!this.equal(i(this,k),e)){const n=i(this,U)+1;c(this,U,n),c(this,k,e),c(this,O,ve(n)),s&&delete i(this,O)[n-1],this.pauseSubscribers()}this.resumeSubscribers()}update(e){this.set(e(i(this,k)))}onUse(){}subscribe(e){const s=ye(e),n=e==null?void 0:e[ae];if(n){const o=i(this,F).get(n);o&&(s._value=o._value,s._valueIndex=o._valueIndex)}i(this,y).add(s),T(()=>{i(this,y).size==1?h(this,H,Ie).call(this):this[v]()}),h(this,C,X).call(this,s);const r=()=>{const o=i(this,y).delete(s);s.next=P,s.pause=P,s.resume=P,o&&(i(this,F).set(r,s),i(this,y).size===0&&h(this,J,Ue).call(this))};return r[v]=()=>{this[v](),h(this,C,X).call(this,s)},r.unsubscribe=r,r}[se](){return this}}y=new WeakMap,$=new WeakMap,w=new WeakMap,U=new WeakMap,k=new WeakMap,O=new WeakMap,F=new WeakMap,H=new WeakSet,Ie=function(){c(this,$,le(this.onUse()))},J=new WeakSet,Ue=function(){const e=i(this,$);e&&(c(this,$,null),e())},C=new WeakSet,X=function(e){const s=i(this,O),n=i(this,U),r=i(this,k);let o=s[e._valueIndex];o==null&&(o=!!this.equal(e._value,r),s[e._valueIndex]=o),e._valueIndex=n,o?!i(this,w)&&e._paused&&(e._paused=!1,e.resume()):(e._value=r,e._paused=!1,e.next(r))};function Ae(t){const e=s=>(s!=null&&s[ae]||ye(s).next(t),B);return ce.add(e),Object.assign(()=>t,{subscribe:e,[se]:we})}class _e extends he{constructor(e){super(e)}set(e){super.set(e)}update(e){super.update(e)}}const re=(t,e)=>{const{onUse:s,equal:n,notEqual:r}=e;return s&&(t.onUse=function(){const o=u=>this.set(u);return o.set=o,o.update=u=>this.update(u),s(o)}),n&&(t.equal=function(o,u){return n(o,u)}),r&&(t.notEqual=function(o,u){return r(o,u)}),t};function Ee(t,e={}){return typeof e=="function"&&(e={onUse:e}),e.onUse?z(re(new _e(t),e)):Ae(t)}function ke(t,e={}){typeof e=="function"&&(e={onUse:e});const s=re(new _e(t),e);return z(s,{set:s.set.bind(s),update:s.update.bind(s)})}function Fe(t){return t.length<=1}const Ce=t=>t();var Q,G,m;class me extends he{constructor(s,n){super(n);l(this,Q,void 0);l(this,G,void 0);l(this,m,0);const r=Array.isArray(s);c(this,Q,r),c(this,G,(r?[...s]:[s]).map(ne))}resumeSubscribers(){i(this,m)||super.resumeSubscribers()}onUse(){let s=!1,n=0;const r=i(this,Q),o=i(this,G),u=new Array(o.length);let a=null;const b=()=>{const f=a;f&&(a=null,f())},x=(f=!1)=>{f&&(s=!0),s&&!i(this,m)&&(n&&(n=0,b(),a=le(this.derive(r?u:u[0]))),this.resumeSubscribers())},d=o.map((f,I)=>{const E=Ve=>{u[I]=Ve,n|=1<<I,c(this,m,i(this,m)&~(1<<I)),x()};return E.next=E,E.pause=()=>{c(this,m,i(this,m)|1<<I),this.pauseSubscribers()},E.resume=()=>{c(this,m,i(this,m)&~(1<<I)),x()},f(E)}),S=(f,I)=>{var E;i(this,m)&1<<I&&((E=f[v])==null||E.call(f))};return this[v]=()=>{let f=0;for(;i(this,m)&&(fe(++f),s=!1,d.forEach(S),!i(this,m));)x(!0)},x(!0),this[v](),()=>{this[v]=P,b(),d.forEach(Ce)}}}Q=new WeakMap,G=new WeakMap,m=new WeakMap;function De(t,e,s){typeof e=="function"&&(e={derive:e});const{derive:n,...r}=e,o=Fe(n)?class extends me{constructor(u,a){super(u,a),this[j]=!0}derive(u){this.set(n(u)),this[j]=!1}}:class extends me{derive(u){const a=b=>this.set(b);return a.set=a,a.update=b=>this.update(b),n(u,a)}};return z(re(new o(t,s),{...r,onUse:void 0}))}const je=t=>{const e=L;try{return L=xe,t()}finally{L=e}},Ne=({unsubscribe:t})=>t(),Me=({resubscribe:t})=>t();var D,_,R,p,Y,Z,Re,ee,qe,V,M,q,A,te,$e;class We extends he{constructor(){super(void 0);l(this,Z);l(this,ee);l(this,V);l(this,q);l(this,te);l(this,D,!1);l(this,_,!1);l(this,R,0);l(this,p,new Map);l(this,Y,s=>je(()=>h(this,ee,qe).call(this,s)));this[j]=!0}resumeSubscribers(){h(this,q,A).call(this)||super.resumeSubscribers()}[v](){var n;if(i(this,D))throw new Error("recursive computed");let s=0;for(;h(this,q,A).call(this);){fe(++s),c(this,_,!0);try{for(const[,{pending:r,unsubscribe:o}]of i(this,p))r&&((n=o[v])==null||n.call(o))}finally{c(this,_,!1)}if(h(this,q,A).call(this))break;h(this,V,M).call(this)}}onUse(){return h(this,V,M).call(this,!0),this[v](),()=>i(this,p).forEach(Ne)}}D=new WeakMap,_=new WeakMap,R=new WeakMap,p=new WeakMap,Y=new WeakMap,Z=new WeakSet,Re=function(s){const n={versionIndex:i(this,R),unsubscribe:P,resubscribe:P,pending:!1,usedValueIndex:0,value:void 0,valueIndex:0},r=o=>{n.value=o,n.valueIndex++,n.pending=!1,!i(this,_)&&!h(this,q,A).call(this)&&T(()=>h(this,V,M).call(this))};return r.next=r,r.pause=()=>{n.pending=!0,this.pauseSubscribers()},r.resume=()=>{n.pending=!1,!i(this,_)&&!h(this,q,A).call(this)&&T(()=>h(this,V,M).call(this))},n.resubscribe=()=>{n.unsubscribe=s(r),r[ae]=n.unsubscribe},n.resubscribe(),n},ee=new WeakSet,qe=function(s){var r,o;let n=i(this,p).get(s);return n?(n.versionIndex=i(this,R),(o=(r=n.unsubscribe)[v])==null||o.call(r)):(n=h(this,Z,Re).call(this,ne(s)),i(this,p).set(s,n)),n.usedValueIndex=n.valueIndex,n.value},V=new WeakSet,M=function(s=!1){c(this,D,!0),c(this,_,!0);try{if(i(this,R)>0&&(s&&i(this,p).forEach(Me),!h(this,te,$e).call(this))){this.resumeSubscribers();return}be(this,R)._++;const n=i(this,R),r=L;let o;try{L=i(this,Y),o=this.compute()}finally{L=r}this.set(o),this[j]=!1;for(const[u,a]of i(this,p))a.versionIndex!==n&&(i(this,p).delete(u),a.unsubscribe())}finally{c(this,_,!1),c(this,D,!1)}},q=new WeakSet,A=function(){for(const[,{pending:s}]of i(this,p))if(s)return!0;return!1},te=new WeakSet,$e=function(){for(const[,{valueIndex:s,usedValueIndex:n}]of i(this,p))if(s!=n)return!0;return!1};function g(t,e={}){const s=class extends We{compute(){return t()}};return z(re(new s,{...e,onUse:void 0}))}const Te=()=>{},Qe=t=>t;function Ge(t){return function(e){T(()=>{var s;for(const[n,r]of Object.entries(e??{}))(s=t[`${n}$`])==null||s.set(r)})}}const Ke=function(t){this.set(t(this()))},Se=Symbol();function Xe(t,e=Ee(void 0),s={},n=ke(void 0)){const{normalizeValue:r=Qe,equal:o=Object.is}=s,u=()=>t,a=(d,S=u)=>{const f=d===void 0?void 0:r(d);return f===Se?(console.error("Not using invalid value",d),S()):f===void 0?S():f},b=g(()=>a(e()),{equal:o}),x=g(()=>a(n(),b),{equal:o});return z(x,{set(d){if(d!==void 0){const S=r(d);if(S===Se){console.error("Not setting invalid value",d);return}d=S}n.set(d)},update:Ke})}const de=t=>!!(t&&typeof t=="function"&&"subscribe"in t),Be=t=>de(t)?t:Ee(t),He=t=>de(t)?t:ke(t),Je=(t,e)=>{const s={};if(e){const n=de(e);for(const r of t)s[r]=n?g(()=>e()[r]):Be(e[r])}return s},Ye=(t,e,s)=>{const n={},r=Object.keys(t),o=Je(r,e==null?void 0:e.config),u=e==null?void 0:e.props;for(const a of r){const b=u==null?void 0:u[a];n[`${a}$`]=Xe(t[a],o[a],s==null?void 0:s[a],He(b))}return n},Ze=(t,e,s)=>{const n=Ye(t,e,s);return[n,Ge(n)]},et={elements:[],options:void 0},tt=t=>{const[{elements$:e,options$:s},n]=Ze(et,t),r=De([e,s],([o,u],a)=>{if(o.length){const b=new Map,x=new IntersectionObserver(d=>{for(const S of d){const{target:f,isIntersecting:I}=S;I?b.set(f,S):b.delete(f)}a(b)},u);for(const d of o)x.observe(d);return()=>{x.disconnect()}}return Te},new Map);return{elements$:z(e),visibleElements$:z(r),patch:n}},st=g(()=>{const t=N(K);if(!t.route.id)throw new Error("Page error");return t.route.id.split("/").length-2}),Oe=g(()=>{const t=st();return t?"../".repeat(t):"./"}),ct=g(()=>new URL(Oe(),window.location.href).href),nt="https://amadeusitgroup.github.io/AgnosUI/latest/";g(()=>{const t=N(K).url.href,e=new URL(Oe(),t).href;return t.replace(e,nt)});const at=g(()=>N(K).params.framework??"angular"),rt=/^\/\[framework\]\/components\/[^/]*\/([^/]*)/,lt=g(()=>{const t=rt.exec(N(K).route.id||"");return(t==null?void 0:t[1])||"examples"}),it=/^\/\[framework\]\//,ft=g(()=>(N(K).route.id||"").replace(it,"")),ht=tt();export{lt as a,Ee as b,z as c,g as d,ft as f,ht as i,Te as n,ct as p,st as r,at as s,ke as w};
