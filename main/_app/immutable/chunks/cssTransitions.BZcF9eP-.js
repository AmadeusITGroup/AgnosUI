import{K as Y,aI as U,g as Z,m as nn,b as en,ax as tn,a6 as sn}from"./runtime.D1XQRsYU.js";import{g as on}from"./entry.CIyL12o3.js";import{I as rn,n as g,j as an,k as ln,f as y,l as un,w as L,g as cn,m as dn,o as j,q as fn,t as mn,u as pn}from"./stores.BEFeIFSg.js";import{p as M,a as K,c as bn}from"./logo-typescript.1lNnFLCC.js";function wn(n){Y(n,n.v+1)}function yn(n){let e=0,o=sn(0),i;return()=>{U()&&(Z(o),nn(()=>(e===0&&(i=en(()=>n(()=>wn(o)))),e+=1,()=>{tn().then(()=>{e-=1,e===0&&(i?.(),i=void 0)})})))}}function On(n){let e;const o=yn(a=>{let d=!1;const p=n.subscribe(f=>{e=f,d&&a()});return d=!0,p});function i(){return U()?(o(),e):on(n)}return"set"in n?{get current(){return i()},set current(a){n.set(a)}}:{get current(){return i()}}}function W(n){return n===!0||n===!1}function gn(n){return typeof n=="function"}function hn(n){return typeof n=="string"}const $n=n=>e=>e===null||n(e);function vn(n){return e=>n.includes(e)}const h=n=>e=>n(e)?e:rn,k={normalizeValue:h(W)},Sn={normalizeValue:h($n(W))},kn={normalizeValue:h(hn)},C={normalizeValue:h(gn),equal:Object.is};function Bn(n){return{normalizeValue:h(vn(n))}}const R=new Promise(g),Vn=(n,e)=>{n.style.display=e==="show"?"":"none"},Dn={animated:!0,animatedOnInit:!1,initDone:null,visible:!0,transition:Vn,onShown:g,onHidden:g,onVisibleChange:g},Cn={animated:k,animatedOnInit:k,visible:k,transition:C,onShown:C,onHidden:C,onVisibleChange:C,initDone:Sn},Hn=n=>{const[{animated$:e,initDone$:o,visible$:i,transition$:a,onShown$:d,onHidden$:p,onVisibleChange$:f,animatedOnInit$:$},v]=an(Dn,n,Cn),{element$:E,directive:G}=ln(),A=y(()=>!!E()),S=un(f,[i],([t])=>t),b=L(null),B=()=>{let t;return b.update(s=>(s?.abort.abort(),t=s?.context,null)),t},J=(t,s,c,l)=>j(()=>{const V=new AbortController,u=V.signal,m=B()??{},{promise:w,resolve:O}=M(),D={abort:V,animated:s,visible:t,context:m,element:c,transitionFn:l,promise:w};return b.set(D),O((async()=>{var F;try{await l(c,t?"show":"hide",s,u,m)}finally{u.aborted?await R:(b.set(null),(F=(t?d:p)())==null||F())}})()),D}),H=y(()=>o()?e():$()),I=L(null);let N,_=i(),r=null;const z=cn([S,E,H,I,a,b],([t,s,c,l,V,u])=>{const m=N!==s;N=s;const w=_!==t;if(_=t,s){o()==null&&o.set(!0);const O=l!=null&&u&&u.animated!=l;if(m||w||O){(w||l!=null)&&(r=null);const D=l??r?.animated??(m&&!t?!1:c);u=J(t,D,s,V),r?.resolve(u.promise),r=null}}else m&&(B(),u=null),(w||t&&r?.animated!==l)&&(r=t&&l!=null?{animated:l,...M()}:null);return r?.promise??u?.promise});let q={};const P=async(t=!i(),s=H())=>{const c={};q=c;try{await j(()=>{try{return I.set(s),i.set(t),z()}finally{I.set(null)}})}finally{q!==c&&await R}},x=y(()=>(A()&&z(),!!b())),Q=y(()=>!x()&&S()&&A()),T=y(()=>!x()&&!S()),X=fn(G,mn(z));return{...dn({visible$:S,element$:E,elementPresent$:A,transitioning$:x,shown$:Q,hidden$:T}),patch:v,directives:{directive:X},api:{show:P.bind(null,!0),hide:P.bind(null,!1),toggle:P}}};function En(n){return window.getComputedStyle(n).transitionProperty!=="none"}function An(n){const{transitionDelay:e,transitionDuration:o}=window.getComputedStyle(n),i=parseFloat(e),a=parseFloat(o);return(i+a)*1e3}const Nn=n=>async(e,o,i,a,d)=>{const p=n(e,o,i,d)??g;if(pn(e)&&i&&En(e)){const f=K(a,"abort"),$=K(e,"transitionend"),v=bn(An(e));await Promise.race([f.promise,$.promise,v.promise]),f.unsubscribe(),$.unsubscribe(),v.unsubscribe()}a.aborted||p()};export{Hn as a,C as b,Nn as c,kn as d,Bn as e,On as f,k as t};
