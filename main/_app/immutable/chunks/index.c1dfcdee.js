const e='"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const a=require("react/jsx-runtime"),d=require("@agnos-ui/core"),l=require("react"),k=require("@amadeus-it-group/tansu"),I=require("react-dom"),$=require("react-dom/client"),C=require("classnames");function B(e){const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const s in e)if(s!=="default"){const n=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(t,s,n.get?n:{enumerable:!0,get:()=>e[s]})}}return t.default=e,Object.freeze(t)}const w=B(l),D=new WeakMap,E=e=>s=>a.jsx(a.Fragment,{children:e(s)}),q=e=>{let t=D.get(e);return t||(t=E(e),D.set(e,t)),t},O=e=>e.prototype instanceof l.Component,c=({slotContent:e,props:t})=>{if(typeof e=="function"){const n=O(e)?e:q(e);return a.jsx(n,{...t})}return a.jsx(a.Fragment,{children:e})};function S(e,t={},...s){const n=l.useRef(void 0);n.current||(n.current=e(...s),n.current.patch(t));const r=n.current,i=l.useRef(t);return l.useEffect(()=>{const u=d.findChangedProperties(i.current,t);i.current=t,u&&r.patch(u)},[t]),[R(r.state$),r]}function R(e){const[t,s]=l.useState(()=>e());return l.useEffect(()=>e.subscribe(n=>{s(()=>n)}),[e]),t}function x(e,t){var i,o;const s=l.useRef(),n=l.useRef(),r=l.useCallback(u=>{var p,f;(f=(p=s.current)==null?void 0:p.destroy)==null||f.call(p),s.current=void 0,u&&(s.current=e(u,n.current))},[e]);return n.current=t,(o=(i=s.current)==null?void 0:i.update)==null||o.call(i,t),r}const v=l.createContext(void 0),T=(e,t)=>!d.findChangedProperties(e,t),A=e=>{const t=l.useRef();return t.current||(t.current=k.writable({...e},{equal:T})),l.useEffect(()=>{t.current.set({...e})},[e]),l.useMemo(()=>k.asReadable(t.current),[t.current])},H=(e,t)=>{const s=l.useContext(v),n=A(t);return l.useMemo(()=>k.computed(()=>({...n(),...e?s==null?void 0:s()[e]:void 0})),[s])},b=(e,t,s,n)=>S(e,t,H(s,n)),z=e=>a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"alert-body",children:a.jsx(c,{slotContent:e.state.slotDefault,props:e})}),e.state.dismissible?a.jsx("button",{type:"button",className:"btn-close ms-auto",onClick:e.widget.api.close,"aria-label":e.state.ariaCloseButtonLabel}):null]}),K={slotStructure:z},_=l.forwardRef(function(t,s){const[n,r]=b(d.createAlert,t,"alert",{...K,slotDefault:t.children}),i=x(r.directives.transitionDirective);l.useImperativeHandle(s,()=>r.api,[]);const o={state:n,widget:r};return a.jsx(a.Fragment,{children:n.hidden?null:a.jsx("div",{className:`au-alert d-flex alert w-100 alert-${n.type}`,role:"alert",ref:i,children:a.jsx(c,{slotContent:n.slotStructure,props:o})})})});function V(e){const[{tabindex:t,maxRating:s,visibleRating:n,ariaValueText:r,readonly:i,disabled:o,isInteractive:u,stars:p,className:f,slotStar:N,ariaLabel:y,ariaLabelledBy:M},h]=b(d.createRating,e,"rating"),W={cursor:u?"pointer":"default"};return a.jsx("div",{role:"slider",className:`d-inline-flex au-rating ${f}`,tabIndex:t,"aria-valuemin":0,"aria-valuemax":s,"aria-valuenow":n,"aria-valuetext":r,"aria-readonly":i||void 0,"aria-disabled":o||void 0,"aria-label":y||void 0,"aria-labelledby":M||void 0,onKeyDown:g=>h.actions.handleKey(g),onMouseLeave:h.actions.leave,children:p.map(g=>a.jsxs(l.Fragment,{children:[a.jsxs("span",{className:"visually-hidden",children:["(",g.index<n?"*":" ",")"]}),a.jsx("span",{className:"au-rating-star",style:W,onMouseEnter:()=>h.actions.hover(g.index+1),onClick:()=>h.actions.click(g.index+1),children:a.jsx(c,{slotContent:N,props:g})})]},g.index))})}const G={backgroundColor:"transparent"};function P(e){e.preventDefault()}function J({api:e,selected:t}){const s=[];for(const n of t)s.push(a.jsxs("div",{className:"badge rounded-pill text-bg-primary d-inline-flex align-items-center m-1",onMouseDown:P,children:[a.jsx("div",{className:"me-1",children:""+n}),a.jsx("span",{role:"button",tabIndex:-1,"aria-label":"Close",onClick:()=>e.api.unselect(n),children:"x"})]}));return s.length?a.jsx("div",{className:"input-group-text",style:G,children:s}):null}function Q({visible:e,highlighted:t}){return a.jsx(a.Fragment,{children:e.map(s=>{const n=`au-select-checkbox-${s.id}`,r=["dropdown-item position-relative"];return s===t&&r.push("bg-light"),a.jsx("li",{className:r.join(" "),children:a.jsxs("div",{className:"form-check",children:[a.jsx("input",{id:n,tabIndex:-1,type:"checkbox",className:"form-check-input",checked:s.selected,onChange:s.toggle}),a.jsx("label",{htmlFor:n,className:"form-check-label stretched-link",onClick:i=>{s.toggle(),i.preventDefault()},children:""+s.item})]})},s.id)})})}function U(e){const[t,s]=b(d.createSelect,e,"select"),{visible:n,selected:r,highlighted:i,filterText:o,opened:u,className:p}=t,{directives:{hasFocusDirective:f}}=s,N=x(f),y=x(f);return a.jsxs("div",{className:`au-select dropdown input-group input-group-sm mb-3 d-block ${p}`,children:[a.jsxs("div",{ref:N,role:"combobox",className:"input-group","aria-haspopup":"listbox","aria-expanded":"true",children:[a.jsx(J,{api:s,selected:r}),a.jsx("input",{className:"form-control",type:"text",value:o,"aria-autocomplete":"list",autoCorrect:"off",autoCapitalize:"none",autoComplete:"off",onKeyDown:s.actions.onInputKeydown,onInput:s.actions.onInput})]}),u&&n.length>0&&a.jsx("ul",{ref:y,className:"dropdown-menu show w-100",style:{position:"absolute",inset:"0px auto auto 0px",margin:"0px",transform:"translate3d(0px, 45px, 0px)"},"data-popper-placement":"bottom-start",onMouseDown:P,children:a.jsx(Q,{visible:n,highlighted:i})})]})}const X=({children:e,container:t})=>t?I.createPortal(e,t):a.jsx(a.Fragment,{children:e}),Y=e=>a.jsxs(a.Fragment,{children:[a.jsx("h5",{className:"modal-title",children:a.jsx(c,{slotContent:e.state.slotTitle,props:e})}),e.state.closeButton?a.jsx("button",{type:"button",className:"btn-close","aria-label":e.state.ariaCloseButtonLabel,onClick:e.widget.actions.closeButtonClick}):null]}),Z=e=>a.jsxs(a.Fragment,{children:[e.state.slotTitle?a.jsx("div",{className:"modal-header",children:a.jsx(c,{slotContent:e.state.slotHeader,props:e})}):null,a.jsx("div",{className:"modal-body",children:a.jsx(c,{slotContent:e.state.slotDefault,props:e})}),e.state.slotFooter?a.jsx("div",{className:"modal-footer",children:a.jsx(c,{slotContent:e.state.slotFooter,props:e})}):null]}),ee={slotHeader:Y,slotStructure:Z},L=l.forwardRef(function(t,s){const[n,r]=b(d.createModal,t,"modal",{...ee,slotDefault:t.children});l.useImperativeHandle(s,()=>r.api,[]);const i=x(r.directives.backdropDirective),o=x(r.directives.modalDirective),u={state:n,widget:d.toSlotContextWidget(r)};return a.jsx(a.Fragment,{children:a.jsxs(X,{container:n.container,children:[n.backdropHidden?null:a.jsx("div",{className:`modal-backdrop ${n.backdropClass}`,ref:i}),n.hidden?null:a.jsx("div",{className:`modal d-block ${n.modalClass}`,ref:o,onClick:r.actions.modalClick,children:a.jsx("div",{className:"modal-dialog",children:a.jsx("div",{className:"modal-content",children:a.jsx(c,{slotContent:n.slotStructure,props:u})})})})]})})}),te=async e=>{const t=$.createRoot(document.createElement("div"));try{return await(await new Promise(n=>{t.render(a.jsx(L,{...e,ref:n}))})).open()}finally{t.unmount()}},j=w.forwardRef(({disabled:e,active:t,ariaLabel:s,activeLabel:n,className:r,children:i,...o},u)=>a.jsx("li",{ref:u,"aria-current":t?"page":void 0,className:C("page-item",{active:t,disabled:e}),children:a.jsxs("a",{className:C("page-link",r),"aria-label":s||void 0,...o,href:"#",tabIndex:e?-1:void 0,"aria-disabled":e||void 0,children:[i,t&&n&&a.jsx("span",{className:"visually-hidden",children:n})]})}));j.displayName="PageItem";const m=w.forwardRef(({children:e,...t},s)=>a.jsx(j,{...t,ref:s,children:a.jsx("span",{"aria-hidden":"true",children:e})}));m.displayName="NavButton";function F(e){const{widget:t,state:s}=e,n=[];for(let r=0;r<s.pages.length;r++)t.api.isEllipsis(s.pages[r])?n.push(a.jsx(m,{disabled:!0,tabIndex:-1,className:"au-ellipsis",children:a.jsx(c,{slotContent:s.slotEllipsis,props:e})},"Ellipsis"+r)):n.push(a.jsx(j,{className:"au-page",disabled:s.disabled,active:s.pages[r]===s.page,onClick:i=>{t.actions.select(s.pages[r]),i.preventDefault()},ariaLabel:s.pagesLabel[r],activeLabel:s.activeLabel,children:a.jsx(c,{slotContent:s.slotNumberLabel,props:{...e,displayedPage:s.pages[r]}})},s.pages[r]));return n.length?a.jsx(a.Fragment,{children:n}):null}const ae={slotPages:F};function se(e){const[t,s]=b(d.createPagination,e,"pagination",ae),n={state:t,widget:d.toSlotContextWidget(s)},r=[],i=[];return t.boundaryLinks&&r.push(a.jsx(m,{className:"au-first",ariaLabel:t.ariaFirstLabel,onClick:o=>{s.actions.first(),o.preventDefault()},disabled:t.previousDisabled,children:a.jsx(c,{slotContent:t.slotFirst,props:n})},"first")),t.directionLinks&&r.push(a.jsx(m,{className:"au-previous",ariaLabel:t.ariaPreviousLabel,onClick:o=>{s.actions.previous(),o.preventDefault()},disabled:t.previousDisabled,children:a.jsx(c,{slotContent:t.slotPrevious,props:n})},"prev")),t.directionLinks&&i.push(a.jsx(m,{className:"au-next",ariaLabel:t.ariaNextLabel,onClick:o=>{s.actions.next(),o.preventDefault()},disabled:t.nextDisabled,children:a.jsx(c,{slotContent:t.slotNext,props:n})},"next")),t.boundaryLinks&&i.push(a.jsx(m,{className:"au-last",ariaLabel:t.ariaLastLabel,onClick:o=>{s.actions.last(),o.preventDefault()},disabled:t.nextDisabled,children:a.jsx(c,{slotContent:t.slotLast,props:n})},"last")),a.jsxs("nav",{"aria-label":t.ariaLabel,children:[a.jsxs("ul",{className:C("au-pagination","pagination",t.size?`pagination-${t.size}`:"",t.className),children:[r,a.jsx(c,{slotContent:t.slotPages,props:n}),i]}),a.jsx("div",{"aria-live":"polite",className:"visually-hidden",children:t.page&&`Current page is ${t.page}`})]})}const ne=({children:e,adaptParentConfig:t,...s})=>{const n=l.useContext(v);let r=!1;const i=l.useMemo(()=>{const o=d.createWidgetsConfig(n,t);return o.set(s),r=!0,o},[n,t]);return l.useEffect(()=>{r||i.set(s)},[s]),a.jsx(v.Provider,{value:i,children:e})};exports.Alert=_;exports.DefaultPages=F;exports.Modal=L;exports.NavButton=m;exports.PageItem=j;exports.Pagination=se;exports.Rating=V;exports.Select=U;exports.Slot=c;exports.WidgetsDefaultConfig=ne;exports.openModal=te;exports.useDirective=x;exports.useObservable=R;exports.useWidget=S;exports.useWidgetWithConfig=b;exports.widgetsConfigContext=v;\n';export{e as default};
