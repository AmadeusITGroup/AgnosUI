import{p as M,k as j,T as f,g as _,s as L,R as N,q as R,b as u,c as x,S as z,a as G,t as w,j as F,e as c,f as J,l as K,U as S,n as h}from"./AppCommon-BIOVedX1.js";import{a as A}from"./actions-7pTMrPq9.js";import{S as O}from"./Select-V6jlzSdb.js";import{c as Q}from"./directive-CKEccryv-SFhvDE5z.js";import"./class-DOHDOVt-.js";import"./Slot-DPwmoMlC.js";import"./snippet-C4nDYEhK.js";import"./config-CbIxucvi.js";import"./config-Blnno3Fd.js";import"./index-client-BPAxIsiR.js";import"./floatingUI-BK1h6m1M.js";import"./promise-CY2U8bTP-BPduTXX-.js";import"./focustrack-BZSe2l9H.js";import"./navManager-WgKhPICH.js";import"./extendWidget-BURdNs7l.js";function V(m,o){let s;return(...b)=>{s&&clearTimeout(s),s=setTimeout(()=>{m(...b)},o)}}const W=m=>{let o;return(...s)=>(o==null||o.abort(),o=new AbortController,m(o.signal,...s))};var X=w('<a target="_blank" rel="noreferrer"> </a> <button></button>',1),Y=w('<label><div class="fw-bold"> </div> <div class="text-wrap wiki-desc"> </div></label>'),Z=w('<a class="pe-2"> </a>'),$=w('<div class="custom-select my-auto mb-3"><!> <span class="fw-bold">Selection:</span> <!></div>');function vt(m,o){M(o,!0);const s="https://en.wikipedia.org/?curid=";let b=j(f([])),T=j(f([]));const D=e=>"page-"+e.pageid;function H(e){const i=document.createElement("div");return i.innerHTML=e,i.innerText}const I=V(W(async(e,i)=>{var r;const t=await(await fetch("https://en.wikipedia.org/w/api.php?action=query&list=search&prop=info&inprop=url&utf8=&format=json&origin=*&srlimit=5&srsearch="+i,{signal:e})).json();F(b,f(((r=t.query)==null?void 0:r.search.map(n=>({...n,snippet:H(n.snippet)})))??[]))}),200),P=new Intl.Collator("en").compare;function U(e){F(T,f((e||[]).sort((i,a)=>P(i.title,a.title))))}const B=e=>e.querySelectorAll("a,button,input");var k=$(),q=c(k);O(q,{get items(){return _(b)},itemIdFn:D,onFilterTextChange:I,onSelectedChange:U,navSelector:B,badgeClassName:"badge text-bg-light d-flex align-items-center",badgeLabel:(a,t)=>{let r=()=>t==null?void 0:t().itemContext,n=()=>t==null?void 0:t().directives;var l=X(),p=J(l),C=c(p),d=L(p,2);let v;x(()=>v=K(d,v,{type:"button","aria-label":"Close"})),x(()=>{S(p,"href",`${s}${r().item.pageid}`),h(C,r().item.title)}),A(d,(g,y)=>Q(g,y),()=>"btn-close ms-1 wiki-btn-close"),A(d,(g,y)=>n().badgeCloseButtonDirective(g,y),r),u(a,l)},itemLabel:(a,t)=>{let r=()=>t==null?void 0:t().itemContext.id,n=()=>t==null?void 0:t().itemContext.item;var l=Y(),p=c(l),C=c(p),d=L(p,2),v=c(d);x(()=>{S(l,"for",""+r()),h(C,n().title),h(v,n().snippet)}),u(a,l)},$$slots:{badgeLabel:!0,itemLabel:!0}});var E=L(q,4);N(E,17,()=>_(T),z,(e,i)=>{var a=Z(),t=c(a);x(()=>{S(a,"href",`${s}${_(i).pageid}`),h(t,_(i).title)}),u(e,a)},e=>{var i=R("none");u(e,i)}),u(m,k),G()}export{vt as default};
