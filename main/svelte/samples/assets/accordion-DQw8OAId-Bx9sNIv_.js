import{w as T,m as F,n as z,s as j,i as M,t as Y}from"./stores-CDni8kz3.js";import{c as Z}from"./baseTransitions-j0mHgCaG.js";import{Z as n,a1 as k,$ as W,Y as I}from"./AppCommon-oTLQLI58.js";import{n as C,r as _,m as O,a as p,g as q}from"./dom-BPD8lUxd-gAwdG87-.js";import{t as s,b as g,c as f,f as E}from"./writables-DYGjj5T3-yk8a-m8_.js";import{c as G}from"./widget-DiMgAHf5.js";function J(m,t,r){let l;return t.length==2?(r=r??t[0],l=t.find(c=>c!==r)):t.length>2&&(l=t[0]),l&&m.forEach(c=>{c.stores.id$()!==l&&c.stores.visible$()&&c.patch({visible:!1})}),m}function V(m,t){return m.find(r=>r.stores.id$()===t)}const o={closeOthers:!1,onItemShown:C,onItemHidden:C,className:"",itemDestroyOnHide:!0,itemAnimated:!0,itemTransition:C,itemHeadingLevel:2,itemClassName:"",itemHeaderClassName:"",itemButtonClassName:"",itemBodyContainerClassName:"",itemBodyClassName:""},S={id:"",destroyOnHide:o.itemDestroyOnHide,disabled:!1,visible:!1,animated:o.itemAnimated,transition:o.itemTransition,onShown:C,onHidden:C,onVisibleChange:C,className:o.itemClassName,headerClassName:o.itemHeaderClassName,buttonClassName:o.itemButtonClassName,bodyContainerClassName:o.itemBodyContainerClassName,bodyClassName:o.itemBodyClassName,headingLevel:o.itemHeadingLevel},K=Object.keys(S);function ne(){return{...o}}const Q={closeOthers:f,onItemShown:g,onItemHidden:g,className:s,itemDestroyOnHide:f,itemAnimated:f,itemTransition:g,itemClassName:s,itemHeaderClassName:s,itemButtonClassName:s,itemBodyContainerClassName:s,itemBodyClassName:s,itemHeadingLevel:E([1,2,3,4,5,6])},R={id:s,destroyOnHide:f,disabled:f,visible:f,animated:f,transition:g,onShown:g,onHidden:g,onVisibleChange:g,className:s,headerClassName:s,buttonClassName:s,bodyContainerClassName:s,bodyClassName:s,headingLevel:E([1,2,3,4,5,6])};function U(m){const[{bodyClassName$:t,buttonClassName$:r,bodyContainerClassName$:l,headerClassName$:c,animated$:u,transition$:B,destroyOnHide$:x,onShown$:h,onHidden$:y,onVisibleChange$:N,visible$:$,id$:a,disabled$:b,...v},L]=T(S,m,R),H=k(!1),e=M(a),i=Z({props:{transition:B,visible:$,onVisibleChange:N,animated:u,animatedOnInit:!1,initDone:H,onHidden:()=>{y()()},onShown:()=>{h()()}}}),w=n(()=>!x()||!i.stores.hidden$()),D=p(()=>({attributes:{id:n(()=>`${e()}-toggle`),"aria-expanded":n(()=>`${$()}`),"aria-disabled":n(()=>`${b()}`),"aria-controls":n(()=>`${e()}-body-container`),disabled:b},classNames:{collapsed:n(()=>!$())},events:{click:()=>{b()||i.api.toggle()}}})),A=i.directives.directive,d=p(()=>({attributes:{id:n(()=>`${e()}-body-container`),class:l,"aria-labelledby":n(()=>`${e()}-toggle`),role:I("region")}}));return{...j({visible$:$,id$:e,shouldBeInDOM$:w,disabled$:b,bodyClassName$:t,buttonClassName$:r,bodyContainerClassName$:l,headerClassName$:c,...v}),patch:L,api:{initDone:()=>{H.set(!0)},collapse:i.api.hide,expand:i.api.show,toggle:i.api.toggle},directives:{toggleDirective:D,buttonDirective:O(D,p(()=>({attributes:{type:I("button"),class:r}}))),headerDirective:p(()=>({attributes:{class:c}})),bodyDirective:p(()=>({attributes:{class:t}})),transitionDirective:A,bodyContainerAttrsDirective:d,bodyContainerDirective:O(A,d),itemDirective:C}}}function X(m=U,t=K,r=o,l=Q){return G("accordion",c=>{const[u,B]=T(r,c,l),{closeOthers$:x,onItemShown$:h,onItemHidden$:y,className$:N}=u,$=Object.fromEntries(Object.entries(u).filter(e=>e[0].startsWith("item")).map(e=>[e[0].charAt(4).toLowerCase()+e[0].slice(5,-1),e[1]])),a=_(),b=n(()=>{const e=[];return a().forEach(i=>{i.stores.visible$()&&e.push(i.stores.id$())}),e}),v=k(b()[0]),L=n(()=>{x()&&(J(a(),b(),v()),v.set(b()[0]))}),H=n(()=>{L()});return{...j({itemWidgets$:a,className$:N}),patch:B,api:{expand:async e=>{await V(a(),e)?.api.expand()},collapse:async e=>{await V(a(),e)?.api.collapse()},toggle:async e=>{await V(a(),e)?.api.toggle()},expandAll:async()=>{await Promise.all(a().map(e=>e.api.expand()))},collapseAll:async()=>{await Promise.all(a().map(e=>e.api.collapse()))},registerItem:e=>{const i=t,w=F(i,z(i,e?.config),$),[{onHidden$:D,onShown$:A}]=T({onHidden:S.onHidden,onShown:S.onShown},{config:w,props:e?.props}),d=m({config:w,props:{...e?.props,onHidden:W(I(()=>{y()(d.stores.id$()),D()?.()}),P=>{y.set(P)}),onShown:W(I(()=>{h()(d.stores.id$()),A()?.()}),P=>{h.set(P)})}});return d.directives.itemDirective=O(()=>({destroy:a.register(d)}),p(()=>({attributes:{class:d.stores.className$,id:d.stores.id$}}))),d}},directives:{accordionDirective:O(q(H),p(()=>({attributes:{class:N},classNames:{"au-accordion":Y}})))}}})}const re=X();export{re as a,U as c,X as f,ne as g};
