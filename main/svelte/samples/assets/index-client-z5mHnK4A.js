import{ak as c,g as o,al as b,a9 as l,a2 as g,am as a,ac as m,an as d}from"./AppCommon-C3njszSs.js";function k(r){let e=0,n=b(0),t;return()=>{c()&&(o(n),l(()=>(e===0&&(t=g(()=>r(()=>a(n)))),e+=1,()=>{m(()=>{e-=1,e===0&&(t?.(),t=void 0,a(n))})})))}}function p(r){let e;const n=k(u=>{let s=!1;const i=r.subscribe(f=>{e=f,s&&u()});return s=!0,i});function t(){return c()?(n(),e):d(r)}return"set"in r?{get current(){return t()},set current(u){r.set(u)}}:{get current(){return t()}}}export{k as c,p as f};
