import{a0 as v,a8 as l,I as u,aa as n}from"./AppCommon-CCp24fsy.js";import{n as b}from"./func-DR0n-ShK-fOTgS_tI.js";const p=(e,s)=>a=>{let r=!0,t;const i=s.subscribe(o=>{var c;r?(r=!1,t=e(a,o)):(c=t==null?void 0:t.update)==null||c.call(t,o)});return{destroy(){var o;(o=t==null?void 0:t.destroy)==null||o.call(t),i()}}},f=v(void 0),D=e=>p(e,f),$=(e,s=!0)=>()=>{const a=e.subscribe(b);return{destroy:async()=>{s&&await 0,a()}}},h=e=>(s,a)=>(e(a),{update:e}),d={equal:Object.is},y=()=>{const e=u([],d);return l(e,{register:s=>{let a=!1;return e.update(r=>[...r,s]),()=>{a||(a=!0,e.update(r=>{const t=r.indexOf(s);if(t>-1){const i=[...r];return i.splice(t,1),i}return r}))}}})},A=()=>{const e=y();return{elements$:l(e),directive:s=>({destroy:e.register(s)})}},_=()=>{const e=u(null,d);return{element$:l(e),directive:s=>{let a=!1;return e.update(r=>r?(console.error("The directive cannot be used on multiple elements.",r,s),r):(a=!0,s)),a?{destroy(){e.update(r=>s===r?null:r)}}:void 0}}},x=(...e)=>(s,a)=>{const r=n(()=>e.map(t=>t(s,a)));return{update(t){n(()=>r.forEach(i=>{var o;return(o=i==null?void 0:i.update)==null?void 0:o.call(i,t)}))},destroy(){n(()=>r.reverse().forEach(t=>{var i;return(i=t==null?void 0:t.destroy)==null?void 0:i.call(t)}))}}};export{p as a,D as b,A as c,$ as d,_ as e,h as f,x as m,y as r};
