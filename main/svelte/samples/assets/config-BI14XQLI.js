import{ai as u,ac as i,ad as y,K as d,J as W}from"./AppCommon-yQ9GDd-E.js";import{i as g,d as h,f as p}from"./directive-CKEccryv-CIaX9Ntp.js";const f=(t,e,o=1/0)=>{if(e!==void 0)if(typeof e=="object"&&e&&o>=1){t||(t={});for(const n of Object.keys(e))Object.prototype.hasOwnProperty.call(e,n)&&(n==="__proto__"||n==="constructor"||(t[n]=f(t[n],e[n],o-1)))}else return e;return t},b=(t,e=g)=>{const o=u({}),n=e===g?t:i(()=>e(f({},t==null?void 0:t(),2)));return y(i(()=>f(f({},n==null?void 0:n(),2),o(),2)),{...o,own$:o,adaptedParent$:n,parent$:t})};function C(t,e){return o=>{const n=p(t,o);t=o,n&&e(n)}}const m=(t,e)=>e?(...o)=>{t(...o),e(...o)}:t,F=(t,e)=>{const o=u(e,{equal:Object.is});return y(i(()=>m(t,o())),{set:o.set,update:o.update})},j=({factory:t,defaultConfig:e,widgetConfig:o,events:n,props:r})=>{const c=h(e),a={...r};if(n)for(const s of Object.keys(n))a[s]=F(n[s],r[s]);const l=t({config:i(()=>({...c(),...o==null?void 0:o()})),props:a});return{...l,patchChangedProps:C(r,l.patch)}},x=(t=Symbol("widgetsConfig"))=>{const e=r=>{const c=d(t),a=b(c,r);return W(t,a),a},o=r=>{const c=d(t);return i(()=>c==null?void 0:c()[r])};return{widgetsDefaultConfigKey:t,createWidgetsDefaultConfig:e,getContextWidgetConfig:o,callWidgetFactory:({factory:r,widgetName:c=null,defaultConfig:a={},events:l,props:s})=>j({factory:r,defaultConfig:a,widgetConfig:c?o(c):null,events:l,props:s})}},{widgetsDefaultConfigKey:_,createWidgetsDefaultConfig:k,getContextWidgetConfig:v,callWidgetFactory:S}=x();export{S as c,x as w};
