import{G as L,H as Ye,ab as Ne,aa as ye,S as xe,i as et,s as tt,T as me,l as M,e as W,k as De,a as P,r as R,b as J,v as se,C as Te,w as I,D as le,Z as je,$ as Ge,E as ne,t as $,d as C,y as z,z as Ie,f as Q,B as Fe,P as st,h as A,O as Ae,c as j,m as G,g as Z,u as Me,R as pe,q as Ze,F as de,K as V,L as X,M as Y,N as y}from"./AppCommon-C2Pl698k.js";import{c as lt,o as nt,a as at,b as ot}from"./floatingUI-CrDoLay5.js";import{c as it}from"./focustrack-CYyPr-Lu.js";import{c as rt}from"./navManager-B0EFuTTP.js";import{w as ct,g as ut,D as ft,B as gt,s as _t,a as mt,k as pt,e as Le,b as _e,c as he}from"./directive-DCYlDznf-CQ9L4E_Y.js";import{c as dt,S as Je}from"./Slot-KkgeXnfN.js";const ht={id:void 0,ariaLabel:"Select",open:!1,disabled:!1,items:[],filterText:"",loading:!1,selected:[],navSelector:s=>s.querySelectorAll(".au-select-badge,input"),itemIdFn:s=>""+s,onOpenChange:Le,onFilterTextChange:Le,onSelectedChange:Le,allowedPlacements:["bottom-start","top-start","bottom-end","top-end"],className:"",menuClassName:"",menuItemClassName:"",badgeClassName:"",slotBadgeLabel:({itemContext:s})=>s.item,slotItem:({itemContext:s})=>s.item};function bt(s){const[{id$:e,open$:n,filterText$:t,items$:l,itemIdFn$:o,onOpenChange$:p,onFilterTextChange$:c,onSelectedChange$:_,allowedPlacements$:f,navSelector$:r,className$:a,badgeClassName$:i,ariaLabel$:w,menuClassName$:O,...B},v]=ct(ht,s),{selected$:F}=B,D=L(()=>e()??ut()),m=ft(t,c),{hasFocus$:h,directive:S}=it(),N=gt(p,[n,h],([u,g])=>u&&g),U=L(()=>{const u=new Map,g=o();for(const b of F()){const T=g(b);u.set(T,{item:b,id:g(b),selected:!0})}return u}),ae=L(()=>[...U().values()]),E=function(){const u=Ye(0);return Ne(u,g=>{const{length:b}=H();g!=null&&(b?g<0?g=b-1:g>=b&&(g=0):g=void 0),u.set(g)})}(),x=L(()=>{const u=new Map;if(N()){const g=U(),b=o();for(const T of l()){const K=b(T);u.set(K,{item:T,id:K,selected:g.has(K)})}}return u}),H=L(()=>N()?[...x().values()]:[]),ee=L(()=>{const u=H(),g=E();return u.length&&g!=null?u[g]:void 0}),{directives:{floatingDirective:oe,referenceDirective:ie},stores:{placement$:te}}=lt({props:{computePositionOptions:Ne(L(()=>({middleware:[nt(5),at({allowedPlacements:f()}),ot()]})))}}),{directive:re,refreshElements:be,focusFirst:ve,focusLast:we,focusLeft:ce,focusRight:ue}=rt(),$e=L(()=>({keys:{Home:ve,End:we,ArrowLeft:ce,ArrowRight:ue},selector:r()})),fe=(u,g)=>{const b=u.target;be(),k.api.unselect(g),b instanceof HTMLElement&&setTimeout(()=>{ce({event:u,referenceElement:b})||ue({event:u,referenceElement:b})}),u.preventDefault()},Ce=_e(()=>({attributes:{role:"combobox","aria-haspopup":"listbox","aria-expanded":L(()=>`${N()}`),"aria-controls":L(()=>`${D()}-menu`)}})),ke=_e(u=>({attributes:{tabindex:-1,class:i},classNames:{"au-select-badge":!0},events:{keydown:g=>k.actions.onBadgeKeydown(g,u().item)}})),d=_e(()=>({attributes:{role:"listbox",id:L(()=>`${D()}-menu`),"data-popper-placement":te,class:O},events:{mousedown:u=>u.preventDefault()}})),Qe=_e(u=>({attributes:{role:"option","aria-selected":L(()=>`${u().selected}`),style:"cursor: pointer"},classNames:{"au-select-item":!0,selected:L(()=>u().selected)},events:{click:()=>k.api.toggleItem(u().item)}})),k={..._t({id$:D,visibleItems$:H,highlighted$:ee,open$:N,selectedContexts$:ae,filterText$:m,placement$:te,className$:a,badgeClassName$:i,ariaLabel$:w,menuClassName$:O,...B}),patch:v,api:{clear(){F.set([])},select(u){k.api.toggleItem(u,!0)},unselect(u){k.api.toggleItem(u,!1)},toggleItem(u,g){const b=o(),T=b(u),ge=U().has(T);g==null&&(g=!ge),!(g&&!x().has(T)||!g&&!ge)&&F.update(q=>{var Se;if(q=[...q],g&&!ge)q.push(u);else if(!g&&ge){const Ve=q.findIndex(Xe=>b(Xe)===T);q.splice(Ve,1)}return(Se=_())==null||Se(q),q})},clearText(){},highlight(u){const g=H().findIndex(b=>b.item===u);E.set(g===-1?void 0:g)},highlightFirst(){E.set(0)},highlightPrevious(){E.update(u=>u!=null?u-1:-1)},highlightNext(){E.update(u=>u!=null?u+1:1/0)},highlightLast(){E.set(-1)},open:()=>k.api.toggle(!0),close:()=>k.api.toggle(!1),toggle(u){N.update(g=>u??!g)}},directives:{hasFocusDirective:S,floatingDirective:oe,referenceDirective:ie,inputContainerDirective:mt(pt(re,$e),Ce),badgeAttributesDirective:ke,menuAttributesDirective:d,itemAttributesDirective:Qe},actions:{onInput({target:u}){const g=u.value;ye(()=>{N.set(g!=null&&g!==""),m.set(g)})},onRemoveBadgeClick(u,g){fe(u,g)},onInputKeydown(u){const{ctrlKey:g,key:b}=u;let T=!0;switch(b){case"ArrowDown":{N()?g?k.api.highlightLast():k.api.highlightNext():(k.api.open(),k.api.highlightFirst());break}case"ArrowUp":g?k.api.highlightFirst():k.api.highlightPrevious();break;case"Enter":{const K=ee();K&&k.api.toggleItem(K.item);break}case"Escape":N.set(!1);break;default:T=!1}T&&u.preventDefault()},onBadgeKeydown(u,g){let b=!1;switch(u.key){case"Backspace":case"Delete":{fe(u,g),b=!0;break}}b&&u.preventDefault()}}};return k}const vt=bt;function Pe(s,e,n){const t=s.slice();t[40]=e[n];const l=t[40]===t[9];return t[41]=l,t}const wt=s=>({itemContext:s[1]&512,state:s[1]&32768,widget:s[1]&1}),Be=s=>({itemContext:s[40],state:s[46],widget:s[31]}),$t=s=>({itemContext:s[1]&512,state:s[1]&32768,widget:s[1]&1}),Ee=s=>({itemContext:s[40],state:s[46],widget:s[31]}),Ct=s=>s[1]&8192,kt=s=>({}),Oe=s=>({...s[44]});function Ke(s,e,n){const t=s.slice();return t[40]=e[n],t}const Lt=s=>({itemContext:s[1]&512,state:s[1]&32768,widget:s[1]&1}),Re=s=>({itemContext:s[40],state:s[46],widget:s[31]}),Dt=s=>({itemContext:s[1]&512,state:s[1]&32768,widget:s[1]&1}),He=s=>({itemContext:s[40],state:s[46],widget:s[31]}),It=s=>s[1]&8192,Ft=s=>({}),qe=s=>({...s[44]});function St(s){let e;const n=s[36].badgeLabel,t=V(n,s,s[37],Re);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o[1]&33345)&&X(t,n,l,l[37],e?y(n,l[37],o,Lt):Y(l[37]),Re)},i(l){e||($(t,l),e=!0)},o(l){C(t,l),e=!1},d(l){t&&t.d(l)}}}function Nt(s){let e;const n=s[36].item,t=V(n,s,s[37],He);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o[1]&33345)&&X(t,n,l,l[37],e?y(n,l[37],o,Dt):Y(l[37]),He)},i(l){e||($(t,l),e=!0)},o(l){C(t,l),e=!1},d(l){t&&t.d(l)}}}function Tt(s){let e,n,t;const l=[s[44]];var o=s[45];function p(c,_){let f={$$slots:{item:[Nt,({itemContext:r,state:a,widget:i})=>({40:r,46:a,31:i}),({itemContext:r,state:a,widget:i})=>[0,(r?512:0)|(a?32768:0)|(i?1:0)]],badgeLabel:[St,({itemContext:r,state:a,widget:i})=>({40:r,46:a,31:i}),({itemContext:r,state:a,widget:i})=>[0,(r?512:0)|(a?32768:0)|(i?1:0)]]},$$scope:{ctx:c}};for(let r=0;r<l.length;r+=1)f=M(f,l[r]);return _!==void 0&&_[1]&8192&&(f=M(f,z(l,[de(c[44])]))),{props:f}}return o&&(e=pe(o,p(s))),{c(){e&&j(e.$$.fragment),n=Ze()},m(c,_){e&&G(e,c,_),J(c,n,_),t=!0},p(c,_){if(_[1]&16384&&o!==(o=c[45])){if(e){le();const f=e;C(f.$$.fragment,1,0,()=>{Z(f,1)}),ne()}o?(e=pe(o,p(c,_)),j(e.$$.fragment),$(e.$$.fragment,1),G(e,n.parentNode,n)):e=null}else if(o){const f=_[1]&8192?z(l,[de(c[44])]):{};_[1]&33345&&(f.$$scope={dirty:_,ctx:c}),e.$set(f)}},i(c){t||(e&&$(e.$$.fragment,c),t=!0)},o(c){e&&C(e.$$.fragment,c),t=!1},d(c){c&&Q(n),e&&Z(e,c)}}}function At(s){let e;const n=s[36].badgeLabel,t=V(n,s,s[37],qe);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o[1]&8256)&&X(t,n,l,l[37],It(o)||!e?Y(l[37]):y(n,l[37],o,Ft),qe)},i(l){e||($(t,l),e=!0)},o(l){C(t,l),e=!1},d(l){t&&t.d(l)}}}function ze(s,e){let n,t,l,o,p,c;t=new Je({props:{slotContent:e[2],props:{state:e[3],widget:e[31],itemContext:e[40]},$$slots:{slot:[At,({props:r})=>({44:r}),({props:r})=>[0,r?8192:0]],default:[Tt,({component:r,props:a})=>({45:r,44:a}),({component:r,props:a})=>[0,(r?16384:0)|(a?8192:0)]]},$$scope:{ctx:e}}});let _=[{}],f={};for(let r=0;r<_.length;r+=1)f=M(f,_[r]);return{key:s,first:null,c(){n=W("div"),j(t.$$.fragment),R(n,f),this.first=n},m(r,a){J(r,n,a),G(t,n,null),o=!0,p||(c=I(l=e[28].call(null,n,e[40])),p=!0)},p(r,a){e=r;const i={};a[0]&4&&(i.slotContent=e[2]),a[0]&10&&(i.props={state:e[3],widget:e[31],itemContext:e[40]}),a[1]&24640&&(i.$$scope={dirty:a,ctx:e}),t.$set(i),R(n,f=z(_,[a[0]&2&&{}])),l&&Ie(l.update)&&a[0]&2&&l.update.call(null,e[40])},i(r){o||($(t.$$.fragment,r),o=!0)},o(r){C(t.$$.fragment,r),o=!1},d(r){r&&Q(n),Z(t),p=!1,c()}}}function Ue(s){let e,n=[],t=new Map,l,o,p,c=me(s[8]);const _=a=>a[40].id;for(let a=0;a<c.length;a+=1){let i=Pe(s,c,a),w=_(i);t.set(w,n[a]=We(w,i))}let f=[{}],r={};for(let a=0;a<f.length;a+=1)r=M(r,f[a]);return{c(){e=W("ul");for(let a=0;a<n.length;a+=1)n[a].c();R(e,r)},m(a,i){J(a,e,i);for(let w=0;w<n.length;w+=1)n[w]&&n[w].m(e,null);l=!0,o||(p=[I(s[25].call(null,e)),I(s[24].call(null,e)),I(s[29].call(null,e)),I(he.call(null,e,"dropdown-menu show"))],o=!0)},p(a,i){i[0]&1073743624|i[1]&57921&&(c=me(a[8]),le(),n=je(n,i,_,1,a,c,t,e,Ge,We,null,Pe),ne())},i(a){if(!l){for(let i=0;i<c.length;i+=1)$(n[i]);l=!0}},o(a){for(let i=0;i<n.length;i+=1)C(n[i]);l=!1},d(a){a&&Q(e);for(let i=0;i<n.length;i+=1)n[i].d();o=!1,Fe(p)}}}function Mt(s){let e;const n=s[36].badgeLabel,t=V(n,s,s[37],Be);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o[1]&33345)&&X(t,n,l,l[37],e?y(n,l[37],o,wt):Y(l[37]),Be)},i(l){e||($(t,l),e=!0)},o(l){C(t,l),e=!1},d(l){t&&t.d(l)}}}function Pt(s){let e;const n=s[36].item,t=V(n,s,s[37],Ee);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o[1]&33345)&&X(t,n,l,l[37],e?y(n,l[37],o,$t):Y(l[37]),Ee)},i(l){e||($(t,l),e=!0)},o(l){C(t,l),e=!1},d(l){t&&t.d(l)}}}function Bt(s){let e,n,t;const l=[s[44]];var o=s[45];function p(c,_){let f={$$slots:{item:[Pt,({itemContext:r,state:a,widget:i})=>({40:r,46:a,31:i}),({itemContext:r,state:a,widget:i})=>[0,(r?512:0)|(a?32768:0)|(i?1:0)]],badgeLabel:[Mt,({itemContext:r,state:a,widget:i})=>({40:r,46:a,31:i}),({itemContext:r,state:a,widget:i})=>[0,(r?512:0)|(a?32768:0)|(i?1:0)]]},$$scope:{ctx:c}};for(let r=0;r<l.length;r+=1)f=M(f,l[r]);return _!==void 0&&_[1]&8192&&(f=M(f,z(l,[de(c[44])]))),{props:f}}return o&&(e=pe(o,p(s))),{c(){e&&j(e.$$.fragment),n=Ze()},m(c,_){e&&G(e,c,_),J(c,n,_),t=!0},p(c,_){if(_[1]&16384&&o!==(o=c[45])){if(e){le();const f=e;C(f.$$.fragment,1,0,()=>{Z(f,1)}),ne()}o?(e=pe(o,p(c,_)),j(e.$$.fragment),$(e.$$.fragment,1),G(e,n.parentNode,n)):e=null}else if(o){const f=_[1]&8192?z(l,[de(c[44])]):{};_[1]&33345&&(f.$$scope={dirty:_,ctx:c}),e.$set(f)}},i(c){t||(e&&$(e.$$.fragment,c),t=!0)},o(c){e&&C(e.$$.fragment,c),t=!1},d(c){c&&Q(n),e&&Z(e,c)}}}function Et(s){let e;const n=s[36].item,t=V(n,s,s[37],Oe);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o[1]&8256)&&X(t,n,l,l[37],Ct(o)||!e?Y(l[37]):y(n,l[37],o,kt),Oe)},i(l){e||($(t,l),e=!0)},o(l){C(t,l),e=!1},d(l){t&&t.d(l)}}}function We(s,e){let n,t,l,o,p,c,_;t=new Je({props:{slotContent:e[10],props:{state:e[3],widget:e[31],itemContext:e[40]},$$slots:{slot:[Et,({props:a})=>({44:a}),({props:a})=>[0,a?8192:0]],default:[Bt,({component:a,props:i})=>({45:a,44:i}),({component:a,props:i})=>[0,(a?16384:0)|(i?8192:0)]]},$$scope:{ctx:e}}});let f=[{}],r={};for(let a=0;a<f.length;a+=1)r=M(r,f[a]);return{key:s,first:null,c(){n=W("li"),j(t.$$.fragment),l=De(),R(n,r),Me(n,"text-bg-primary",e[41]),this.first=n},m(a,i){J(a,n,i),G(t,n,null),se(n,l),p=!0,c||(_=[I(he.call(null,n,"dropdown-item position-relative")),I(o=e[30].call(null,n,e[40]))],c=!0)},p(a,i){e=a;const w={};i[0]&1024&&(w.slotContent=e[10]),i[0]&264&&(w.props={state:e[3],widget:e[31],itemContext:e[40]}),i[1]&24640&&(w.$$scope={dirty:i,ctx:e}),t.$set(w),R(n,r=z(f,[i[0]&256&&{}])),o&&Ie(o.update)&&i[0]&256&&o.update.call(null,e[40]),Me(n,"text-bg-primary",e[41])},i(a){p||($(t.$$.fragment,a),p=!0)},o(a){C(t.$$.fragment,a),p=!1},d(a){a&&Q(n),Z(t),c=!1,Fe(_)}}}function Ot(s){let e,n,t=[],l=new Map,o,p,c,_,f,r,a,i=me(s[1]);const w=m=>m[40].id;for(let m=0;m<i.length;m+=1){let h=Ke(s,i,m),S=w(h);l.set(S,t[m]=ze(S,h))}let O=[{}],B={};for(let m=0;m<O.length;m+=1)B=M(B,O[m]);let v=s[7]&&s[8].length>0&&Ue(s),F=[{}],D={};for(let m=0;m<F.length;m+=1)D=M(D,F[m]);return{c(){e=W("div"),n=W("div");for(let m=0;m<t.length;m+=1)t[m].c();o=De(),p=W("input"),c=De(),v&&v.c(),P(p,"id",s[4]),P(p,"aria-label",s[5]),P(p,"type","text"),P(p,"class","au-select-input flex-grow-1 border-0"),p.value=s[6],P(p,"aria-autocomplete","list"),P(p,"autocorrect","off"),P(p,"autocapitalize","none"),P(p,"autocomplete","off"),R(n,B),R(e,D)},m(m,h){J(m,e,h),se(e,n);for(let S=0;S<t.length;S+=1)t[S]&&t[S].m(n,null);se(n,o),se(n,p),se(e,c),v&&v.m(e,null),f=!0,r||(a=[Te(p,"input",s[22]),Te(p,"keydown",s[23]),I(s[25].call(null,n)),I(s[27].call(null,n)),I(he.call(null,n,"d-flex align-items-center flex-wrap gap-1")),I(s[26].call(null,e)),I(_=he.call(null,e,"au-select dropdown border border-1 p-1 mb-3 d-block "+s[0]))],r=!0)},p(m,h){h[0]&268435470|h[1]&57921&&(i=me(m[1]),le(),t=je(t,h,w,1,m,i,l,n,Ge,ze,o,Ke),ne()),(!f||h[0]&16)&&P(p,"id",m[4]),(!f||h[0]&32)&&P(p,"aria-label",m[5]),(!f||h[0]&64&&p.value!==m[6])&&(p.value=m[6]),m[7]&&m[8].length>0?v?(v.p(m,h),h[0]&384&&$(v,1)):(v=Ue(m),v.c(),$(v,1),v.m(e,null)):v&&(le(),C(v,1,1,()=>{v=null}),ne()),R(e,D=z(F,[h[0]&1&&{}])),_&&Ie(_.update)&&h[0]&1&&_.update.call(null,"au-select dropdown border border-1 p-1 mb-3 d-block "+m[0])},i(m){if(!f){for(let h=0;h<i.length;h+=1)$(t[h]);$(v),f=!0}},o(m){for(let h=0;h<t.length;h+=1)C(t[h]);C(v),f=!1},d(m){m&&Q(e);for(let h=0;h<t.length;h+=1)t[h].d();v&&v.d(),r=!1,Fe(a)}}}function Kt(s,e,n){let t,l,o,p,c,_,f,r,a,i,w,{$$slots:O={},$$scope:B}=e;const v=st(O);let{open:F=!1}=e,{filterText:D=void 0}=e,{selected:m=void 0}=e;const h=dt({factory:vt,widgetName:"select",$$slots:v,$$props:e,events:{onOpenChange(d){n(32,F=d)},onSelectedChange:d=>{n(34,m=d)},onFilterTextChange:d=>{n(33,D=d)}}}),S=h.api,{stores:{id$:N,ariaLabel$:U,highlighted$:ae,open$:E,selectedContexts$:x,slotBadgeLabel$:H,slotItem$:ee,visibleItems$:oe,className$:ie,filterText$:te},state$:re,actions:{onInput:be,onInputKeydown:ve},directives:{floatingDirective:we,hasFocusDirective:ce,referenceDirective:ue,inputContainerDirective:$e,badgeAttributesDirective:fe,menuAttributesDirective:Ce,itemAttributesDirective:ke}}=h;return A(s,N,d=>n(4,c=d)),A(s,U,d=>n(5,_=d)),A(s,ae,d=>n(9,i=d)),A(s,E,d=>n(7,r=d)),A(s,x,d=>n(1,l=d)),A(s,H,d=>n(2,o=d)),A(s,ee,d=>n(10,w=d)),A(s,oe,d=>n(8,a=d)),A(s,ie,d=>n(0,t=d)),A(s,te,d=>n(6,f=d)),A(s,re,d=>n(3,p=d)),s.$$set=d=>{n(38,e=M(M({},e),Ae(d))),"open"in d&&n(32,F=d.open),"filterText"in d&&n(33,D=d.filterText),"selected"in d&&n(34,m=d.selected),"$$scope"in d&&n(37,B=d.$$scope)},s.$$.update=()=>{h.patchChangedProps(e)},e=Ae(e),[t,l,o,p,c,_,f,r,a,i,w,N,U,ae,E,x,H,ee,oe,ie,te,re,be,ve,we,ce,ue,$e,fe,Ce,ke,h,F,D,m,S,O,B]}class Rt extends xe{constructor(e){super(),et(this,e,Kt,Ot,tt,{open:32,filterText:33,selected:34,api:35},null,[-1,-1])}get api(){return this.$$.ctx[35]}}const Gt=Rt;export{Gt as S};
