import{E as e,F as B}from"./AppCommon-Cd2V92GK.js";import{w as H,g as M,s as S,a as m,I as E}from"./stores-BJ2FkST_.js";import{c as R}from"./directive-DpAaJgAE-p7z7DEwQ.js";import{e as x,i as I,t as v,a as u,b as f,f as U}from"./writables-DoU_XYTX-Dp6nIauL.js";const w={rating:0,tabindex:0,maxRating:10,disabled:!1,readonly:!1,resettable:!0,ariaValueTextFn:(t,b)=>`${t} out of ${b}`,onHover:m,onLeave:m,onRatingChange:m,className:"",slotStar:({fill:t})=>String.fromCharCode(t===100?9733:9734),ariaLabel:"Rating",ariaLabelledBy:""};function J(){return{...w}}const K={rating:x,tabindex:x,maxRating:{normalizeValue:t=>I(t)?Math.max(0,t):E},disabled:v,readonly:v,resettable:v,ariaValueTextFn:u,onHover:u,onLeave:u,onRatingChange:u,className:f,ariaLabel:f,ariaLabelledBy:f};function O(t){const[{rating$:b,tabindex$:L,ariaValueTextFn$:k,onHover$:A,onLeave$:D,onRatingChange$:N,...p},V]=H(w,t,K),{ariaLabel$:C,ariaLabelledBy$:F,className$:P,disabled$:g,maxRating$:r,readonly$:$,resettable$:T}=p,y=e(()=>g()?-1:L()),i=M(b,N,a=>U(a,r())),l=B(0),n=e(()=>!g()&&!$()),c=e(()=>{const a=l();return a!==0?a:i()}),h=e(()=>k()(c(),r())),_=e(()=>{const a=c();return Array.from({length:r()},(d,s)=>({fill:Math.round(Math.max(Math.min(a-s,1),0)*100),index:s}))}),o={...S({ariaValueText$:h,interactive$:n,rating$:i,stars$:_,tabindex$:y,visibleRating$:c,...p}),patch:V,actions:{click:a=>{n()&&a>0&&a<=r()&&i.update(d=>d===a&&T()?0:a)},hover:a=>{n()&&a>0&&a<=r()&&(l.set(a),A()(a))},leave:()=>{n()&&(D()(l()),l.set(0))},handleKey(a){if(n()){const{key:d}=a;switch(d){case"ArrowLeft":case"ArrowDown":i.update(s=>s-1);break;case"ArrowRight":case"ArrowUp":i.update(s=>s+1);break;case"Home":case"PageDown":i.set(0);break;case"End":case"PageUp":i.set(r());break;default:return}a.preventDefault(),a.stopPropagation()}}},directives:{containerDirective:R(()=>({events:{keydown:a=>o.actions.handleKey(a),mouseleave:()=>o.actions.leave()},attributes:{role:"slider",class:P,"aria-valuemin":0,tabindex:y,"aria-valuemax":r,"aria-valuenow":c,"aria-valuetext":h,"aria-readonly":e(()=>$()?"true":void 0),"aria-disabled":e(()=>g()?"true":void 0),"aria-label":C,"aria-labelledby":e(()=>F()||void 0)},classNames:{"au-rating":!0}})),starDirective:R(a=>({events:{mouseenter:()=>o.actions.hover(a().index+1),click:()=>o.actions.click(a().index+1)},styles:{cursor:e(()=>n()?"pointer":"default")},classNames:{"au-rating-star":!0}}))},api:{}};return o}export{O as c,J as g};
