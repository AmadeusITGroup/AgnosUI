import{S as L,i as H,s as P,O as T,j as h,c as A,f as k,n as p,g,m as E,p as _,t as M,a as N,h as b,d as O,R,k as v,q as U,u as w}from"./index-d88d3c67.js";import{S as y}from"./Select-86fa0ff5.js";import"./index-d424bc46.js";import"./config-b85885a4.js";import"./directive-8965f686.js";import"./stores-018f8970.js";import"./baseTransitions-b16b41b5.js";import"./writables-a15bafe3.js";import"./promise-2aa845a6.js";import"./fade-c4284705.js";import"./dom-cc7faf10.js";import"./rating-f93b0317.js";import"./focustrack-bcd39856.js";function z(l,e){let n;return(...s)=>{n&&clearTimeout(n),n=setTimeout(()=>{l(...s)},e)}}const B=l=>{let e;return(...n)=>(e==null||e.abort(),e=new AbortController,l(e.signal,...n))};function F(l,e,n){const s=l.slice();return s[7]=e[n],s}function q(l){const e=l[10].item;l[7]=e}function D(l){let e,n=l[10].item.title+"",s,c,f,a,u,o;function r(){return l[5](l[11],l[10])}return{c(){e=h("a"),s=v(n),f=k(),a=h("button"),p(e,"href",c=`${C}${l[10].item.pageid}`),p(e,"target","_blank"),p(e,"rel","noreferrer"),p(a,"type","button"),p(a,"class","btn-close ms-1 wiki-btn-close"),p(a,"aria-label","Close")},m(t,i){g(t,e,i),_(e,s),g(t,f,i),g(t,a,i),u||(o=U(a,"click",r),u=!0)},p(t,i){l=t,i&1024&&n!==(n=l[10].item.title+"")&&w(s,n),i&1024&&c!==(c=`${C}${l[10].item.pageid}`)&&p(e,"href",c)},d(t){t&&(b(e),b(f),b(a)),u=!1,o()}}}function G(l){q(l);let e,n,s=l[7].title+"",c,f,a,u=l[7].snippet+"",o,r;return{c(){e=h("label"),n=h("div"),c=v(s),f=k(),a=h("div"),o=v(u),p(n,"class","fw-bold"),p(a,"class","text-wrap wiki-desc"),p(e,"for",r=""+l[10].id),p(e,"slot","item")},m(t,i){g(t,e,i),_(e,n),_(n,c),_(e,f),_(e,a),_(a,o)},p(t,i){q(t),i&1024&&s!==(s=t[7].title+"")&&w(c,s),i&1024&&u!==(u=t[7].snippet+"")&&w(o,u),i&1024&&r!==(r=""+t[10].id)&&p(e,"for",r)},d(t){t&&b(e)}}}function j(l){let e;return{c(){e=v("none")},m(n,s){g(n,e,s)},d(n){n&&b(e)}}}function I(l){let e,n=l[7].title+"",s,c;return{c(){e=h("a"),s=v(n),p(e,"href",c=`${C}${l[7].pageid}`),p(e,"class","pe-2")},m(f,a){g(f,e,a),_(e,s)},p(f,a){a&2&&n!==(n=f[7].title+"")&&w(s,n),a&2&&c!==(c=`${C}${f[7].pageid}`)&&p(e,"href",c)},d(f){f&&b(e)}}}function J(l){let e,n,s,c,f,a;n=new y({props:{items:l[0],itemIdFn:l[2],onFilterTextChange:l[3],onSelectedChange:l[4],badgeClassName:"badge text-bg-light d-flex align-items-center",$$slots:{item:[G,({itemContext:t})=>({10:t}),({itemContext:t})=>t?1024:0],badgeLabel:[D,({itemContext:t,widget:i})=>({10:t,11:i}),({itemContext:t,widget:i})=>(t?1024:0)|(i?2048:0)]},$$scope:{ctx:l}}});let u=T(l[1]),o=[];for(let t=0;t<u.length;t+=1)o[t]=I(F(l,u,t));let r=null;return u.length||(r=j()),{c(){e=h("div"),A(n.$$.fragment),s=k(),c=h("span"),c.textContent="Selection:",f=k();for(let t=0;t<o.length;t+=1)o[t].c();r&&r.c(),p(c,"class","fw-bold"),p(e,"class","custom-select my-auto mb-3")},m(t,i){g(t,e,i),E(n,e,null),_(e,s),_(e,c),_(e,f);for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(e,null);r&&r.m(e,null),a=!0},p(t,[i]){const d={};if(i&1&&(d.items=t[0]),i&7168&&(d.$$scope={dirty:i,ctx:t}),n.$set(d),i&2){u=T(t[1]);let m;for(m=0;m<u.length;m+=1){const $=F(t,u,m);o[m]?o[m].p($,i):(o[m]=I($),o[m].c(),o[m].m(e,null))}for(;m<o.length;m+=1)o[m].d(1);o.length=u.length,u.length?r&&(r.d(1),r=null):r||(r=j(),r.c(),r.m(e,null))}},i(t){a||(M(n.$$.fragment,t),a=!0)},o(t){N(n.$$.fragment,t),a=!1},d(t){t&&b(e),O(n),R(o,t),r&&r.d()}}}const C="https://en.wikipedia.org/?curid=";function K(l){const e=document.createElement("div");return e.innerHTML=l,e.innerText}function Q(l,e,n){let s=[],c=[];const f=t=>"page-"+t.pageid,a=z(B(async(t,i)=>{var $;const m=await(await fetch("https://en.wikipedia.org/w/api.php?action=query&list=search&prop=info&inprop=url&utf8=&format=json&origin=*&srlimit=5&srsearch="+i,{signal:t})).json();n(0,s=(($=m.query)==null?void 0:$.search.map(S=>({...S,snippet:K(S.snippet)})))??[])}),200),u=new Intl.Collator("en").compare;function o(t){n(1,c=(t.detail||[]).sort((i,d)=>u(i.title,d.title)))}return[s,c,f,a,o,(t,i)=>t.api.unselect(i.item)]}class oe extends L{constructor(e){super(),H(this,e,Q,J,P,{})}}export{oe as default};
