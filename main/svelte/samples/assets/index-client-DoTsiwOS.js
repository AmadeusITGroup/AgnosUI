import{ae as a,h as b,af as c,g as o,Y as l,U as g,ag as d,ah as m}from"./AppCommon-TeUJQW-I.js";function v(e){let r;return a(e,n=>r=n)(),r}function _(e){b(e,e.v+1)}function h(e){let r=0,n=m(0),t;return()=>{c()&&(o(n),l(()=>(r===0&&(t=g(()=>e(()=>_(n)))),r+=1,()=>{d().then(()=>{r-=1,r===0&&(t==null||t(),t=void 0)})})))}}function S(e){let r;const n=h(u=>{let s=!1;const i=e.subscribe(f=>{r=f,s&&u()});return s=!0,i});function t(){return c()?(n(),r):v(e)}return"set"in e?{get current(){return t()},set current(u){e.set(u)}}:{get current(){return t()}}}export{h as c,S as f};
