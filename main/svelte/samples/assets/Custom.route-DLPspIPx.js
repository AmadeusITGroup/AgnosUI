import{p as N,k as F,T as f,g as u,s as y,R,r as z,b,d as L,S as G,a as J,t as x,j as A,e as c,f as K,U as S,n as _,l as O,q as Q}from"./AppCommon-D6XzPDt_.js";import{a as D}from"./actions-C5zFepch.js";import{S as V}from"./Select-QIntVgTy.js";import{c as W}from"./directive-CKEccryv-BLJ74ze2.js";import"./class-BjsImlqy.js";import"./Slot-DAvQuAHA.js";import"./snippet-Bt6SC6hZ.js";import"./config-BMGCqy3X.js";import"./config-D1K6DXRz.js";import"./index-client-D9YS31ny.js";import"./floatingUI-04gu6OHp.js";import"./promise-CY2U8bTP-CiDKceh8.js";import"./focustrack-1RBV_tjs.js";import"./navManager-BYnEWTmU.js";import"./extendWidget-Cq2v8VqQ.js";function X(m,s){let o;return(...v)=>{o&&clearTimeout(o),o=setTimeout(()=>{m(...v)},s)}}const Y=m=>{let s;return(...o)=>(s==null||s.abort(),s=new AbortController,m(s.signal,...o))};var Z=x('<a target="_blank" rel="noreferrer"> </a> <button></button>',1),$=x('<label><div class="fw-bold"> </div> <div class="text-wrap wiki-desc"> </div></label>'),tt=x('<a class="pe-2"> </a>'),et=x('<div class="custom-select my-auto mb-3"><!> <span class="fw-bold">Selection:</span> <!></div>');function _t(m,s){N(s,!0);const o="https://en.wikipedia.org/?curid=";let v=F(f([])),T=F(f([]));const H=e=>"page-"+e.pageid;function I(e){const i=document.createElement("div");return i.innerHTML=e,i.innerText}const P=X(Y(async(e,i)=>{var r;const t=await(await fetch("https://en.wikipedia.org/w/api.php?action=query&list=search&prop=info&inprop=url&utf8=&format=json&origin=*&srlimit=5&srsearch="+i,{signal:e})).json();A(v,f(((r=t.query)==null?void 0:r.search.map(n=>({...n,snippet:I(n.snippet)})))??[]))}),200),U=new Intl.Collator("en").compare;function B(e){A(T,f((e||[]).sort((i,a)=>U(i.title,a.title))))}const E=e=>e.querySelectorAll("a,button,input");var k=et(),q=c(k);V(q,{get items(){return u(v)},itemIdFn:H,onFilterTextChange:P,onSelectedChange:B,navSelector:E,badgeClassName:"badge text-bg-light d-flex align-items-center",badgeLabel:(a,t)=>{let r=()=>t==null?void 0:t().itemContext,n=()=>t==null?void 0:t().directives;var l=Z(),p=K(l),h=c(p),d=y(p,2);const w=Q(()=>({}));let j;D(d,(C,g)=>W(C,g),()=>"btn-close ms-1 wiki-btn-close"),D(d,(C,g)=>n().badgeCloseButtonDirective(C,g),r),L(()=>{S(p,"href",`${o}${r().item.pageid}`),_(h,r().item.title),j=O(d,j,{type:"button","aria-label":"Close",...u(w)})}),b(a,l)},itemLabel:(a,t)=>{let r=()=>t==null?void 0:t().itemContext.id,n=()=>t==null?void 0:t().itemContext.item;var l=$(),p=c(l),h=c(p),d=y(p,2),w=c(d);L(()=>{S(l,"for",""+r()),_(h,n().title),_(w,n().snippet)}),b(a,l)},$$slots:{badgeLabel:!0,itemLabel:!0}});var M=y(q,4);R(M,17,()=>u(T),G,(e,i)=>{var a=tt(),t=c(a);L(()=>{S(a,"href",`${o}${u(i).pageid}`),_(t,u(i).title)}),b(e,a)},e=>{var i=z("none");b(e,i)}),b(m,k),J()}export{_t as default};
