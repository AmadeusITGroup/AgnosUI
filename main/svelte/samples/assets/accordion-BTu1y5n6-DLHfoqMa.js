import{w as V,r as F,s as P,m as z,n as L,e as w,g as f,h as M,j as h,k as Y,b as q}from"./directive-CKEccryv-BuQmRVBG.js";import{c as G}from"./baseTransitions-uDH1MRPt.js";import{ae as i,ak as W,af as j,Y as E}from"./AppCommon-CC-VkUgW.js";import{t as $,a as C,b as a}from"./writables-DoU_XYTX-slp4MWt3.js";function J(u,s,d){let b;return s.length==2?(d=d??s[0],b=s.find(c=>c!==d)):s.length>2&&(b=s[0]),b&&u.forEach(c=>{c.stores.id$()!==b&&c.stores.visible$()&&c.patch({visible:!1})}),u}function k(u,s){return u.find(d=>d.stores.id$()===s)}const r={closeOthers:!1,onItemShown:h,onItemHidden:h,className:"",itemDestroyOnHide:!0,itemAnimated:!0,itemTransition:async()=>{},itemHeadingTag:"",itemClassName:"",itemHeaderClassName:"",itemButtonClassName:"",itemBodyContainerClassName:"",itemBodyClassName:""},O={id:"",destroyOnHide:r.itemDestroyOnHide,disabled:!1,visible:!1,animated:r.itemAnimated,transition:r.itemTransition,onShown:h,onHidden:h,onVisibleChange:h,className:r.itemClassName,headerClassName:r.itemHeaderClassName,buttonClassName:r.itemButtonClassName,bodyContainerClassName:r.itemBodyContainerClassName,bodyClassName:r.itemBodyClassName,headingTag:r.itemHeadingTag},K=Object.keys(O);function ie(){return{...r}}const Q={closeOthers:$,onItemShown:C,onItemHidden:C,className:a,itemDestroyOnHide:$,itemAnimated:$,itemTransition:C,itemClassName:a,itemHeaderClassName:a,itemButtonClassName:a,itemBodyContainerClassName:a,itemBodyClassName:a,itemHeadingTag:a},R={id:a,destroyOnHide:$,disabled:$,visible:$,animated:$,transition:C,onShown:C,onHidden:C,onVisibleChange:C,className:a,headerClassName:a,buttonClassName:a,bodyContainerClassName:a,bodyClassName:a,headingTag:a};function U(u){const[{bodyClassName$:s,buttonClassName$:d,bodyContainerClassName$:b,headerClassName$:c,animated$:v,transition$:S,destroyOnHide$:B,onShown$:N,onHidden$:y,onVisibleChange$:H,visible$:l,id$:n,disabled$:g,...D},T]=V(O,u,R),A=W(!1),e=i(()=>Y()),t=i(()=>n()||e()),p=G({props:{transition:S,visible:l,onVisibleChange:H,animated:v,animatedOnInit:!1,initDone:A,onHidden:()=>{y()()},onShown:()=>{N()()}}}),x=i(()=>B()===!1||!p.stores.hidden$()),I=f(()=>({attributes:{id:i(()=>`${t()}-toggle`),"aria-expanded":i(()=>`${l()}`),"aria-disabled":i(()=>`${g()}`),"aria-controls":i(()=>`${t()}-body-container`),disabled:g},classNames:{collapsed:i(()=>!l())},events:{click:()=>{g()||l.update(_=>!_)}}})),m=q(p.directives.directive),o=f(()=>({attributes:{id:i(()=>`${t()}-body-container`),class:b(),"aria-labelledby":i(()=>`${t()}-toggle`)}}));return{...P({visible$:l,id$:t,shouldBeInDOM$:x,disabled$:g,bodyClassName$:s,buttonClassName$:d,bodyContainerClassName$:b,headerClassName$:c,...D}),patch:T,api:{initDone:()=>{A.set(!0)},collapse:()=>{l.set(!1)},expand:()=>{l.set(!0)},toggle:()=>{l.update(_=>!_)}},directives:{toggleDirective:I,buttonDirective:w(I,f(()=>({attributes:{type:"button",class:d()}}))),headerDirective:f(()=>({attributes:{class:c()}})),bodyDirective:f(()=>({attributes:{class:s()}})),transitionDirective:m,bodyContainerAttrsDirective:o,bodyContainerDirective:w(m,o),itemDirective:h}}}function X(u=U,s=K,d=r,b=Q){return c=>{const[v,S]=V(d,c,b),{closeOthers$:B,onItemShown$:N,onItemHidden$:y,className$:H}=v,l=Object.fromEntries(Object.entries(v).filter(e=>e[0].startsWith("item")).map(e=>[e[0].charAt(4).toLowerCase()+e[0].slice(5,-1),e[1]])),n=F(),g=i(()=>{const e=[];return n().forEach(t=>{t.stores.visible$()&&e.push(t.stores.id$())}),e}),D=W(g()[0]),T=i(()=>{B()&&(J(n(),g(),D()),D.set(g()[0]))}),A=i(()=>{T()});return{...P({itemWidgets$:n,className$:H}),patch:S,api:{expand:e=>{var t;(t=k(n(),e))==null||t.api.expand()},collapse:e=>{var t;(t=k(n(),e))==null||t.api.collapse()},toggle:e=>{var t;(t=k(n(),e))==null||t.api.toggle()},expandAll:()=>{n().forEach(e=>e.api.expand())},collapseAll:()=>{n().forEach(e=>e.api.collapse())},registerItem:e=>{const t=s,p=z(t,L(t,e==null?void 0:e.config),l),[{onHidden$:x,onShown$:I}]=V({onHidden:O.onHidden,onShown:O.onShown},{config:p,props:e==null?void 0:e.props}),m=u({config:p,props:{...e==null?void 0:e.props,onHidden:j(E(()=>{var o;y()(m.stores.id$()),(o=x())==null||o()}),o=>{y.set(o)}),onShown:j(E(()=>{var o;N()(m.stores.id$()),(o=I())==null||o()}),o=>{N.set(o)})}});return m.directives.itemDirective=w(()=>({destroy:n.register(m)}),f(()=>({attributes:{class:m.stores.className$,id:m.stores.id$}}))),m}},directives:{accordionDirective:w(M(A),f(()=>({attributes:{class:H()},classNames:{"au-accordion":!0}})))}}}}const se=X();export{se as a,U as c,X as f,ie as g};
