import{$ as a,ae as ke,Z as k}from"./AppCommon-B-ROr4aU.js";import{q as F,s as lt,m as M,a as f,b as nt,n as st}from"./dom-gfxqXJpK-CVUkDlT_.js";import{w as rt,e as ot,s as ct,t as N}from"./stores-DWJrwGVR.js";import{a as Pe,k as ye,t as ut,b as w,c as U,g as Ve}from"./writables-CgpOQ4hA-BLtlctEd.js";import{c as dt}from"./resizeObserver-CrJfYtGU.js";const mt=/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/;function se(c){var u;const m=(""+c).match(mt);return Math.max(0,(((u=m[1])==null?void 0:u.length)??0)-(+m[2]||0))}const re={min:0,max:100,stepSize:1,readonly:!1,disabled:!1,vertical:!1,className:"",ariaLabel:()=>"Value",ariaLabelledBy:()=>"",ariaValueText:()=>"",onValuesChange:st,values:[0],showValueLabels:!0,showMinMaxLabels:!0,showTicks:!1,showTickValues:!0,tickInterval:0,rtl:!1},bt={min:Ve,max:Ve,stepSize:ye(0,1/0,{strict:!0}),readonly:w,disabled:w,vertical:w,ariaLabel:U,ariaLabelledBy:U,ariaValueText:U,onValuesChange:U,values:Pe,showValueLabels:w,showMinMaxLabels:w,showTicks:w,showTickValues:w,tickInterval:ye(0,1/0,{strict:!0}),rtl:w,className:ut},Se=(c,u,m,b,o)=>{const x=Math.pow(10,o);if(c>=m)return m;if(c<=u)return u;const O=Math.floor((c-u)*x/b);return+(((c-u)*x%b<b/2?O:O+1)*b/x+u).toFixed(o)},Z=(c,u,m,b)=>{u.update(o=>(o=[...o],o[c]=o[c]+m*b,o))},G=(c,u,m)=>c&&u?m?1:-1:c&&!u?-1:!c&&u?m?-1:1:!c&&!u?-1:1,d=c=>c!=null?`${c}%`:"";function Dt(c){const[{min$:u,max$:m,stepSize$:b,rtl$:o,values$:x,ariaLabel$:O,ariaLabelledBy$:ze,ariaValueText$:Me,onValuesChange$:xe,showValueLabels$:J,showMinMaxLabels$:K,showTicks$:y,showTickValues$:H,tickInterval$:oe,...Q},_e]=rt(re,c,bt),{vertical$:s,disabled$:_,readonly$:ce}=Q;let A=-1;const j=new Map,L=a(()=>{const e=u(),t=m();return e===t?re.min:Math.min(e,t)}),g=a(()=>{const e=u(),t=m();return e===t?re.max:Math.max(e,t)}),W=a(()=>Math.max(se(b()),se(L()),se(g()))),ue=a(()=>b()*Math.pow(10,W())),v=ot(x,xe,e=>{const t=L(),i=g(),l=ue(),n=W();return e.map(r=>Se(r,t,i,l,n))},Pe.equal),{directive:Re,element$:Be}=F(),{directive:Te,element$:Ee}=F(),{directive:Ne,element$:Oe}=F(),{directive:He,element$:de}=F(),{directive:Ae,elements$:je}=lt(),{directive:qe,dimensions$:q}=dt(),V=ke({}),ee=a(()=>(q(),V(),je().map(e=>e.getBoundingClientRect())),{equal:Object.is}),I=a(()=>{var e;return q(),V(),((e=Be())==null?void 0:e.getBoundingClientRect())??{}},{equal:Object.is}),Ie=a(()=>{var e;return q(),V(),((e=Ee())==null?void 0:e.getBoundingClientRect())??{}},{equal:(e,t)=>Object.is(e,t)}),Xe=a(()=>{var e;return q(),V(),((e=Oe())==null?void 0:e.getBoundingClientRect())??{}},{equal:(e,t)=>Object.is(e,t)}),Ye=a(()=>s()?I().top:I().left),me=a(()=>s()?I().height:I().width),X=a(()=>[...v()].sort((e,t)=>e-t)),Ce=a(()=>v().map((e,t)=>({id:t,value:e})).sort((e,t)=>e.value-t.value)),Fe=a(()=>{const e=O(),t=Me(),i=ze();return Ce().map((l,n)=>({...l,ariaLabel:i(n)?void 0:e(n),ariaLabelledBy:i(n)||void 0,ariaValueText:t(l.value,n)||void 0}))}),be=a(()=>v().map(e=>C(e))),S=a(()=>[...be()].sort((e,t)=>e-t)),Ue=a(()=>{const e=Ie();return Y(s()?e.height:e.width)}),Ze=a(()=>{const e=Xe();return Y(s()?e.height:e.width)}),Ge=a(()=>J()&&(!y()||!H())),Y=e=>e?e/me()*100:0,ve=a(()=>{var e,t;return Y(s()?(e=de())==null?void 0:e.getBoundingClientRect().height:(t=de())==null?void 0:t.getBoundingClientRect().width)}),he=a(()=>s()?ae():ie()),R=e=>{var t,i;return Y(s()?(t=ee()[e])==null?void 0:t.height:(i=ee()[e])==null?void 0:i.width)},pe=a(()=>{if(!K()||y()&&H())return!1;if(!J())return!0;const e=Ue(),t=s(),i=o();if(te()){const n=ve(),r=he();return i&&!t||t&&!i?r+n/2<100-e-1:r-n/2>e+1}const l=S();return i?l[0]-R(l.length-1)/2>e+1:l[0]-R(0)/2>e+1}),fe=a(()=>{if(!K()||y()&&H())return!1;if(!J())return!0;const e=Ze(),t=s(),i=o();if(te()){const n=ve(),r=he();return i&&!t||t&&!i?r-n/2>e+1:r+n/2<100-e-1}const l=S();return i?100-l[l.length-1]-R(0)/2>e+1:l[l.length-1]+R(l.length-1)/2<100-e-1}),Le=ke([]),te=a(()=>{const e=S();ee().length===e.length&&Le.set(e.map((D,$)=>R($)/2));const t=Le(),i=(t==null?void 0:t[0])??0,l=(t==null?void 0:t[1])??0,n=Math.max(i,l),r=n!==50?n*2+2:15;return e.length==2&&e[1]-l-e[0]+i<r}),B=a(()=>!_()&&!ce()),ie=a(()=>{const e=S(),t=(e[0]+e[1])/2;return s()||e.length!=2?0:o()?100-t:t}),ae=a(()=>{const e=S(),t=100-(e[0]+e[1])/2;return s()&&e.length==2?o()?100-t:t:0}),T=a(()=>{const e=s(),t=o();return be().map(i=>({left:t?e?null:100-i:e?null:i,top:t?e?i:null:e?100-i:null}))}),Je=a(()=>{const e=s(),t=S(),i=o();return t.length===1?[{left:e||i?null:0,right:e?null:i?0:null,bottom:e?i?null:0:null,top:e&&i?0:null,width:e?100:t[0],height:e?t[0]:100,id:0}]:t.map((l,n,r)=>({left:e||i?null:l,right:e?null:i?r[n]:null,bottom:e?i?null:l:null,top:e&&i?r[n]:null,width:e?100:n===r.length-1?l:r[n+1]-l,height:e?n===r.length-1?l:r[n+1]-l:100,id:n})).slice(0,t.length-1)}),Ke=a(()=>{if(!y())return[];const e=s(),t=L(),i=g(),l=o(),n=H(),r=oe()||b(),D=[],$=ue(),P=W(),p=z=>!!l!=!!e?100-z:z;for(let z=t;z<i;z+=r){const $e=Se(z,t,i,$,P),at=C($e);D.push({position:p(at),selected:!1,value:$e,displayLabel:n})}return D.push({position:p(100),selected:!1,value:i,displayLabel:n}),D}),Qe=a(()=>{const e=X(),t=i=>{const l=e.length>1,n=l?e[e.length-1]:e[0],r=l?e[0]:0;return i<=n&&i>=r};return Ke().map(i=>({...i,selected:t(i.value)}))}),C=e=>{const t=L(),i=g();return(e-t)*100/(i-t)},le=e=>{const t=v();if(t.length===1)return 0;const i=X(),l=i.find($=>C($)>e*100),n=l?i.indexOf(l):i.length-1,r=C(i[n-1]+(i[n]-i[n-1])/2),D=i[e*100<=r?n-1:n];return t.indexOf(D)},ne=e=>{const t=me(),i=Ye();let l=s()?(t-e+i)/t:(e-i)/t;return l=o()?1-l:l,l},E=(e,t)=>{if(B()){const i=ne(e),l=t??le(i),n=i*(g()-L())+L();v.update(r=>(r=[...r],r[l]=n,r))}},h=a(()=>!s()),We=f(()=>({attributes:{"aria-disabled":a(()=>_()?"true":void 0),class:Q.className$},classNames:{"au-slider":N,"au-slider-vertical":s,"au-slider-horizontal":h,disabled:_}})),et=f(()=>({classNames:{"au-slider-label-vertical":s,"au-slider-label-vertical-min":s,"au-slider-label":h,"au-slider-label-min":h,"au-slider-rtl":o,invisible:a(()=>!pe())},attributes:{"aria-hidden":k("true")}})),tt=f(()=>({classNames:{"au-slider-label-vertical":s,"au-slider-label-vertical-max":s,"au-slider-label":h,"au-slider-label-max":h,"au-slider-rtl":o,invisible:a(()=>!fe())},attributes:{"aria-hidden":k("true")}})),it=nt((e,t)=>{const i=()=>{j.delete(t.item.id)},l=n=>{j.set(n.item.id,e)};return l(t),{update:l,destroy:i}}),ge=(e,t)=>{e.preventDefault();const i=t!==void 0?j.get(t):e.target,l=n=>{n.preventDefault();const r=s()?n.clientY:n.clientX;i==null||i.focus(),A!==r&&(A=r,E(r,t))};B()&&(V.set({}),i==null||i.focus(),document.addEventListener("mousemove",l),document.addEventListener("mouseup",()=>{document.removeEventListener("mousemove",l)},{once:!0}))},De=(e,t)=>{const i=t!==void 0?j.get(t):e.target,l=n=>{n.preventDefault();const r=s()?n.touches[0].clientY:n.touches[0].clientX;i==null||i.focus(),A!==r&&(A=r,E(r,t))};B()&&(V.set({}),i==null||i.focus(),document.addEventListener("touchmove",l,{passive:!1}),document.addEventListener("touchend",()=>{document.removeEventListener("touchmove",l),document.removeEventListener("touchcancel",l)},{once:!0}),document.addEventListener("touchcancel",()=>{document.removeEventListener("touchmove",l),document.removeEventListener("touchend",l)},{once:!0}))},we=f(e=>({events:{keydown:t=>{const i=e().item.id,{key:l}=t,n=o(),r=b(),D=L(),$=g(),P=s();if(B()){switch(l){case"ArrowDown":Z(i,v,r,G(P,n,!0));break;case"ArrowLeft":Z(i,v,r,G(P,n,!1));break;case"ArrowUp":Z(i,v,r,-1*G(P,n,!0));break;case"ArrowRight":Z(i,v,r,-1*G(P,n,!1));break;case"Home":v.update(p=>(p=[...p],p[i]=D,p));break;case"End":v.update(p=>(p=[...p],p[i]=$,p));break;case"PageUp":break;case"PageDown":break;default:return}t.preventDefault()}},mousedown:t=>{t.button===0&&ge(t,e().item.id)},touchstart:t=>{De(t,e().item.id)}}}));return{...ct({min$:L,max$:g,stepSize$:b,values$:v,sortedValues$:X,sortedHandles$:Fe,minValueLabelDisplay$:pe,maxValueLabelDisplay$:fe,combinedLabelDisplay$:te,interactive$:B,combinedLabelPositionLeft$:ie,combinedLabelPositionTop$:ae,progressDisplayOptions$:Je,handleDisplayOptions$:T,showValueLabels$:Ge,showMinMaxLabels$:K,showTicks$:y,rtl$:o,ticks$:Qe,...Q}),patch:_e,api:{},directives:{sliderDirective:M(Re,qe,We),progressDisplayDirective:f(e=>({styles:{left:a(()=>d(e().option.left)),right:a(()=>d(e().option.right)),top:a(()=>d(e().option.top)),bottom:a(()=>d(e().option.bottom)),width:a(()=>d(e().option.width)),height:a(()=>d(e().option.height))},classNames:{"au-slider-progress":N}})),clickableAreaDirective:f(()=>({events:{mousedown:e=>{if(e.button!==0)return;const t=s()?e.clientY:e.clientX,i=le(ne(t));E(t,i),ge(e,i)},touchstart:e=>{const t=s()?e.touches[0].clientY:e.touches[0].clientX,i=le(ne(t));E(t,i),De(e,i)}},classNames:{"au-slider-clickable-area":h,"au-slider-clickable-area-vertical":s,"au-slider-clickable-area-with-ticks":a(()=>y()&&oe()===0)}})),handleEventsDirective:we,handleDirective:M(it,we,f(e=>({attributes:{role:k("slider"),"aria-valuemin":L,"aria-valuemax":g,"aria-valuenow":a(()=>e().item.value),"aria-valuetext":a(()=>e().item.ariaValueText),"aria-label":a(()=>e().item.ariaLabel),"aria-labelledBy":a(()=>e().item.ariaLabelledBy),"aria-orientation":a(()=>s()?"vertical":void 0),"aria-disabled":a(()=>_()?"true":void 0),disabled:_,"aria-readonly":a(()=>ce()?"true":void 0)},styles:{left:a(()=>d(T()[e().item.id].left)),top:a(()=>d(T()[e().item.id].top))},classNames:{"au-slider-handle":N,"au-slider-handle-vertical":s,"au-slider-handle-horizontal":h}}))),minLabelDirective:M(Te,et),maxLabelDirective:M(Ne,tt),combinedHandleLabelDisplayDirective:M(He,f(()=>({classNames:{"au-slider-label-vertical":s,"au-slider-label-vertical-now":s,"au-slider-label":h,"au-slider-label-now":h},styles:{left:a(()=>d(ie())),top:a(()=>d(ae()))},attributes:{"aria-hidden":k("true")}}))),handleLabelDisplayDirective:M(Ae,f(e=>({classNames:{"au-slider-label-vertical":s,"au-slider-label-vertical-now":s,"au-slider-label":h,"au-slider-label-now":h},styles:{left:a(()=>d(T()[e().index].left)),top:a(()=>d(T()[e().index].top))},attributes:{"aria-hidden":k("true")}}))),tickDirective:f(e=>({classNames:{"au-slider-tick":N,"au-slider-tick-horizontal":h,"au-slider-tick-vertical":s},styles:{left:a(()=>s()?null:d(e().tick.position)),top:a(()=>s()?d(e().tick.position):null)},events:{click:t=>{E(s()?t.clientY:t.clientX)}},attributes:{"aria-hidden":k("true")}})),tickLabelDirective:f(e=>({classNames:{"au-slider-tick-label":N,"au-slider-tick-label-vertical":s,"au-slider-tick-label-now":a(()=>X().some(t=>t===e().tick.value))},styles:{left:a(()=>s()?null:d(e().tick.position)),top:a(()=>s()?d(e().tick.position):null)},attributes:{"aria-hidden":k("true")}}))}}}export{Dt as c};
