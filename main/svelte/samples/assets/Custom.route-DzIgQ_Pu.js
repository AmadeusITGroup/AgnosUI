import{p as M,R as F,U as f,k as _,b as L,Q as N,u as Q,c as u,e as x,S as R,a as z,t as w,n as j,h as c,f as G,q as J,T as S,r as h}from"./AppCommon-CC-VkUgW.js";import{a as A}from"./actions-D-dhIHRy.js";import{S as K}from"./Select-Cfn0V3RV.js";import{c as O}from"./directive-CKEccryv-BuQmRVBG.js";import"./class-CcTXRr1B.js";import"./Slot-9PryA5S7.js";import"./snippet-hepiiy-w.js";import"./config-DXyDsFs3.js";import"./config-BOSa1FB8.js";import"./index-client-CGLt60GO.js";import"./floatingUI-CPJPf_6-.js";import"./promise-CY2U8bTP-FiA19x-Q.js";import"./focustrack-9hjk9Hwz.js";import"./navManager-BIiqe4zm.js";import"./extendWidget-wveUl8Yn.js";function V(m,o){let s;return(...b)=>{s&&clearTimeout(s),s=setTimeout(()=>{m(...b)},o)}}const W=m=>{let o;return(...s)=>(o==null||o.abort(),o=new AbortController,m(o.signal,...s))};var X=w('<a target="_blank" rel="noreferrer"> </a> <button></button>',1),Y=w('<label><div class="fw-bold"> </div> <div class="text-wrap wiki-desc"> </div></label>'),Z=w('<a class="pe-2"> </a>'),$=w('<div class="custom-select my-auto mb-3"><!> <span class="fw-bold">Selection:</span> <!></div>');function vt(m,o){M(o,!0);const s="https://en.wikipedia.org/?curid=";let b=F(f([])),T=F(f([]));const D=e=>"page-"+e.pageid;function H(e){const i=document.createElement("div");return i.innerHTML=e,i.innerText}const I=V(W(async(e,i)=>{var r;const t=await(await fetch("https://en.wikipedia.org/w/api.php?action=query&list=search&prop=info&inprop=url&utf8=&format=json&origin=*&srlimit=5&srsearch="+i,{signal:e})).json();j(b,f(((r=t.query)==null?void 0:r.search.map(n=>({...n,snippet:H(n.snippet)})))??[]))}),200),P=new Intl.Collator("en").compare;function U(e){j(T,f((e||[]).sort((i,a)=>P(i.title,a.title))))}const B=e=>e.querySelectorAll("a,button,input");var k=$(),q=c(k);K(q,{get items(){return _(b)},itemIdFn:D,onFilterTextChange:I,onSelectedChange:U,navSelector:B,badgeClassName:"badge text-bg-light d-flex align-items-center",badgeLabel:(a,t)=>{let r=()=>t==null?void 0:t().itemContext,n=()=>t==null?void 0:t().directives;var l=X(),p=G(l),C=c(p),d=L(p,2);let v;x(()=>v=J(d,v,{type:"button","aria-label":"Close"})),x(()=>{S(p,"href",`${s}${r().item.pageid}`),h(C,r().item.title)}),A(d,(g,y)=>O(g,y),()=>"btn-close ms-1 wiki-btn-close"),A(d,(g,y)=>n().badgeCloseButtonDirective(g,y),r),u(a,l)},itemLabel:(a,t)=>{let r=()=>t==null?void 0:t().itemContext.id,n=()=>t==null?void 0:t().itemContext.item;var l=Y(),p=c(l),C=c(p),d=L(p,2),v=c(d);x(()=>{S(l,"for",""+r()),h(C,n().title),h(v,n().snippet)}),u(a,l)},$$slots:{badgeLabel:!0,itemLabel:!0}});var E=L(q,4);N(E,17,()=>_(T),R,(e,i)=>{var a=Z(),t=c(a);x(()=>{S(a,"href",`${s}${_(i).pageid}`),h(t,_(i).title)}),u(e,a)},e=>{var i=Q("none");u(e,i)}),u(m,k),z()}export{vt as default};
