import{p as N,V as F,W as f,k as _,b as L,Q,u as U,c as u,e as x,S as V,a as W,t as w,n as j,h as p,f as z,q as G,T as S,r as h}from"./AppCommon-CHMWAYUs.js";import{a as A}from"./actions-DuaCxCQE.js";import{S as J}from"./Select-CsyzQBLc.js";import{c as K}from"./directive-CKEccryv-DchTFd9J.js";import"./class-CpJXf2wP.js";import"./Slot-obbjdEGN.js";import"./snippet-BpnQ07FJ.js";import"./config-CBsgdVTw.js";import"./config-Dx2j-Ppr.js";import"./floatingUI-Dz63-kOp.js";import"./promise-CY2U8bTP-CRYFPrGb.js";import"./focustrack-DnU03uMD.js";import"./navManager-9XLPTDpl.js";import"./extendWidget-C7OLjdxS.js";function O(m,o){let s;return(...b)=>{s&&clearTimeout(s),s=setTimeout(()=>{m(...b)},o)}}const R=m=>{let o;return(...s)=>(o==null||o.abort(),o=new AbortController,m(o.signal,...s))};var X=w('<a target="_blank" rel="noreferrer"> </a> <button></button>',1),Y=w('<label><div class="fw-bold"> </div> <div class="text-wrap wiki-desc"> </div></label>'),Z=w('<a class="pe-2"> </a>'),$=w('<div class="custom-select my-auto mb-3"><!> <span class="fw-bold">Selection:</span> <!></div>');function bt(m,o){N(o,!0);const s="https://en.wikipedia.org/?curid=";let b=F(f([])),T=F(f([]));const D=e=>"page-"+e.pageid;function H(e){const i=document.createElement("div");return i.innerHTML=e,i.innerText}const I=O(R(async(e,i)=>{var r;const t=await(await fetch("https://en.wikipedia.org/w/api.php?action=query&list=search&prop=info&inprop=url&utf8=&format=json&origin=*&srlimit=5&srsearch="+i,{signal:e})).json();j(b,f(((r=t.query)==null?void 0:r.search.map(n=>({...n,snippet:H(n.snippet)})))??[]))}),200),P=new Intl.Collator("en").compare;function B(e){j(T,f((e||[]).sort((i,a)=>P(i.title,a.title))))}const E=e=>e.querySelectorAll("a,button,input");var k=$(),q=p(k);J(q,{get items(){return _(b)},itemIdFn:D,onFilterTextChange:I,onSelectedChange:B,navSelector:E,badgeClassName:"badge text-bg-light d-flex align-items-center",badgeLabel:(a,t)=>{let r=()=>t==null?void 0:t().itemContext,n=()=>t==null?void 0:t().directives;var l=X(),c=z(l),C=p(c),d=L(c,2);let v;x(()=>v=G(d,v,{type:"button","aria-label":"Close"})),x(()=>{S(c,"href",`${s}${r().item.pageid}`),h(C,r().item.title)}),A(d,(g,y)=>K(g,y),()=>"btn-close ms-1 wiki-btn-close"),A(d,(g,y)=>n().badgeCloseButtonDirective(g,y),r),u(a,l)},itemLabel:(a,t)=>{let r=()=>t==null?void 0:t().itemContext.id,n=()=>t==null?void 0:t().itemContext.item;var l=Y(),c=p(l),C=p(c),d=L(c,2),v=p(d);x(()=>{S(l,"for",""+r()),h(C,n().title),h(v,n().snippet)}),u(a,l)},$$slots:{badgeLabel:!0,itemLabel:!0}});var M=L(q,4);Q(M,17,()=>_(T),V,(e,i)=>{var a=Z(),t=p(a);x(()=>{S(a,"href",`${s}${_(i).pageid}`),h(t,_(i).title)}),u(e,a)},e=>{var i=U("none");u(e,i)}),u(m,k),W()}export{bt as default};
