import{ai as u,ac as i,ad as y,K as d,J as W}from"./AppCommon-CRrVgjjK.js";import{i as g,e as h,f as p}from"./directive-CKEccryv-CZ-m_LIt.js";const f=(t,o,e=1/0)=>{if(o!==void 0)if(typeof o=="object"&&o&&e>=1){t||(t={});for(const n of Object.keys(o))Object.prototype.hasOwnProperty.call(o,n)&&(n==="__proto__"||n==="constructor"||(t[n]=f(t[n],o[n],e-1)))}else return o;return t},b=(t,o=g)=>{const e=u({}),n=o===g?t:i(()=>o(f({},t==null?void 0:t(),2)));return y(i(()=>f(f({},n==null?void 0:n(),2),e(),2)),{...e,own$:e,adaptedParent$:n,parent$:t})};function C(t,o){return e=>{const n=p(t,e);t=e,n&&o(n)}}const m=(t,o)=>o?(...e)=>{t(...e),o(...e)}:t,F=(t,o)=>{const e=u(o,{equal:Object.is});return y(i(()=>m(t,e())),{set:e.set,update:e.update})},j=({factory:t,defaultConfig:o,widgetConfig:e,events:n,props:r})=>{const c=h(o),a={...r};if(n)for(const s of Object.keys(n))a[s]=F(n[s],r[s]);const l=t({config:i(()=>({...c(),...e==null?void 0:e()})),props:a});return{...l,patchChangedProps:C(r,l.patch)}},x=(t=Symbol("widgetsConfig"))=>{const o=r=>{const c=d(t),a=b(c,r);return W(t,a),a},e=r=>{const c=d(t);return i(()=>c==null?void 0:c()[r])};return{widgetsDefaultConfigKey:t,createWidgetsDefaultConfig:o,getContextWidgetConfig:e,callWidgetFactory:({factory:r,widgetName:c=null,defaultConfig:a={},events:l,props:s})=>j({factory:r,defaultConfig:a,widgetConfig:c?e(c):null,events:l,props:s})}},{widgetsDefaultConfigKey:_,createWidgetsDefaultConfig:k,getContextWidgetConfig:v,callWidgetFactory:S}=x();export{S as c,x as w};
