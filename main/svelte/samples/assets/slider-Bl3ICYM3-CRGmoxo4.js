import{a0 as a,ae as ye,$ as y}from"./AppCommon-C3njszSs.js";import{q as C,s as st,m as M,a as v,b as nt,n as lt}from"./dom-BhJG5nY--BK8Qu-np.js";import{w as rt,e as ot,s as ct,t as _}from"./stores-D502qs93.js";import{a as Pe,k as ke,t as ut,b as w,c as U,g as Ve}from"./writables-e0tyaQpe-BK6F5It5.js";import{c as dt}from"./resizeObserver-Dw3WH7Jx.js";import{c as mt}from"./widget-Byox2iix.js";const bt=/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/;function le(c){const u=(""+c).match(bt);return Math.max(0,(u[1]?.length??0)-(+u[2]||0))}const re={min:0,max:100,stepSize:1,readonly:!1,disabled:!1,vertical:!1,className:"",ariaLabel:()=>"Value",ariaLabelledBy:()=>"",ariaValueText:()=>"",onValuesChange:lt,values:[0],showValueLabels:!0,showMinMaxLabels:!0,showTicks:!1,showTickValues:!0,tickInterval:0,rtl:!1},ht={min:Ve,max:Ve,stepSize:ke(0,1/0,{strict:!0}),readonly:w,disabled:w,vertical:w,ariaLabel:U,ariaLabelledBy:U,ariaValueText:U,onValuesChange:U,values:Pe,showValueLabels:w,showMinMaxLabels:w,showTicks:w,showTickValues:w,tickInterval:ke(0,1/0,{strict:!0}),rtl:w,className:ut},Se=(c,u,f,m,o)=>{const x=Math.pow(10,o);if(c>=f)return f;if(c<=u)return u;const O=Math.floor((c-u)*x/m);return+(((c-u)*x%m<m/2?O:O+1)*m/x+u).toFixed(o)},W=(c,u,f,m)=>{u.update(o=>(o=[...o],o[c]=o[c]+f*m,o))},G=(c,u,f)=>c&&u?f?1:-1:c&&!u?-1:!c&&u?f?-1:1:!c&&!u?-1:1,d=c=>c!=null?`${c}%`:"",$t=mt("slider",c=>{const[{min$:u,max$:f,stepSize$:m,rtl$:o,values$:x,ariaLabel$:O,ariaLabelledBy$:ze,ariaValueText$:Me,onValuesChange$:xe,showValueLabels$:J,showMinMaxLabels$:K,showTicks$:k,showTickValues$:H,tickInterval$:oe,...Q},Re]=rt(re,c,ht),{vertical$:l,disabled$:R,readonly$:ce}=Q;let A=-1;const j=new Map,L=a(()=>{const e=u(),t=f();return e===t?re.min:Math.min(e,t)}),g=a(()=>{const e=u(),t=f();return e===t?re.max:Math.max(e,t)}),Z=a(()=>Math.max(le(m()),le(L()),le(g()))),ue=a(()=>m()*Math.pow(10,Z())),b=ot(x,xe,e=>{const t=L(),i=g(),s=ue(),n=Z();return e.map(r=>Se(r,t,i,s,n))},Pe.equal),{directive:Be,element$:Te}=C(),{directive:Ee,element$:Ne}=C(),{directive:_e,element$:Oe}=C(),{directive:He,element$:de}=C(),{directive:Ae,elements$:je}=st(),{directive:qe,dimensions$:q}=dt(),V=ye({}),ee=a(()=>(q(),V(),je().map(e=>e.getBoundingClientRect())),{equal:Object.is}),I=a(()=>(q(),V(),Te()?.getBoundingClientRect()??{}),{equal:Object.is}),Ie=a(()=>(q(),V(),Ne()?.getBoundingClientRect()??{}),{equal:(e,t)=>Object.is(e,t)}),Fe=a(()=>(q(),V(),Oe()?.getBoundingClientRect()??{}),{equal:(e,t)=>Object.is(e,t)}),Xe=a(()=>l()?I().top:I().left),me=a(()=>l()?I().height:I().width),F=a(()=>[...b()].sort((e,t)=>e-t)),Ye=a(()=>b().map((e,t)=>({id:t,value:e})).sort((e,t)=>e.value-t.value)),Ce=a(()=>{const e=O(),t=Me(),i=ze();return Ye().map((s,n)=>({...s,ariaLabel:i(n)?void 0:e(n),ariaLabelledBy:i(n)||void 0,ariaValueText:t(s.value,n)||void 0}))}),be=a(()=>b().map(e=>Y(e))),S=a(()=>[...be()].sort((e,t)=>e-t)),Ue=a(()=>{const e=Ie();return X(l()?e.height:e.width)}),We=a(()=>{const e=Fe();return X(l()?e.height:e.width)}),Ge=a(()=>J()&&(!k()||!H())),X=e=>e?e/me()*100:0,he=a(()=>X(l()?de()?.getBoundingClientRect().height:de()?.getBoundingClientRect().width)),pe=a(()=>l()?ae():ie()),B=e=>X(l()?ee()[e]?.height:ee()[e]?.width),ve=a(()=>{if(!K()||k()&&H())return!1;if(!J())return!0;const e=Ue(),t=l(),i=o();if(te()){const n=he(),r=pe();return i&&!t||t&&!i?r+n/2<100-e-1:r-n/2>e+1}const s=S();return i?s[0]-B(s.length-1)/2>e+1:s[0]-B(0)/2>e+1}),fe=a(()=>{if(!K()||k()&&H())return!1;if(!J())return!0;const e=We(),t=l(),i=o();if(te()){const n=he(),r=pe();return i&&!t||t&&!i?r-n/2>e+1:r+n/2<100-e-1}const s=S();return i?100-s[s.length-1]-B(0)/2>e+1:s[s.length-1]+B(s.length-1)/2<100-e-1}),Le=ye([]),te=a(()=>{const e=S();ee().length===e.length&&Le.set(e.map((D,$)=>B($)/2));const t=Le(),i=t?.[0]??0,s=t?.[1]??0,n=Math.max(i,s),r=n!==50?n*2+2:15;return e.length==2&&e[1]-s-e[0]+i<r}),T=a(()=>!R()&&!ce()),ie=a(()=>{const e=S(),t=(e[0]+e[1])/2;return l()||e.length!=2?0:o()?100-t:t}),ae=a(()=>{const e=S(),t=100-(e[0]+e[1])/2;return l()&&e.length==2?o()?100-t:t:0}),E=a(()=>{const e=l(),t=o();return be().map(i=>({left:t?e?null:100-i:e?null:i,top:t?e?i:null:e?100-i:null}))}),Je=a(()=>{const e=l(),t=S(),i=o();return t.length===1?[{left:e||i?null:0,right:e?null:i?0:null,bottom:e?i?null:0:null,top:e&&i?0:null,width:e?100:t[0],height:e?t[0]:100,id:0}]:t.map((s,n,r)=>({left:e||i?null:s,right:e?null:i?r[n]:null,bottom:e?i?null:s:null,top:e&&i?r[n]:null,width:e?100:n===r.length-1?s:r[n+1]-s,height:e?n===r.length-1?s:r[n+1]-s:100,id:n})).slice(0,t.length-1)}),Ke=a(()=>{if(!k())return[];const e=l(),t=L(),i=g(),s=o(),n=H(),r=oe()||m(),D=[],$=ue(),P=Z(),p=z=>!!s!=!!e?100-z:z;for(let z=t;z<i;z+=r){const $e=Se(z,t,i,$,P),at=Y($e);D.push({position:p(at),selected:!1,value:$e,displayLabel:n})}return D.push({position:p(100),selected:!1,value:i,displayLabel:n}),D}),Qe=a(()=>{const e=F(),t=i=>{const s=e.length>1,n=s?e[e.length-1]:e[0],r=s?e[0]:0;return i<=n&&i>=r};return Ke().map(i=>({...i,selected:t(i.value)}))}),Y=e=>{const t=L(),i=g();return(e-t)*100/(i-t)},se=e=>{const t=b();if(t.length===1)return 0;const i=F(),s=i.find($=>Y($)>e*100),n=s?i.indexOf(s):i.length-1,r=Y(i[n-1]+(i[n]-i[n-1])/2),D=i[e*100<=r?n-1:n];return t.indexOf(D)},ne=e=>{const t=me(),i=Xe();let s=l()?(t-e+i)/t:(e-i)/t;return s=o()?1-s:s,s},N=(e,t)=>{if(T()){const i=ne(e),s=t??se(i),n=i*(g()-L())+L();b.update(r=>(r=[...r],r[s]=n,r))}},h=a(()=>!l()),Ze=v(()=>({attributes:{"aria-disabled":a(()=>R()?"true":void 0),class:Q.className$},classNames:{"au-slider":_,"au-slider-vertical":l,"au-slider-horizontal":h,disabled:R}})),et=v(()=>({classNames:{"au-slider-label-vertical":l,"au-slider-label-vertical-min":l,"au-slider-label":h,"au-slider-label-min":h,"au-slider-rtl":o,invisible:a(()=>!ve())},attributes:{"aria-hidden":y("true")}})),tt=v(()=>({classNames:{"au-slider-label-vertical":l,"au-slider-label-vertical-max":l,"au-slider-label":h,"au-slider-label-max":h,"au-slider-rtl":o,invisible:a(()=>!fe())},attributes:{"aria-hidden":y("true")}})),it=nt((e,t)=>{const i=()=>{j.delete(t.item.id)},s=n=>{j.set(n.item.id,e)};return s(t),{update:s,destroy:i}}),ge=(e,t)=>{e.preventDefault();const i=t!==void 0?j.get(t):e.target,s=n=>{n.preventDefault();const r=l()?n.clientY:n.clientX;i?.focus(),A!==r&&(A=r,N(r,t))};T()&&(V.set({}),i?.focus(),document.addEventListener("mousemove",s),document.addEventListener("mouseup",()=>{document.removeEventListener("mousemove",s)},{once:!0}))},De=(e,t)=>{const i=t!==void 0?j.get(t):e.target,s=n=>{n.preventDefault();const r=l()?n.touches[0].clientY:n.touches[0].clientX;i?.focus(),A!==r&&(A=r,N(r,t))};T()&&(V.set({}),i?.focus(),document.addEventListener("touchmove",s,{passive:!1}),document.addEventListener("touchend",()=>{document.removeEventListener("touchmove",s),document.removeEventListener("touchcancel",s)},{once:!0}),document.addEventListener("touchcancel",()=>{document.removeEventListener("touchmove",s),document.removeEventListener("touchend",s)},{once:!0}))},we=v(e=>({events:{keydown:t=>{const i=e().item.id,{key:s}=t,n=o(),r=m(),D=L(),$=g(),P=l();if(T()){switch(s){case"ArrowDown":W(i,b,r,G(P,n,!0));break;case"ArrowLeft":W(i,b,r,G(P,n,!1));break;case"ArrowUp":W(i,b,r,-1*G(P,n,!0));break;case"ArrowRight":W(i,b,r,-1*G(P,n,!1));break;case"Home":b.update(p=>(p=[...p],p[i]=D,p));break;case"End":b.update(p=>(p=[...p],p[i]=$,p));break;case"PageUp":break;case"PageDown":break;default:return}t.preventDefault()}},mousedown:t=>{t.button===0&&ge(t,e().item.id)},touchstart:t=>{De(t,e().item.id)}}}));return{...ct({min$:L,max$:g,stepSize$:m,values$:b,sortedValues$:F,sortedHandles$:Ce,minValueLabelDisplay$:ve,maxValueLabelDisplay$:fe,combinedLabelDisplay$:te,interactive$:T,combinedLabelPositionLeft$:ie,combinedLabelPositionTop$:ae,progressDisplayOptions$:Je,handleDisplayOptions$:E,showValueLabels$:Ge,showMinMaxLabels$:K,showTicks$:k,rtl$:o,ticks$:Qe,...Q}),patch:Re,api:{},directives:{sliderDirective:M(Be,qe,Ze),progressDisplayDirective:v(e=>({styles:{left:a(()=>d(e().option.left)),right:a(()=>d(e().option.right)),top:a(()=>d(e().option.top)),bottom:a(()=>d(e().option.bottom)),width:a(()=>d(e().option.width)),height:a(()=>d(e().option.height))},classNames:{"au-slider-progress":_}})),clickableAreaDirective:v(()=>({events:{mousedown:e=>{if(e.button!==0)return;const t=l()?e.clientY:e.clientX,i=se(ne(t));N(t,i),ge(e,i)},touchstart:e=>{const t=l()?e.touches[0].clientY:e.touches[0].clientX,i=se(ne(t));N(t,i),De(e,i)}},classNames:{"au-slider-clickable-area":h,"au-slider-clickable-area-vertical":l,"au-slider-clickable-area-with-ticks":a(()=>k()&&oe()===0)}})),handleEventsDirective:we,handleDirective:M(it,we,v(e=>({attributes:{role:y("slider"),"aria-valuemin":L,"aria-valuemax":g,"aria-valuenow":a(()=>e().item.value),"aria-valuetext":a(()=>e().item.ariaValueText),"aria-label":a(()=>e().item.ariaLabel),"aria-labelledBy":a(()=>e().item.ariaLabelledBy),"aria-orientation":a(()=>l()?"vertical":void 0),"aria-disabled":a(()=>R()?"true":void 0),disabled:R,"aria-readonly":a(()=>ce()?"true":void 0)},styles:{left:a(()=>d(E()[e().item.id].left)),top:a(()=>d(E()[e().item.id].top))},classNames:{"au-slider-handle":_,"au-slider-handle-vertical":l,"au-slider-handle-horizontal":h}}))),minLabelDirective:M(Ee,et),maxLabelDirective:M(_e,tt),combinedHandleLabelDisplayDirective:M(He,v(()=>({classNames:{"au-slider-label-vertical":l,"au-slider-label-vertical-now":l,"au-slider-label":h,"au-slider-label-now":h},styles:{left:a(()=>d(ie())),top:a(()=>d(ae()))},attributes:{"aria-hidden":y("true")}}))),handleLabelDisplayDirective:M(Ae,v(e=>({classNames:{"au-slider-label-vertical":l,"au-slider-label-vertical-now":l,"au-slider-label":h,"au-slider-label-now":h},styles:{left:a(()=>d(E()[e().index].left)),top:a(()=>d(E()[e().index].top))},attributes:{"aria-hidden":y("true")}}))),tickDirective:v(e=>({classNames:{"au-slider-tick":_,"au-slider-tick-horizontal":h,"au-slider-tick-vertical":l},styles:{left:a(()=>l()?null:d(e().tick.position)),top:a(()=>l()?d(e().tick.position):null)},events:{click:t=>{N(l()?t.clientY:t.clientX)}},attributes:{"aria-hidden":y("true")}})),tickLabelDirective:v(e=>({classNames:{"au-slider-tick-label":_,"au-slider-tick-label-vertical":l,"au-slider-tick-label-now":a(()=>F().some(t=>t===e().tick.value))},styles:{left:a(()=>l()?null:d(e().tick.position)),top:a(()=>l()?d(e().tick.position):null)},attributes:{"aria-hidden":y("true")}}))}}});export{$t as c};
