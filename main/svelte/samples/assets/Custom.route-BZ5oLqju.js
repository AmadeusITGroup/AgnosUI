import{p as R,s as F,S as A,t as w,g as x,d as c,b as y,Q as U,q as z,c as v,h as L,R as G,a as J,l as D,f as K,T as S,k as h,j as O}from"./AppCommon-CsXJDRZ3.js";import{a as H}from"./actions-kl0KjzIn.js";import{S as V}from"./Select-BC6YD3rR.js";import{c as W}from"./dom-gfxqXJpK-BenLeVwg.js";import"./Slot-BZUO5b9L.js";import"./snippet-B5aMU-E6.js";import"./config-DPIUpkcO.js";import"./config-TUPcxXVO.js";import"./stores-BElQIA3m.js";import"./index-client-BaNbKOMT.js";import"./floatingUI-BjOnL2vv.js";import"./promise-XSP94FjG-Bz_ckb1K.js";import"./focustrack-UpNoKNdY.js";import"./navManager-DXxk70la.js";import"./widget-DeVncyQM.js";import"./extendWidget-Dym7HUbM.js";function X(m,o){let r;return(...f)=>{r&&clearTimeout(r),r=setTimeout(()=>{m(...f)},o)}}const Y=m=>{let o;return(...r)=>(o==null||o.abort(),o=new AbortController,m(o.signal,...r))};var Z=w('<a target="_blank" rel="noreferrer"> </a> <button></button>',1),$=w('<label><div class="fw-bold"> </div> <div class="text-wrap wiki-desc"> </div></label>'),tt=w('<a class="pe-2"> </a>'),et=w('<div class="custom-select my-auto mb-3"><!> <span class="fw-bold">Selection:</span> <!></div>');function xt(m,o){R(o,!0);const r="https://en.wikipedia.org/?curid=";let f=F(A([])),T=F(A([]));const I=e=>"page-"+e.pageid;function P(e){const i=document.createElement("div");return i.innerHTML=e,i.innerText}const B=X(Y(async(e,i)=>{var s;const t=await(await fetch("https://en.wikipedia.org/w/api.php?action=query&list=search&prop=info&inprop=url&utf8=&format=json&origin=*&srlimit=5&srsearch="+i,{signal:e})).json();D(f,((s=t.query)==null?void 0:s.search.map(n=>({...n,snippet:P(n.snippet)})))??[],!0)}),200),E=new Intl.Collator("en").compare;function M(e){D(T,(e||[]).sort((i,a)=>E(i.title,a.title)),!0)}const N=e=>e.querySelectorAll("a,button,input");var k=et(),q=c(k);V(q,{get items(){return x(f)},itemIdFn:I,onFilterTextChange:B,onSelectedChange:M,navSelector:N,badgeClassName:"badge text-bg-light d-flex align-items-center",badgeLabel:(a,t)=>{let s=()=>t==null?void 0:t().itemContext,n=()=>t==null?void 0:t().directives;var l=Z(),p=K(l),C=c(p),d=y(p,2);let _;H(d,(u,g)=>{var b;return(b=W)==null?void 0:b(u,g)},()=>"btn-close ms-1 wiki-btn-close"),H(d,(u,g)=>{var b,j;return(j=(b=n()).badgeCloseButtonDirective)==null?void 0:j.call(b,u,g)},s),L(u=>{S(p,"href",`${r}${s().item.pageid}`),h(C,s().item.title),_=O(d,_,{type:"button","aria-label":"Close",...u})},[()=>({})]),v(a,l)},itemLabel:(a,t)=>{let s=()=>t==null?void 0:t().itemContext.id,n=()=>t==null?void 0:t().itemContext.item;var l=$(),p=c(l),C=c(p),d=y(p,2),_=c(d);L(()=>{S(l,"for",""+s()),h(C,n().title),h(_,n().snippet)}),v(a,l)},$$slots:{badgeLabel:!0,itemLabel:!0}});var Q=y(q,4);U(Q,17,()=>x(T),G,(e,i)=>{var a=tt(),t=c(a);L(()=>{S(a,"href",`${r}${x(i).pageid}`),h(t,x(i).title)}),v(e,a)},e=>{var i=z("none");v(e,i)}),v(m,k),J()}export{xt as default};
