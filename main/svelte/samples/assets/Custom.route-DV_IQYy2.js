import{a as B,c as S,T as q,f as _,g as f,h as p,s as C,Q as E,q as M,d as u,t as w,U as T,k as g,R as N,p as Q,l as F,b as R,e as z}from"./AppCommon-B76lT1y_.js";import{a as j}from"./actions-Du0Rba5w.js";import{S as G}from"./Select-B7Ym-XMc.js";import{c as J}from"./dom-CzJpOnsw-BZqufm2P.js";import"./Slot-CXExX_Gb.js";import"./snippet-CnpSvqSG.js";import"./config-olGNvlEn.js";import"./config-DcF-ov_F.js";import"./stores-LwGWUfVc.js";import"./index-client-CKYBWo2A.js";import"./floatingUI-lU5nHPGQ.js";import"./promise-XSP94FjG-DM-buaFZ.js";import"./focustrack-nsbwqtZO.js";import"./navManager-ClHjjX3I.js";import"./widget-DQK-19xE.js";import"./extendWidget-ByTIOVHS.js";function K(m,s){let i;return(...b)=>{i&&clearTimeout(i),i=setTimeout(()=>{m(...b)},s)}}const O=m=>{let s;return(...i)=>(s?.abort(),s=new AbortController,m(s.signal,...i))};var V=_('<a target="_blank" rel="noreferrer"> </a> <button></button>',1),W=_('<label><div class="fw-bold"> </div> <div class="text-wrap wiki-desc"> </div></label>'),X=_('<a class="pe-2"> </a>'),Y=_('<div class="custom-select my-auto mb-3"><!> <span class="fw-bold">Selection:</span> <!></div>');function vt(m,s){B(s,!0);const i="https://en.wikipedia.org/?curid=";let b=S(q([])),y=S(q([]));const A=t=>"page-"+t.pageid;function D(t){const e=document.createElement("div");return e.innerHTML=t,e.innerText}const H=K(O(async(t,e)=>{const a=await(await fetch("https://en.wikipedia.org/w/api.php?action=query&list=search&prop=info&inprop=url&utf8=&format=json&origin=*&srlimit=5&srsearch="+e,{signal:t})).json();F(b,a.query?.search.map(o=>({...o,snippet:D(o.snippet)}))??[],!0)}),200),I=new Intl.Collator("en").compare;function P(t){F(y,(t||[]).sort((e,r)=>I(e.title,r.title)),!0)}const U=t=>t.querySelectorAll("a,button,input");var L=Y(),k=p(L);G(k,{get items(){return f(b)},itemIdFn:A,get onFilterTextChange(){return H},onSelectedChange:P,navSelector:U,badgeClassName:"badge text-bg-light d-flex align-items-center",badgeLabel:(r,a)=>{let o=()=>a?.().itemContext,v=()=>a?.().directives;var l=V(),c=R(l),x=p(c),d=C(c,2);z(d,n=>({type:"button","aria-label":"Close",...n}),[()=>({})]),j(d,(n,h)=>J?.(n,h),()=>"btn-close ms-1 wiki-btn-close"),j(d,(n,h)=>v().badgeCloseButtonDirective?.(n,h),o),w(()=>{T(c,"href",`${i}${o().item.pageid}`),g(x,o().item.title)}),u(r,l)},itemLabel:(r,a)=>{let o=()=>a?.().itemContext.id,v=()=>a?.().itemContext.item;var l=W(),c=p(l),x=p(c),d=C(c,2),n=p(d);w(()=>{T(l,"for",""+o()),g(x,v().title),g(n,v().snippet)}),u(r,l)},$$slots:{badgeLabel:!0,itemLabel:!0}});var $=C(k,4);E($,17,()=>f(y),N,(t,e)=>{var r=X(),a=p(r);w(()=>{T(r,"href",`${i}${f(e).pageid}`),g(a,f(e).title)}),u(t,r)},t=>{var e=M("none");u(t,e)}),u(m,L),Q()}export{vt as default};
