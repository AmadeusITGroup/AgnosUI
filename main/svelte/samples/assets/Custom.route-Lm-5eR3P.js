import{p as R,j as P,R as x,g as h,P as U,b as v,a as z,t as C,h as A,n as c,f as G,d as L,s as S,S as k,l as w,k as J,q as K,Q as O}from"./AppCommon-CNFzHc7W.js";import{a as D}from"./actions-CgChCV3L.js";import{S as V}from"./Select-CNpCp6kj.js";import{c as W}from"./stores-DX-ADOKq-C1SowTb2.js";import"./Slot-DFWyuRT7.js";import"./snippet-OwS13CKT.js";import"./config-DtJzPsW7.js";import"./config-BjPNVYQq.js";import"./index-client-BhJBsFaw.js";import"./floatingUI-BEeuPa-y.js";import"./promise-CBh_HbSK-D4qcgxcZ.js";import"./focustrack-Bea3n_Ev.js";import"./navManager-RI8Hsqtz.js";import"./extendWidget-DXA9edL2.js";function X(m,s){let o;return(...f)=>{o&&clearTimeout(o),o=setTimeout(()=>{m(...f)},s)}}const Y=m=>{let s;return(...o)=>(s==null||s.abort(),s=new AbortController,m(s.signal,...o))};var Z=C('<a target="_blank" rel="noreferrer"> </a> <button></button>',1),$=C('<label><div class="fw-bold"> </div> <div class="text-wrap wiki-desc"> </div></label>'),tt=C('<a class="pe-2"> </a>'),et=C('<div class="custom-select my-auto mb-3"><!> <span class="fw-bold">Selection:</span> <!></div>');function ft(m,s){R(s,!0);const o="https://en.wikipedia.org/?curid=";let f=P(x([])),T=P(x([]));const H=e=>"page-"+e.pageid;function I(e){const i=document.createElement("div");return i.innerHTML=e,i.innerText}const B=X(Y(async(e,i)=>{var r;const t=await(await fetch("https://en.wikipedia.org/w/api.php?action=query&list=search&prop=info&inprop=url&utf8=&format=json&origin=*&srlimit=5&srsearch="+i,{signal:e})).json();A(f,x(((r=t.query)==null?void 0:r.search.map(n=>({...n,snippet:I(n.snippet)})))??[]))}),200),E=new Intl.Collator("en").compare;function M(e){A(T,x((e||[]).sort((i,a)=>E(i.title,a.title))))}const N=e=>e.querySelectorAll("a,button,input");var q=et(),j=c(q);V(j,{get items(){return h(f)},itemIdFn:H,onFilterTextChange:B,onSelectedChange:M,navSelector:N,badgeClassName:"badge text-bg-light d-flex align-items-center",badgeLabel:(a,t)=>{let r=()=>t==null?void 0:t().itemContext,n=()=>t==null?void 0:t().directives;var l=Z(),p=G(l),g=c(p),d=S(p,2);let _;D(d,(u,y)=>{var b;return(b=W)==null?void 0:b(u,y)},()=>"btn-close ms-1 wiki-btn-close"),D(d,(u,y)=>{var b,F;return(F=(b=n()).badgeCloseButtonDirective)==null?void 0:F.call(b,u,y)},r),L(u=>{k(p,"href",`${o}${r().item.pageid}`),w(g,r().item.title),_=J(d,_,{type:"button","aria-label":"Close",...u})},[()=>({})]),v(a,l)},itemLabel:(a,t)=>{let r=()=>t==null?void 0:t().itemContext.id,n=()=>t==null?void 0:t().itemContext.item;var l=$(),p=c(l),g=c(p),d=S(p,2),_=c(d);L(()=>{k(l,"for",""+r()),w(g,n().title),w(_,n().snippet)}),v(a,l)},$$slots:{badgeLabel:!0,itemLabel:!0}});var Q=S(j,4);U(Q,17,()=>h(T),O,(e,i)=>{var a=tt(),t=c(a);L(()=>{k(a,"href",`${o}${h(i).pageid}`),w(t,h(i).title)}),v(e,a)},e=>{var i=K("none");v(e,i)}),v(m,q),z()}export{ft as default};
