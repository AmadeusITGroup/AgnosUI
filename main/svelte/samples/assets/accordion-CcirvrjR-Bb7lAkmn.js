import{w as E,s as k,m as F,n as z,i as L,t as M}from"./stores-CNuHRGye.js";import{c as _}from"./baseTransitions-BhCr9LuG.js";import{a0 as o,af as P,a1 as j,$ as W}from"./AppCommon-D-Irf_br.js";import{n as $,r as q,m as O,a as p,e as G}from"./dom-Bcg9ORcA-CPWV9YZz.js";import{t,b as u,c as C}from"./writables-e0tyaQpe-5AqAML2m.js";import{c as J}from"./widget-ccL6PuC2.js";function K(m,s,n){let l;return s.length==2?(n=n??s[0],l=s.find(r=>r!==n)):s.length>2&&(l=s[0]),l&&m.forEach(r=>{r.stores.id$()!==l&&r.stores.visible$()&&r.patch({visible:!1})}),m}function V(m,s){return m.find(n=>n.stores.id$()===s)}const a={closeOthers:!1,onItemShown:$,onItemHidden:$,className:"",itemDestroyOnHide:!0,itemAnimated:!0,itemTransition:$,itemHeadingTag:"",itemClassName:"",itemHeaderClassName:"",itemButtonClassName:"",itemBodyContainerClassName:"",itemBodyClassName:""},S={id:"",destroyOnHide:a.itemDestroyOnHide,disabled:!1,visible:!1,animated:a.itemAnimated,transition:a.itemTransition,onShown:$,onHidden:$,onVisibleChange:$,className:a.itemClassName,headerClassName:a.itemHeaderClassName,buttonClassName:a.itemButtonClassName,bodyContainerClassName:a.itemBodyContainerClassName,bodyClassName:a.itemBodyClassName,headingTag:a.itemHeadingTag},Q=Object.keys(S);function oe(){return{...a}}const R={closeOthers:C,onItemShown:u,onItemHidden:u,className:t,itemDestroyOnHide:C,itemAnimated:C,itemTransition:u,itemClassName:t,itemHeaderClassName:t,itemButtonClassName:t,itemBodyContainerClassName:t,itemBodyClassName:t,itemHeadingTag:t},U={id:t,destroyOnHide:C,disabled:C,visible:C,animated:C,transition:u,onShown:u,onHidden:u,onVisibleChange:u,className:t,headerClassName:t,buttonClassName:t,bodyContainerClassName:t,bodyClassName:t,headingTag:t};function X(m){const[{bodyClassName$:s,buttonClassName$:n,bodyContainerClassName$:l,headerClassName$:r,animated$:h,transition$:B,destroyOnHide$:T,onShown$:N,onHidden$:y,onVisibleChange$:v,visible$:c,id$:i,disabled$:b,...H},x]=E(S,m,U),D=P(!1),e=L(i),f=_({props:{transition:B,visible:c,onVisibleChange:v,animated:h,animatedOnInit:!1,initDone:D,onHidden:()=>{y()()},onShown:()=>{N()()}}}),A=o(()=>T()===!1||!f.stores.hidden$()),w=p(()=>({attributes:{id:o(()=>`${e()}-toggle`),"aria-expanded":o(()=>`${c()}`),"aria-disabled":o(()=>`${b()}`),"aria-controls":o(()=>`${e()}-body-container`),disabled:b},classNames:{collapsed:o(()=>!c())},events:{click:()=>{b()||c.update(g=>!g)}}})),I=f.directives.directive,d=p(()=>({attributes:{id:o(()=>`${e()}-body-container`),class:l,"aria-labelledby":o(()=>`${e()}-toggle`)}}));return{...k({visible$:c,id$:e,shouldBeInDOM$:A,disabled$:b,bodyClassName$:s,buttonClassName$:n,bodyContainerClassName$:l,headerClassName$:r,...H}),patch:x,api:{initDone:()=>{D.set(!0)},collapse:()=>{c.set(!1)},expand:()=>{c.set(!0)},toggle:()=>{c.update(g=>!g)}},directives:{toggleDirective:w,buttonDirective:O(w,p(()=>({attributes:{type:W("button"),class:n}}))),headerDirective:p(()=>({attributes:{class:r}})),bodyDirective:p(()=>({attributes:{class:s}})),transitionDirective:I,bodyContainerAttrsDirective:d,bodyContainerDirective:O(I,d),itemDirective:$}}}function Y(m=X,s=Q,n=a,l=R){return J("accordion",r=>{const[h,B]=E(n,r,l),{closeOthers$:T,onItemShown$:N,onItemHidden$:y,className$:v}=h,c=Object.fromEntries(Object.entries(h).filter(e=>e[0].startsWith("item")).map(e=>[e[0].charAt(4).toLowerCase()+e[0].slice(5,-1),e[1]])),i=q(),b=o(()=>{const e=[];return i().forEach(f=>{f.stores.visible$()&&e.push(f.stores.id$())}),e}),H=P(b()[0]),x=o(()=>{T()&&(K(i(),b(),H()),H.set(b()[0]))}),D=o(()=>{x()});return{...k({itemWidgets$:i,className$:v}),patch:B,api:{expand:e=>{V(i(),e)?.api.expand()},collapse:e=>{V(i(),e)?.api.collapse()},toggle:e=>{V(i(),e)?.api.toggle()},expandAll:()=>{i().forEach(e=>e.api.expand())},collapseAll:()=>{i().forEach(e=>e.api.collapse())},registerItem:e=>{const f=s,A=F(f,z(f,e?.config),c),[{onHidden$:w,onShown$:I}]=E({onHidden:S.onHidden,onShown:S.onShown},{config:A,props:e?.props}),d=m({config:A,props:{...e?.props,onHidden:j(W(()=>{y()(d.stores.id$()),w()?.()}),g=>{y.set(g)}),onShown:j(W(()=>{N()(d.stores.id$()),I()?.()}),g=>{N.set(g)})}});return d.directives.itemDirective=O(()=>({destroy:i.register(d)}),p(()=>({attributes:{class:d.stores.className$,id:d.stores.id$}}))),d}},directives:{accordionDirective:O(G(D),p(()=>({attributes:{class:v},classNames:{"au-accordion":M}})))}}})}const ne=Y();export{ne as a,X as c,Y as f,oe as g};
