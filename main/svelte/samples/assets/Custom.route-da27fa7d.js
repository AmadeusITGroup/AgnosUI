import{S as H,i as P,s as A,O as q,j as h,c as E,f as k,n as p,g,m as M,p as _,t as N,a as O,h as b,d as R,R as U,k as $,q as y,u as w}from"./index-14bf255f.js";import{S as z}from"./Select-4322b0b4.js";import"./index-d37313aa.js";import"./config-5b0ae2af.js";import"./directiveUtils-0f196314.js";import"./stores-0a381eb7.js";import"./focustrack-18e0e8bb.js";import"./pagination-733aa682.js";import"./writables-8f91fb4c.js";import"./fade-cfc2f702.js";import"./baseTransitions-b669155c.js";function B(n,e){let l;return(...s)=>{l&&clearTimeout(l),l=setTimeout(()=>{n(...s)},e)}}const D=n=>{let e;return(...l)=>(e==null||e.abort(),e=new AbortController,n(e.signal,...l))};function F(n,e,l){const s=n.slice();return s[7]=e[l],s}function j(n){const e=n[10].item;n[7]=e}function G(n){let e,l=n[10].item.title+"",s,c,u,a,f,o;function r(){return n[5](n[11],n[10])}return{c(){e=h("a"),s=$(l),u=k(),a=h("button"),p(e,"href",c=`${C}${n[10].item.pageid}`),p(e,"target","_blank"),p(e,"rel","noreferrer"),p(a,"type","button"),p(a,"class","btn-close ms-1 wiki-btn-close"),p(a,"aria-label","Close")},m(t,i){g(t,e,i),_(e,s),g(t,u,i),g(t,a,i),f||(o=y(a,"click",r),f=!0)},p(t,i){n=t,i&1024&&l!==(l=n[10].item.title+"")&&w(s,l),i&1024&&c!==(c=`${C}${n[10].item.pageid}`)&&p(e,"href",c)},d(t){t&&(b(e),b(u),b(a)),f=!1,o()}}}function J(n){j(n);let e,l,s=n[7].title+"",c,u,a,f=n[7].snippet+"",o,r;return{c(){e=h("label"),l=h("div"),c=$(s),u=k(),a=h("div"),o=$(f),p(l,"class","fw-bold"),p(a,"class","text-wrap wiki-desc"),p(e,"for",r=""+n[10].id),p(e,"slot","item")},m(t,i){g(t,e,i),_(e,l),_(l,c),_(e,u),_(e,a),_(a,o)},p(t,i){j(t),i&1024&&s!==(s=t[7].title+"")&&w(c,s),i&1024&&f!==(f=t[7].snippet+"")&&w(o,f),i&1024&&r!==(r=""+t[10].id)&&p(e,"for",r)},d(t){t&&b(e)}}}function I(n){let e;return{c(){e=$("none")},m(l,s){g(l,e,s)},d(l){l&&b(e)}}}function L(n){let e,l=n[7].title+"",s,c;return{c(){e=h("a"),s=$(l),p(e,"href",c=`${C}${n[7].pageid}`),p(e,"class","pe-2")},m(u,a){g(u,e,a),_(e,s)},p(u,a){a&2&&l!==(l=u[7].title+"")&&w(s,l),a&2&&c!==(c=`${C}${u[7].pageid}`)&&p(e,"href",c)},d(u){u&&b(e)}}}function K(n){let e,l,s,c,u,a;l=new z({props:{items:n[0],itemIdFn:n[2],badgeClassName:"badge text-bg-light d-flex align-items-center",$$slots:{item:[J,({itemContext:t})=>({10:t}),({itemContext:t})=>t?1024:0],badgeLabel:[G,({itemContext:t,widget:i})=>({10:t,11:i}),({itemContext:t,widget:i})=>(t?1024:0)|(i?2048:0)]},$$scope:{ctx:n}}}),l.$on("filterTextChange",n[3]),l.$on("selectedChange",n[4]);let f=q(n[1]),o=[];for(let t=0;t<f.length;t+=1)o[t]=L(F(n,f,t));let r=null;return f.length||(r=I()),{c(){e=h("div"),E(l.$$.fragment),s=k(),c=h("span"),c.textContent="Selection:",u=k();for(let t=0;t<o.length;t+=1)o[t].c();r&&r.c(),p(c,"class","fw-bold"),p(e,"class","custom-select my-auto mb-3")},m(t,i){g(t,e,i),M(l,e,null),_(e,s),_(e,c),_(e,u);for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(e,null);r&&r.m(e,null),a=!0},p(t,[i]){const d={};if(i&1&&(d.items=t[0]),i&7168&&(d.$$scope={dirty:i,ctx:t}),l.$set(d),i&2){f=q(t[1]);let m;for(m=0;m<f.length;m+=1){const v=F(t,f,m);o[m]?o[m].p(v,i):(o[m]=L(v),o[m].c(),o[m].m(e,null))}for(;m<o.length;m+=1)o[m].d(1);o.length=f.length,f.length?r&&(r.d(1),r=null):r||(r=I(),r.c(),r.m(e,null))}},i(t){a||(N(l.$$.fragment,t),a=!0)},o(t){O(l.$$.fragment,t),a=!1},d(t){t&&b(e),R(l),U(o,t),r&&r.d()}}}const C="https://en.wikipedia.org/?curid=";function Q(n){const e=document.createElement("div");return e.innerHTML=n,e.innerText}function V(n,e,l){let s=[],c=[];const u=t=>"page-"+t.pageid,a=B(D(async(t,i)=>{var T;const d=i.detail,v=await(await fetch("https://en.wikipedia.org/w/api.php?action=query&list=search&prop=info&inprop=url&utf8=&format=json&origin=*&srlimit=5&srsearch="+d,{signal:t})).json();l(0,s=((T=v.query)==null?void 0:T.search.map(S=>({...S,snippet:Q(S.snippet)})))??[])}),200),f=new Intl.Collator("en").compare;function o(t){l(1,c=(t.detail||[]).sort((i,d)=>f(i.title,d.title)))}return[s,c,u,a,o,(t,i)=>t.api.unselect(i.item)]}class ae extends H{constructor(e){super(),P(this,e,V,K,A,{})}}export{ae as default};
