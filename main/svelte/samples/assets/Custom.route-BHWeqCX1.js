import{a as B,l as S,T as F,g as f,s as C,Q as E,r as M,b as d,t as w,U as T,e as g,h as c,R as N,p as Q,k as q,f as R,c as z,n as _}from"./AppCommon-fKgCL6YI.js";import{a as j}from"./actions-Ck4r4m0h.js";import{S as G}from"./Select-CVzXbYR5.js";import{c as J}from"./dom-BPD8lUxd-BXl1zwuB.js";import"./Slot-DLvDzdYz.js";import"./snippet-Bj424EjK.js";import"./config-5oAnyDkp.js";import"./config-FzAvapuu.js";import"./stores-DBcJ-LkE.js";import"./index-client-CHYA3ikv.js";import"./floatingUI-DI63nE2h.js";import"./promise-D-RZVPuv-TlEohQL0.js";import"./focustrack-BAUx7Yyw.js";import"./navManager-Knf7_nOE.js";import"./isFocusable-Ckwus82R-adOM025a.js";import"./textDirection-cNgt24LJ-sg3JWs5A.js";import"./widget-D35XOKjg.js";import"./extendWidget-DdVDan8s.js";function K(m,s){let i;return(...b)=>{i&&clearTimeout(i),i=setTimeout(()=>{m(...b)},s)}}const O=m=>{let s;return(...i)=>(s?.abort(),s=new AbortController,m(s.signal,...i))};var V=_('<a target="_blank" rel="noreferrer"> </a> <button></button>',1),W=_('<label><div class="fw-bold"> </div> <div class="text-wrap wiki-desc"> </div></label>'),X=_('<a class="pe-2"> </a>'),Y=_('<div class="custom-select my-auto mb-3"><!> <span class="fw-bold">Selection:</span> <!></div>');function gt(m,s){B(s,!0);const i="https://en.wikipedia.org/?curid=";let b=S(F([])),y=S(F([]));const A=t=>"page-"+t.pageid;function D(t){const e=document.createElement("div");return e.innerHTML=t,e.innerText}const H=K(O(async(t,e)=>{const a=await(await fetch("https://en.wikipedia.org/w/api.php?action=query&list=search&prop=info&inprop=url&utf8=&format=json&origin=*&srlimit=5&srsearch="+e,{signal:t})).json();q(b,a.query?.search.map(o=>({...o,snippet:D(o.snippet)}))??[],!0)}),200),I=new Intl.Collator("en").compare;function P(t){q(y,(t||[]).sort((e,r)=>I(e.title,r.title)),!0)}const U=t=>t.querySelectorAll("a,button,input");var L=Y(),k=c(L);G(k,{get items(){return f(b)},itemIdFn:A,get onFilterTextChange(){return H},onSelectedChange:P,navSelector:U,badgeClassName:"badge text-bg-light d-flex align-items-center",badgeLabel:(r,a)=>{let o=()=>a?.().itemContext,v=()=>a?.().directives;var l=V(),p=R(l),x=c(p),u=C(p,2);z(u,n=>({type:"button","aria-label":"Close",...n}),[()=>({})]),j(u,(n,h)=>J?.(n,h),()=>"btn-close ms-1 wiki-btn-close"),j(u,(n,h)=>v().badgeCloseButtonDirective?.(n,h),o),w(()=>{T(p,"href",`${i}${o().item.pageid}`),g(x,o().item.title)}),d(r,l)},itemLabel:(r,a)=>{let o=()=>a?.().itemContext.id,v=()=>a?.().itemContext.item;var l=W(),p=c(l),x=c(p),u=C(p,2),n=c(u);w(()=>{T(l,"for",""+o()),g(x,v().title),g(n,v().snippet)}),d(r,l)},$$slots:{badgeLabel:!0,itemLabel:!0}});var $=C(k,4);E($,17,()=>f(y),N,(t,e)=>{var r=X(),a=c(r);w(()=>{T(r,"href",`${i}${f(e).pageid}`),g(a,f(e).title)}),d(t,r)},t=>{var e=M("none");d(t,e)}),d(m,L),Q()}export{gt as default};
