import{a as E,k,R as q,g as f,s as C,O as M,q as N,b as d,t as w,S as y,e as g,h as c,P as O,p as R,j as F,f as U,c as z,l as _}from"./AppCommon-oTLQLI58.js";import{a as j}from"./actions-BtbG2ZeO.js";import{S as G}from"./Select-CRbeXpNA.js";import{c as J}from"./dom-BPD8lUxd-gAwdG87-.js";import"./Slot-CBsZCGhb.js";import"./snippet-DC-2qp4Q.js";import"./config-gdYvfPcX.js";import"./config-DrEa9FV5.js";import"./stores-CDni8kz3.js";import"./index-client-5B7EwPcC.js";import"./floatingUI-Crtxnb85.js";import"./promise-D-RZVPuv-OWKwnD3y.js";import"./focustrack-BpSeGRI9.js";import"./navManager-aIM6ECmx.js";import"./isFocusable-Ckwus82R-adOM025a.js";import"./textDirection-cNgt24LJ-sg3JWs5A.js";import"./widget-DiMgAHf5.js";import"./extendWidget-D3lZ5Nk9.js";function K(m,s){let i;return(...b)=>{i&&clearTimeout(i),i=setTimeout(()=>{m(...b)},s)}}const Q=m=>{let s;return(...i)=>(s?.abort(),s=new AbortController,m(s.signal,...i))};var V=_('<a target="_blank" rel="noreferrer"> </a> <button></button>',1),W=_('<label><div class="fw-bold"> </div> <div class="text-wrap wiki-desc"> </div></label>'),X=_('<a class="pe-2"> </a>'),Y=_('<div class="custom-select my-auto mb-3"><!> <span class="fw-bold">Selection:</span> <!></div>');function gt(m,s){E(s,!0);const i="https://en.wikipedia.org/?curid=";let b=k(q([])),L=k(q([]));const P=t=>"page-"+t.pageid;function A(t){const e=document.createElement("div");return e.innerHTML=t,e.innerText}const D=K(Q(async(t,e)=>{const a=await(await fetch("https://en.wikipedia.org/w/api.php?action=query&list=search&prop=info&inprop=url&utf8=&format=json&origin=*&srlimit=5&srsearch="+e,{signal:t})).json();F(b,a.query?.search.map(o=>({...o,snippet:A(o.snippet)}))??[],!0)}),200),H=new Intl.Collator("en").compare;function I(t){F(L,(t||[]).sort((e,r)=>H(e.title,r.title)),!0)}const $=t=>t.querySelectorAll("a,button,input");var S=Y(),T=c(S);G(T,{get items(){return f(b)},itemIdFn:P,get onFilterTextChange(){return D},onSelectedChange:I,navSelector:$,badgeClassName:"badge text-bg-light d-flex align-items-center",badgeLabel:(r,a)=>{let o=()=>a?.().itemContext,v=()=>a?.().directives;var l=V(),p=U(l),x=c(p),u=C(p,2);z(u,n=>({type:"button","aria-label":"Close",...n}),[()=>({})]),j(u,(n,h)=>J?.(n,h),()=>"btn-close ms-1 wiki-btn-close"),j(u,(n,h)=>v().badgeCloseButtonDirective?.(n,h),o),w(()=>{y(p,"href",`${i}${o().item.pageid}`),g(x,o().item.title)}),d(r,l)},itemLabel:(r,a)=>{let o=()=>a?.().itemContext.id,v=()=>a?.().itemContext.item;var l=W(),p=c(l),x=c(p),u=C(p,2),n=c(u);w(()=>{y(l,"for",""+o()),g(x,v().title),g(n,v().snippet)}),d(r,l)},$$slots:{badgeLabel:!0,itemLabel:!0}});var B=C(T,4);M(B,17,()=>f(L),O,(t,e)=>{var r=X(),a=c(r);w(()=>{y(r,"href",`${i}${f(e).pageid}`),g(a,f(e).title)}),d(t,r)},t=>{var e=N("none");d(t,e)}),d(m,S),R()}export{gt as default};
