import{$ as t,ad as M,Z as h}from"./AppCommon-CsXJDRZ3.js";import{w as I,e as U,s as E,t as w,I as S}from"./stores-BElQIA3m.js";import{a as L,n as b}from"./dom-gfxqXJpK-BenLeVwg.js";import{f as z,t as m,c as d,b as p,g as A,i as W}from"./writables-CgpOQ4hA-DwO4tqpW.js";import{c as Z}from"./widget-DeVncyQM.js";const D={rating:0,tabindex:0,maxRating:10,disabled:!1,readonly:!1,resettable:!0,ariaValueTextFn:(s,g)=>`${s} out of ${g}`,onHover:b,onLeave:b,onRatingChange:b,className:"",ariaLabel:"Rating",ariaLabelledBy:""};function Q(){return{...D}}const j={rating:A,tabindex:A,maxRating:{normalizeValue:s=>W(s)?Math.max(0,s):S},disabled:p,readonly:p,resettable:p,ariaValueTextFn:d,onHover:d,onLeave:d,onRatingChange:d,className:m,ariaLabel:m,ariaLabelledBy:m},X=Z("rating",s=>{const[{rating$:g,tabindex$:N,ariaValueTextFn$:V,onHover$:v,onLeave$:k,onRatingChange$:F,...f},P]=I(D,s,j),{ariaLabel$:H,ariaLabelledBy$:T,className$:_,disabled$:u,maxRating$:n,readonly$:$,resettable$:B}=f,x=t(()=>u()?-1:N()),r=U(g,F,a=>z(a,n(),0)),c=M(0),o=t(()=>!u()&&!$()),l=t(()=>{const a=c();return a!==0?a:r()}),y=t(()=>V()(l(),n())),C=t(()=>{const a=l();return Array.from({length:n()},(e,i)=>({fill:Math.round(Math.max(Math.min(a-i,1),0)*100),index:i}))}),R={...E({ariaValueText$:y,interactive$:o,rating$:r,stars$:C,tabindex$:x,visibleRating$:l,...f}),patch:P,directives:{containerDirective:L(()=>({events:{keydown:a=>{if(o()){const{key:e}=a;switch(e){case"ArrowLeft":case"ArrowDown":r.update(i=>i-1);break;case"ArrowRight":case"ArrowUp":r.update(i=>i+1);break;case"Home":case"PageDown":r.set(0);break;case"End":case"PageUp":r.set(n());break;default:return}a.preventDefault(),a.stopPropagation()}},mouseleave:()=>{o()&&R.api.leave()}},attributes:{role:h("slider"),class:_,"aria-valuemin":h(0),tabindex:x,"aria-valuemax":n,"aria-valuenow":l,"aria-valuetext":y,"aria-readonly":t(()=>$()?"true":void 0),"aria-disabled":t(()=>u()?"true":void 0),"aria-label":H,"aria-labelledby":t(()=>T()||void 0)},classNames:{"au-rating":w}})),starDirective:L(a=>({events:{mouseenter:()=>{const e=a().index+1;o()&&e>0&&e<=n()&&(c.set(e),v()(e))},click:()=>{const e=a().index+1;o()&&e>0&&e<=n()&&r.update(i=>i===e&&B()?0:e)}},styles:{cursor:t(()=>o()?"pointer":"default")},classNames:{"au-rating-star":w}}))},api:{setRating(a){r.set(a)},setHoveredRating(a){v()(a),c.set(a)},leave(){k()(l()),c.set(0)}}};return R});export{X as c,Q as g};
