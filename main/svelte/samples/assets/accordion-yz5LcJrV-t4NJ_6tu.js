import{w as j,r as z,s as F,m as M,n as q,e as B,g as $,h as G,j as f,k as J,l as K}from"./directive-DCYlDznf-D6XLKtM9.js";import{c as L}from"./baseTransitions-BApb56W_.js";import{a7 as n,ab as W,aa as N,$ as P}from"./AppCommon-D_XpGT3A.js";import{t as I,b,a as s}from"./writables-DoU_XYTX-C4HX5Cd_.js";function Q(g,o,d){let u;return o.length==2?(d=d??o[0],u=o.find(m=>m!==d)):o.length>2&&(u=o[0]),u&&g.forEach(m=>{m.stores.itemId$()!==u&&m.stores.itemVisible$()&&m.patch({itemVisible:!1})}),g}function _(g,o){return g.find(d=>d.stores.itemId$()===o)}const i={closeOthers:!1,onShown:f,onHidden:f,className:"",itemId:"",itemDestroyOnHide:!0,itemDisabled:!1,itemVisible:!1,itemAnimated:!0,itemTransition:async()=>{},itemHeadingTag:"",onItemShown:f,onItemHidden:f,onItemVisibleChange:f,itemClass:"",itemHeaderClass:"",itemButtonClass:"",itemBodyContainerClass:"",itemBodyClass:""},S={itemId:i.itemId,itemDestroyOnHide:i.itemDestroyOnHide,itemDisabled:i.itemDisabled,itemVisible:i.itemVisible,itemAnimated:i.itemAnimated,itemTransition:i.itemTransition,onItemShown:i.onItemShown,onItemHidden:i.onItemHidden,onItemVisibleChange:i.onItemVisibleChange,itemClass:i.itemClass,itemHeaderClass:i.itemHeaderClass,itemButtonClass:i.itemButtonClass,itemBodyContainerClass:i.itemBodyContainerClass,itemBodyClass:i.itemBodyClass,itemHeadingTag:i.itemHeadingTag},R=Object.keys(S);function ne(){return{...i}}const U={closeOthers:I,onShown:b,onHidden:b,itemId:s,itemDestroyOnHide:I,itemDisabled:I,itemVisible:I,itemAnimated:I,itemTransition:b,onItemShown:b,onItemHidden:b,onItemVisibleChange:b,itemClass:s,itemHeaderClass:s,itemButtonClass:s,itemBodyContainerClass:s,itemBodyClass:s,itemHeadingTag:s},X={itemId:s,itemDestroyOnHide:I,itemDisabled:I,itemVisible:I,itemAnimated:I,itemTransition:b,onItemShown:b,onItemHidden:b,onItemVisibleChange:b,itemClass:s,itemHeaderClass:s,itemButtonClass:s,itemBodyContainerClass:s,itemBodyClass:s,itemHeadingTag:s};function Y(g){const[{itemBodyClass$:o,itemButtonClass$:d,itemBodyContainerClass$:u,itemHeaderClass$:m,itemAnimated$:v,itemTransition$:w,itemDestroyOnHide$:V,onItemShown$:O,onItemHidden$:T,onItemVisibleChange$:y,itemVisible$:c,itemId$:r,itemDisabled$:C,...H},k]=j(S,g,X),D=W(!1),e=n(()=>J()),t=n(()=>r()||e()),h=L({props:{transition:w,visible:c,onVisibleChange:y,animated:v,animatedOnInit:!1,initDone:D,onHidden:()=>{T()()},onShown:()=>{O()()}}}),A=n(()=>V()===!1||!h.stores.hidden$()),p=()=>{C()||c.update(x=>!x)},l=$(()=>({attributes:{id:n(()=>`${t()}-toggle`),"aria-expanded":n(()=>`${c()}`),"aria-disabled":n(()=>`${C()}`),"aria-controls":n(()=>`${t()}-body-container`),disabled:C},classNames:{collapsed:n(()=>!c())},events:{click:p}})),a=K(h.directives.directive),E=$(()=>({attributes:{id:n(()=>`${t()}-body-container`),class:u(),"aria-labelledby":n(()=>`${t()}-toggle`)}}));return{...F({itemVisible$:c,itemId$:t,shouldBeInDOM$:A,itemDisabled$:C,itemBodyClass$:o,itemButtonClass$:d,itemBodyContainerClass$:u,itemHeaderClass$:m,...H}),patch:k,actions:{click:p},api:{initDone:()=>{D.set(!0)},collapse:()=>{c.set(!1)},expand:()=>{c.set(!0)},toggle:()=>{c.update(x=>!x)}},directives:{toggleDirective:l,buttonDirective:B(l,$(()=>({attributes:{type:"button",class:d()}}))),headerDirective:$(()=>({attributes:{class:m()}})),bodyDirective:$(()=>({attributes:{class:o()}})),transitionDirective:a,bodyContainerAttrsDirective:E,bodyContainerDirective:B(a,E),accordionItemDirective:f}}}function Z(g=Y,o=R,d=i,u=U){return m=>{const[v,w]=j(d,m,u),{closeOthers$:V,onShown$:O,onHidden$:T,className$:y}=v,c=Object.fromEntries(Object.entries(v).map(e=>[e[0].slice(0,-1),e[1]])),r=z(),C=n(()=>{const e=[];return r().forEach(t=>{t.stores.itemVisible$()&&e.push(t.stores.itemId$())}),e}),H=W(C()[0]),k=n(()=>{V()&&(Q(r(),C(),H()),H.set(C()[0]))}),D=n(()=>{k()});return{...F({itemsWidget$:r,className$:y}),patch:w,actions:{},api:{expand:e=>{var t;(t=_(r(),e))==null||t.api.expand()},collapse:e=>{var t;(t=_(r(),e))==null||t.api.collapse()},toggle:e=>{var t;(t=_(r(),e))==null||t.api.toggle()},expandAll:()=>{r().forEach(e=>e.api.expand())},collapseAll:()=>{r().forEach(e=>e.api.collapse())},registerItem:e=>{const t=o,h=M(t,q(t,e==null?void 0:e.config),c),[{onItemHidden$:A,onItemShown$:p}]=j({onItemHidden:S.onItemHidden,onItemShown:S.onItemShown},{config:h,props:e==null?void 0:e.props}),l=g({config:h,props:{...e==null?void 0:e.props,onItemHidden:N(P(()=>{var a;T()(l.stores.itemId$()),(a=A())==null||a()}),a=>{A.set(a)}),onItemShown:N(P(()=>{var a;O()(l.stores.itemId$()),(a=p())==null||a()}),a=>{p.set(a)})}});return l.directives.accordionItemDirective=B(()=>({destroy:r.register(l)}),$(()=>({attributes:{class:l.stores.itemClass$,id:l.stores.itemId$}}))),l}},directives:{accordionDirective:B(G(D),$(()=>({attributes:{class:y()},classNames:{"au-accordion":!0}})))}}}}const oe=Z();export{oe as a,Y as c,Z as f,ne as g};
