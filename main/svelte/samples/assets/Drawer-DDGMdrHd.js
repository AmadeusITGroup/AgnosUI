import{Z as o,$ as De,Y as L,a1 as ae,a2 as oe,I as de,f as O,h as H,s as K,d as T,a as ye,L as ke,M as ze,b as Se,j as G,p as Ce,e as I,v as xe}from"./AppCommon-Wa4AmAan.js";import{a as C}from"./actions-D7IIRiiZ.js";import{S as Q}from"./Slot-DFH2C-kU.js";import{c as Me}from"./config-BfsODk32.js";import{p as se,r as _e,a as Pe,f as Ee,s as Te}from"./focusElement-OGe0vhHm.js";import{b as Ve,d as F,n as c,e as J,f as He,m as k,a as z,i as Oe,g as Be}from"./dom-DD1hAVZy-BYveNrMV.js";import{c as ce}from"./baseTransitions-CqEfOPyU.js";import{w as Ne,b as Ae,s as We,t as V}from"./stores-D55NZwSh.js";import{c as le}from"./widget-DSB4mopV.js";import{d as Le,c as E,b as m,e as Ie,t as R}from"./writables-Is1bF1Vt-V-2PSM06.js";import{e as Fe}from"./extendWidget-B7PEk_cR.js";import{c as Re,a as Ye}from"./collapse-CVjUhnIz-CWo5Bxri.js";import{f as je}from"./fade-uOobJKgw-CAVXKUOl.js";function Ue({onMoveStart:v,onMove:t,onMoveEnd:s}={}){return Ve(p=>{let u=c,f=c,g=c,a={xOrigin:0,yOrigin:0,dx:0,dy:0};function w(r){return Object.assign(a,{dx:r.clientX-a.xOrigin,dy:r.clientY-a.yOrigin})}const x=F(p,"pointerdown",r=>{r.preventDefault(),r.target.setPointerCapture(r.pointerId),a={xOrigin:r.clientX,yOrigin:r.clientY,dx:0,dy:0},v?.(a),u=F(document,"pointermove",h=>{h.preventDefault(),t?.(w(h))});function M(h){h.preventDefault(),u(),f(),g(),s?.(w(h))}f=F(document,"pointerup",M),g=F(document,"pointercancel",M)});return{destroy(){x(),u(),f(),g()}}})}const Xe={animated:!0,ariaDescribedBy:"",ariaLabelledBy:"",backdropClass:"",backdropTransition:c,className:"w-full",visible:!1,container:typeof window<"u"?document.body:null,transition:c,verticalTransition:c,onHidden:c,onShown:c,onSizeChange:c,onVisibleChange:c,onMinimizedChange:c,onMaximizedChange:c,onResizingChange:c,resizable:!1,backdrop:!0,bodyScroll:!1,size:null},qe={animated:E,ariaDescribedBy:R,ariaLabelledBy:R,backdropClass:R,backdropTransition:m,className:R,visible:E,transition:m,verticalTransition:m,container:Ie,onHidden:m,onShown:m,onSizeChange:m,onVisibleChange:m,onMinimizedChange:m,onMaximizedChange:m,onResizingChange:m,resizable:E,backdrop:E,bodyScroll:E,size:Le},Ze=le("drawer",v=>{const[{backdrop$:t,backdropTransition$:s,backdropClass$:$,bodyScroll$:p,transition$:u,verticalTransition$:f,visible$:g,container$:a,className$:w,size$:x,animated$:r,ariaDescribedBy$:M,ariaLabelledBy$:h,onHidden$:B,onShown$:N,onSizeChange$:Y,onVisibleChange$:j,onMinimizedChange$:U,onMaximizedChange$:b,onResizingChange$:n,...d},X]=Ne(Xe,v,qe),S=Ae(x,Y,e=>e&&Math.round(e)),D=o(()=>["block-start","block-end"].some(l=>w().includes(l))),i=ce({props:{animated:r,animatedOnInit:r,transition:De(o(()=>D()?f():u())),visible:g,onVisibleChange:j,onHidden:B,onShown:N}}),_=J(se,o(()=>({container:a()}))),{directive:P,element$:A}=He(),ve=k(P,z(()=>({attributes:{class:w,role:L("dialog"),"aria-describedby":M,"aria-labelledby":h,"aria-modal":L("true"),tabIndex:L("-1")},styles:{position:o(()=>{const e=a();return e&&Oe(e)&&e!==document.body?"relative":"fixed"}),outline:L("none")},events:{keydown:async e=>{e.key==="Escape"&&await i.api.hide()}}}))),ee=ce({props:{animated:r,transition:s}}),pe=J(se,o(()=>{const e=a(),l=e?i.stores.element$():void 0;return{container:e,insertBefore:l?.parentElement===e?l:void 0}})),be=o(()=>(p()||(Z()?Pe():_e()),!t()||Z())),ue=z(()=>({attributes:{class:$,"data-agnos-ignore-inert":V},events:{click:async()=>await i.api.hide()}})),me=o(()=>["inline-start","block-start"].some(e=>w().includes(e))?1:-1);let ie=0;const te=ae(void 0),re=ae(void 0);function q(e){const l=A(),y=D();e=Math.round(Math.max(0,e)),l.style[y?"height":"width"]=`${e}px`;const W=Math.round(l[y?"offsetHeight":"offsetWidth"]);return S.set(W),te.set(e!=null&&(e<W||e===0)),re.set(!!e&&e>W),W}const fe=k(Ue({onMoveStart(){const e=D();ie=A()[e?"offsetHeight":"offsetWidth"],n()(!0)},onMove(e){q(ie+me()*e[D()?"dy":"dx"])},onMoveEnd(){const e=D(),l=A(),y=l[e?"offsetHeight":"offsetWidth"];l.style[e?"height":"width"]="",S.set(y),n()(!1)}}),z(()=>({events:{keydown:e=>{const{key:l}=e,y=S()||A()?.[D()?"offsetHeight":"offsetWidth"];if(y!=null)switch(l){case"ArrowLeft":case"ArrowDown":n()(!0),q(y-10),n()(!1);break;case"ArrowRight":case"ArrowUp":n()(!0),q(y+10),n()(!1);break}}}}))),ne=i.stores.visible$,ge=o(()=>i.stores.transitioning$()||ee.stores.transitioning$()),Z=o(()=>!ge()&&!ne()),we=o(()=>{const e=te();e!=null&&oe(()=>U()(e))}),he=o(()=>{const e=re();e!=null&&oe(()=>b()(e))}),$e=o(()=>{we(),he()});return{...We({...d,backdropClass$:$,className$:w,container$:a,size$:S,visible$:ne,backdropHidden$:be,hidden$:Z}),patch:X,api:{open:i.api.show,close:i.api.hide},directives:{drawerPortalDirective:_,drawerDirective:k(Be($e),ve,J(Te,o(()=>!p())),i.directives.directive,Ee),backdropPortalDirective:pe,backdropDirective:k(ee.directives.directive,ue),splitterDirective:fe}}}),Ge={structure:void 0,header:void 0,children:void 0},Je={structure:void 0,header:void 0,children:void 0},Ke={backdropTransition:je,transition:Ye,verticalTransition:Re},Qe=le("drawer",v=>{const t=Fe(Ze,Ge,Je,Ke)(v);return{...t,directives:{...t.directives,drawerDirective:k(z(()=>({classNames:{"au-drawer":V,show:t.stores.visible$},styles:{"--bs-drawer-size":o(()=>{const s=t.stores.size$();return s==null?void 0:s+"px"})}})),t.directives.drawerDirective),backdropDirective:k(t.directives.backdropDirective,z(()=>({classNames:{"au-drawer-backdrop":V,show:t.stores.visible$}}))),splitterDirective:k(t.directives.splitterDirective,z(()=>({classNames:{"au-splitter":V}}))),containerDirective:z(()=>({classNames:{"au-drawer-container":V}}))}}}),ei=Qe;var ii=O('<div class="au-drawer-content"><div class="au-drawer-header"><!></div> <div class="au-drawer-body"><!></div></div>');function ti(v,t){let s=de(t,["$$slots","$$events","$$legacy"]),{state:$}=s;var p=ii(),u=H(p),f=H(u);Q(f,{get content(){return $.header},get props(){return s}});var g=K(u,2),a=H(g);Q(a,{get content(){return $.children},get props(){return s}}),T(v,p)}const ri=(v,t=ze)=>{ti(v,xe(t))};var ni=O("<div></div>"),ai=O("<div><div><!></div> <!></div>"),oi=O("<div></div>"),si=O("<!> <!>",1);function yi(v,t){ye(t,!0);let s=ke(t,"visible",15),$=de(t,["$$slots","$$events","$$legacy","visible"]);const p=Me(ei,{get props(){return{...$,visible:s()}},defaultConfig:{structure:ri},events:{onVisibleChange:b=>{s(b)}}}),{directives:{backdropDirective:u,backdropPortalDirective:f,drawerDirective:g,drawerPortalDirective:a,containerDirective:w,splitterDirective:x},state:r}=p;var h={api:p.api},B=si(),N=Se(B);{var Y=b=>{var n=ai();I(n,i=>({...i}),[()=>({})]);var d=H(n);I(d,i=>({...i}),[()=>({})]);var X=H(d);Q(X,{get content(){return r.structure},get props(){return p}}),C(d,i=>w?.(i));var S=K(d,2);{var D=i=>{var _=ni();I(_,P=>({tabindex:"0",...P}),[()=>({})]),C(_,P=>x?.(P)),T(i,_)};G(S,i=>{r.resizable&&i(D)})}C(n,i=>a?.(i)),C(n,i=>g?.(i)),T(b,n)};G(N,b=>{r.hidden||b(Y)})}var j=K(N,2);{var U=b=>{var n=oi();I(n,d=>({...d}),[()=>({})]),C(n,d=>f?.(d)),C(n,d=>u?.(d)),T(b,n)};G(j,b=>{r.backdropHidden||b(U)})}return T(v,B),Ce(h)}export{yi as D};
