import{U as a,ab as We,T as $}from"./AppCommon-3JlOw5zm.js";import{q as te,m as I,a as f,b as Ce,n as Ge}from"./dom-gfxqXJpK-C0QHRLVe.js";import{w as Je,e as Ke,s as Qe,t as B}from"./stores-BQapFvhz.js";import{t as ge,k as he,a as Ze,b as w,c as X,g as pe}from"./writables-CgpOQ4hA-Bc2-O1bL.js";import{c as et}from"./resizeObserver-UMotprN0.js";const tt=/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/;function ie(c){var u;const m=(""+c).match(tt);return Math.max(0,(((u=m[1])==null?void 0:u.length)??0)-(+m[2]||0))}const ae={min:0,max:100,stepSize:1,readonly:!1,disabled:!1,vertical:!1,className:"",ariaLabel:()=>"Value",ariaLabelledBy:()=>"",ariaValueText:()=>"",onValuesChange:Ge,values:[0],showValueLabels:!0,showMinMaxLabels:!0,showTicks:!1,showTickValues:!0,tickInterval:0,rtl:!1},it={min:pe,max:pe,stepSize:he(0,1/0,{strict:!0}),readonly:w,disabled:w,vertical:w,ariaLabel:X,ariaLabelledBy:X,ariaValueText:X,onValuesChange:X,values:ge,showValueLabels:w,showMinMaxLabels:w,showTicks:w,showTickValues:w,tickInterval:he(0,1/0,{strict:!0}),rtl:w,className:Ze},fe=(c,u,m,v,o)=>{const x=Math.pow(10,o);if(c>=m)return m;if(c<=u)return u;const R=Math.floor((c-u)*x/v);return+(((c-u)*x%v<v/2?R:R+1)*v/x+u).toFixed(o)},Y=(c,u,m,v)=>{u.update(o=>(o=[...o],o[c]=o[c]+m*v,o))},F=(c,u,m)=>c&&u?m?1:-1:c&&!u?-1:!c&&u?m?-1:1:!c&&!u?-1:1,d=c=>c!=null?`${c}%`:"";function ct(c){const[{min$:u,max$:m,stepSize$:v,rtl$:o,values$:x,ariaLabel$:R,ariaLabelledBy$:Le,ariaValueText$:we,onValuesChange$:De,showValueLabels$:U,showMinMaxLabels$:W,showTicks$:k,showTickValues$:z,tickInterval$:se,...C},$e]=Je(ae,c,it),{vertical$:r,disabled$:P,readonly$:le}=C;let H=-1;const O=new Map,g=a(()=>{const e=u(),t=m();return e===t?ae.min:Math.min(e,t)}),L=a(()=>{const e=u(),t=m();return e===t?ae.max:Math.max(e,t)}),G=a(()=>Math.max(ie(v()),ie(g()),ie(L()))),re=a(()=>v()*Math.pow(10,G())),b=Ke(x,De,e=>{const t=g(),i=L(),l=re(),s=G();return e.map(n=>fe(n,t,i,l,s))},ge.equal),{directive:ke,element$:ye}=te(),{directive:Ve,element$:Me}=te(),{directive:xe,element$:Pe}=te(),{directive:Te,dimensions$:J}=et(),T=We({}),A=a(()=>{var e;return J(),T(),((e=ye())==null?void 0:e.getBoundingClientRect())??{}},{equal:Object.is}),Se=a(()=>{var e;return J(),T(),((e=Me())==null?void 0:e.getBoundingClientRect())??{}},{equal:(e,t)=>Object.is(e,t)}),Ee=a(()=>{var e;return J(),T(),((e=Pe())==null?void 0:e.getBoundingClientRect())??{}},{equal:(e,t)=>Object.is(e,t)}),_e=a(()=>r()?A().top:A().left),K=a(()=>r()?A().height:A().width),j=a(()=>[...b()].sort((e,t)=>e-t)),Ne=a(()=>b().map((e,t)=>({id:t,value:e})).sort((e,t)=>e.value-t.value)),Be=a(()=>{const e=R(),t=we(),i=Le();return Ne().map((l,s)=>({...l,ariaLabel:i(s)?void 0:e(s),ariaLabelledBy:i(s)||void 0,ariaValueText:t(l.value,s)||void 0}))}),y=a(()=>b().map(e=>q(e))),Q=a(()=>[...y()].sort((e,t)=>e-t)),Re=a(()=>Se().width/K()*100),ze=a(()=>Ee().width/K()*100),He=a(()=>U()&&(!k()||!z())),ne=a(()=>{if(!W()||k()&&z())return!1;if(!U())return!0;const e=Re();return o()?!y().some(t=>100-t>100-e-1):!y().some(t=>t<e+1)}),oe=a(()=>{if(!W()||k()&&z())return!1;if(!U())return!0;const e=ze();return o()?!y().some(t=>100-t<e+1):!y().some(t=>t>100-e-1)}),Oe=a(()=>{const e=b();return e.length==2&&Math.abs(e[0]-e[1])*100/(L()-g())<10}),S=a(()=>!P()&&!le()),ce=a(()=>{const e=Q(),t=(e[0]+e[1])/2;return r()||e.length!=2?0:o()?100-t:t}),ue=a(()=>{const e=Q(),t=100-(e[0]+e[1])/2;return r()&&e.length==2?o()?100-t:t:0}),E=a(()=>{const e=r(),t=o();return y().map(i=>({left:t?e?null:100-i:e?null:i,top:t?e?i:null:e?100-i:null}))}),Ae=a(()=>{const e=r(),t=Q(),i=o();return t.length===1?[{left:e||i?null:0,right:e?null:i?0:null,bottom:e?i?null:0:null,top:e&&i?0:null,width:e?100:t[0],height:e?t[0]:100,id:0}]:t.map((l,s,n)=>({left:e||i?null:l,right:e?null:i?n[s]:null,bottom:e?i?null:l:null,top:e&&i?n[s]:null,width:e?100:s===n.length-1?l:n[s+1]-l,height:e?s===n.length-1?l:n[s+1]-l:100,id:s})).slice(0,t.length-1)}),je=a(()=>{if(!k())return[];const e=r(),t=g(),i=L(),l=o(),s=z(),n=se()||v(),D=[],N=re(),V=G(),p=M=>!!l!=!!e?100-M:M;for(let M=t;M<i;M+=n){const ve=fe(M,t,i,N,V),Ue=q(ve);D.push({position:p(Ue),selected:!1,value:ve,displayLabel:s})}return D.push({position:p(100),selected:!1,value:i,displayLabel:s}),D}),qe=a(()=>{const e=j(),t=i=>{const l=e.length>1,s=l?e[e.length-1]:e[0],n=l?e[0]:0;return i<=s&&i>=n};return je().map(i=>({...i,selected:t(i.value)}))}),q=e=>{const t=g(),i=L();return(e-t)*100/(i-t)},Z=e=>{const t=b();if(t.length===1)return 0;const i=j(),l=i.find(N=>q(N)>e*100),s=l?i.indexOf(l):i.length-1,n=q(i[s-1]+(i[s]-i[s-1])/2),D=i[e*100<=n?s-1:s];return t.indexOf(D)},ee=e=>{const t=K(),i=_e();let l=r()?(t-e+i)/t:(e-i)/t;return l=o()?1-l:l,l},_=(e,t)=>{if(S()){const i=ee(e),l=t??Z(i),s=i*(L()-g())+g();b.update(n=>(n=[...n],n[l]=s,n))}},h=a(()=>!r()),Ie=f(()=>({attributes:{"aria-disabled":a(()=>P()?"true":void 0),class:C.className$},classNames:{"au-slider":B,"au-slider-vertical":r,"au-slider-horizontal":h,disabled:P}})),Xe=f(()=>({classNames:{"au-slider-label-vertical":r,"au-slider-label-vertical-min":r,"au-slider-label":h,"au-slider-label-min":h,"au-slider-rtl":o,invisible:a(()=>!ne())},attributes:{"aria-hidden":$("true")}})),Ye=f(()=>({classNames:{"au-slider-label-vertical":r,"au-slider-label-vertical-max":r,"au-slider-label":h,"au-slider-label-max":h,"au-slider-rtl":o,invisible:a(()=>!oe())},attributes:{"aria-hidden":$("true")}})),Fe=Ce((e,t)=>{const i=()=>{O.delete(t.item.id)},l=s=>{O.set(s.item.id,e)};return l(t),{update:l,destroy:i}}),de=(e,t)=>{e.preventDefault();const i=t!==void 0?O.get(t):e.target,l=s=>{s.preventDefault();const n=r()?s.clientY:s.clientX;i==null||i.focus(),H!==n&&(H=n,_(n,t))};S()&&(T.set({}),i==null||i.focus(),document.addEventListener("mousemove",l),document.addEventListener("mouseup",()=>{document.removeEventListener("mousemove",l)},{once:!0}))},me=(e,t)=>{const i=t!==void 0?O.get(t):e.target,l=s=>{s.preventDefault();const n=r()?s.touches[0].clientY:s.touches[0].clientX;i==null||i.focus(),H!==n&&(H=n,_(n,t))};S()&&(T.set({}),i==null||i.focus(),document.addEventListener("touchmove",l,{passive:!1}),document.addEventListener("touchend",()=>{document.removeEventListener("touchmove",l),document.removeEventListener("touchcancel",l)},{once:!0}),document.addEventListener("touchcancel",()=>{document.removeEventListener("touchmove",l),document.removeEventListener("touchend",l)},{once:!0}))},be=f(e=>({events:{keydown:t=>{const i=e().item.id,{key:l}=t,s=o(),n=v(),D=g(),N=L(),V=r();if(S()){switch(l){case"ArrowDown":Y(i,b,n,F(V,s,!0));break;case"ArrowLeft":Y(i,b,n,F(V,s,!1));break;case"ArrowUp":Y(i,b,n,-1*F(V,s,!0));break;case"ArrowRight":Y(i,b,n,-1*F(V,s,!1));break;case"Home":b.update(p=>(p=[...p],p[i]=D,p));break;case"End":b.update(p=>(p=[...p],p[i]=N,p));break;case"PageUp":break;case"PageDown":break;default:return}t.preventDefault()}},mousedown:t=>{t.button===0&&de(t,e().item.id)},touchstart:t=>{me(t,e().item.id)}}}));return{...Qe({min$:g,max$:L,stepSize$:v,values$:b,sortedValues$:j,sortedHandles$:Be,minValueLabelDisplay$:ne,maxValueLabelDisplay$:oe,combinedLabelDisplay$:Oe,interactive$:S,combinedLabelPositionLeft$:ce,combinedLabelPositionTop$:ue,progressDisplayOptions$:Ae,handleDisplayOptions$:E,showValueLabels$:He,showMinMaxLabels$:W,showTicks$:k,rtl$:o,ticks$:qe,...C}),patch:$e,api:{},directives:{sliderDirective:I(ke,Te,Ie),progressDisplayDirective:f(e=>({styles:{left:a(()=>d(e().option.left)),right:a(()=>d(e().option.right)),top:a(()=>d(e().option.top)),bottom:a(()=>d(e().option.bottom)),width:a(()=>d(e().option.width)),height:a(()=>d(e().option.height))},classNames:{"au-slider-progress":B}})),clickableAreaDirective:f(()=>({events:{mousedown:e=>{if(e.button!==0)return;const t=r()?e.clientY:e.clientX,i=Z(ee(t));_(t,i),de(e,i)},touchstart:e=>{const t=r()?e.touches[0].clientY:e.touches[0].clientX,i=Z(ee(t));_(t,i),me(e,i)}},classNames:{"au-slider-clickable-area":h,"au-slider-clickable-area-vertical":r,"au-slider-clickable-area-with-ticks":a(()=>k()&&se()===0)}})),handleEventsDirective:be,handleDirective:I(Fe,be,f(e=>({attributes:{role:$("slider"),"aria-valuemin":g,"aria-valuemax":L,"aria-valuenow":a(()=>e().item.value),"aria-valuetext":a(()=>e().item.ariaValueText),"aria-label":a(()=>e().item.ariaLabel),"aria-labelledBy":a(()=>e().item.ariaLabelledBy),"aria-orientation":a(()=>r()?"vertical":void 0),"aria-disabled":a(()=>P()?"true":void 0),disabled:P,"aria-readonly":a(()=>le()?"true":void 0)},styles:{left:a(()=>d(E()[e().item.id].left)),top:a(()=>d(E()[e().item.id].top))},classNames:{"au-slider-handle":B,"au-slider-handle-vertical":r,"au-slider-handle-horizontal":h}}))),minLabelDirective:I(Ve,Xe),maxLabelDirective:I(xe,Ye),combinedHandleLabelDisplayDirective:f(()=>({classNames:{"au-slider-label-vertical":r,"au-slider-label-vertical-now":r,"au-slider-label":h,"au-slider-label-now":h},styles:{left:a(()=>d(ce())),top:a(()=>d(ue()))},attributes:{"aria-hidden":$("true")}})),handleLabelDisplayDirective:f(e=>({classNames:{"au-slider-label-vertical":r,"au-slider-label-vertical-now":r,"au-slider-label":h,"au-slider-label-now":h},styles:{left:a(()=>d(E()[e().index].left)),top:a(()=>d(E()[e().index].top))},attributes:{"aria-hidden":$("true")}})),tickDirective:f(e=>({classNames:{"au-slider-tick":B,"au-slider-tick-horizontal":h,"au-slider-tick-vertical":r},styles:{left:a(()=>r()?null:d(e().tick.position)),top:a(()=>r()?d(e().tick.position):null)},events:{click:t=>{_(r()?t.clientY:t.clientX)}},attributes:{"aria-hidden":$("true")}})),tickLabelDirective:f(e=>({classNames:{"au-slider-tick-label":B,"au-slider-tick-label-vertical":r,"au-slider-tick-label-now":a(()=>j().some(t=>t===e().tick.value))},styles:{left:a(()=>r()?null:d(e().tick.position)),top:a(()=>r()?d(e().tick.position):null)},attributes:{"aria-hidden":$("true")}}))}}}export{ct as c};
