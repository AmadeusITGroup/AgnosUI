import{ak as c,g as o,al as b,aa as l,a3 as d,am as a,ad as g,an as m}from"./AppCommon-D-Irf_br.js";function k(r){let e=0,n=b(0),t;return()=>{c()&&(o(n),l(()=>(e===0&&(t=d(()=>r(()=>a(n)))),e+=1,()=>{g(()=>{e-=1,e===0&&(t?.(),t=void 0,a(n))})})))}}function p(r){let e;const n=k(u=>{let s=!1;const i=r.subscribe(f=>{e=f,s&&u()});return s=!0,i});function t(){return c()?(n(),e):m(r)}return"set"in r?{get current(){return t()},set current(u){r.set(u)}}:{get current(){return t()}}}export{k as c,p as f};
