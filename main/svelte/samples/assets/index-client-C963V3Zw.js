import{l as f,ag as s,g as b,ah as l,Z as o,V as g,ai as d,aj as m}from"./AppCommon-KjZHMAMw.js";function k(e){f(e,e.v+1)}function v(e){let t=0,n=l(0),r;return()=>{s()&&(b(n),o(()=>(t===0&&(r=g(()=>e(()=>k(n)))),t+=1,()=>{d().then(()=>{t-=1,t===0&&(r==null||r(),r=void 0)})})))}}function S(e){let t;const n=v(u=>{let i=!1;const c=e.subscribe(a=>{t=a,i&&u()});return i=!0,c});function r(){return s()?(n(),t):m(e)}return"set"in e?{get current(){return r()},set current(u){e.set(u)}}:{get current(){return r()}}}export{v as c,S as f};
