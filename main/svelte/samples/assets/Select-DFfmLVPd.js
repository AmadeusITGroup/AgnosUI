import{G as L,H as Ze,I as Ne,ab as ye,S as xe,i as et,s as tt,V as me,l as P,e as W,k as De,a as M,r as R,b as V,v as se,C as Ae,w as I,D as le,a0 as je,a1 as Ge,E as ne,t as $,d as C,y as q,z as Ie,f as J,B as Fe,R as st,h as T,Q as Te,c as j,m as G,g as Q,u as Pe,U as pe,q as Qe,F as de,M as X,N as Y,O as Z,P as y}from"./AppCommon--XJnjPQd.js";import{c as lt,o as nt,a as ot,b as at}from"./floatingUI-ikKE_l45.js";import{c as it}from"./focustrack-DigCUQbV.js";import{c as rt}from"./navManager-wq8Sym7t.js";import{w as ct,g as ut,D as ft,B as gt,s as _t,a as mt,k as pt,e as Le,b as _e,c as he}from"./directive-DCYlDznf-Cmj9bg2S.js";import{e as dt}from"./extendWidget-CKY7PGGR.js";import{c as ht,S as Ve}from"./Slot-CR1obSJ-.js";const bt={id:void 0,ariaLabel:"Select",open:!1,disabled:!1,items:[],filterText:"",loading:!1,selected:[],navSelector:s=>s.querySelectorAll(".au-select-badge,input"),itemIdFn:s=>""+s,onOpenChange:Le,onFilterTextChange:Le,onSelectedChange:Le,allowedPlacements:["bottom-start","top-start","bottom-end","top-end"],className:"",menuClassName:"",menuItemClassName:"",badgeClassName:""};function vt(s){const[{id$:e,open$:n,filterText$:t,items$:l,itemIdFn$:a,onOpenChange$:p,onFilterTextChange$:c,onSelectedChange$:_,allowedPlacements$:f,navSelector$:r,className$:o,badgeClassName$:i,ariaLabel$:w,menuClassName$:O,...B},v]=ct(bt,s),{selected$:F}=B,D=L(()=>e()??ut()),m=ft(t,c),{hasFocus$:h,directive:S}=it(),N=gt(p,[n,h],([u,g])=>u&&g),z=L(()=>{const u=new Map,g=a();for(const b of F()){const A=g(b);u.set(A,{item:b,id:g(b),selected:!0})}return u}),oe=L(()=>[...z().values()]),E=function(){const u=Ze(0);return Ne(u,g=>{const{length:b}=H();g!=null&&(b?g<0?g=b-1:g>=b&&(g=0):g=void 0),u.set(g)})}(),x=L(()=>{const u=new Map;if(N()){const g=z(),b=a();for(const A of l()){const K=b(A);u.set(K,{item:A,id:K,selected:g.has(K)})}}return u}),H=L(()=>N()?[...x().values()]:[]),ee=L(()=>{const u=H(),g=E();return u.length&&g!=null?u[g]:void 0}),{directives:{floatingDirective:ae,referenceDirective:ie},stores:{placement$:te}}=lt({props:{computePositionOptions:Ne(L(()=>({middleware:[nt(5),ot({allowedPlacements:f()}),at()]})))}}),{directive:re,refreshElements:be,focusFirst:ve,focusLast:we,focusLeft:ce,focusRight:ue}=rt(),$e=L(()=>({keys:{Home:ve,End:we,ArrowLeft:ce,ArrowRight:ue},selector:r()})),fe=(u,g)=>{const b=u.target;be(),k.api.unselect(g),b instanceof HTMLElement&&setTimeout(()=>{ce({event:u,referenceElement:b})||ue({event:u,referenceElement:b})}),u.preventDefault()},Ce=_e(()=>({attributes:{role:"combobox","aria-haspopup":"listbox","aria-expanded":L(()=>`${N()}`),"aria-controls":L(()=>`${D()}-menu`)}})),ke=_e(u=>({attributes:{tabindex:-1,class:i},classNames:{"au-select-badge":!0},events:{keydown:g=>k.actions.onBadgeKeydown(g,u().item)}})),d=_e(()=>({attributes:{role:"listbox",id:L(()=>`${D()}-menu`),"data-popper-placement":te,class:O},events:{mousedown:u=>u.preventDefault()}})),Je=_e(u=>({attributes:{role:"option","aria-selected":L(()=>`${u().selected}`),style:"cursor: pointer"},classNames:{"au-select-item":!0,selected:L(()=>u().selected)},events:{click:()=>k.api.toggleItem(u().item)}})),k={..._t({id$:D,visibleItems$:H,highlighted$:ee,open$:N,selectedContexts$:oe,filterText$:m,placement$:te,className$:o,badgeClassName$:i,ariaLabel$:w,menuClassName$:O,...B}),patch:v,api:{clear(){F.set([])},select(u){k.api.toggleItem(u,!0)},unselect(u){k.api.toggleItem(u,!1)},toggleItem(u,g){const b=a(),A=b(u),ge=z().has(A);g==null&&(g=!ge),!(g&&!x().has(A)||!g&&!ge)&&F.update(U=>{var Se;if(U=[...U],g&&!ge)U.push(u);else if(!g&&ge){const Xe=U.findIndex(Ye=>b(Ye)===A);U.splice(Xe,1)}return(Se=_())==null||Se(U),U})},clearText(){},highlight(u){const g=H().findIndex(b=>b.item===u);E.set(g===-1?void 0:g)},highlightFirst(){E.set(0)},highlightPrevious(){E.update(u=>u!=null?u-1:-1)},highlightNext(){E.update(u=>u!=null?u+1:1/0)},highlightLast(){E.set(-1)},open:()=>k.api.toggle(!0),close:()=>k.api.toggle(!1),toggle(u){N.update(g=>u??!g)}},directives:{hasFocusDirective:S,floatingDirective:ae,referenceDirective:ie,inputContainerDirective:mt(pt(re,$e),Ce),badgeAttributesDirective:ke,menuAttributesDirective:d,itemAttributesDirective:Je},actions:{onInput({target:u}){const g=u.value;ye(()=>{N.set(g!=null&&g!==""),m.set(g)})},onRemoveBadgeClick(u,g){fe(u,g)},onInputKeydown(u){const{ctrlKey:g,key:b}=u;let A=!0;switch(b){case"ArrowDown":{N()?g?k.api.highlightLast():k.api.highlightNext():(k.api.open(),k.api.highlightFirst());break}case"ArrowUp":g?k.api.highlightFirst():k.api.highlightPrevious();break;case"Enter":{const K=ee();K&&k.api.toggleItem(K.item);break}case"Escape":N.set(!1);break;default:A=!1}A&&u.preventDefault()},onBadgeKeydown(u,g){let b=!1;switch(u.key){case"Backspace":case"Delete":{fe(u,g),b=!0;break}}b&&u.preventDefault()}}};return k}const wt={slotBadgeLabel:({itemContext:s})=>s.item,slotItem:({itemContext:s})=>s.item},$t=dt(vt,wt,{}),Ct=$t;function Me(s,e,n){const t=s.slice();t[40]=e[n];const l=t[40]===t[9];return t[41]=l,t}const kt=s=>({itemContext:s[1]&512,state:s[1]&32768,widget:s[1]&1}),Be=s=>({itemContext:s[40],state:s[46],widget:s[31]}),Lt=s=>({itemContext:s[1]&512,state:s[1]&32768,widget:s[1]&1}),Ee=s=>({itemContext:s[40],state:s[46],widget:s[31]}),Dt=s=>s[1]&8192,It=s=>({}),Oe=s=>({...s[44]});function Ke(s,e,n){const t=s.slice();return t[40]=e[n],t}const Ft=s=>({itemContext:s[1]&512,state:s[1]&32768,widget:s[1]&1}),Re=s=>({itemContext:s[40],state:s[46],widget:s[31]}),St=s=>({itemContext:s[1]&512,state:s[1]&32768,widget:s[1]&1}),He=s=>({itemContext:s[40],state:s[46],widget:s[31]}),Nt=s=>s[1]&8192,At=s=>({}),Ue=s=>({...s[44]});function Tt(s){let e;const n=s[36].badgeLabel,t=X(n,s,s[37],Re);return{c(){t&&t.c()},m(l,a){t&&t.m(l,a),e=!0},p(l,a){t&&t.p&&(!e||a[1]&33345)&&Y(t,n,l,l[37],e?y(n,l[37],a,Ft):Z(l[37]),Re)},i(l){e||($(t,l),e=!0)},o(l){C(t,l),e=!1},d(l){t&&t.d(l)}}}function Pt(s){let e;const n=s[36].item,t=X(n,s,s[37],He);return{c(){t&&t.c()},m(l,a){t&&t.m(l,a),e=!0},p(l,a){t&&t.p&&(!e||a[1]&33345)&&Y(t,n,l,l[37],e?y(n,l[37],a,St):Z(l[37]),He)},i(l){e||($(t,l),e=!0)},o(l){C(t,l),e=!1},d(l){t&&t.d(l)}}}function Mt(s){let e,n,t;const l=[s[44]];var a=s[45];function p(c,_){let f={$$slots:{item:[Pt,({itemContext:r,state:o,widget:i})=>({40:r,46:o,31:i}),({itemContext:r,state:o,widget:i})=>[0,(r?512:0)|(o?32768:0)|(i?1:0)]],badgeLabel:[Tt,({itemContext:r,state:o,widget:i})=>({40:r,46:o,31:i}),({itemContext:r,state:o,widget:i})=>[0,(r?512:0)|(o?32768:0)|(i?1:0)]]},$$scope:{ctx:c}};for(let r=0;r<l.length;r+=1)f=P(f,l[r]);return _!==void 0&&_[1]&8192&&(f=P(f,q(l,[de(c[44])]))),{props:f}}return a&&(e=pe(a,p(s))),{c(){e&&j(e.$$.fragment),n=Qe()},m(c,_){e&&G(e,c,_),V(c,n,_),t=!0},p(c,_){if(_[1]&16384&&a!==(a=c[45])){if(e){le();const f=e;C(f.$$.fragment,1,0,()=>{Q(f,1)}),ne()}a?(e=pe(a,p(c,_)),j(e.$$.fragment),$(e.$$.fragment,1),G(e,n.parentNode,n)):e=null}else if(a){const f=_[1]&8192?q(l,[de(c[44])]):{};_[1]&33345&&(f.$$scope={dirty:_,ctx:c}),e.$set(f)}},i(c){t||(e&&$(e.$$.fragment,c),t=!0)},o(c){e&&C(e.$$.fragment,c),t=!1},d(c){c&&J(n),e&&Q(e,c)}}}function Bt(s){let e;const n=s[36].badgeLabel,t=X(n,s,s[37],Ue);return{c(){t&&t.c()},m(l,a){t&&t.m(l,a),e=!0},p(l,a){t&&t.p&&(!e||a[1]&8256)&&Y(t,n,l,l[37],Nt(a)||!e?Z(l[37]):y(n,l[37],a,At),Ue)},i(l){e||($(t,l),e=!0)},o(l){C(t,l),e=!1},d(l){t&&t.d(l)}}}function qe(s,e){let n,t,l,a,p,c;t=new Ve({props:{slotContent:e[2],props:{state:e[3],widget:e[31],itemContext:e[40]},$$slots:{slot:[Bt,({props:r})=>({44:r}),({props:r})=>[0,r?8192:0]],default:[Mt,({component:r,props:o})=>({45:r,44:o}),({component:r,props:o})=>[0,(r?16384:0)|(o?8192:0)]]},$$scope:{ctx:e}}});let _=[{}],f={};for(let r=0;r<_.length;r+=1)f=P(f,_[r]);return{key:s,first:null,c(){n=W("div"),j(t.$$.fragment),R(n,f),this.first=n},m(r,o){V(r,n,o),G(t,n,null),a=!0,p||(c=I(l=e[28].call(null,n,e[40])),p=!0)},p(r,o){e=r;const i={};o[0]&4&&(i.slotContent=e[2]),o[0]&10&&(i.props={state:e[3],widget:e[31],itemContext:e[40]}),o[1]&24640&&(i.$$scope={dirty:o,ctx:e}),t.$set(i),R(n,f=q(_,[o[0]&2&&{}])),l&&Ie(l.update)&&o[0]&2&&l.update.call(null,e[40])},i(r){a||($(t.$$.fragment,r),a=!0)},o(r){C(t.$$.fragment,r),a=!1},d(r){r&&J(n),Q(t),p=!1,c()}}}function ze(s){let e,n=[],t=new Map,l,a,p,c=me(s[8]);const _=o=>o[40].id;for(let o=0;o<c.length;o+=1){let i=Me(s,c,o),w=_(i);t.set(w,n[o]=We(w,i))}let f=[{}],r={};for(let o=0;o<f.length;o+=1)r=P(r,f[o]);return{c(){e=W("ul");for(let o=0;o<n.length;o+=1)n[o].c();R(e,r)},m(o,i){V(o,e,i);for(let w=0;w<n.length;w+=1)n[w]&&n[w].m(e,null);l=!0,a||(p=[I(s[25].call(null,e)),I(s[24].call(null,e)),I(s[29].call(null,e)),I(he.call(null,e,"dropdown-menu show"))],a=!0)},p(o,i){i[0]&1073743624|i[1]&57921&&(c=me(o[8]),le(),n=je(n,i,_,1,o,c,t,e,Ge,We,null,Me),ne())},i(o){if(!l){for(let i=0;i<c.length;i+=1)$(n[i]);l=!0}},o(o){for(let i=0;i<n.length;i+=1)C(n[i]);l=!1},d(o){o&&J(e);for(let i=0;i<n.length;i+=1)n[i].d();a=!1,Fe(p)}}}function Et(s){let e;const n=s[36].badgeLabel,t=X(n,s,s[37],Be);return{c(){t&&t.c()},m(l,a){t&&t.m(l,a),e=!0},p(l,a){t&&t.p&&(!e||a[1]&33345)&&Y(t,n,l,l[37],e?y(n,l[37],a,kt):Z(l[37]),Be)},i(l){e||($(t,l),e=!0)},o(l){C(t,l),e=!1},d(l){t&&t.d(l)}}}function Ot(s){let e;const n=s[36].item,t=X(n,s,s[37],Ee);return{c(){t&&t.c()},m(l,a){t&&t.m(l,a),e=!0},p(l,a){t&&t.p&&(!e||a[1]&33345)&&Y(t,n,l,l[37],e?y(n,l[37],a,Lt):Z(l[37]),Ee)},i(l){e||($(t,l),e=!0)},o(l){C(t,l),e=!1},d(l){t&&t.d(l)}}}function Kt(s){let e,n,t;const l=[s[44]];var a=s[45];function p(c,_){let f={$$slots:{item:[Ot,({itemContext:r,state:o,widget:i})=>({40:r,46:o,31:i}),({itemContext:r,state:o,widget:i})=>[0,(r?512:0)|(o?32768:0)|(i?1:0)]],badgeLabel:[Et,({itemContext:r,state:o,widget:i})=>({40:r,46:o,31:i}),({itemContext:r,state:o,widget:i})=>[0,(r?512:0)|(o?32768:0)|(i?1:0)]]},$$scope:{ctx:c}};for(let r=0;r<l.length;r+=1)f=P(f,l[r]);return _!==void 0&&_[1]&8192&&(f=P(f,q(l,[de(c[44])]))),{props:f}}return a&&(e=pe(a,p(s))),{c(){e&&j(e.$$.fragment),n=Qe()},m(c,_){e&&G(e,c,_),V(c,n,_),t=!0},p(c,_){if(_[1]&16384&&a!==(a=c[45])){if(e){le();const f=e;C(f.$$.fragment,1,0,()=>{Q(f,1)}),ne()}a?(e=pe(a,p(c,_)),j(e.$$.fragment),$(e.$$.fragment,1),G(e,n.parentNode,n)):e=null}else if(a){const f=_[1]&8192?q(l,[de(c[44])]):{};_[1]&33345&&(f.$$scope={dirty:_,ctx:c}),e.$set(f)}},i(c){t||(e&&$(e.$$.fragment,c),t=!0)},o(c){e&&C(e.$$.fragment,c),t=!1},d(c){c&&J(n),e&&Q(e,c)}}}function Rt(s){let e;const n=s[36].item,t=X(n,s,s[37],Oe);return{c(){t&&t.c()},m(l,a){t&&t.m(l,a),e=!0},p(l,a){t&&t.p&&(!e||a[1]&8256)&&Y(t,n,l,l[37],Dt(a)||!e?Z(l[37]):y(n,l[37],a,It),Oe)},i(l){e||($(t,l),e=!0)},o(l){C(t,l),e=!1},d(l){t&&t.d(l)}}}function We(s,e){let n,t,l,a,p,c,_;t=new Ve({props:{slotContent:e[10],props:{state:e[3],widget:e[31],itemContext:e[40]},$$slots:{slot:[Rt,({props:o})=>({44:o}),({props:o})=>[0,o?8192:0]],default:[Kt,({component:o,props:i})=>({45:o,44:i}),({component:o,props:i})=>[0,(o?16384:0)|(i?8192:0)]]},$$scope:{ctx:e}}});let f=[{}],r={};for(let o=0;o<f.length;o+=1)r=P(r,f[o]);return{key:s,first:null,c(){n=W("li"),j(t.$$.fragment),l=De(),R(n,r),Pe(n,"text-bg-primary",e[41]),this.first=n},m(o,i){V(o,n,i),G(t,n,null),se(n,l),p=!0,c||(_=[I(he.call(null,n,"dropdown-item position-relative")),I(a=e[30].call(null,n,e[40]))],c=!0)},p(o,i){e=o;const w={};i[0]&1024&&(w.slotContent=e[10]),i[0]&264&&(w.props={state:e[3],widget:e[31],itemContext:e[40]}),i[1]&24640&&(w.$$scope={dirty:i,ctx:e}),t.$set(w),R(n,r=q(f,[i[0]&256&&{}])),a&&Ie(a.update)&&i[0]&256&&a.update.call(null,e[40]),Pe(n,"text-bg-primary",e[41])},i(o){p||($(t.$$.fragment,o),p=!0)},o(o){C(t.$$.fragment,o),p=!1},d(o){o&&J(n),Q(t),c=!1,Fe(_)}}}function Ht(s){let e,n,t=[],l=new Map,a,p,c,_,f,r,o,i=me(s[1]);const w=m=>m[40].id;for(let m=0;m<i.length;m+=1){let h=Ke(s,i,m),S=w(h);l.set(S,t[m]=qe(S,h))}let O=[{}],B={};for(let m=0;m<O.length;m+=1)B=P(B,O[m]);let v=s[7]&&s[8].length>0&&ze(s),F=[{}],D={};for(let m=0;m<F.length;m+=1)D=P(D,F[m]);return{c(){e=W("div"),n=W("div");for(let m=0;m<t.length;m+=1)t[m].c();a=De(),p=W("input"),c=De(),v&&v.c(),M(p,"id",s[4]),M(p,"aria-label",s[5]),M(p,"type","text"),M(p,"class","au-select-input flex-grow-1 border-0"),p.value=s[6],M(p,"aria-autocomplete","list"),M(p,"autocorrect","off"),M(p,"autocapitalize","none"),M(p,"autocomplete","off"),R(n,B),R(e,D)},m(m,h){V(m,e,h),se(e,n);for(let S=0;S<t.length;S+=1)t[S]&&t[S].m(n,null);se(n,a),se(n,p),se(e,c),v&&v.m(e,null),f=!0,r||(o=[Ae(p,"input",s[22]),Ae(p,"keydown",s[23]),I(s[25].call(null,n)),I(s[27].call(null,n)),I(he.call(null,n,"d-flex align-items-center flex-wrap gap-1")),I(s[26].call(null,e)),I(_=he.call(null,e,"au-select dropdown border border-1 p-1 mb-3 d-block "+s[0]))],r=!0)},p(m,h){h[0]&268435470|h[1]&57921&&(i=me(m[1]),le(),t=je(t,h,w,1,m,i,l,n,Ge,qe,a,Ke),ne()),(!f||h[0]&16)&&M(p,"id",m[4]),(!f||h[0]&32)&&M(p,"aria-label",m[5]),(!f||h[0]&64&&p.value!==m[6])&&(p.value=m[6]),m[7]&&m[8].length>0?v?(v.p(m,h),h[0]&384&&$(v,1)):(v=ze(m),v.c(),$(v,1),v.m(e,null)):v&&(le(),C(v,1,1,()=>{v=null}),ne()),R(e,D=q(F,[h[0]&1&&{}])),_&&Ie(_.update)&&h[0]&1&&_.update.call(null,"au-select dropdown border border-1 p-1 mb-3 d-block "+m[0])},i(m){if(!f){for(let h=0;h<i.length;h+=1)$(t[h]);$(v),f=!0}},o(m){for(let h=0;h<t.length;h+=1)C(t[h]);C(v),f=!1},d(m){m&&J(e);for(let h=0;h<t.length;h+=1)t[h].d();v&&v.d(),r=!1,Fe(o)}}}function Ut(s,e,n){let t,l,a,p,c,_,f,r,o,i,w,{$$slots:O={},$$scope:B}=e;const v=st(O);let{open:F=!1}=e,{filterText:D=void 0}=e,{selected:m=void 0}=e;const h=ht({factory:Ct,widgetName:"select",$$slots:v,$$props:e,events:{onOpenChange(d){n(32,F=d)},onSelectedChange:d=>{n(34,m=d)},onFilterTextChange:d=>{n(33,D=d)}}}),S=h.api,{stores:{id$:N,ariaLabel$:z,highlighted$:oe,open$:E,selectedContexts$:x,slotBadgeLabel$:H,slotItem$:ee,visibleItems$:ae,className$:ie,filterText$:te},state$:re,actions:{onInput:be,onInputKeydown:ve},directives:{floatingDirective:we,hasFocusDirective:ce,referenceDirective:ue,inputContainerDirective:$e,badgeAttributesDirective:fe,menuAttributesDirective:Ce,itemAttributesDirective:ke}}=h;return T(s,N,d=>n(4,c=d)),T(s,z,d=>n(5,_=d)),T(s,oe,d=>n(9,i=d)),T(s,E,d=>n(7,r=d)),T(s,x,d=>n(1,l=d)),T(s,H,d=>n(2,a=d)),T(s,ee,d=>n(10,w=d)),T(s,ae,d=>n(8,o=d)),T(s,ie,d=>n(0,t=d)),T(s,te,d=>n(6,f=d)),T(s,re,d=>n(3,p=d)),s.$$set=d=>{n(38,e=P(P({},e),Te(d))),"open"in d&&n(32,F=d.open),"filterText"in d&&n(33,D=d.filterText),"selected"in d&&n(34,m=d.selected),"$$scope"in d&&n(37,B=d.$$scope)},s.$$.update=()=>{h.patchChangedProps(e)},e=Te(e),[t,l,a,p,c,_,f,r,o,i,w,N,z,oe,E,x,H,ee,ae,ie,te,re,be,ve,we,ce,ue,$e,fe,Ce,ke,h,F,D,m,S,O,B]}class Jt extends xe{constructor(e){super(),et(this,e,Ut,Ht,tt,{open:32,filterText:33,selected:34,api:35},null,[-1,-1])}get api(){return this.$$.ctx[35]}}export{Jt as S};
