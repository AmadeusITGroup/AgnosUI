import{p as M,W as F,X as f,k as _,b as T,R as N,u as R,c as u,e as x,T as W,a as X,t as w,n as j,h as c,f as z,q as G,U as k,r as h}from"./AppCommon-CRrVgjjK.js";import{a as A}from"./actions-DMIFV9qL.js";import{S as J}from"./Select-BqCqViyi.js";import{c as K}from"./directive-CKEccryv-D4pmc7Em.js";import"./class-zI9kEawh.js";import"./Slot-Do_YzuMi.js";import"./snippet-CHfuuZJF.js";import"./config-BBzdhi4Q.js";import"./config-6FC2sk1Z.js";import"./floatingUI-Cd3gJxvw.js";import"./promise-CY2U8bTP-CVt-bVuu.js";import"./focustrack-DmM5S88P.js";import"./navManager-B2a1NL5T.js";import"./extendWidget-DO27xWzC.js";function O(m,o){let s;return(...b)=>{s&&clearTimeout(s),s=setTimeout(()=>{m(...b)},o)}}const Q=m=>{let o;return(...s)=>(o==null||o.abort(),o=new AbortController,m(o.signal,...s))};var V=w('<a target="_blank" rel="noreferrer"> </a> <button></button>',1),Y=w('<label><div class="fw-bold"> </div> <div class="text-wrap wiki-desc"> </div></label>'),Z=w('<a class="pe-2"> </a>'),$=w('<div class="custom-select my-auto mb-3"><!> <span class="fw-bold">Selection:</span> <!></div>');function bt(m,o){M(o,!0);const s="https://en.wikipedia.org/?curid=";let b=F(f([])),S=F(f([]));const D=e=>"page-"+e.pageid;function H(e){const i=document.createElement("div");return i.innerHTML=e,i.innerText}const I=O(Q(async(e,i)=>{var r;const t=await(await fetch("https://en.wikipedia.org/w/api.php?action=query&list=search&prop=info&inprop=url&utf8=&format=json&origin=*&srlimit=5&srsearch="+i,{signal:e})).json();j(b,f(((r=t.query)==null?void 0:r.search.map(n=>({...n,snippet:H(n.snippet)})))??[]))}),200),P=new Intl.Collator("en").compare;function U(e){j(S,f((e||[]).sort((i,a)=>P(i.title,a.title))))}const B=e=>e.querySelectorAll("a,button,input");var L=$(),q=c(L);J(q,{get items(){return _(b)},itemIdFn:D,onFilterTextChange:I,onSelectedChange:U,navSelector:B,badgeClassName:"badge text-bg-light d-flex align-items-center",badgeLabel:(a,t)=>{let r=()=>t==null?void 0:t().itemContext,n=()=>t==null?void 0:t().widget;var l=V(),p=z(l),C=c(p),d=T(p,2);let v;x(()=>v=G(d,v,{type:"button","aria-label":"Close"})),x(()=>{k(p,"href",`${s}${r().item.pageid}`),h(C,r().item.title)}),A(d,(g,y)=>K(g,y),()=>"btn-close ms-1 wiki-btn-close"),A(d,(g,y)=>n().directives.badgeCloseButtonDirective(g,y),r),u(a,l)},itemLabel:(a,t)=>{let r=()=>t==null?void 0:t().itemContext.id,n=()=>t==null?void 0:t().itemContext.item;var l=Y(),p=c(l),C=c(p),d=T(p,2),v=c(d);x(()=>{k(l,"for",""+r()),h(C,n().title),h(v,n().snippet)}),u(a,l)}});var E=T(q,4);N(E,17,()=>_(S),W,(e,i)=>{var a=Z(),t=c(a);x(()=>{k(a,"href",`${s}${_(i).pageid}`),h(t,_(i).title)}),u(e,a)},e=>{var i=R("none");u(e,i)}),u(m,L),X()}export{bt as default};
