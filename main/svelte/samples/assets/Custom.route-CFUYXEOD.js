import{a as E,c as k,R as q,f as _,g as f,h as c,s as C,O as M,q as N,d as u,t as w,S as y,k as g,P as O,p as R,l as F,b as U,e as z}from"./AppCommon-Wa4AmAan.js";import{a as P}from"./actions-D7IIRiiZ.js";import{S as G}from"./Select-CEYGU4TL.js";import{c as J}from"./dom-DD1hAVZy-BYveNrMV.js";import"./Slot-DFH2C-kU.js";import"./snippet-Ch6ICZS0.js";import"./config-BfsODk32.js";import"./config-NlHDyu1K.js";import"./stores-D55NZwSh.js";import"./index-client-wdnaCOQa.js";import"./floatingUI-BeENCsAm.js";import"./promise-Y53vc4Ia-DKBCr4jI.js";import"./focustrack-DvFEa1NC.js";import"./navManager-DnoAKEyK.js";import"./isFocusable-Ckwus82R-adOM025a.js";import"./widget-DSB4mopV.js";import"./extendWidget-B7PEk_cR.js";function K(m,s){let i;return(...b)=>{i&&clearTimeout(i),i=setTimeout(()=>{m(...b)},s)}}const Q=m=>{let s;return(...i)=>(s?.abort(),s=new AbortController,m(s.signal,...i))};var V=_('<a target="_blank" rel="noreferrer"> </a> <button></button>',1),W=_('<label><div class="fw-bold"> </div> <div class="text-wrap wiki-desc"> </div></label>'),X=_('<a class="pe-2"> </a>'),Y=_('<div class="custom-select my-auto mb-3"><!> <span class="fw-bold">Selection:</span> <!></div>');function ft(m,s){E(s,!0);const i="https://en.wikipedia.org/?curid=";let b=k(q([])),L=k(q([]));const j=t=>"page-"+t.pageid;function A(t){const e=document.createElement("div");return e.innerHTML=t,e.innerText}const D=K(Q(async(t,e)=>{const a=await(await fetch("https://en.wikipedia.org/w/api.php?action=query&list=search&prop=info&inprop=url&utf8=&format=json&origin=*&srlimit=5&srsearch="+e,{signal:t})).json();F(b,a.query?.search.map(o=>({...o,snippet:A(o.snippet)}))??[],!0)}),200),H=new Intl.Collator("en").compare;function I(t){F(L,(t||[]).sort((e,r)=>H(e.title,r.title)),!0)}const $=t=>t.querySelectorAll("a,button,input");var S=Y(),T=c(S);G(T,{get items(){return f(b)},itemIdFn:j,get onFilterTextChange(){return D},onSelectedChange:I,navSelector:$,badgeClassName:"badge text-bg-light d-flex align-items-center",badgeLabel:(r,a)=>{let o=()=>a?.().itemContext,v=()=>a?.().directives;var l=V(),p=U(l),x=c(p),d=C(p,2);z(d,n=>({type:"button","aria-label":"Close",...n}),[()=>({})]),P(d,(n,h)=>J?.(n,h),()=>"btn-close ms-1 wiki-btn-close"),P(d,(n,h)=>v().badgeCloseButtonDirective?.(n,h),o),w(()=>{y(p,"href",`${i}${o().item.pageid}`),g(x,o().item.title)}),u(r,l)},itemLabel:(r,a)=>{let o=()=>a?.().itemContext.id,v=()=>a?.().itemContext.item;var l=W(),p=c(l),x=c(p),d=C(p,2),n=c(d);w(()=>{y(l,"for",""+o()),g(x,v().title),g(n,v().snippet)}),u(r,l)},$$slots:{badgeLabel:!0,itemLabel:!0}});var B=C(T,4);M(B,17,()=>f(L),O,(t,e)=>{var r=X(),a=c(r);w(()=>{y(r,"href",`${i}${f(e).pageid}`),g(a,f(e).title)}),u(t,r)},t=>{var e=N("none");u(t,e)}),u(m,S),R()}export{ft as default};
