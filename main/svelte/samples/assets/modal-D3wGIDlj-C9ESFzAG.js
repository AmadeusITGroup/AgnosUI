import{$ as l,Z as V}from"./AppCommon-l8yhhR63.js";import{b as p,c as u,t as D,j as Y}from"./writables-CgpOQ4hA-Ctu3fkKk.js";import{w as ee,s as te}from"./stores-9WDO0VW-.js";import{c as I}from"./baseTransitions-DkpTvjQx.js";import{d as oe}from"./promise-XSP94FjG-_4P8M-HU.js";import{b as W,m as O,e as _,s as ne,n as c,o as T,r as ie,a as E}from"./dom-gfxqXJpK-DqIG7G68.js";import{c as re}from"./widget-FDKKRpcq.js";const F=W((t,r)=>{let e,o;const s=()=>{var i;o&&((i=o.parentNode)==null||i.replaceChild(t,o),o=null)},n=i=>{var v,f;if(i!==e&&((i==null?void 0:i.container)!==(e==null?void 0:e.container)||(i==null?void 0:i.insertBefore)!==(e==null?void 0:e.insertBefore))){e=i;const b=(e==null?void 0:e.container)??((v=e==null?void 0:e.insertBefore)==null?void 0:v.parentElement);if(b){const $=(e==null?void 0:e.insertBefore)??null;(t.parentElement!==b||t.nextSibling!==$)&&(o||(o=(f=t.parentNode)==null?void 0:f.insertBefore(t.ownerDocument.createComment("portal"),t)),b.insertBefore(t,$))}else s()}};return n(r),{update:n,destroy:()=>{var i;s(),(i=t.parentNode)==null||i.removeChild(t)}}}),se=t=>{const r=new Map,e=o=>{const s=o.parentElement;s&&o!==document.body&&(Array.from(s.children).forEach(n=>{n!==o&&n.nodeName!=="SCRIPT"&&(r.set(n,n.hasAttribute("inert")),n.toggleAttribute("inert",!0))}),e(s))};return e(t),()=>r.forEach((o,s)=>{s.toggleAttribute("inert",o)})};let L=c;const ae=t=>{L(),L=t?se(t):c},{directive:le,elements$:ce}=ne(),de=l(()=>{const t=ce();return t[t.length-1]},{equal:Object.is}),me=l(()=>ae(de())),ue=O(le,_(me)),be=()=>{const t=Math.abs(window.innerWidth-document.documentElement.clientWidth),r=document.body,e=r.style,{overflow:o,paddingRight:s}=e;if(t>0){const n=parseFloat(window.getComputedStyle(r).paddingRight);e.paddingRight=`${n+t}px`}return e.overflow="hidden",()=>{t>0&&(e.paddingRight=s),e.overflow=o}};let k=c;const pe=()=>{k(),k=be()},ve=()=>{k(),k=c},fe=Symbol(),$e=Symbol(),ge={animated:!0,ariaCloseButtonLabel:"Close",backdrop:!0,backdropClass:"",backdropTransition:c,closeButton:!0,closeOnOutsideClick:!0,container:typeof window<"u"?document.body:null,className:"",modalTransition:c,onBeforeClose:c,onVisibleChange:c,onHidden:c,onShown:c,visible:!1},he={animated:p,ariaCloseButtonLabel:D,backdrop:p,backdropClass:D,backdropTransition:u,closeButton:p,closeOnOutsideClick:p,container:Y,className:D,modalTransition:u,onBeforeClose:u,onVisibleChange:u,onHidden:u,onShown:u,visible:p},x=ie(),Ce=l(()=>x().length>0),ye=l(()=>{Ce()?pe():ve()}),ke=l(()=>{ye()}),Ne=re("modal",t=>{const[{animated$:r,backdrop$:e,backdropTransition$:o,closeOnOutsideClick$:s,container$:n,modalTransition$:i,onBeforeClose$:v,onVisibleChange$:f,onHidden$:b,onShown$:$,ariaCloseButtonLabel$:S,className$:N,backdropClass$:R,visible$:A,...j},g]=ee(ge,t,he),m=I({props:{transition:i,visible:A,animated:r,animatedOnInit:r,onVisibleChange:f,onHidden:b,onShown:$}}),B=m.stores.visible$,H=I({props:{transition:o,visible:A,animated:r,animatedOnInit:r}}),M=l(()=>m.stores.transitioning$()||e()&&H.stores.transitioning$()),h=l(()=>!M()&&!B()),q=l(()=>!e()||h());let C;const w=a=>{C=a;const d={get result(){return C},set result(y){C=y},cancel:!1};v()(d),!d.cancel&&g({visible:!1})},Z=T(F,l(()=>({container:n()}))),z=T(F,l(()=>{const a=n(),d=a?m.stores.element$():void 0;return{container:a,insertBefore:(d==null?void 0:d.parentElement)===a?d:void 0}})),G=V(void 0,()=>x.register(P)),J=l(()=>{m.stores.elementPresent$()&&!h()&&G(),ke()}),K=E(()=>({attributes:{type:V("button"),"aria-label":S},events:{click:()=>w($e)}})),Q=E(()=>({attributes:{class:R}})),U=E(()=>({attributes:{class:N},events:{click:a=>{a.currentTarget===a.target&&s()&&w(fe)}}})),P={...te({backdropHidden$:q,container$:n,hidden$:h,transitioning$:M,visible$:B,modalElement$:m.stores.element$,ariaCloseButtonLabel$:S,className$:N,backdropClass$:R,...j}),directives:{modalPortalDirective:Z,backdropPortalDirective:z,backdropDirective:O(H.directives.directive,Q),modalDirective:O(m.directives.directive,ue,_(J),U),closeButtonDirective:K,dialogDirective:T(W((a,d)=>{const y=X=>{X?a.showModal():a.close()};return y(d),{update:y}}),B)},patch:g,api:{close:w,async open(){return g({visible:!0}),await oe(h).promise,C},patch:g}};return P});export{fe as a,Ne as c,$e as m};
