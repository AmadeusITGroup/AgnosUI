import{G as B,H as Je,a7 as $e,aa as Qe,S as Xe,i as Ye,s as Ve,Q as _e,e as R,k as ve,a as h,b as j,r as ee,x as se,u as te,y as oe,X as Ke,Y as Oe,z as le,t as v,d as k,f as G,w as Ae,N as Ze,h as L,B as q,M as ke,c as z,m as U,g as W,ae as ye,q as me,a1 as xe,af as et,P as ge,p as He,C as pe,D as de,I as J,J as Q,K as X,L as Y}from"./AppCommon-DYyriHmo.js";import{c as tt}from"./config-BmStqdNU.js";import{c as st,o as ot,a as lt,b as nt}from"./floatingUI-BfOtkFow.js";import{c as at}from"./focustrack-iMesWNFv.js";import{c as it}from"./navManager-BMVmqdkk.js";import{g as rt,e as ct}from"./directive-DwUkVgn3.js";import{w as ft,d as ut,c as mt,s as _t,a as Ce}from"./stores-C1NdtlUV.js";import{S as Re}from"./Slot-BIi2RPK5.js";const gt=t=>""+t,pt={id:void 0,ariaLabel:"Select",open:!1,disabled:!1,items:[],filterText:"",loading:!1,selected:[],navSelector:t=>t.querySelectorAll(".au-select-badge,input"),itemIdFn:gt,onOpenChange:Ce,onFilterTextChange:Ce,onSelectedChange:Ce,allowedPlacements:["bottom-start","top-start","bottom-end","top-end"],className:"",menuClassName:"",menuItemClassName:"",badgeClassName:"",slotBadgeLabel:({itemContext:t})=>t.item,slotItem:({itemContext:t})=>t.item};function dt(t){const[{id$:e,open$:o,filterText$:s,items$:l,itemIdFn$:n,onOpenChange$:p,onFilterTextChange$:c,onSelectedChange$:_,allowedPlacements$:r,navSelector$:i,...a},m]=ft(pt,t),{selected$:I}=a,C=B(()=>e()??rt()),d=ut(s,c),{hasFocus$:b,directive:N}=at(),D=mt(p,[o,b],([u,g])=>u&&g),K=B(()=>{const u=new Map,g=n();for(const w of I()){const F=g(w);u.set(F,{item:w,id:g(w),selected:!0})}return u}),ne=B(()=>[...K().values()]),M=function(){const u=Je(0);return $e(u,g=>{const{length:w}=P();g!=null&&(w?g<0?g=w-1:g>=w&&(g=0):g=void 0),u.set(g)})}(),O=B(()=>{const u=new Map;if(D()){const g=K(),w=n();for(const F of l()){const S=w(F);u.set(S,{item:F,id:S,selected:g.has(S)})}}return u}),P=B(()=>D()?[...O().values()]:[]),A=B(()=>{const u=P(),g=M();return u.length&&g!=null?u[g]:void 0}),{directives:{floatingDirective:E,referenceDirective:he},stores:{placement$:ae}}=st({props:{computePositionOptions:$e(B(()=>({middleware:[ot(5),lt({allowedPlacements:r()}),nt()]})))}}),{directive:ie,refreshElements:re,focusFirst:ce,focusLast:fe,focusLeft:V,focusRight:Z}=it(),ue=B(()=>({keys:{Home:ce,End:fe,ArrowLeft:V,ArrowRight:Z},selector:i()})),y=(u,g)=>{const w=u.target;re(),$.api.unselect(g),w instanceof HTMLElement&&setTimeout(()=>{V({event:u,referenceElement:w})||Z({event:u,referenceElement:w})}),u.preventDefault()},$={..._t({id$:C,visibleItems$:P,highlighted$:A,open$:D,selectedContexts$:ne,filterText$:d,placement$:ae,...a}),patch:m,api:{clear(){I.set([])},select(u){$.api.toggleItem(u,!0)},unselect(u){$.api.toggleItem(u,!1)},toggleItem(u,g){const w=n(),F=w(u),H=K().has(F);g==null&&(g=!H),!(g&&!O().has(F)||!g&&!H)&&I.update(T=>{var x;if(T=[...T],g&&!H)T.push(u);else if(!g&&H){const be=T.findIndex(we=>w(we)===F);T.splice(be,1)}return(x=_())==null||x(T),T})},clearText(){},highlight(u){const g=P().findIndex(w=>w.item===u);M.set(g===-1?void 0:g)},highlightFirst(){M.set(0)},highlightPrevious(){M.update(u=>u!=null?u-1:-1)},highlightNext(){M.update(u=>u!=null?u+1:1/0)},highlightLast(){M.set(-1)},open:()=>$.api.toggle(!0),close:()=>$.api.toggle(!1),toggle(u){D.update(g=>u??!g)}},directives:{hasFocusDirective:N,floatingDirective:E,referenceDirective:he,inputContainerDirective:ct(ie,ue)},actions:{onInput({target:u}){const g=u.value;Qe(()=>{D.set(g!=null&&g!==""),d.set(g)})},onRemoveBadgeClick(u,g){y(u,g)},onInputKeydown(u){const{ctrlKey:g,key:w}=u;let F=!0;switch(w){case"ArrowDown":{D()?g?$.api.highlightLast():$.api.highlightNext():($.api.open(),$.api.highlightFirst());break}case"ArrowUp":g?$.api.highlightFirst():$.api.highlightPrevious();break;case"Enter":{const S=A();S&&$.api.toggleItem(S.item);break}case"Escape":D.set(!1);break;default:F=!1}F&&u.preventDefault()},onBadgeKeydown(u,g){let w=!1;switch(u.key){case"Backspace":case"Delete":{y(u,g),w=!0;break}}w&&u.preventDefault()}}};return $}const ht=dt;function Le(t,e,o){const s=t.slice();s[50]=e[o];const l=s[50]===s[13];s[51]=l;const n=s[50].selected;return s[52]=n,s}const bt=t=>({itemContext:t[1]&524288,state:t[1]&67108864,widget:t[1]&128}),Ie=t=>({itemContext:t[50],state:t[57],widget:t[38]}),wt=t=>({itemContext:t[1]&524288,state:t[1]&67108864,widget:t[1]&128}),Fe=t=>({itemContext:t[50],state:t[57],widget:t[38]}),Ct=t=>t[1]&16777216,vt=t=>({}),Ne=t=>({...t[55]});function Se(t,e,o){const s=t.slice();return s[50]=e[o],s}const $t=t=>({itemContext:t[1]&524288,state:t[1]&67108864,widget:t[1]&128}),De=t=>({itemContext:t[50],state:t[57],widget:t[38]}),kt=t=>({itemContext:t[1]&524288,state:t[1]&67108864,widget:t[1]&128}),Te=t=>({itemContext:t[50],state:t[57],widget:t[38]}),Lt=t=>t[1]&16777216,It=t=>({}),Me=t=>({...t[55]});function Ft(t){let e;const o=t[43].badgeLabel,s=J(o,t,t[47],De);return{c(){s&&s.c()},m(l,n){s&&s.m(l,n),e=!0},p(l,n){s&&s.p&&(!e||n[1]&67698816)&&Q(s,o,l,l[47],e?Y(o,l[47],n,$t):X(l[47]),De)},i(l){e||(v(s,l),e=!0)},o(l){k(s,l),e=!1},d(l){s&&s.d(l)}}}function Nt(t){let e;const o=t[43].item,s=J(o,t,t[47],Te);return{c(){s&&s.c()},m(l,n){s&&s.m(l,n),e=!0},p(l,n){s&&s.p&&(!e||n[1]&67698816)&&Q(s,o,l,l[47],e?Y(o,l[47],n,kt):X(l[47]),Te)},i(l){e||(v(s,l),e=!0)},o(l){k(s,l),e=!1},d(l){s&&s.d(l)}}}function St(t){let e,o,s;const l=[t[55]];var n=t[56];function p(c,_){let r={$$slots:{item:[Nt,({itemContext:i,state:a,widget:m})=>({50:i,57:a,38:m}),({itemContext:i,state:a,widget:m})=>[0,(i?524288:0)|(a?67108864:0)|(m?128:0)]],badgeLabel:[Ft,({itemContext:i,state:a,widget:m})=>({50:i,57:a,38:m}),({itemContext:i,state:a,widget:m})=>[0,(i?524288:0)|(a?67108864:0)|(m?128:0)]]},$$scope:{ctx:c}};for(let i=0;i<l.length;i+=1)r=q(r,l[i]);return _!==void 0&&_[1]&16777216&&(r=q(r,pe(l,[de(c[55])]))),{props:r}}return n&&(e=ge(n,p(t))),{c(){e&&z(e.$$.fragment),o=He()},m(c,_){e&&U(e,c,_),j(c,o,_),s=!0},p(c,_){if(_[1]&33554432&&n!==(n=c[56])){if(e){oe();const r=e;k(r.$$.fragment,1,0,()=>{W(r,1)}),le()}n?(e=ge(n,p(c,_)),z(e.$$.fragment),v(e.$$.fragment,1),U(e,o.parentNode,o)):e=null}else if(n){const r=_[1]&16777216?pe(l,[de(c[55])]):{};_[1]&67698816&&(r.$$scope={dirty:_,ctx:c}),e.$set(r)}},i(c){s||(e&&v(e.$$.fragment,c),s=!0)},o(c){e&&k(e.$$.fragment,c),s=!1},d(c){c&&G(o),e&&W(e,c)}}}function Dt(t){let e;const o=t[43].badgeLabel,s=J(o,t,t[47],Me);return{c(){s&&s.c()},m(l,n){s&&s.m(l,n),e=!0},p(l,n){s&&s.p&&(!e||n[1]&16842752)&&Q(s,o,l,l[47],Lt(n)||!e?X(l[47]):Y(o,l[47],n,It),Me)},i(l){e||(v(s,l),e=!0)},o(l){k(s,l),e=!1},d(l){s&&s.d(l)}}}function Pe(t,e){let o,s,l,n,p,c;s=new Re({props:{slotContent:e[6],props:{state:e[7],widget:e[38],itemContext:e[50]},$$slots:{slot:[Dt,({props:r})=>({55:r}),({props:r})=>[0,r?16777216:0]],default:[St,({component:r,props:i})=>({56:r,55:i}),({component:r,props:i})=>[0,(r?33554432:0)|(i?16777216:0)]]},$$scope:{ctx:e}}});function _(...r){return e[45](e[50],...r)}return{key:t,first:null,c(){o=R("div"),z(s.$$.fragment),h(o,"tabindex","-1"),h(o,"class",l=`au-select-badge me-1 ${e[5]}`),this.first=o},m(r,i){j(r,o,i),U(s,o,null),n=!0,p||(c=se(o,"keydown",_),p=!0)},p(r,i){e=r;const a={};i[0]&64&&(a.slotContent=e[6]),i[0]&144&&(a.props={state:e[7],widget:e[38],itemContext:e[50]}),i[1]&50397184&&(a.$$scope={dirty:i,ctx:e}),s.$set(a),(!n||i[0]&32&&l!==(l=`au-select-badge me-1 ${e[5]}`))&&h(o,"class",l)},i(r){n||(v(s.$$.fragment,r),n=!0)},o(r){k(s.$$.fragment,r),n=!1},d(r){r&&G(o),W(s),p=!1,c()}}}function Be(t){let e,o=[],s=new Map,l,n,p,c,_=_e(t[10]);const r=i=>i[50].id;for(let i=0;i<_.length;i+=1){let a=Le(t,_,i),m=r(a);s.set(m,o[i]=Ee(m,a))}return{c(){e=R("ul");for(let i=0;i<o.length;i+=1)o[i].c();h(e,"role","listbox"),h(e,"id",t[1]),h(e,"class",l="dropdown-menu show "+t[11]),h(e,"data-popper-placement",t[12])},m(i,a){j(i,e,a);for(let m=0;m<o.length;m+=1)o[m]&&o[m].m(e,null);n=!0,p||(c=[te(t[35].call(null,e)),te(t[34].call(null,e)),se(e,"mousedown",ye(t[44]))],p=!0)},p(i,a){a[0]&58496|a[1]&118030464&&(_=_e(i[10]),oe(),o=Ke(o,a,r,1,i,_,s,e,Oe,Ee,null,Le),le()),(!n||a[0]&2)&&h(e,"id",i[1]),(!n||a[0]&2048&&l!==(l="dropdown-menu show "+i[11]))&&h(e,"class",l),(!n||a[0]&4096)&&h(e,"data-popper-placement",i[12])},i(i){if(!n){for(let a=0;a<_.length;a+=1)v(o[a]);n=!0}},o(i){for(let a=0;a<o.length;a+=1)k(o[a]);n=!1},d(i){i&&G(e);for(let a=0;a<o.length;a+=1)o[a].d();p=!1,Ae(c)}}}function Tt(t){let e;const o=t[43].badgeLabel,s=J(o,t,t[47],Ie);return{c(){s&&s.c()},m(l,n){s&&s.m(l,n),e=!0},p(l,n){s&&s.p&&(!e||n[1]&67698816)&&Q(s,o,l,l[47],e?Y(o,l[47],n,bt):X(l[47]),Ie)},i(l){e||(v(s,l),e=!0)},o(l){k(s,l),e=!1},d(l){s&&s.d(l)}}}function Mt(t){let e;const o=t[43].item,s=J(o,t,t[47],Fe);return{c(){s&&s.c()},m(l,n){s&&s.m(l,n),e=!0},p(l,n){s&&s.p&&(!e||n[1]&67698816)&&Q(s,o,l,l[47],e?Y(o,l[47],n,wt):X(l[47]),Fe)},i(l){e||(v(s,l),e=!0)},o(l){k(s,l),e=!1},d(l){s&&s.d(l)}}}function Pt(t){let e,o,s;const l=[t[55]];var n=t[56];function p(c,_){let r={$$slots:{item:[Mt,({itemContext:i,state:a,widget:m})=>({50:i,57:a,38:m}),({itemContext:i,state:a,widget:m})=>[0,(i?524288:0)|(a?67108864:0)|(m?128:0)]],badgeLabel:[Tt,({itemContext:i,state:a,widget:m})=>({50:i,57:a,38:m}),({itemContext:i,state:a,widget:m})=>[0,(i?524288:0)|(a?67108864:0)|(m?128:0)]]},$$scope:{ctx:c}};for(let i=0;i<l.length;i+=1)r=q(r,l[i]);return _!==void 0&&_[1]&16777216&&(r=q(r,pe(l,[de(c[55])]))),{props:r}}return n&&(e=ge(n,p(t))),{c(){e&&z(e.$$.fragment),o=He()},m(c,_){e&&U(e,c,_),j(c,o,_),s=!0},p(c,_){if(_[1]&33554432&&n!==(n=c[56])){if(e){oe();const r=e;k(r.$$.fragment,1,0,()=>{W(r,1)}),le()}n?(e=ge(n,p(c,_)),z(e.$$.fragment),v(e.$$.fragment,1),U(e,o.parentNode,o)):e=null}else if(n){const r=_[1]&16777216?pe(l,[de(c[55])]):{};_[1]&67698816&&(r.$$scope={dirty:_,ctx:c}),e.$set(r)}},i(c){s||(e&&v(e.$$.fragment,c),s=!0)},o(c){e&&k(e.$$.fragment,c),s=!1},d(c){c&&G(o),e&&W(e,c)}}}function Bt(t){let e;const o=t[43].item,s=J(o,t,t[47],Ne);return{c(){s&&s.c()},m(l,n){s&&s.m(l,n),e=!0},p(l,n){s&&s.p&&(!e||n[1]&16842752)&&Q(s,o,l,l[47],Ct(n)||!e?X(l[47]):Y(o,l[47],n,vt),Ne)},i(l){e||(v(s,l),e=!0)},o(l){k(s,l),e=!1},d(l){s&&s.d(l)}}}function Ee(t,e){let o,s,l,n,p,c,_,r;s=new Re({props:{slotContent:e[15],props:{state:e[7],widget:e[38],itemContext:e[50]},$$slots:{slot:[Bt,({props:a})=>({55:a}),({props:a})=>[0,a?16777216:0]],default:[Pt,({component:a,props:m})=>({56:a,55:m}),({component:a,props:m})=>[0,(a?33554432:0)|(m?16777216:0)]]},$$scope:{ctx:e}}});function i(){return e[46](e[50])}return{key:t,first:null,c(){o=R("li"),z(s.$$.fragment),l=ve(),h(o,"role","option"),h(o,"aria-selected",n=e[52]),h(o,"class",p=`au-select-item dropdown-item position-relative ${e[14]}`),me(o,"text-bg-primary",e[51]),me(o,"selected",e[52]),xe(o,"cursor","pointer"),this.first=o},m(a,m){j(a,o,m),U(s,o,null),ee(o,l),c=!0,_||(r=se(o,"click",i),_=!0)},p(a,m){e=a;const I={};m[0]&32768&&(I.slotContent=e[15]),m[0]&1152&&(I.props={state:e[7],widget:e[38],itemContext:e[50]}),m[1]&50397184&&(I.$$scope={dirty:m,ctx:e}),s.$set(I),(!c||m[0]&1024&&n!==(n=e[52]))&&h(o,"aria-selected",n),(!c||m[0]&16384&&p!==(p=`au-select-item dropdown-item position-relative ${e[14]}`))&&h(o,"class",p),(!c||m[0]&25600)&&me(o,"text-bg-primary",e[51]),(!c||m[0]&17408)&&me(o,"selected",e[52])},i(a){c||(v(s.$$.fragment,a),c=!0)},o(a){k(s.$$.fragment,a),c=!1},d(a){a&&G(o),W(s),_=!1,r()}}}function Et(t){let e,o,s=[],l=new Map,n,p,c,_,r,i,a,m=_e(t[4]);const I=d=>d[50].id;for(let d=0;d<m.length;d+=1){let b=Se(t,m,d),N=I(b);l.set(N,s[d]=Pe(N,b))}let C=t[3]&&t[10].length>0&&Be(t);return{c(){e=R("div"),o=R("div");for(let d=0;d<s.length;d+=1)s[d].c();n=ve(),p=R("input"),c=ve(),C&&C.c(),h(p,"id",t[0]),h(p,"aria-label",t[8]),h(p,"type","text"),h(p,"class","au-select-input flex-grow-1 border-0"),p.value=t[9],h(p,"aria-autocomplete","list"),h(p,"autocorrect","off"),h(p,"autocapitalize","none"),h(p,"autocomplete","off"),h(o,"role","combobox"),h(o,"class","d-flex align-items-center flex-wrap"),h(o,"aria-controls",t[1]),h(o,"aria-haspopup","listbox"),h(o,"aria-expanded",t[3]),h(e,"class",_="au-select dropdown border border-1 p-1 mb-3 d-block "+t[2])},m(d,b){j(d,e,b),ee(e,o);for(let N=0;N<s.length;N+=1)s[N]&&s[N].m(o,null);ee(o,n),ee(o,p),ee(e,c),C&&C.m(e,null),r=!0,i||(a=[se(p,"input",t[31]),se(p,"keydown",t[32]),te(t[35].call(null,o)),te(t[37].call(null,o)),te(t[36].call(null,e))],i=!0)},p(d,b){b[0]&240|b[1]&118030468&&(m=_e(d[4]),oe(),s=Ke(s,b,I,1,d,m,l,o,Oe,Pe,n,Se),le()),(!r||b[0]&1)&&h(p,"id",d[0]),(!r||b[0]&256)&&h(p,"aria-label",d[8]),(!r||b[0]&512&&p.value!==d[9])&&(p.value=d[9]),(!r||b[0]&2)&&h(o,"aria-controls",d[1]),(!r||b[0]&8)&&h(o,"aria-expanded",d[3]),d[3]&&d[10].length>0?C?(C.p(d,b),b[0]&1032&&v(C,1)):(C=Be(d),C.c(),v(C,1),C.m(e,null)):C&&(oe(),k(C,1,1,()=>{C=null}),le()),(!r||b[0]&4&&_!==(_="au-select dropdown border border-1 p-1 mb-3 d-block "+d[2]))&&h(e,"class",_)},i(d){if(!r){for(let b=0;b<m.length;b+=1)v(s[b]);v(C),r=!0}},o(d){for(let b=0;b<s.length;b+=1)k(s[b]);k(C),r=!1},d(d){d&&G(e);for(let b=0;b<s.length;b+=1)s[b].d();C&&C.d(),i=!1,Ae(a)}}}function Kt(t,e,o){let s,l,n,p,c,_,r,i,a,m,I,C,d,b,N,D,{$$slots:K={},$$scope:ne}=e;const M=Ze(K);let{open:O=!1}=e,{filterText:P=void 0}=e,{selected:A=void 0}=e;const E=tt({factory:ht,widgetName:"select",$$slots:M,$$props:e,events:{onOpenChange(f){o(39,O=f)},onSelectedChange:f=>{o(41,A=f)},onFilterTextChange:f=>{o(40,P=f)}}}),he=E.api,{stores:{id$:ae,ariaLabel$:ie,badgeClassName$:re,className$:ce,filterText$:fe,highlighted$:V,menuClassName$:Z,menuItemClassName$:ue,open$:y,placement$:$,selectedContexts$:u,slotBadgeLabel$:g,slotItem$:w,visibleItems$:F},state$:S,actions:{onInput:H,onInputKeydown:T,onBadgeKeydown:x},directives:{floatingDirective:be,hasFocusDirective:we,referenceDirective:qe,inputContainerDirective:ze}}=E;L(t,ae,f=>o(0,l=f)),L(t,ie,f=>o(8,a=f)),L(t,re,f=>o(5,_=f)),L(t,ce,f=>o(2,n=f)),L(t,fe,f=>o(9,m=f)),L(t,V,f=>o(13,b=f)),L(t,Z,f=>o(11,C=f)),L(t,ue,f=>o(14,N=f)),L(t,y,f=>o(3,p=f)),L(t,$,f=>o(12,d=f)),L(t,u,f=>o(4,c=f)),L(t,g,f=>o(6,r=f)),L(t,w,f=>o(15,D=f)),L(t,F,f=>o(10,I=f)),L(t,S,f=>o(7,i=f));function Ue(f){et.call(this,t,f)}const We=(f,Ge)=>x(Ge,f.item),je=f=>E.api.toggleItem(f.item);return t.$$set=f=>{o(48,e=q(q({},e),ke(f))),"open"in f&&o(39,O=f.open),"filterText"in f&&o(40,P=f.filterText),"selected"in f&&o(41,A=f.selected),"$$scope"in f&&o(47,ne=f.$$scope)},t.$$.update=()=>{E.patchChangedProps(e),t.$$.dirty[0]&1&&o(1,s=`${l}-menu`)},e=ke(e),[l,s,n,p,c,_,r,i,a,m,I,C,d,b,N,D,ae,ie,re,ce,fe,V,Z,ue,y,$,u,g,w,F,S,H,T,x,be,we,qe,ze,E,O,P,A,he,K,Ue,We,je,ne]}class Ot extends Xe{constructor(e){super(),Ye(this,e,Kt,Et,Ve,{open:39,filterText:40,selected:41,api:42},null,[-1,-1])}get api(){return this.$$.ctx[42]}}const Gt=Ot;export{Gt as S};
