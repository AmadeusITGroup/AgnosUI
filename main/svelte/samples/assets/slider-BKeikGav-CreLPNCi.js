import{Z as s,a1 as vt,Y as E}from"./AppCommon-CTA2S8Vh.js";import{s as de,t as gt,m as N,a as w,b as Lt,n as $t}from"./dom-DD1hAVZy-C1xEaPzR.js";import{w as Dt,b as wt,s as yt,t as B}from"./stores-CCAWz2dY.js";import{h as Mt,a as _e,d as ee,c as V,t as kt,b as te,j as Re}from"./writables-e0tyaQpe-CAqbRUnG.js";import{c as Te,a as Pt}from"./resizeObserver-DnqdhQCa.js";import{c as St}from"./widget-CFLopPe7.js";const Vt=/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/;function me(r){const c=(""+r).match(Vt);return Math.max(0,(c[1]?.length??0)-(+c[2]||0))}const he=(r,c,u,b,m,v,f,d)=>{let h=r[c+b];if(h==null||Math.abs(h-u)>=m)return u;if(d){const k=u+m*b;h=he(r,c+b,k,b,m,v,f,d),h=Math.max(Math.min(h,f),v),r[c+b]=h}return Math.abs(h-u)<m&&(u=h-m*b,r[c]=u),u},fe=(r,c,u,b,m,v,f,d)=>{let h=r[c+b];if(h==null||Math.abs(h-u)<=m)return u;if(d){const k=u+m*b;h=fe(r,c+b,k,b,m,v,f,d),h=Math.max(Math.min(h,f),v),r[c+b]=h}return Math.abs(h-u)>m&&(u=h-m*b,r[c]=u),u},zt=(r,c,u,b,m,v,f)=>{let d=r[c];const h=r[c-1],k=r[c+1];return h!=null&&d<h?d=r[c]=h:k!=null&&d>k&&(d=r[c]=k),u&&(d=he(r,c,d,1,u,m,v,f),d=he(r,c,d,-1,u,m,v,f)),b&&(d=fe(r,c,d,1,b,m,v,f),fe(r,c,d,-1,b,m,v,f)),r},be={min:0,max:100,stepSize:1,readonly:!1,disabled:!1,vertical:!1,className:"",ariaLabel:()=>"Value",ariaLabelledBy:()=>"",ariaValueText:()=>"",onValuesChange:$t,values:[0],showValueLabels:!0,showMinMaxLabels:!0,showTicks:!1,showTickValues:!0,tickInterval:0,minRange:0,maxRange:0,pushRange:!1,rtl:!1},Rt={min:Re,max:Re,stepSize:ee(0,1/0,{strict:!0}),readonly:V,disabled:V,vertical:V,ariaLabel:te,ariaLabelledBy:te,ariaValueText:te,onValuesChange:te,values:_e,showValueLabels:V,showMinMaxLabels:V,showTicks:V,showTickValues:V,tickInterval:ee(0,1/0,{strict:!0}),rtl:V,className:kt,minRange:ee(0,1/0),maxRange:ee(0,1/0),pushRange:V},Ee=(r,c,u,b,m)=>{const v=Math.pow(10,m);if(r>=u)return u;if(r<=c)return c;const f=Math.floor((r-c)*v/b);return+(((r-c)*v%b<b/2?f:f+1)*b/v+c).toFixed(m)},ie=(r,c,u,b)=>{c.update(m=>(m=[...m],m[r]=m[r]+u*b,m))},se=(r,c,u)=>r&&c?u?1:-1:r&&!c?-1:!r&&c?u?-1:1:!r&&!c?-1:1,g=r=>r!=null?`${r}%`:"",It=St("slider",r=>{const[{min$:c,max$:u,minRange$:b,maxRange$:m,pushRange$:v,stepSize$:f,rtl$:d,values$:h,ariaLabel$:k,ariaLabelledBy$:Ne,ariaValueText$:Be,onValuesChange$:xe,showValueLabels$:Y,showMinMaxLabels$:F,showTicks$:T,showTickValues$:x,tickInterval$:pe,...X},He]=Dt(be,r,Rt),{vertical$:o,disabled$:H,readonly$:ve}=X;let q=-1;const U=new Map,P=s(()=>{const e=c(),t=u();return e===t?be.min:Math.min(e,t)}),z=s(()=>{const e=c(),t=u();return e===t?be.max:Math.max(e,t)}),Ie=s(()=>{const e=b();if(e<=0)return 0;const t=m();return t===0?e:Math.min(e,t)}),Oe=s(()=>{const e=m();if(e<=0)return 0;const t=b();return t===0?e:Math.max(t,e)}),ae=s(()=>Math.max(me(f()),me(P()),me(z()))),ge=s(()=>f()*Math.pow(10,ae()));let Le=h();const D=wt(h,xe,e=>{const t=P(),i=z(),a=ge(),n=ae(),l=e.map(L=>Ee(L,t,i,a,n));if(e.length>1){const L=Ie(),y=Oe();if(L||y){const M=v(),p=l.findIndex((R,Q)=>R!==Le[Q]);p!==-1&&zt(l,p,L,y,t,i,M)}}return Le=l,l},_e.equal),{directive:Ae,element$:je}=de(),{directive:Ye,element$:Fe}=de(),{directive:Xe,element$:qe}=de(),{directive:Ue,elements$:$e}=gt(),{directive:Ce,dimensions$:ne}=Te(),{directive:We,dimensionsMap$:Ze}=Pt(),{directive:Ge,dimensions$:Je}=Te(),I=vt({}),De=s(()=>(ne(),I(),je()?.getBoundingClientRect()??{}),{equal:Object.is}),Ke=s(()=>(ne(),I(),Fe()?.getBoundingClientRect()??{}),{equal:(e,t)=>Object.is(e,t)}),Qe=s(()=>(ne(),I(),qe()?.getBoundingClientRect()??{}),{equal:(e,t)=>Object.is(e,t)}),et=s(()=>De()[o()?"top":"left"]),we=s(()=>De()[o()?"height":"width"]),C=s(()=>[...D()].sort((e,t)=>e-t)),tt=s(()=>D().map((e,t)=>({id:t,value:e})).sort((e,t)=>e.value-t.value)),it=s(()=>{const e=k(),t=Be(),i=Ne();return tt().map((a,n)=>({...a,ariaLabel:i(n)?void 0:e(n),ariaLabelledBy:i(n)||void 0,ariaValueText:t(a.value,n)||void 0}))}),ye=s(()=>D().map(e=>K(e))),O=s(()=>[...ye()].sort((e,t)=>e-t)),W=s(()=>o()?"height":"width"),st=s(()=>o()?"top":"left"),at=s(()=>Z(Ke()[W()])),nt=s(()=>Z(Qe()[W()])),lt=s(()=>Y()&&(!T()||!x())),Z=e=>e?e/we()*100:0,le=s(()=>Z(Je()?.contentRect[W()])),Me=s(()=>o()?oe():re()),S=e=>Z(Ze().get($e()[e])?.contentRect[W()]),ke=s(()=>{if(!F()||T()&&x())return!1;if(!Y())return!0;const e=at(),t=o(),i=d();if(G()){const n=le(),l=Me();return i&&!t||t&&!i?l+n/2<100-e-1:l-n/2>e+1}const a=O();return i?a[0]-S(a.length-1)/2>e+1:a[0]-S(0)/2>e+1}),Pe=s(()=>{if(!F()||T()&&x())return!1;if(!Y())return!0;const e=nt(),t=o(),i=d();if(G()){const n=le(),l=Me();return i&&!t||t&&!i?l-n/2>e+1:l+n/2<100-e-1}const a=O();return i?100-a[a.length-1]-S(0)/2>e+1:a[a.length-1]+S(a.length-1)/2<100-e-1}),G=s(()=>$e().length==2?rt():!1);function rt(){const e=_(),t=st(),i=J(e[0][t],S(0)),a=J(e[1][t],S(1)),n=S(0),l=S(1);if(n===100||l===100)return!1;const L=i-n,y=i+n,M=a-l,p=a+l;return!(y<M||L>p)}const A=s(()=>!H()&&!ve()),re=s(()=>{const e=O(),t=le();let i=(e[0]+e[1])/2;return i=J(i,t),o()||e.length!=2?0:d()?100-i:i}),oe=s(()=>{const e=O(),t=100-(e[0]+e[1])/2;return o()&&e.length==2?d()?100-t:t:0}),_=s(()=>{const e=o(),t=d();return ye().map(i=>({left:t?e?null:100-i:e?null:i,top:t?e?i:null:e?100-i:null}))}),J=(e,t)=>Mt(e,100-t/2,t/2),ot=s(()=>{const e=o(),t=O(),i=d();return t.length===1?[{left:e||i?null:0,right:e?null:i?0:null,bottom:e?i?null:0:null,top:e&&i?0:null,width:e?100:t[0],height:e?t[0]:100,id:0}]:t.map((a,n,l)=>({left:e||i?null:a,right:e?null:i?l[n]:null,bottom:e?i?null:a:null,top:e&&i?l[n]:null,width:e?100:n===l.length-1?a:l[n+1]-a,height:e?n===l.length-1?a:l[n+1]-a:100,id:n})).slice(0,t.length-1)}),ct=s(()=>{if(!T())return[];const e=o(),t=P(),i=z(),a=d(),n=x(),l=pe()||f(),L=[],y=ge(),M=ae(),p=R=>!!a!=!!e?100-R:R;for(let R=t;R<i;R+=l){const Q=Ee(R,t,i,y,M),pt=K(Q);L.push({position:p(pt),selected:!1,value:Q,displayLabel:n})}return L.push({position:p(100),selected:!1,value:i,displayLabel:n}),L}),ut=s(()=>{const e=C(),t=i=>{const a=e.length>1,n=a?e[e.length-1]:e[0],l=a?e[0]:0;return i<=n&&i>=l};return ct().map(i=>({...i,selected:t(i.value)}))}),K=e=>{const t=P(),i=z();return(e-t)*100/(i-t)},ce=e=>{const t=D();if(t.length===1)return 0;const i=C(),a=i.find(y=>K(y)>e*100),n=a?i.indexOf(a):i.length-1,l=K(i[n-1]+(i[n]-i[n-1])/2),L=i[e*100<=l?n-1:n];return t.indexOf(L)},ue=e=>{const t=we(),i=et();let a=o()?(t-e+i)/t:(e-i)/t;return a=d()?1-a:a,a},j=(e,t)=>{if(A()){const i=ue(e),a=t??ce(i),n=i*(z()-P())+P();D.update(l=>(l=[...l],l[a]=n,l))}},$=s(()=>!o()),dt=w(()=>({classNames:{"au-slider":B,"au-slider-vertical":o,"au-slider-horizontal":$},attributes:{class:X.className$}})),mt=w(()=>({attributes:{"aria-disabled":s(()=>H()?"true":void 0),class:X.className$},classNames:{"au-slider-content":B,"au-slider-vertical":o,"au-slider-horizontal":$,"au-slider-with-labels":s(()=>Y()||F()||x()&&T()),disabled:H}})),bt=w(()=>({classNames:{"au-slider-label-vertical":o,"au-slider-label-vertical-min":o,"au-slider-label":$,"au-slider-label-min":$,"au-slider-rtl":d,invisible:s(()=>!ke())},attributes:{"aria-hidden":E("true")}})),ht=w(()=>({classNames:{"au-slider-label-vertical":o,"au-slider-label-vertical-max":o,"au-slider-label":$,"au-slider-label-max":$,"au-slider-rtl":d,invisible:s(()=>!Pe())},attributes:{"aria-hidden":E("true")}})),ft=Lt((e,t)=>{const i=()=>{U.delete(t.item.id)},a=n=>{U.set(n.item.id,e)};return a(t),{update:a,destroy:i}}),Se=(e,t)=>{e.preventDefault();const i=t!==void 0?U.get(t):e.target,a=n=>{n.preventDefault();const l=o()?n.clientY:n.clientX;i?.focus(),q!==l&&(q=l,j(l,t))};A()&&(I.set({}),i?.focus(),document.addEventListener("mousemove",a),document.addEventListener("mouseup",()=>{document.removeEventListener("mousemove",a)},{once:!0}))},Ve=(e,t)=>{const i=t!==void 0?U.get(t):e.target,a=n=>{n.preventDefault();const l=o()?n.touches[0].clientY:n.touches[0].clientX;i?.focus(),q!==l&&(q=l,j(l,t))};A()&&(I.set({}),i?.focus(),document.addEventListener("touchmove",a,{passive:!1}),document.addEventListener("touchend",()=>{document.removeEventListener("touchmove",a),document.removeEventListener("touchcancel",a)},{once:!0}),document.addEventListener("touchcancel",()=>{document.removeEventListener("touchmove",a),document.removeEventListener("touchend",a)},{once:!0}))},ze=w(e=>({events:{keydown:t=>{const i=e().item.id,{key:a}=t,n=d(),l=f(),L=P(),y=z(),M=o();if(A()){switch(a){case"ArrowDown":ie(i,D,l,se(M,n,!0));break;case"ArrowLeft":ie(i,D,l,se(M,n,!1));break;case"ArrowUp":ie(i,D,l,-1*se(M,n,!0));break;case"ArrowRight":ie(i,D,l,-1*se(M,n,!1));break;case"Home":D.update(p=>(p=[...p],p[i]=L,p));break;case"End":D.update(p=>(p=[...p],p[i]=y,p));break;case"PageUp":break;case"PageDown":break;default:return}t.preventDefault()}},mousedown:t=>{t.button===0&&Se(t,e().item.id)},touchstart:t=>{Ve(t,e().item.id)}}}));return{...yt({min$:P,max$:z,stepSize$:f,values$:D,sortedValues$:C,sortedHandles$:it,minValueLabelDisplay$:ke,maxValueLabelDisplay$:Pe,combinedLabelDisplay$:G,interactive$:A,combinedLabelPositionLeft$:re,combinedLabelPositionTop$:oe,progressDisplayOptions$:ot,handleDisplayOptions$:_,showValueLabels$:lt,showMinMaxLabels$:F,showTicks$:T,rtl$:d,ticks$:ut,...X}),patch:He,api:{},directives:{sliderDirective:N(Ae,Ce,mt),containerDirective:dt,progressDisplayDirective:w(e=>({styles:{left:s(()=>g(e().option.left)),right:s(()=>g(e().option.right)),top:s(()=>g(e().option.top)),bottom:s(()=>g(e().option.bottom)),width:s(()=>g(e().option.width)),height:s(()=>g(e().option.height))},classNames:{"au-slider-progress":B}})),clickableAreaDirective:w(()=>({events:{mousedown:e=>{if(e.button!==0)return;const t=o()?e.clientY:e.clientX,i=ce(ue(t));j(t,i),Se(e,i)},touchstart:e=>{const t=o()?e.touches[0].clientY:e.touches[0].clientX,i=ce(ue(t));j(t,i),Ve(e,i)}},classNames:{"au-slider-clickable-area":$,"au-slider-clickable-area-vertical":o,"au-slider-clickable-area-with-ticks":s(()=>T()&&pe()===0)}})),handleEventsDirective:ze,handleDirective:N(ft,ze,w(e=>({attributes:{role:E("slider"),"aria-valuemin":P,"aria-valuemax":z,"aria-valuenow":s(()=>e().item.value),"aria-valuetext":s(()=>e().item.ariaValueText),"aria-label":s(()=>e().item.ariaLabel),"aria-labelledBy":s(()=>e().item.ariaLabelledBy),"aria-orientation":s(()=>o()?"vertical":void 0),"aria-disabled":s(()=>H()?"true":void 0),disabled:H,"aria-readonly":s(()=>ve()?"true":void 0)},styles:{left:s(()=>g(_()[e().item.id].left)),top:s(()=>g(_()[e().item.id].top))},classNames:{"au-slider-handle":B,"au-slider-handle-vertical":o,"au-slider-handle-horizontal":$}}))),minLabelDirective:N(Ye,bt),maxLabelDirective:N(Xe,ht),combinedHandleLabelDisplayDirective:N(Ge,w(()=>({classNames:{"au-slider-label-vertical":o,"au-slider-label-vertical-now":o,"au-slider-label":$,"au-slider-label-now":$},styles:{left:s(()=>g(re())),top:s(()=>g(oe()))},attributes:{"aria-hidden":E("true")}}))),handleLabelDisplayDirective:N(Ue,We,w(e=>({classNames:{"au-slider-label-vertical":o,"au-slider-label-vertical-now":o,"au-slider-label":$,"au-slider-label-now":$},styles:{left:s(()=>{const t=e().index,i=_()[t].left;return i===null?"":g(J(i,S(t)))}),top:s(()=>g(_()[e().index].top)),opacity:s(()=>G()?"0":"1")},attributes:{"aria-hidden":E("true")}}))),tickDirective:w(e=>({classNames:{"au-slider-tick":B,"au-slider-tick-horizontal":$,"au-slider-tick-vertical":o},styles:{left:s(()=>o()?null:g(e().tick.position)),top:s(()=>o()?g(e().tick.position):null)},events:{click:t=>{j(o()?t.clientY:t.clientX)}},attributes:{"aria-hidden":E("true")}})),tickLabelDirective:w(e=>({classNames:{"au-slider-tick-label":B,"au-slider-tick-label-vertical":o,"au-slider-tick-label-now":s(()=>C().some(t=>t===e().tick.value))},styles:{left:s(()=>o()?null:g(e().tick.position)),top:s(()=>o()?g(e().tick.position):null)},attributes:{"aria-hidden":E("true")}}))}}});export{It as c};
