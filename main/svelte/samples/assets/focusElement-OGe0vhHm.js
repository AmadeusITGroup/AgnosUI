import{n as l,b as v,m as b,g,s as y}from"./dom-DD1hAVZy-BYveNrMV.js";import{Z as h}from"./AppCommon-Wa4AmAan.js";import{i as S}from"./isFocusable-Ckwus82R-adOM025a.js";const E=()=>{const e=Math.abs(window.innerWidth-document.documentElement.clientWidth),t=document.body,r=t.style,{overflow:o,paddingRight:s}=r;if(e>0){const n=parseFloat(window.getComputedStyle(t).paddingRight);r.paddingRight=`${n+e}px`}return r.overflow="hidden",()=>{e>0&&(r.paddingRight=s),r.overflow=o}};let c=l;const x=()=>{c(),c=E()},W=()=>{c(),c=l},F=v((e,t)=>{let r,o;const s=()=>{o&&(o.parentNode?.replaceChild(e,o),o=null)},n=i=>{if(i!==r&&(i?.container!==r?.container||i?.insertBefore!==r?.insertBefore)){r=i;const d=r?.container??r?.insertBefore?.parentElement;if(d){const p=r?.insertBefore??null;(e.parentElement!==d||e.nextSibling!==p)&&(o||(o=e.parentNode?.insertBefore(e.ownerDocument.createComment("portal"),e)),d.insertBefore(e,p))}else s()}};return n(t),{update:n,destroy:()=>{s(),e.parentNode?.removeChild(e)}}}),R="data-agnos-ignore-inert",w=e=>{const t=new Map,r=o=>{const s=o.parentElement;s&&o!==document.body&&(Array.from(s.children).forEach(n=>{n!==o&&n.nodeName!=="SCRIPT"&&!n.hasAttribute(R)&&(t.set(n,n.hasAttribute("inert")),n.toggleAttribute("inert",!0))}),r(s))};return r(e),()=>t.forEach((o,s)=>{s.toggleAttribute("inert",o)})};let u=l;const B=e=>{u(),u=e?w(e):l},{directive:C,elements$:k}=y(),N=h(()=>{const e=k();return e[e.length-1]},{equal:Object.is}),I=h(()=>B(N())),M=b(C,g(I)),a=[];let m=!1;const A=()=>{m=!1;const e=[];for(;a.length>0;){const t=a[a.length-1];if(t.element){e.push(t.element);break}else t.previousElement&&e.push(t.previousElement),a.pop()}for(const t of e)if(S(t)){t.focus();return}},f=()=>{m||(m=!0,setTimeout(A,0))},j=v(e=>{const t={element:e,previousElement:document.activeElement};return a.push(t),f(),{destroy(){t.element=null,f()}}});export{W as a,j as f,F as p,x as r,M as s};
