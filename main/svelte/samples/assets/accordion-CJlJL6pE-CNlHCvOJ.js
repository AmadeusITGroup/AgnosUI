import{w as T,s as j,m as F,n as z,i as M,t as Y}from"./stores-DC-t9M1A.js";import{c as Z}from"./baseTransitions-D0Z5J8UD.js";import{Z as o,a1 as k,$ as W,Y as O}from"./AppCommon-CTA2S8Vh.js";import{n as g,r as _,m as S,a as u,f as q}from"./dom-q8JF3QN8-C1xEaPzR.js";import{f as P,t as s,b as C,c as $}from"./writables-e0tyaQpe-FFhjZhIM.js";import{c as G}from"./widget-BOd7n8SM.js";function J(m,t,n){let l;return t.length==2?(n=n??t[0],l=t.find(r=>r!==n)):t.length>2&&(l=t[0]),l&&m.forEach(r=>{r.stores.id$()!==l&&r.stores.visible$()&&r.patch({visible:!1})}),m}function V(m,t){return m.find(n=>n.stores.id$()===t)}const a={closeOthers:!1,onItemShown:g,onItemHidden:g,className:"",itemDestroyOnHide:!0,itemAnimated:!0,itemTransition:g,itemHeadingLevel:2,itemClassName:"",itemHeaderClassName:"",itemButtonClassName:"",itemBodyContainerClassName:"",itemBodyClassName:""},B={id:"",destroyOnHide:a.itemDestroyOnHide,disabled:!1,visible:!1,animated:a.itemAnimated,transition:a.itemTransition,onShown:g,onHidden:g,onVisibleChange:g,className:a.itemClassName,headerClassName:a.itemHeaderClassName,buttonClassName:a.itemButtonClassName,bodyContainerClassName:a.itemBodyContainerClassName,bodyClassName:a.itemBodyClassName,headingLevel:a.itemHeadingLevel},K=Object.keys(B);function ne(){return{...a}}const Q={closeOthers:$,onItemShown:C,onItemHidden:C,className:s,itemDestroyOnHide:$,itemAnimated:$,itemTransition:C,itemClassName:s,itemHeaderClassName:s,itemButtonClassName:s,itemBodyContainerClassName:s,itemBodyClassName:s,itemHeadingLevel:P([1,2,3,4,5,6])},R={id:s,destroyOnHide:$,disabled:$,visible:$,animated:$,transition:C,onShown:C,onHidden:C,onVisibleChange:C,className:s,headerClassName:s,buttonClassName:s,bodyContainerClassName:s,bodyClassName:s,headingLevel:P([1,2,3,4,5,6])};function U(m){const[{bodyClassName$:t,buttonClassName$:n,bodyContainerClassName$:l,headerClassName$:r,animated$:h,transition$:x,destroyOnHide$:E,onShown$:N,onHidden$:y,onVisibleChange$:v,visible$:c,id$:i,disabled$:b,...H},L]=T(B,m,R),D=k(!1),e=M(i),f=Z({props:{transition:x,visible:c,onVisibleChange:v,animated:h,animatedOnInit:!1,initDone:D,onHidden:()=>{y()()},onShown:()=>{N()()}}}),A=o(()=>!E()||!f.stores.hidden$()),w=u(()=>({attributes:{id:o(()=>`${e()}-toggle`),"aria-expanded":o(()=>`${c()}`),"aria-disabled":o(()=>`${b()}`),"aria-controls":o(()=>`${e()}-body-container`),disabled:b},classNames:{collapsed:o(()=>!c())},events:{click:()=>{b()||c.update(p=>!p)}}})),I=f.directives.directive,d=u(()=>({attributes:{id:o(()=>`${e()}-body-container`),class:l,"aria-labelledby":o(()=>`${e()}-toggle`),role:O("region")}}));return{...j({visible$:c,id$:e,shouldBeInDOM$:A,disabled$:b,bodyClassName$:t,buttonClassName$:n,bodyContainerClassName$:l,headerClassName$:r,...H}),patch:L,api:{initDone:()=>{D.set(!0)},collapse:()=>{c.set(!1)},expand:()=>{c.set(!0)},toggle:()=>{c.update(p=>!p)}},directives:{toggleDirective:w,buttonDirective:S(w,u(()=>({attributes:{type:O("button"),class:n}}))),headerDirective:u(()=>({attributes:{class:r}})),bodyDirective:u(()=>({attributes:{class:t}})),transitionDirective:I,bodyContainerAttrsDirective:d,bodyContainerDirective:S(I,d),itemDirective:g}}}function X(m=U,t=K,n=a,l=Q){return G("accordion",r=>{const[h,x]=T(n,r,l),{closeOthers$:E,onItemShown$:N,onItemHidden$:y,className$:v}=h,c=Object.fromEntries(Object.entries(h).filter(e=>e[0].startsWith("item")).map(e=>[e[0].charAt(4).toLowerCase()+e[0].slice(5,-1),e[1]])),i=_(),b=o(()=>{const e=[];return i().forEach(f=>{f.stores.visible$()&&e.push(f.stores.id$())}),e}),H=k(b()[0]),L=o(()=>{E()&&(J(i(),b(),H()),H.set(b()[0]))}),D=o(()=>{L()});return{...j({itemWidgets$:i,className$:v}),patch:x,api:{expand:e=>{V(i(),e)?.api.expand()},collapse:e=>{V(i(),e)?.api.collapse()},toggle:e=>{V(i(),e)?.api.toggle()},expandAll:()=>{i().forEach(e=>e.api.expand())},collapseAll:()=>{i().forEach(e=>e.api.collapse())},registerItem:e=>{const f=t,A=F(f,z(f,e?.config),c),[{onHidden$:w,onShown$:I}]=T({onHidden:B.onHidden,onShown:B.onShown},{config:A,props:e?.props}),d=m({config:A,props:{...e?.props,onHidden:W(O(()=>{y()(d.stores.id$()),w()?.()}),p=>{y.set(p)}),onShown:W(O(()=>{N()(d.stores.id$()),I()?.()}),p=>{N.set(p)})}});return d.directives.itemDirective=S(()=>({destroy:i.register(d)}),u(()=>({attributes:{class:d.stores.className$,id:d.stores.id$}}))),d}},directives:{accordionDirective:S(q(D),u(()=>({attributes:{class:v},classNames:{"au-accordion":Y}})))}}})}const re=X();export{re as a,U as c,X as f,ne as g};
