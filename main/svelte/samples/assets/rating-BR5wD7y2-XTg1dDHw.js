import{G as e,H as B}from"./AppCommon-Bd7c79Sv.js";import{w as C,D as M,s as I,b as R,e as m,I as U}from"./directive-DCYlDznf-2vjIImQS.js";import{e as x,i as E,t as v,a as u,b as p,f as K}from"./writables-DoU_XYTX-Cg6V7d5t.js";const w={rating:0,tabindex:0,maxRating:10,disabled:!1,readonly:!1,resettable:!0,ariaValueTextFn:(i,b)=>`${i} out of ${b}`,onHover:m,onLeave:m,onRatingChange:m,className:"",ariaLabel:"Rating",ariaLabelledBy:""};function q(){return{...w}}const S={rating:x,tabindex:x,maxRating:{normalizeValue:i=>E(i)?Math.max(0,i):U},disabled:v,readonly:v,resettable:v,ariaValueTextFn:u,onHover:u,onLeave:u,onRatingChange:u,className:p,ariaLabel:p,ariaLabelledBy:p};function J(i){const[{rating$:b,tabindex$:L,ariaValueTextFn$:k,onHover$:D,onLeave$:A,onRatingChange$:N,...f},V]=C(w,i,S),{ariaLabel$:P,ariaLabelledBy$:F,className$:H,disabled$:g,maxRating$:t,readonly$:$,resettable$:T}=f,y=e(()=>g()?-1:L()),r=M(b,N,a=>K(a,t())),l=B(0),n=e(()=>!g()&&!$()),c=e(()=>{const a=l();return a!==0?a:r()}),h=e(()=>k()(c(),t())),_=e(()=>{const a=c();return Array.from({length:t()},(d,s)=>({fill:Math.round(Math.max(Math.min(a-s,1),0)*100),index:s}))}),o={...I({ariaValueText$:h,interactive$:n,rating$:r,stars$:_,tabindex$:y,visibleRating$:c,...f}),patch:V,actions:{click:a=>{n()&&a>0&&a<=t()&&r.update(d=>d===a&&T()?0:a)},hover:a=>{n()&&a>0&&a<=t()&&(l.set(a),D()(a))},leave:()=>{n()&&(A()(l()),l.set(0))},handleKey(a){if(n()){const{key:d}=a;switch(d){case"ArrowLeft":case"ArrowDown":r.update(s=>s-1);break;case"ArrowRight":case"ArrowUp":r.update(s=>s+1);break;case"Home":case"PageDown":r.set(0);break;case"End":case"PageUp":r.set(t());break;default:return}a.preventDefault(),a.stopPropagation()}}},directives:{containerDirective:R(()=>({events:{keydown:a=>o.actions.handleKey(a),mouseleave:()=>o.actions.leave()},attributes:{role:"slider",class:H,"aria-valuemin":0,tabindex:y,"aria-valuemax":t,"aria-valuenow":c,"aria-valuetext":h,"aria-readonly":e(()=>$()?"true":void 0),"aria-disabled":e(()=>g()?"true":void 0),"aria-label":P,"aria-labelledby":e(()=>F()||void 0)},classNames:{"au-rating":!0}})),starDirective:R(a=>({events:{mouseenter:()=>o.actions.hover(a().index+1),click:()=>o.actions.click(a().index+1)},styles:{cursor:e(()=>n()?"pointer":"default")},classNames:{"au-rating-star":!0}}))},api:{}};return o}export{J as c,q as g};
