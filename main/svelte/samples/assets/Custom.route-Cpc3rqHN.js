import{p as N,V as F,W as f,k as _,b as S,Q,u as U,c as u,e as x,S as V,a as W,t as w,n as j,h as p,f as z,q as G,T,r as h}from"./AppCommon-D_B8a5G6.js";import{a as A}from"./actions-B64vG8Da.js";import{S as J}from"./Select-DuXSsYHi.js";import{c as K}from"./directive-CKEccryv-BAfxyCuh.js";import"./class-1L5W2JgY.js";import"./Slot-Bt2_y6gy.js";import"./snippet-CHDzym81.js";import"./config-BmaADpVL.js";import"./config-CpwOCg7e.js";import"./floatingUI-BbI9geYn.js";import"./promise-CY2U8bTP-Bo1v6H0G.js";import"./focustrack-CsH95dnP.js";import"./navManager-vnOjB-HU.js";import"./extendWidget-CKD28wu-.js";function O(m,o){let s;return(...v)=>{s&&clearTimeout(s),s=setTimeout(()=>{m(...v)},o)}}const R=m=>{let o;return(...s)=>(o==null||o.abort(),o=new AbortController,m(o.signal,...s))};var X=w('<a target="_blank" rel="noreferrer"> </a> <button></button>',1),Y=w('<label><div class="fw-bold"> </div> <div class="text-wrap wiki-desc"> </div></label>'),Z=w('<a class="pe-2"> </a>'),$=w('<div class="custom-select my-auto mb-3"><!> <span class="fw-bold">Selection:</span> <!></div>');function vt(m,o){N(o,!0);const s="https://en.wikipedia.org/?curid=";let v=F(f([])),k=F(f([]));const D=e=>"page-"+e.pageid;function H(e){const i=document.createElement("div");return i.innerHTML=e,i.innerText}const I=O(R(async(e,i)=>{var r;const t=await(await fetch("https://en.wikipedia.org/w/api.php?action=query&list=search&prop=info&inprop=url&utf8=&format=json&origin=*&srlimit=5&srsearch="+i,{signal:e})).json();j(v,f(((r=t.query)==null?void 0:r.search.map(n=>({...n,snippet:H(n.snippet)})))??[]))}),200),P=new Intl.Collator("en").compare;function B(e){j(k,f((e||[]).sort((i,a)=>P(i.title,a.title))))}const E=e=>e.querySelectorAll("a,button,input");var L=$(),q=p(L);J(q,{get items(){return _(v)},itemIdFn:D,onFilterTextChange:I,onSelectedChange:B,navSelector:E,badgeClassName:"badge text-bg-light d-flex align-items-center",badgeLabel:(a,t)=>{let r=()=>t==null?void 0:t().itemContext,n=()=>t==null?void 0:t().directives;var l=X(),c=z(l),C=p(c),d=S(c,2);let b;x(()=>b=G(d,b,{type:"button","aria-label":"Close"})),x(()=>{T(c,"href",`${s}${r().item.pageid}`),h(C,r().item.title)}),A(d,(g,y)=>K(g,y),()=>"btn-close ms-1 wiki-btn-close"),A(d,(g,y)=>n().badgeCloseButtonDirective(g,y),r),u(a,l)},itemLabel:(a,t)=>{let r=()=>t==null?void 0:t().itemContext.id,n=()=>t==null?void 0:t().itemContext.item;var l=Y(),c=p(l),C=p(c),d=S(c,2),b=p(d);x(()=>{T(l,"for",""+r()),h(C,n().title),h(b,n().snippet)}),u(a,l)}});var M=S(q,4);Q(M,17,()=>_(k),V,(e,i)=>{var a=Z(),t=p(a);x(()=>{T(a,"href",`${s}${_(i).pageid}`),h(t,_(i).title)}),u(e,a)},e=>{var i=U("none");u(e,i)}),u(m,L),W()}export{vt as default};
