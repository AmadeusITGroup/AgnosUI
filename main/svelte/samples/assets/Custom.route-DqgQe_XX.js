import{p as U,W as S,X as v,k as b,b as w,R as B,u as E,c as d,e as C,T as M,a as N,t as _,n as L,h as m,f as W,j as X,U as g,r as f}from"./AppCommon-CRrVgjjK.js";import{S as z}from"./Select-0D8U6bOx.js";import"./actions-DMIFV9qL.js";import"./class-zI9kEawh.js";import"./Slot-Do_YzuMi.js";import"./snippet-CHfuuZJF.js";import"./config-D6r3EYnL.js";import"./config-OMIq8Q7I.js";import"./directive-CKEccryv-CZ-m_LIt.js";import"./floatingUI-vEzbPOSa.js";import"./promise-CY2U8bTP-B4kTzlPZ.js";import"./focustrack-XdHrgh6L.js";import"./navManager-C2D2dSuT.js";import"./extendWidget--tzkYf88.js";function D(r,a){let o;return(...u)=>{o&&clearTimeout(o),o=setTimeout(()=>{r(...u)},a)}}const G=r=>{let a;return(...o)=>(a==null||a.abort(),a=new AbortController,r(a.signal,...o))};var J=(r,a,o)=>a().actions.onRemoveBadgeClick(r,o().item),K=_('<a target="_blank" rel="noreferrer"> </a> <button type="button" class="btn-close ms-1 wiki-btn-close" aria-label="Close"></button>',1),O=_('<label><div class="fw-bold"> </div> <div class="text-wrap wiki-desc"> </div></label>'),Q=_('<a class="pe-2"> </a>'),V=_('<div class="custom-select my-auto mb-3"><!> <span class="fw-bold">Selection:</span> <!></div>');function mt(r,a){U(a,!0);const o="https://en.wikipedia.org/?curid=";let u=S(v([])),k=S(v([]));const j=e=>"page-"+e.pageid;function q(e){const i=document.createElement("div");return i.innerHTML=e,i.innerText}const F=D(G(async(e,i)=>{var n;const t=await(await fetch("https://en.wikipedia.org/w/api.php?action=query&list=search&prop=info&inprop=url&utf8=&format=json&origin=*&srlimit=5&srsearch="+i,{signal:e})).json();L(u,v(((n=t.query)==null?void 0:n.search.map(l=>({...l,snippet:q(l.snippet)})))??[]))}),200),A=new Intl.Collator("en").compare;function H(e){L(k,v((e||[]).sort((i,s)=>A(i.title,s.title))))}const I=e=>e.querySelectorAll("a,button,input");var y=V(),T=m(y);z(T,{get items(){return b(u)},itemIdFn:j,onFilterTextChange:F,onSelectedChange:H,navSelector:I,badgeClassName:"badge text-bg-light d-flex align-items-center",badgeLabel:(s,t)=>{let n=()=>t==null?void 0:t().itemContext,l=()=>t==null?void 0:t().widget;var c=K(),p=W(c),x=m(p),h=w(p,2);h.__click=[J,l,n],C(()=>{g(p,"href",`${o}${n().item.pageid}`),f(x,n().item.title)}),d(s,c)},itemLabel:(s,t)=>{let n=()=>t==null?void 0:t().itemContext.id,l=()=>t==null?void 0:t().itemContext.item;var c=O(),p=m(c),x=m(p),h=w(p,2),R=m(h);C(()=>{g(c,"for",""+n()),f(x,l().title),f(R,l().snippet)}),d(s,c)}});var P=w(T,4);B(P,17,()=>b(k),M,(e,i)=>{var s=Q(),t=m(s);C(()=>{g(s,"href",`${o}${b(i).pageid}`),f(t,b(i).title)}),d(e,s)},e=>{var i=E("none");d(e,i)}),d(r,y),N()}X(["click"]);export{mt as default};
