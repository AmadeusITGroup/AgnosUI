import{a0 as a,$ as M}from"./AppCommon-D-Irf_br.js";import{c as b,b as u,t as S,j as _}from"./writables-e0tyaQpe-5AqAML2m.js";import{w as ee,s as te}from"./stores-CNuHRGye.js";import{c as P}from"./baseTransitions-BhCr9LuG.js";import{d as oe}from"./promise-XSP94FjG-C5dnIRFm.js";import{b as L,m as D,e as W,t as re,n as c,o as B,r as ne,a as w,u as ie}from"./dom-Bcg9ORcA-CPWV9YZz.js";import{c as se}from"./widget-ccL6PuC2.js";const V=L((e,n)=>{let t,o;const i=()=>{o&&(o.parentNode?.replaceChild(e,o),o=null)},r=d=>{if(d!==t&&(d?.container!==t?.container||d?.insertBefore!==t?.insertBefore)){t=d;const p=t?.container??t?.insertBefore?.parentElement;if(p){const v=t?.insertBefore??null;(e.parentElement!==p||e.nextSibling!==v)&&(o||(o=e.parentNode?.insertBefore(e.ownerDocument.createComment("portal"),e)),p.insertBefore(e,v))}else i()}};return r(n),{update:r,destroy:()=>{i(),e.parentNode?.removeChild(e)}}}),ae="data-agnos-ignore-inert",ce=e=>{const n=new Map,t=o=>{const i=o.parentElement;i&&o!==document.body&&(Array.from(i.children).forEach(r=>{r!==o&&r.nodeName!=="SCRIPT"&&!r.hasAttribute(ae)&&(n.set(r,r.hasAttribute("inert")),r.toggleAttribute("inert",!0))}),t(i))};return t(e),()=>n.forEach((o,i)=>{i.toggleAttribute("inert",o)})};let F=c;const le=e=>{F(),F=e?ce(e):c},{directive:de,elements$:me}=re(),ue=a(()=>{const e=me();return e[e.length-1]},{equal:Object.is}),pe=a(()=>le(ue())),be=D(de,W(pe)),ve=()=>{const e=Math.abs(window.innerWidth-document.documentElement.clientWidth),n=document.body,t=n.style,{overflow:o,paddingRight:i}=t;if(e>0){const r=parseFloat(window.getComputedStyle(n).paddingRight);t.paddingRight=`${r+e}px`}return t.overflow="hidden",()=>{e>0&&(t.paddingRight=i),t.overflow=o}};let C=c;const fe=()=>{C(),C=ve()},$e=()=>{C(),C=c},ge=Symbol(),he=Symbol(),Ce={animated:!0,ariaCloseButtonLabel:"Close",backdrop:!0,backdropClass:"",backdropTransition:c,closeButton:!0,closeOnOutsideClick:!0,container:typeof window<"u"?document.body:null,className:"",modalTransition:c,onBeforeClose:c,onVisibleChange:c,onHidden:c,onShown:c,visible:!1},ye={animated:b,ariaCloseButtonLabel:S,backdrop:b,backdropClass:S,backdropTransition:u,closeButton:b,closeOnOutsideClick:b,container:_,className:S,modalTransition:u,onBeforeClose:u,onVisibleChange:u,onHidden:u,onShown:u,visible:b},x=ne(),ke=a(()=>x().length>0),Se=a(()=>{ke()?fe():$e()}),Be=a(()=>{Se()}),Re=se("modal",e=>{const[{animated$:n,backdrop$:t,backdropTransition$:o,closeOnOutsideClick$:i,container$:r,modalTransition$:d,onBeforeClose$:p,onVisibleChange$:v,onHidden$:T,onShown$:j,ariaCloseButtonLabel$:A,className$:N,backdropClass$:E,visible$:O,...q},f]=ee(Ce,e,ye),m=P({props:{transition:d,visible:O,animated:n,animatedOnInit:n,onVisibleChange:v,onHidden:T,onShown:j}}),y=m.stores.visible$,R=P({props:{transition:o,visible:O,animated:n,animatedOnInit:n}}),I=a(()=>m.stores.transitioning$()||t()&&R.stores.transitioning$()),$=a(()=>!I()&&!y()),z=a(()=>!t()||$());let g;const k=s=>{g=s;const l={get result(){return g},set result(h){g=h},cancel:!1};p()(l),!l.cancel&&f({visible:!1})},G=B(V,a(()=>({container:r()}))),J=B(V,a(()=>{const s=r(),l=s?m.stores.element$():void 0;return{container:s,insertBefore:l?.parentElement===s?l:void 0}})),K=M(void 0,()=>x.register(H)),Q=a(()=>{m.stores.elementPresent$()&&!$()&&K(),Be()}),U=w(()=>({attributes:{type:M("button"),"aria-label":A},events:{click:()=>k(he)}})),X=w(()=>({attributes:{class:E}})),Y=w(()=>({attributes:{class:N},events:{click:s=>{s.currentTarget===s.target&&i()&&k(ge)}}})),H={...te({backdropHidden$:z,container$:r,hidden$:$,transitioning$:I,visible$:y,modalElement$:m.stores.element$,ariaCloseButtonLabel$:A,className$:N,backdropClass$:E,...q}),directives:{modalPortalDirective:G,backdropPortalDirective:J,backdropDirective:D(R.directives.directive,X),modalDirective:D(m.directives.directive,ie(be),W(Q),Y),closeButtonDirective:U,dialogDirective:B(L((s,l)=>{const h=Z=>{Z?s.showModal():s.close()};return h(l),{update:h}}),y)},patch:f,api:{close:k,async open(){return f({visible:!0}),await oe($).promise,g},patch:f}};return H});export{ge as a,Re as c,he as m};
