import{S as L,i as H,s as P,O as T,j as h,c as A,f as k,n as u,g,m as E,p as _,t as M,a as N,h as b,d as O,R,k as v,q as U,u as w}from"./index-GPDqeCLy.js";import{S as y}from"./Select-T-OYY1b9.js";import"./index-SwkD9hHz.js";import"./config-ZosZ8i3J.js";import"./directive-vsQVVyar.js";import"./stores-_5ykBPx1.js";import"./baseTransitions-sOC8rQoL.js";import"./writables-RoseQvwe.js";import"./promise-meXp-AiK.js";import"./fade-efaHbWHo.js";import"./dom-2S7XI5EU.js";import"./rating-bHbbEuKc.js";import"./floatingUI-Ng6obTJ8.js";import"./focustrack--KskoXAp.js";function z(l,e){let n;return(...s)=>{n&&clearTimeout(n),n=setTimeout(()=>{l(...s)},e)}}const B=l=>{let e;return(...n)=>(e==null||e.abort(),e=new AbortController,l(e.signal,...n))};function F(l,e,n){const s=l.slice();return s[7]=e[n],s}function q(l){const e=l[10].item;l[7]=e}function D(l){let e,n=l[10].item.title+"",s,c,p,a,f,o;function r(){return l[5](l[11],l[10])}return{c(){e=h("a"),s=v(n),p=k(),a=h("button"),u(e,"href",c=`${C}${l[10].item.pageid}`),u(e,"target","_blank"),u(e,"rel","noreferrer"),u(a,"type","button"),u(a,"class","btn-close ms-1 wiki-btn-close"),u(a,"aria-label","Close")},m(t,i){g(t,e,i),_(e,s),g(t,p,i),g(t,a,i),f||(o=U(a,"click",r),f=!0)},p(t,i){l=t,i&1024&&n!==(n=l[10].item.title+"")&&w(s,n),i&1024&&c!==(c=`${C}${l[10].item.pageid}`)&&u(e,"href",c)},d(t){t&&(b(e),b(p),b(a)),f=!1,o()}}}function G(l){q(l);let e,n,s=l[7].title+"",c,p,a,f=l[7].snippet+"",o,r;return{c(){e=h("label"),n=h("div"),c=v(s),p=k(),a=h("div"),o=v(f),u(n,"class","fw-bold"),u(a,"class","text-wrap wiki-desc"),u(e,"for",r=""+l[10].id),u(e,"slot","item")},m(t,i){g(t,e,i),_(e,n),_(n,c),_(e,p),_(e,a),_(a,o)},p(t,i){q(t),i&1024&&s!==(s=t[7].title+"")&&w(c,s),i&1024&&f!==(f=t[7].snippet+"")&&w(o,f),i&1024&&r!==(r=""+t[10].id)&&u(e,"for",r)},d(t){t&&b(e)}}}function j(l){let e;return{c(){e=v("none")},m(n,s){g(n,e,s)},d(n){n&&b(e)}}}function I(l){let e,n=l[7].title+"",s,c;return{c(){e=h("a"),s=v(n),u(e,"href",c=`${C}${l[7].pageid}`),u(e,"class","pe-2")},m(p,a){g(p,e,a),_(e,s)},p(p,a){a&2&&n!==(n=p[7].title+"")&&w(s,n),a&2&&c!==(c=`${C}${p[7].pageid}`)&&u(e,"href",c)},d(p){p&&b(e)}}}function J(l){let e,n,s,c,p,a;n=new y({props:{items:l[0],itemIdFn:l[2],onFilterTextChange:l[3],onSelectedChange:l[4],badgeClassName:"badge text-bg-light d-flex align-items-center",$$slots:{item:[G,({itemContext:t})=>({10:t}),({itemContext:t})=>t?1024:0],badgeLabel:[D,({itemContext:t,widget:i})=>({10:t,11:i}),({itemContext:t,widget:i})=>(t?1024:0)|(i?2048:0)]},$$scope:{ctx:l}}});let f=T(l[1]),o=[];for(let t=0;t<f.length;t+=1)o[t]=I(F(l,f,t));let r=null;return f.length||(r=j()),{c(){e=h("div"),A(n.$$.fragment),s=k(),c=h("span"),c.textContent="Selection:",p=k();for(let t=0;t<o.length;t+=1)o[t].c();r&&r.c(),u(c,"class","fw-bold"),u(e,"class","custom-select my-auto mb-3")},m(t,i){g(t,e,i),E(n,e,null),_(e,s),_(e,c),_(e,p);for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(e,null);r&&r.m(e,null),a=!0},p(t,[i]){const d={};if(i&1&&(d.items=t[0]),i&7168&&(d.$$scope={dirty:i,ctx:t}),n.$set(d),i&2){f=T(t[1]);let m;for(m=0;m<f.length;m+=1){const $=F(t,f,m);o[m]?o[m].p($,i):(o[m]=I($),o[m].c(),o[m].m(e,null))}for(;m<o.length;m+=1)o[m].d(1);o.length=f.length,f.length?r&&(r.d(1),r=null):r||(r=j(),r.c(),r.m(e,null))}},i(t){a||(M(n.$$.fragment,t),a=!0)},o(t){N(n.$$.fragment,t),a=!1},d(t){t&&b(e),O(n),R(o,t),r&&r.d()}}}const C="https://en.wikipedia.org/?curid=";function K(l){const e=document.createElement("div");return e.innerHTML=l,e.innerText}function Q(l,e,n){let s=[],c=[];const p=t=>"page-"+t.pageid,a=z(B(async(t,i)=>{var $;const m=await(await fetch("https://en.wikipedia.org/w/api.php?action=query&list=search&prop=info&inprop=url&utf8=&format=json&origin=*&srlimit=5&srsearch="+i,{signal:t})).json();n(0,s=(($=m.query)==null?void 0:$.search.map(S=>({...S,snippet:K(S.snippet)})))??[])}),200),f=new Intl.Collator("en").compare;function o(t){n(1,c=(t.detail||[]).sort((i,d)=>f(i.title,d.title)))}return[s,c,p,a,o,(t,i)=>t.api.unselect(i.item)]}class re extends L{constructor(e){super(),H(this,e,Q,J,P,{})}}export{re as default};
