import{p as N,c as F,T as j,f as h,g as _,h as m,s as g,Q,q as z,d as v,t as T,S as G,a as J,k as A,b as K,e as O,U as y,n as x}from"./AppCommon-Cvakw0h3.js";import{a as D}from"./actions-B8unGIWj.js";import{S as R}from"./Select-7Sj4SJBB.js";import{c as V}from"./dom-gfxqXJpK-QOAL7Lxn.js";import"./Slot-DVn8TE_v.js";import"./snippet-CYPlsa8R.js";import"./config-DKNxxFdc.js";import"./config-DFQAniv2.js";import"./stores-DS4KV-3N.js";import"./index-client-B_t4iYJG.js";import"./floatingUI-B4WQXNNe.js";import"./promise-XSP94FjG-CQrBq1zk.js";import"./focustrack-CNWTDgFQ.js";import"./navManager-CrHSKU2S.js";import"./widget-Dy2v7UWc.js";import"./extendWidget-CswqKoqc.js";function W(d,o){let r;return(...f)=>{r&&clearTimeout(r),r=setTimeout(()=>{d(...f)},o)}}const X=d=>{let o;return(...r)=>(o==null||o.abort(),o=new AbortController,d(o.signal,...r))};var Y=h('<a target="_blank" rel="noreferrer"> </a> <button></button>',1),Z=h('<label><div class="fw-bold"> </div> <div class="text-wrap wiki-desc"> </div></label>'),$=h('<a class="pe-2"> </a>'),tt=h('<div class="custom-select my-auto mb-3"><!> <span class="fw-bold">Selection:</span> <!></div>');function _t(d,o){N(o,!0);const r="https://en.wikipedia.org/?curid=";let f=F(j([])),L=F(j([]));const H=e=>"page-"+e.pageid;function I(e){const i=document.createElement("div");return i.innerHTML=e,i.innerText}const P=W(X(async(e,i)=>{var s;const t=await(await fetch("https://en.wikipedia.org/w/api.php?action=query&list=search&prop=info&inprop=url&utf8=&format=json&origin=*&srlimit=5&srsearch="+i,{signal:e})).json();A(f,((s=t.query)==null?void 0:s.search.map(n=>({...n,snippet:I(n.snippet)})))??[],!0)}),200),U=new Intl.Collator("en").compare;function B(e){A(L,(e||[]).sort((i,a)=>U(i.title,a.title)),!0)}const E=e=>e.querySelectorAll("a,button,input");var S=tt(),k=m(S);R(k,{get items(){return _(f)},itemIdFn:H,get onFilterTextChange(){return P},onSelectedChange:B,navSelector:E,badgeClassName:"badge text-bg-light d-flex align-items-center",badgeLabel:(a,t)=>{let s=()=>t==null?void 0:t().itemContext,n=()=>t==null?void 0:t().directives;var c=Y(),p=K(c),w=m(p),u=g(p,2);O(u,l=>({type:"button","aria-label":"Close",...l}),[()=>({})]),D(u,(l,C)=>{var b;return(b=V)==null?void 0:b(l,C)},()=>"btn-close ms-1 wiki-btn-close"),D(u,(l,C)=>{var b,q;return(q=(b=n()).badgeCloseButtonDirective)==null?void 0:q.call(b,l,C)},s),T(()=>{y(p,"href",`${r}${s().item.pageid}`),x(w,s().item.title)}),v(a,c)},itemLabel:(a,t)=>{let s=()=>t==null?void 0:t().itemContext.id,n=()=>t==null?void 0:t().itemContext.item;var c=Z(),p=m(c),w=m(p),u=g(p,2),l=m(u);T(()=>{y(c,"for",""+s()),x(w,n().title),x(l,n().snippet)}),v(a,c)},$$slots:{badgeLabel:!0,itemLabel:!0}});var M=g(k,4);Q(M,17,()=>_(L),G,(e,i)=>{var a=$(),t=m(a);T(()=>{y(a,"href",`${r}${_(i).pageid}`),x(t,_(i).title)}),v(e,a)},e=>{var i=z("none");v(e,i)}),v(d,S),J()}export{_t as default};
