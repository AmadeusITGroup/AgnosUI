import{a7 as k,ab as Ze,aa as Ne,a9 as ye,S as xe,i as et,s as tt,Q as me,j as P,k as U,f as De,q as M,r as z,g as X,v as le,C as Ae,w as I,D as se,X as We,Y as Je,E as ae,t as w,a as $,y as q,z as Ie,h as Y,B as Fe,N as lt,b as T,M as Te,c as W,m as J,d as Q,u as Pe,P as pe,p as Qe,F as de,I as G,J as V,K as Z,L as y}from"./AppCommon-lL7JxAjg.js";import{c as st,S as Xe}from"./Slot-B_64Na4K.js";import{c as at,o as nt,a as ot,b as it}from"./floatingUI-CHo0ejOp.js";import{c as rt}from"./focustrack-BQY30G_Y.js";import{c as ct}from"./navManager-hNzASQ9O.js";import{w as ut,k as ft,B as gt,z as _t,s as mt,e as pt,E as dt,j as ke,g as _e,c as be}from"./directive-COIalEeb-CVLVXY5H.js";import{e as bt}from"./extendWidget-BWoQuKV1.js";const ht={id:void 0,ariaLabel:"Select",open:!1,disabled:!1,items:[],filterText:"",loading:!1,selected:[],navSelector:l=>l.querySelectorAll(".au-select-badge,input"),itemIdFn:l=>""+l,onOpenChange:ke,onFilterTextChange:ke,onSelectedChange:ke,allowedPlacements:["bottom-start","top-start","bottom-end","top-end"],className:"",menuClassName:"",menuItemClassName:"",badgeClassName:""};function vt(l){const[{id$:e,open$:a,filterText$:t,items$:s,itemIdFn$:o,onOpenChange$:p,onFilterTextChange$:c,onSelectedChange$:_,allowedPlacements$:f,navSelector$:r,className$:n,badgeClassName$:i,ariaLabel$:L,menuClassName$:K,...E},v]=ut(ht,l),{selected$:F}=E,D=k(()=>e()??ft()),m=gt(t,c),{hasFocus$:b,directive:S}=rt(),N=_t(p,[a,b],([u,g])=>u&&g),H=k(()=>{const u=new Map,g=o();for(const h of F()){const A=g(h);u.set(A,{item:h,id:g(h),selected:!0})}return u}),ne=k(()=>[...H().values()]),B=function(){const u=Ze(0);return Ne(u,g=>{const{length:h}=R();g!=null&&(h?g<0?g=h-1:g>=h&&(g=0):g=void 0),u.set(g)})}(),x=k(()=>{const u=new Map;if(N()){const g=H(),h=o();for(const A of s()){const O=h(A);u.set(O,{item:A,id:O,selected:g.has(O)})}}return u}),R=k(()=>N()?[...x().values()]:[]),ee=k(()=>{const u=R(),g=B();return u.length&&g!=null?u[g]:void 0}),{directives:{floatingDirective:oe,referenceDirective:ie},stores:{placement$:te}}=at({props:{computePositionOptions:Ne(k(()=>({middleware:[nt(5),ot({allowedPlacements:f()}),it()]})))}}),{directive:re,refreshElements:he,focusFirst:ve,focusLast:Le,focusLeft:ce,focusRight:ue}=ct(),we=k(()=>({keys:{Home:ve,End:Le,ArrowLeft:ce,ArrowRight:ue},selector:r()})),fe=(u,g)=>{const h=u.target;he(),C.api.unselect(g),h instanceof HTMLElement&&setTimeout(()=>{ce({event:u,referenceElement:h})||ue({event:u,referenceElement:h})}),u.preventDefault()},$e=_e(()=>({attributes:{role:"combobox","aria-haspopup":"listbox","aria-expanded":k(()=>`${N()}`),"aria-controls":k(()=>`${D()}-menu`)}})),Ce=_e(u=>({attributes:{tabindex:-1,class:i},classNames:{"au-select-badge":!0},events:{keydown:g=>C.actions.onBadgeKeydown(g,u().item)}})),d=_e(()=>({attributes:{role:"listbox",id:k(()=>`${D()}-menu`),"data-popper-placement":te,class:K},events:{mousedown:u=>u.preventDefault()}})),Ye=_e(u=>({attributes:{role:"option","aria-selected":k(()=>`${u().selected}`),style:"cursor: pointer"},classNames:{"au-select-item":!0,selected:k(()=>u().selected)},events:{click:()=>C.api.toggleItem(u().item)}})),C={...mt({id$:D,visibleItems$:R,highlighted$:ee,open$:N,selectedContexts$:ne,filterText$:m,placement$:te,className$:n,badgeClassName$:i,ariaLabel$:L,menuClassName$:K,...E}),patch:v,api:{clear(){F.set([])},select(u){C.api.toggleItem(u,!0)},unselect(u){C.api.toggleItem(u,!1)},toggleItem(u,g){const h=o(),A=h(u),ge=H().has(A);g==null&&(g=!ge),!(g&&!x().has(A)||!g&&!ge)&&F.update(j=>{var Se;if(j=[...j],g&&!ge)j.push(u);else if(!g&&ge){const Ge=j.findIndex(Ve=>h(Ve)===A);j.splice(Ge,1)}return(Se=_())==null||Se(j),j})},clearText(){},highlight(u){const g=R().findIndex(h=>h.item===u);B.set(g===-1?void 0:g)},highlightFirst(){B.set(0)},highlightPrevious(){B.update(u=>u!=null?u-1:-1)},highlightNext(){B.update(u=>u!=null?u+1:1/0)},highlightLast(){B.set(-1)},open:()=>C.api.toggle(!0),close:()=>C.api.toggle(!1),toggle(u){N.update(g=>u??!g)}},directives:{hasFocusDirective:S,floatingDirective:oe,referenceDirective:ie,inputContainerDirective:pt(dt(re,we),$e),badgeAttributesDirective:Ce,menuAttributesDirective:d,itemAttributesDirective:Ye},actions:{onInput({target:u}){const g=u.value;ye(()=>{N.set(g!=null&&g!==""),m.set(g)})},onRemoveBadgeClick(u,g){fe(u,g)},onInputKeydown(u){const{ctrlKey:g,key:h}=u;let A=!0;switch(h){case"ArrowDown":{N()?g?C.api.highlightLast():C.api.highlightNext():(C.api.open(),C.api.highlightFirst());break}case"ArrowUp":g?C.api.highlightFirst():C.api.highlightPrevious();break;case"Enter":{const O=ee();O&&C.api.toggleItem(O.item);break}case"Escape":N.set(!1);break;default:A=!1}A&&u.preventDefault()},onBadgeKeydown(u,g){let h=!1;switch(u.key){case"Backspace":case"Delete":{fe(u,g),h=!0;break}}h&&u.preventDefault()}}};return C}const Lt={badgeLabel:({itemContext:l})=>l.item,itemLabel:({itemContext:l})=>l.item},wt=bt(vt,Lt,{}),$t=wt;function Me(l,e,a){const t=l.slice();t[40]=e[a];const s=t[40]===t[9];return t[41]=s,t}const Ct=l=>({itemContext:l[1]&512,state:l[1]&32768,widget:l[1]&1}),Ee=l=>({itemContext:l[40],state:l[46],widget:l[31]}),kt=l=>({itemContext:l[1]&512,state:l[1]&32768,widget:l[1]&1}),Be=l=>({itemContext:l[40],state:l[46],widget:l[31]}),Dt=l=>l[1]&8192,It=l=>({}),Ke=l=>({...l[44]});function Oe(l,e,a){const t=l.slice();return t[40]=e[a],t}const Ft=l=>({itemContext:l[1]&512,state:l[1]&32768,widget:l[1]&1}),ze=l=>({itemContext:l[40],state:l[46],widget:l[31]}),St=l=>({itemContext:l[1]&512,state:l[1]&32768,widget:l[1]&1}),Re=l=>({itemContext:l[40],state:l[46],widget:l[31]}),Nt=l=>l[1]&8192,At=l=>({}),je=l=>({...l[44]});function Tt(l){let e;const a=l[36].badgeLabel,t=G(a,l,l[37],ze);return{c(){t&&t.c()},m(s,o){t&&t.m(s,o),e=!0},p(s,o){t&&t.p&&(!e||o[1]&33345)&&V(t,a,s,s[37],e?y(a,s[37],o,Ft):Z(s[37]),ze)},i(s){e||(w(t,s),e=!0)},o(s){$(t,s),e=!1},d(s){t&&t.d(s)}}}function Pt(l){let e;const a=l[36].itemLabel,t=G(a,l,l[37],Re);return{c(){t&&t.c()},m(s,o){t&&t.m(s,o),e=!0},p(s,o){t&&t.p&&(!e||o[1]&33345)&&V(t,a,s,s[37],e?y(a,s[37],o,St):Z(s[37]),Re)},i(s){e||(w(t,s),e=!0)},o(s){$(t,s),e=!1},d(s){t&&t.d(s)}}}function Mt(l){let e,a,t;const s=[l[44]];var o=l[45];function p(c,_){let f={$$slots:{itemLabel:[Pt,({itemContext:r,state:n,widget:i})=>({40:r,46:n,31:i}),({itemContext:r,state:n,widget:i})=>[0,(r?512:0)|(n?32768:0)|(i?1:0)]],badgeLabel:[Tt,({itemContext:r,state:n,widget:i})=>({40:r,46:n,31:i}),({itemContext:r,state:n,widget:i})=>[0,(r?512:0)|(n?32768:0)|(i?1:0)]]},$$scope:{ctx:c}};for(let r=0;r<s.length;r+=1)f=P(f,s[r]);return _!==void 0&&_[1]&8192&&(f=P(f,q(s,[de(c[44])]))),{props:f}}return o&&(e=pe(o,p(l))),{c(){e&&W(e.$$.fragment),a=Qe()},m(c,_){e&&J(e,c,_),X(c,a,_),t=!0},p(c,_){if(_[1]&16384&&o!==(o=c[45])){if(e){se();const f=e;$(f.$$.fragment,1,0,()=>{Q(f,1)}),ae()}o?(e=pe(o,p(c,_)),W(e.$$.fragment),w(e.$$.fragment,1),J(e,a.parentNode,a)):e=null}else if(o){const f=_[1]&8192?q(s,[de(c[44])]):{};_[1]&33345&&(f.$$scope={dirty:_,ctx:c}),e.$set(f)}},i(c){t||(e&&w(e.$$.fragment,c),t=!0)},o(c){e&&$(e.$$.fragment,c),t=!1},d(c){c&&Y(a),e&&Q(e,c)}}}function Et(l){let e;const a=l[36].badgeLabel,t=G(a,l,l[37],je);return{c(){t&&t.c()},m(s,o){t&&t.m(s,o),e=!0},p(s,o){t&&t.p&&(!e||o[1]&8256)&&V(t,a,s,s[37],Nt(o)||!e?Z(s[37]):y(a,s[37],o,At),je)},i(s){e||(w(t,s),e=!0)},o(s){$(t,s),e=!1},d(s){t&&t.d(s)}}}function qe(l,e){let a,t,s,o,p,c;t=new Xe({props:{slotContent:e[2],props:{state:e[3],widget:e[31],itemContext:e[40]},$$slots:{slot:[Et,({props:r})=>({44:r}),({props:r})=>[0,r?8192:0]],default:[Mt,({component:r,props:n})=>({45:r,44:n}),({component:r,props:n})=>[0,(r?16384:0)|(n?8192:0)]]},$$scope:{ctx:e}}});let _=[{}],f={};for(let r=0;r<_.length;r+=1)f=P(f,_[r]);return{key:l,first:null,c(){a=U("div"),W(t.$$.fragment),z(a,f),this.first=a},m(r,n){X(r,a,n),J(t,a,null),o=!0,p||(c=I(s=e[28].call(null,a,e[40])),p=!0)},p(r,n){e=r;const i={};n[0]&4&&(i.slotContent=e[2]),n[0]&10&&(i.props={state:e[3],widget:e[31],itemContext:e[40]}),n[1]&24640&&(i.$$scope={dirty:n,ctx:e}),t.$set(i),z(a,f=q(_,[n[0]&2&&{}])),s&&Ie(s.update)&&n[0]&2&&s.update.call(null,e[40])},i(r){o||(w(t.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),o=!1},d(r){r&&Y(a),Q(t),p=!1,c()}}}function He(l){let e,a=[],t=new Map,s,o,p,c=me(l[8]);const _=n=>n[40].id;for(let n=0;n<c.length;n+=1){let i=Me(l,c,n),L=_(i);t.set(L,a[n]=Ue(L,i))}let f=[{}],r={};for(let n=0;n<f.length;n+=1)r=P(r,f[n]);return{c(){e=U("ul");for(let n=0;n<a.length;n+=1)a[n].c();z(e,r)},m(n,i){X(n,e,i);for(let L=0;L<a.length;L+=1)a[L]&&a[L].m(e,null);s=!0,o||(p=[I(l[25].call(null,e)),I(l[24].call(null,e)),I(l[29].call(null,e)),I(be.call(null,e,"dropdown-menu show"))],o=!0)},p(n,i){i[0]&1073743624|i[1]&57921&&(c=me(n[8]),se(),a=We(a,i,_,1,n,c,t,e,Je,Ue,null,Me),ae())},i(n){if(!s){for(let i=0;i<c.length;i+=1)w(a[i]);s=!0}},o(n){for(let i=0;i<a.length;i+=1)$(a[i]);s=!1},d(n){n&&Y(e);for(let i=0;i<a.length;i+=1)a[i].d();o=!1,Fe(p)}}}function Bt(l){let e;const a=l[36].badgeLabel,t=G(a,l,l[37],Ee);return{c(){t&&t.c()},m(s,o){t&&t.m(s,o),e=!0},p(s,o){t&&t.p&&(!e||o[1]&33345)&&V(t,a,s,s[37],e?y(a,s[37],o,Ct):Z(s[37]),Ee)},i(s){e||(w(t,s),e=!0)},o(s){$(t,s),e=!1},d(s){t&&t.d(s)}}}function Kt(l){let e;const a=l[36].itemLabel,t=G(a,l,l[37],Be);return{c(){t&&t.c()},m(s,o){t&&t.m(s,o),e=!0},p(s,o){t&&t.p&&(!e||o[1]&33345)&&V(t,a,s,s[37],e?y(a,s[37],o,kt):Z(s[37]),Be)},i(s){e||(w(t,s),e=!0)},o(s){$(t,s),e=!1},d(s){t&&t.d(s)}}}function Ot(l){let e,a,t;const s=[l[44]];var o=l[45];function p(c,_){let f={$$slots:{itemLabel:[Kt,({itemContext:r,state:n,widget:i})=>({40:r,46:n,31:i}),({itemContext:r,state:n,widget:i})=>[0,(r?512:0)|(n?32768:0)|(i?1:0)]],badgeLabel:[Bt,({itemContext:r,state:n,widget:i})=>({40:r,46:n,31:i}),({itemContext:r,state:n,widget:i})=>[0,(r?512:0)|(n?32768:0)|(i?1:0)]]},$$scope:{ctx:c}};for(let r=0;r<s.length;r+=1)f=P(f,s[r]);return _!==void 0&&_[1]&8192&&(f=P(f,q(s,[de(c[44])]))),{props:f}}return o&&(e=pe(o,p(l))),{c(){e&&W(e.$$.fragment),a=Qe()},m(c,_){e&&J(e,c,_),X(c,a,_),t=!0},p(c,_){if(_[1]&16384&&o!==(o=c[45])){if(e){se();const f=e;$(f.$$.fragment,1,0,()=>{Q(f,1)}),ae()}o?(e=pe(o,p(c,_)),W(e.$$.fragment),w(e.$$.fragment,1),J(e,a.parentNode,a)):e=null}else if(o){const f=_[1]&8192?q(s,[de(c[44])]):{};_[1]&33345&&(f.$$scope={dirty:_,ctx:c}),e.$set(f)}},i(c){t||(e&&w(e.$$.fragment,c),t=!0)},o(c){e&&$(e.$$.fragment,c),t=!1},d(c){c&&Y(a),e&&Q(e,c)}}}function zt(l){let e;const a=l[36].itemLabel,t=G(a,l,l[37],Ke);return{c(){t&&t.c()},m(s,o){t&&t.m(s,o),e=!0},p(s,o){t&&t.p&&(!e||o[1]&8256)&&V(t,a,s,s[37],Dt(o)||!e?Z(s[37]):y(a,s[37],o,It),Ke)},i(s){e||(w(t,s),e=!0)},o(s){$(t,s),e=!1},d(s){t&&t.d(s)}}}function Ue(l,e){let a,t,s,o,p,c,_;t=new Xe({props:{slotContent:e[10],props:{state:e[3],widget:e[31],itemContext:e[40]},$$slots:{slot:[zt,({props:n})=>({44:n}),({props:n})=>[0,n?8192:0]],default:[Ot,({component:n,props:i})=>({45:n,44:i}),({component:n,props:i})=>[0,(n?16384:0)|(i?8192:0)]]},$$scope:{ctx:e}}});let f=[{}],r={};for(let n=0;n<f.length;n+=1)r=P(r,f[n]);return{key:l,first:null,c(){a=U("li"),W(t.$$.fragment),s=De(),z(a,r),Pe(a,"text-bg-primary",e[41]),this.first=a},m(n,i){X(n,a,i),J(t,a,null),le(a,s),p=!0,c||(_=[I(be.call(null,a,"dropdown-item position-relative")),I(o=e[30].call(null,a,e[40]))],c=!0)},p(n,i){e=n;const L={};i[0]&1024&&(L.slotContent=e[10]),i[0]&264&&(L.props={state:e[3],widget:e[31],itemContext:e[40]}),i[1]&24640&&(L.$$scope={dirty:i,ctx:e}),t.$set(L),z(a,r=q(f,[i[0]&256&&{}])),o&&Ie(o.update)&&i[0]&256&&o.update.call(null,e[40]),Pe(a,"text-bg-primary",e[41])},i(n){p||(w(t.$$.fragment,n),p=!0)},o(n){$(t.$$.fragment,n),p=!1},d(n){n&&Y(a),Q(t),c=!1,Fe(_)}}}function Rt(l){let e,a,t=[],s=new Map,o,p,c,_,f,r,n,i=me(l[1]);const L=m=>m[40].id;for(let m=0;m<i.length;m+=1){let b=Oe(l,i,m),S=L(b);s.set(S,t[m]=qe(S,b))}let K=[{}],E={};for(let m=0;m<K.length;m+=1)E=P(E,K[m]);let v=l[7]&&l[8].length>0&&He(l),F=[{}],D={};for(let m=0;m<F.length;m+=1)D=P(D,F[m]);return{c(){e=U("div"),a=U("div");for(let m=0;m<t.length;m+=1)t[m].c();o=De(),p=U("input"),c=De(),v&&v.c(),M(p,"id",l[4]),M(p,"aria-label",l[5]),M(p,"type","text"),M(p,"class","au-select-input flex-grow-1 border-0"),p.value=l[6],M(p,"aria-autocomplete","list"),M(p,"autocorrect","off"),M(p,"autocapitalize","none"),M(p,"autocomplete","off"),z(a,E),z(e,D)},m(m,b){X(m,e,b),le(e,a);for(let S=0;S<t.length;S+=1)t[S]&&t[S].m(a,null);le(a,o),le(a,p),le(e,c),v&&v.m(e,null),f=!0,r||(n=[Ae(p,"input",l[22]),Ae(p,"keydown",l[23]),I(l[25].call(null,a)),I(l[27].call(null,a)),I(be.call(null,a,"d-flex align-items-center flex-wrap gap-1")),I(l[26].call(null,e)),I(_=be.call(null,e,"au-select dropdown border border-1 p-1 mb-3 d-block "+l[0]))],r=!0)},p(m,b){b[0]&268435470|b[1]&57921&&(i=me(m[1]),se(),t=We(t,b,L,1,m,i,s,a,Je,qe,o,Oe),ae()),(!f||b[0]&16)&&M(p,"id",m[4]),(!f||b[0]&32)&&M(p,"aria-label",m[5]),(!f||b[0]&64&&p.value!==m[6])&&(p.value=m[6]),m[7]&&m[8].length>0?v?(v.p(m,b),b[0]&384&&w(v,1)):(v=He(m),v.c(),w(v,1),v.m(e,null)):v&&(se(),$(v,1,1,()=>{v=null}),ae()),z(e,D=q(F,[b[0]&1&&{}])),_&&Ie(_.update)&&b[0]&1&&_.update.call(null,"au-select dropdown border border-1 p-1 mb-3 d-block "+m[0])},i(m){if(!f){for(let b=0;b<i.length;b+=1)w(t[b]);w(v),f=!0}},o(m){for(let b=0;b<t.length;b+=1)$(t[b]);$(v),f=!1},d(m){m&&Y(e);for(let b=0;b<t.length;b+=1)t[b].d();v&&v.d(),r=!1,Fe(n)}}}function jt(l,e,a){let t,s,o,p,c,_,f,r,n,i,L,{$$slots:K={},$$scope:E}=e;const v=lt(K);let{open:F=!1}=e,{filterText:D=void 0}=e,{selected:m=void 0}=e;const b=st({factory:$t,widgetName:"select",$$slots:v,$$props:e,events:{onOpenChange(d){a(32,F=d)},onSelectedChange:d=>{a(34,m=d)},onFilterTextChange:d=>{a(33,D=d)}}}),S=b.api,{stores:{id$:N,ariaLabel$:H,highlighted$:ne,open$:B,selectedContexts$:x,badgeLabel$:R,itemLabel$:ee,visibleItems$:oe,className$:ie,filterText$:te},state$:re,actions:{onInput:he,onInputKeydown:ve},directives:{floatingDirective:Le,hasFocusDirective:ce,referenceDirective:ue,inputContainerDirective:we,badgeAttributesDirective:fe,menuAttributesDirective:$e,itemAttributesDirective:Ce}}=b;return T(l,N,d=>a(4,c=d)),T(l,H,d=>a(5,_=d)),T(l,ne,d=>a(9,i=d)),T(l,B,d=>a(7,r=d)),T(l,x,d=>a(1,s=d)),T(l,R,d=>a(2,o=d)),T(l,ee,d=>a(10,L=d)),T(l,oe,d=>a(8,n=d)),T(l,ie,d=>a(0,t=d)),T(l,te,d=>a(6,f=d)),T(l,re,d=>a(3,p=d)),l.$$set=d=>{a(38,e=P(P({},e),Te(d))),"open"in d&&a(32,F=d.open),"filterText"in d&&a(33,D=d.filterText),"selected"in d&&a(34,m=d.selected),"$$scope"in d&&a(37,E=d.$$scope)},l.$$.update=()=>{b.patchChangedProps(e)},e=Te(e),[t,s,o,p,c,_,f,r,n,i,L,N,H,ne,B,x,R,ee,oe,ie,te,re,he,ve,Le,ce,ue,we,fe,$e,Ce,b,F,D,m,S,K,E]}class Yt extends xe{constructor(e){super(),et(this,e,jt,Rt,tt,{open:32,filterText:33,selected:34,api:35},null,[-1,-1])}get api(){return this.$$.ctx[35]}}export{Yt as S};
