import{j as M,k as U,l as z,v as B}from"./chunk-PSTR5NSM.js";import"./chunk-4CHY45IH.js";import"./chunk-RR66CJ7E.js";import"./chunk-Z7SX3R6A.js";import{$a as _,Fb as c,Gb as d,Ha as C,Mb as P,Oa as s,_a as g,a as f,b as h,ba as S,bb as T,g as b,ga as v,ha as w,ib as I,jb as k,kb as y,lb as F,mb as l,nb as r,qb as E,ub as x,vb as u}from"./chunk-CDYQJW4G.js";function D(e,t){let n;return(...i)=>{n&&clearTimeout(n),n=setTimeout(()=>{e(...i)},t)}}var O=e=>{let t;return(...n)=>(t?.abort(),t=new AbortController,e(t.signal,...n))};function A(e,t){if(e&1){let n=E();l(0,"a",5),c(1),r(),l(2,"button",6),x("click",function(){let o=v(n),a=o.itemContext,p=o.widget;return w(p.api.unselect(a.item))}),r()}if(e&2){let n=t.itemContext,i=u();_("href",i.basePageUrl+n.item.pageid,C),s(),d(n.item.title)}}function L(e,t){if(e&1&&(l(0,"div",4),c(1),r(),l(2,"div",7),c(3),r()),e&2){let n=t.itemContext;s(),d(n.item.title),s(2),d(n.item.snippet)}}function V(e,t){if(e&1&&(l(0,"a",8),c(1),r()),e&2){let n=t.$implicit,i=u(2);_("href",i.basePageUrl+n.pageid,C),s(),d(n.title)}}function j(e,t){if(e&1&&y(0,V,2,2,"a",9,k),e&2){let n=u();F(n.selected)}}function q(e,t){e&1&&c(0," none ")}var H=new Intl.Collator("en").compare;function N(e){let t=document.createElement("div");return t.innerHTML=e,t.innerText}var R=(()=>{let t=class t{constructor(){this.basePageUrl="https://en.wikipedia.org/?curid=",this.items=[],this.selected=[],this.onFilterTextChange=D(O((i,o)=>b(this,null,function*(){let p=yield(yield fetch("https://en.wikipedia.org/w/api.php?action=query&list=search&prop=info&inprop=url&utf8=&format=json&origin=*&srlimit=5&srsearch="+o,{signal:i})).json();this.items=p.query?.search.map(m=>h(f({},m),{snippet:N(m.snippet)}))??[]})),200)}itemIdFn(i){return"page-"+i.pageid}onSelectedChange(i){this.selected=(i||[]).sort((o,a)=>H(o.title,a.title))}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=S({type:t,selectors:[["ng-component"]],standalone:!0,features:[P],decls:8,vars:3,consts:[[1,"custom-select","my-auto","mb-3"],["auSelect","","auBadgeClassName","badge text-bg-light d-flex align-items-center",3,"auItems","auItemIdFn","auFilterTextChange","auSelectedChange"],["auSelectBadgeLabel",""],["auSelectItem",""],[1,"fw-bold"],["target","_blank","rel","noreferrer"],["type","button","aria-label","Close",1,"btn-close","ms-1","wiki-btn-close",3,"click"],[1,"text-wrap","wiki-desc"],[1,"pe-2"],["class","pe-2"]],template:function(o,a){o&1&&(l(0,"div",0)(1,"div",1),x("auFilterTextChange",function(m){return a.onFilterTextChange(m)})("auSelectedChange",function(m){return a.onSelectedChange(m)}),g(2,A,3,2,"ng-template",2)(3,L,4,2,"ng-template",3),r(),l(4,"span",4),c(5,"Selection: "),r(),g(6,j,2,0)(7,q,1,0),r()),o&2&&(s(),T("auItems",a.items)("auItemIdFn",a.itemIdFn),s(5),I(6,a.selected.length?6:7))},dependencies:[B,z,M,U],styles:[".custom-select[_ngcontent-%COMP%]{max-width:500px;height:400px}.au-select[_ngcontent-%COMP%]   .wiki-desc[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;-moz-box-orient:vertical;display:-webkit-box;-webkit-line-clamp:2}.wiki-btn-close[_ngcontent-%COMP%]{font-size:10px}"]});let e=t;return e})();export{R as default};
