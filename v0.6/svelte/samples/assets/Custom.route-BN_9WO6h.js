import{p as Q,k as F,R as f,g as u,s as y,P as R,r as U,b,d as L,Q as z,a as G,t as x,j as P,e as c,f as J,S,n as _,l as K,q as O}from"./AppCommon-DoiIXO3L.js";import{a as A}from"./actions-EKLCo1lu.js";import{S as V}from"./Select-QcdxXQOQ.js";import{c as W}from"./directive-CKEccryv-BlplZHDT.js";import"./class-ZBGFEhur.js";import"./Slot-BENBxHjN.js";import"./snippet-Dx_Z7-U5.js";import"./config-1jBwtix_.js";import"./config-Db9Kan1A.js";import"./index-client--zrPD8p7.js";import"./floatingUI-CmG8PpJf.js";import"./promise-CY2U8bTP-UpBXntTx.js";import"./focustrack-Zg4hf--t.js";import"./navManager-CZ-rOy57.js";import"./extendWidget-D4vUmRSb.js";function X(m,s){let o;return(...v)=>{o&&clearTimeout(o),o=setTimeout(()=>{m(...v)},s)}}const Y=m=>{let s;return(...o)=>(s==null||s.abort(),s=new AbortController,m(s.signal,...o))};var Z=x('<a target="_blank" rel="noreferrer"> </a> <button></button>',1),$=x('<label><div class="fw-bold"> </div> <div class="text-wrap wiki-desc"> </div></label>'),tt=x('<a class="pe-2"> </a>'),et=x('<div class="custom-select my-auto mb-3"><!> <span class="fw-bold">Selection:</span> <!></div>');function _t(m,s){Q(s,!0);const o="https://en.wikipedia.org/?curid=";let v=F(f([])),k=F(f([]));const D=e=>"page-"+e.pageid;function H(e){const i=document.createElement("div");return i.innerHTML=e,i.innerText}const I=X(Y(async(e,i)=>{var r;const t=await(await fetch("https://en.wikipedia.org/w/api.php?action=query&list=search&prop=info&inprop=url&utf8=&format=json&origin=*&srlimit=5&srsearch="+i,{signal:e})).json();P(v,f(((r=t.query)==null?void 0:r.search.map(n=>({...n,snippet:H(n.snippet)})))??[]))}),200),B=new Intl.Collator("en").compare;function E(e){P(k,f((e||[]).sort((i,a)=>B(i.title,a.title))))}const M=e=>e.querySelectorAll("a,button,input");var T=et(),q=c(T);V(q,{get items(){return u(v)},itemIdFn:D,onFilterTextChange:I,onSelectedChange:E,navSelector:M,badgeClassName:"badge text-bg-light d-flex align-items-center",badgeLabel:(a,t)=>{let r=()=>t==null?void 0:t().itemContext,n=()=>t==null?void 0:t().directives;var l=Z(),p=J(l),h=c(p),d=y(p,2);const w=O(()=>({}));let j;A(d,(C,g)=>W(C,g),()=>"btn-close ms-1 wiki-btn-close"),A(d,(C,g)=>n().badgeCloseButtonDirective(C,g),r),L(()=>{S(p,"href",`${o}${r().item.pageid}`),_(h,r().item.title),j=K(d,j,{type:"button","aria-label":"Close",...u(w)})}),b(a,l)},itemLabel:(a,t)=>{let r=()=>t==null?void 0:t().itemContext.id,n=()=>t==null?void 0:t().itemContext.item;var l=$(),p=c(l),h=c(p),d=y(p,2),w=c(d);L(()=>{S(l,"for",""+r()),_(h,n().title),_(w,n().snippet)}),b(a,l)},$$slots:{badgeLabel:!0,itemLabel:!0}});var N=y(q,4);R(N,17,()=>u(k),z,(e,i)=>{var a=tt(),t=c(a);L(()=>{S(a,"href",`${o}${u(i).pageid}`),_(t,u(i).title)}),b(e,a)},e=>{var i=U("none");b(e,i)}),b(m,T),G()}export{_t as default};
