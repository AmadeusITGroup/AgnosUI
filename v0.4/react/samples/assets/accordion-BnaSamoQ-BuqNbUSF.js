import{f as V,g as q,d as s,w as W,s as F,h as z,n as L,e as E,r as P,j as w,k as $,l as M,o as h,p as G,q as J}from"./directive-3-8yr-ZK-C5h7Dwqe.js";import{c as K}from"./baseTransitions-DgRqyQuv.js";import{t as f,b as C,a as i}from"./writables-DoU_XYTX-8sqxFTfY.js";function Q(b,a,d){let u;return a.length==2?(d=d??a[0],u=a.find(c=>c!==d)):a.length>2&&(u=a[0]),u&&b.forEach(c=>{c.stores.id$()!==u&&c.stores.visible$()&&c.patch({visible:!1})}),b}function _(b,a){return b.find(d=>d.stores.id$()===a)}const r={closeOthers:!1,onItemShown:h,onItemHidden:h,className:"",itemDestroyOnHide:!0,itemAnimated:!0,itemTransition:async()=>{},itemHeadingTag:"",itemClassName:"",itemHeaderClassName:"",itemButtonClassName:"",itemBodyContainerClassName:"",itemBodyClassName:""},O={id:"",destroyOnHide:r.itemDestroyOnHide,disabled:!1,visible:!1,animated:r.itemAnimated,transition:r.itemTransition,onShown:h,onHidden:h,onVisibleChange:h,className:r.itemClassName,headerClassName:r.itemHeaderClassName,buttonClassName:r.itemButtonClassName,bodyContainerClassName:r.itemBodyContainerClassName,bodyClassName:r.itemBodyClassName,headingTag:r.itemHeadingTag},R=Object.keys(O);function se(){return{...r}}const U={closeOthers:f,onItemShown:C,onItemHidden:C,className:i,itemDestroyOnHide:f,itemAnimated:f,itemTransition:C,itemClassName:i,itemHeaderClassName:i,itemButtonClassName:i,itemBodyContainerClassName:i,itemBodyClassName:i,itemHeadingTag:i},X={id:i,destroyOnHide:f,disabled:f,visible:f,animated:f,transition:C,onShown:C,onHidden:C,onVisibleChange:C,className:i,headerClassName:i,buttonClassName:i,bodyContainerClassName:i,bodyClassName:i,headingTag:i};function Y(b){const[{bodyClassName$:a,buttonClassName$:d,bodyContainerClassName$:u,headerClassName$:c,animated$:v,transition$:S,destroyOnHide$:B,onShown$:N,onHidden$:y,onVisibleChange$:H,visible$:l,id$:n,disabled$:g,...D},T]=V(O,b,X),A=W(!1),e=s(()=>G()),t=s(()=>n()||e()),p=K({props:{transition:S,visible:l,onVisibleChange:H,animated:v,animatedOnInit:!1,initDone:A,onHidden:()=>{y()()},onShown:()=>{N()()}}}),k=s(()=>B()===!1||!p.stores.hidden$()),I=()=>{g()||l.update(x=>!x)},m=$(()=>({attributes:{id:s(()=>`${t()}-toggle`),"aria-expanded":s(()=>`${l()}`),"aria-disabled":s(()=>`${g()}`),"aria-controls":s(()=>`${t()}-body-container`),disabled:g},classNames:{collapsed:s(()=>!l())},events:{click:I}})),o=J(p.directives.directive),j=$(()=>({attributes:{id:s(()=>`${t()}-body-container`),class:u(),"aria-labelledby":s(()=>`${t()}-toggle`)}}));return{...F({visible$:l,id$:t,shouldBeInDOM$:k,disabled$:g,bodyClassName$:a,buttonClassName$:d,bodyContainerClassName$:u,headerClassName$:c,...D}),patch:T,actions:{click:I},api:{initDone:()=>{A.set(!0)},collapse:()=>{l.set(!1)},expand:()=>{l.set(!0)},toggle:()=>{l.update(x=>!x)}},directives:{toggleDirective:m,buttonDirective:w(m,$(()=>({attributes:{type:"button",class:d()}}))),headerDirective:$(()=>({attributes:{class:c()}})),bodyDirective:$(()=>({attributes:{class:a()}})),transitionDirective:o,bodyContainerAttrsDirective:j,bodyContainerDirective:w(o,j),itemDirective:h}}}function Z(b=Y,a=R,d=r,u=U){return c=>{const[v,S]=V(d,c,u),{closeOthers$:B,onItemShown$:N,onItemHidden$:y,className$:H}=v,l=Object.fromEntries(Object.entries(v).filter(e=>e[0].startsWith("item")).map(e=>[e[0].charAt(4).toLowerCase()+e[0].slice(5,-1),e[1]])),n=q(),g=s(()=>{const e=[];return n().forEach(t=>{t.stores.visible$()&&e.push(t.stores.id$())}),e}),D=W(g()[0]),T=s(()=>{B()&&(Q(n(),g(),D()),D.set(g()[0]))}),A=s(()=>{T()});return{...F({itemWidgets$:n,className$:H}),patch:S,actions:{},api:{expand:e=>{var t;(t=_(n(),e))==null||t.api.expand()},collapse:e=>{var t;(t=_(n(),e))==null||t.api.collapse()},toggle:e=>{var t;(t=_(n(),e))==null||t.api.toggle()},expandAll:()=>{n().forEach(e=>e.api.expand())},collapseAll:()=>{n().forEach(e=>e.api.collapse())},registerItem:e=>{const t=a,p=z(t,L(t,e==null?void 0:e.config),l),[{onHidden$:k,onShown$:I}]=V({onHidden:O.onHidden,onShown:O.onShown},{config:p,props:e==null?void 0:e.props}),m=b({config:p,props:{...e==null?void 0:e.props,onHidden:E(P(()=>{var o;y()(m.stores.id$()),(o=k())==null||o()}),o=>{y.set(o)}),onShown:E(P(()=>{var o;N()(m.stores.id$()),(o=I())==null||o()}),o=>{N.set(o)})}});return m.directives.itemDirective=w(()=>({destroy:n.register(m)}),$(()=>({attributes:{class:m.stores.className$,id:m.stores.id$}}))),m}},directives:{accordionDirective:w(M(A),$(()=>({attributes:{class:H()},classNames:{"au-accordion":!0}})))}}}}const ae=Z();export{ae as a,Y as c,Z as f,se as g};
